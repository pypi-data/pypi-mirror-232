import{S as $e,i as Ee,s as ke,E as be,k as T,a as Q,y as B,l as V,m as S,c as W,z as O,h as m,F as Kt,G as oe,b as N,a0 as v,A as H,H as Ae,L as Le,g as p,d as $,B as R,N as Te,C as ht,o as li,Q as Ve,q as Z,r as G,n as D,u as fe,e as ue,v as te,f as le,M as Ge,w as Re,W as Vt,X as Nt,D as ni,I as ii,J as si,K as ri,Z as ge,_ as pe,$ as Ce,a1 as x,Y as Wi,p as ct,a7 as ye,a8 as Be,O as we,ab as Me,T as We,U as Ze,V as ai,R as bt,af as Zi,a4 as He,a2 as Mt,ag as Gi,P as Ki,a3 as vt,a9 as It,x as ot,a6 as Jt,ad as Ji}from"../chunks/index.8706e7a3.js";import{g as Ct}from"../chunks/navigation.4db9efdd.js";import{O as Xi,a as at,P as xi}from"../chunks/Page.96f4a095.js";import{W as es,R as ts,h as Ie,U as Xe,V as Ye,b as _t,X as oi,Y as ls,c as Oe,d as xe,Z as ns,_ as fi,$ as is,a0 as De,a1 as zt,a2 as Ue,a3 as ui,t as tt,C as lt,S as ci,a4 as Ft,a5 as ss,a6 as qe,a7 as Pt,a8 as rs,O as di,a9 as as,B as mi,aa as hi,n as Xt,a as At,ab as wt,ac as _i,ad as ut,ae as os,af as dt,ag as xt,ah as nt,ai as fs,aj as gi,ak as us,al as cs,am as ds,an as Bt,ao as ms,ap as hs,aq as Dt,ar as pt,as as _s,at as gs,au as pi,av as bi,aw as vi,i as ps,ax as bs,ay as vs,az as ws,F as ks,aA as st,aB as wi,aC as $s,aD as ki,aE as Es,aF as Ss,aG as rt,aH as Ht,aI as $i,aJ as kt,aK as Tt,aL as Ei,aM as Si,j as ys,aN as Rt,aO as $t,aP as Is,aQ as ft,K as Ds,A as Lt,aR as Ts,aS as Vs,aT as Ns,M as Ot,G as qt,H as jt,I as Ms,J as Cs,aU as Ut,aV as yi,z as Ii,aW as Di,aX as zs,g as Fs,aY as Ps,aZ as As,a_ as Bs,a$ as Hs,b0 as Rs,b1 as Ls,b2 as Os,b3 as qs,b4 as js,b5 as Us,b6 as Ys}from"../chunks/Commands.f0234014.js";import{w as Qs}from"../chunks/index.8b48d14e.js";import{C as Ws,b as Ti,I as el,a as Zs,T as Gs,E as Ks,S as Js}from"../chunks/ConceptView.d569468d.js";import{g as Vi,s as Et,C as Xs,f as xs}from"../chunks/notificationsStore.2895bc3e.js";import{c as er,E as Ni,S as Mi,T as Ci}from"../chunks/StringSpanHighlight.c4bbf166.js";import{L as tr,a as lr,b as nr,c as ir,C as zi}from"../chunks/ComboBox.ba51bec9.js";import{M as Yt,S as sr}from"../chunks/Settings.0bec2cac.js";import{g as Qt}from"../chunks/settingsStore.7a558b1a.js";import{I as rr}from"../chunks/ItemMetadata.f98c26ec.js";function tl(i,e,l){const t=i.slice();return t[39]=e[l],t[41]=l,t}const ar=i=>({item:i[0]&8,index:i[0]&8}),ll=i=>({item:i[39],index:i[41]});function nl(i){let e,l;return{c(){e=T("label"),l=Z(i[10]),this.h()},l(t){e=V(t,"LABEL",{for:!0});var n=S(e);l=G(n,i[10]),n.forEach(m),this.h()},h(){D(e,"for",i[19]),oe(e,"bx--label",!0),oe(e,"bx--label--disabled",i[9]),oe(e,"bx--visually-hidden",i[17])},m(t,n){N(t,e,n),v(e,l)},p(t,n){n[0]&1024&&fe(l,t[10]),n[0]&524288&&D(e,"for",t[19]),n[0]&512&&oe(e,"bx--label--disabled",t[9]),n[0]&131072&&oe(e,"bx--visually-hidden",t[17])},d(t){t&&m(e)}}}function il(i){let e,l;return e=new es({props:{class:"bx--list-box__invalid-icon"}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function sl(i){let e,l;return e=new ts({props:{class:"bx--list-box__invalid-icon bx--list-box__invalid-icon--warning"}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function or(i){let e;return{c(){e=Z(i[16])},l(l){e=G(l,i[16])},m(l,t){N(l,e,t)},p(l,t){t[0]&65536&&fe(e,l[16])},d(l){l&&m(e)}}}function fr(i){let e=i[4](i[22])+"",l;return{c(){l=Z(e)},l(t){l=G(t,e)},m(t,n){N(t,l,n)},p(t,n){n[0]&4194320&&e!==(e=t[4](t[22])+"")&&fe(l,e)},d(t){t&&m(l)}}}function rl(i){let e,l;return e=new nr({props:{"aria-labelledby":i[19],id:i[19],$$slots:{default:[dr]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p(t,n){const o={};n[0]&524288&&(o["aria-labelledby"]=t[19]),n[0]&524288&&(o.id=t[19]),n[0]&2097181|n[1]&64&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function ur(i){let e=i[4](i[39])+"",l;return{c(){l=Z(e)},l(t){l=G(t,e)},m(t,n){N(t,l,n)},p(t,n){n[0]&24&&e!==(e=t[4](t[39])+"")&&fe(l,e)},d(t){t&&m(l)}}}function cr(i){let e,l;const t=i[29].default,n=ni(t,i,i[37],ll),o=n||ur(i);return{c(){o&&o.c(),e=Q()},l(s){o&&o.l(s),e=W(s)},m(s,r){o&&o.m(s,r),N(s,e,r),l=!0},p(s,r){n?n.p&&(!l||r[0]&8|r[1]&64)&&ii(n,t,s,s[37],l?ri(t,s[37],r,ar):si(s[37]),ll):o&&o.p&&(!l||r[0]&24)&&o.p(s,l?r:[-1,-1])},i(s){l||(p(o,s),l=!0)},o(s){$(o,s),l=!1},d(s){o&&o.d(s),s&&m(e)}}}function al(i,e){let l,t,n;function o(...r){return e[34](e[39],...r)}function s(){return e[35](e[39],e[41])}return t=new ir({props:{id:e[39].id,active:e[0]===e[39].id,highlighted:e[21]===e[41],disabled:e[39].disabled,$$slots:{default:[cr]},$$scope:{ctx:e}}}),t.$on("click",o),t.$on("mouseenter",s),{key:i,first:null,c(){l=ue(),B(t.$$.fragment),this.h()},l(r){l=ue(),O(t.$$.fragment,r),this.h()},h(){this.first=l},m(r,a){N(r,l,a),H(t,r,a),n=!0},p(r,a){e=r;const f={};a[0]&8&&(f.id=e[39].id),a[0]&9&&(f.active=e[0]===e[39].id),a[0]&2097160&&(f.highlighted=e[21]===e[41]),a[0]&8&&(f.disabled=e[39].disabled),a[0]&24|a[1]&64&&(f.$$scope={dirty:a,ctx:e}),t.$set(f)},i(r){n||(p(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){r&&m(l),R(t,r)}}}function dr(i){let e=[],l=new Map,t,n,o=i[3];const s=r=>r[39].id;for(let r=0;r<o.length;r+=1){let a=tl(i,o,r),f=s(a);l.set(f,e[r]=al(f,a))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();t=ue()},l(r){for(let a=0;a<e.length;a+=1)e[a].l(r);t=ue()},m(r,a){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(r,a);N(r,t,a),n=!0},p(r,a){a[0]&35651613|a[1]&64&&(o=r[3],te(),e=Vt(e,a,s,1,r,o,l,t.parentNode,Nt,al,t,tl),le())},i(r){if(!n){for(let a=0;a<o.length;a+=1)p(e[a]);n=!0}},o(r){for(let a=0;a<e.length;a+=1)$(e[a]);n=!1},d(r){for(let a=0;a<e.length;a+=1)e[a].d(r);r&&m(t)}}}function mr(i){let e,l,t,n,o,s,r,a,f,u,_,c=i[11]&&il(),d=!i[11]&&i[13]&&sl();function h(g,E){return g[22]?fr:or}let b=h(i),w=b(i);s=new lr({props:{translateWithId:i[18],open:i[1]}}),s.$on("click",i[30]);let k=i[1]&&rl(i);return{c(){c&&c.c(),e=Q(),d&&d.c(),l=Q(),t=T("button"),n=T("span"),w.c(),o=Q(),B(s.$$.fragment),r=Q(),k&&k.c(),a=ue(),this.h()},l(g){c&&c.l(g),e=W(g),d&&d.l(g),l=W(g),t=V(g,"BUTTON",{type:!0,tabindex:!0,"aria-expanded":!0,translatewithid:!0,id:!0});var E=S(t);n=V(E,"SPAN",{});var y=S(n);w.l(y),y.forEach(m),o=W(E),O(s.$$.fragment,E),E.forEach(m),r=W(g),k&&k.l(g),a=ue(),this.h()},h(){oe(n,"bx--list-box__label",!0),D(t,"type","button"),D(t,"tabindex","0"),D(t,"aria-expanded",i[1]),t.disabled=i[9],D(t,"translatewithid",i[18]),D(t,"id",i[19]),oe(t,"bx--list-box__field",!0)},m(g,E){c&&c.m(g,E),N(g,e,E),d&&d.m(g,E),N(g,l,E),N(g,t,E),v(t,n),w.m(n,null),v(t,o),H(s,t,null),i[31](t),N(g,r,E),k&&k.m(g,E),N(g,a,E),f=!0,u||(_=[Ae(t,"keydown",i[32]),Ae(t,"keyup",i[33])],u=!0)},p(g,E){g[11]?c?E[0]&2048&&p(c,1):(c=il(),c.c(),p(c,1),c.m(e.parentNode,e)):c&&(te(),$(c,1,1,()=>{c=null}),le()),!g[11]&&g[13]?d?E[0]&10240&&p(d,1):(d=sl(),d.c(),p(d,1),d.m(l.parentNode,l)):d&&(te(),$(d,1,1,()=>{d=null}),le()),b===(b=h(g))&&w?w.p(g,E):(w.d(1),w=b(g),w&&(w.c(),w.m(n,null)));const y={};E[0]&262144&&(y.translateWithId=g[18]),E[0]&2&&(y.open=g[1]),s.$set(y),(!f||E[0]&2)&&D(t,"aria-expanded",g[1]),(!f||E[0]&512)&&(t.disabled=g[9]),(!f||E[0]&262144)&&D(t,"translatewithid",g[18]),(!f||E[0]&524288)&&D(t,"id",g[19]),g[1]?k?(k.p(g,E),E[0]&2&&p(k,1)):(k=rl(g),k.c(),p(k,1),k.m(a.parentNode,a)):k&&(te(),$(k,1,1,()=>{k=null}),le())},i(g){f||(p(c),p(d),p(s.$$.fragment,g),p(k),f=!0)},o(g){$(c),$(d),$(s.$$.fragment,g),$(k),f=!1},d(g){c&&c.d(g),g&&m(e),d&&d.d(g),g&&m(l),g&&m(t),w.d(),R(s),i[31](null),g&&m(r),k&&k.d(g),g&&m(a),u=!1,Ge(_)}}}function ol(i){let e,l;return{c(){e=T("div"),l=Z(i[15]),this.h()},l(t){e=V(t,"DIV",{});var n=S(e);l=G(n,i[15]),n.forEach(m),this.h()},h(){oe(e,"bx--form__helper-text",!0),oe(e,"bx--form__helper-text--disabled",i[9])},m(t,n){N(t,e,n),v(e,l)},p(t,n){n[0]&32768&&fe(l,t[15]),n[0]&512&&oe(e,"bx--form__helper-text--disabled",t[9])},d(t){t&&m(e)}}}function hr(i){let e,l,t,n,o,s,r,a=i[10]&&nl(i);t=new tr({props:{role:void 0,type:i[5],size:i[7],name:i[20],"aria-label":i[28]["aria-label"],class:`bx--dropdown 
      `+(i[6]==="top"&&"bx--list-box--up")+` 
      `+(i[11]&&"bx--dropdown--invalid")+` 
      `+(!i[11]&&i[13]&&"bx--dropdown--warning")+` 
      `+(i[1]&&"bx--dropdown--open")+`
      `+(i[7]==="sm"&&"bx--dropdown--sm")+`
      `+(i[7]==="xl"&&"bx--dropdown--xl")+`
      `+(i[23]&&"bx--dropdown--inline")+`
      `+(i[9]&&"bx--dropdown--disabled")+`
      `+(i[8]&&"bx--dropdown--light"),disabled:i[9],open:i[1],invalid:i[11],invalidText:i[12],light:i[8],warn:i[13],warnText:i[14],$$slots:{default:[mr]},$$scope:{ctx:i}}}),t.$on("click",i[36]);let f=!i[23]&&!i[11]&&!i[13]&&i[15]&&ol(i),u=[i[27]],_={};for(let c=0;c<u.length;c+=1)_=be(_,u[c]);return{c(){e=T("div"),a&&a.c(),l=Q(),B(t.$$.fragment),n=Q(),f&&f.c(),this.h()},l(c){e=V(c,"DIV",{});var d=S(e);a&&a.l(d),l=W(d),O(t.$$.fragment,d),n=W(d),f&&f.l(d),d.forEach(m),this.h()},h(){Kt(e,_),oe(e,"bx--dropdown__wrapper",!0),oe(e,"bx--list-box__wrapper",!0),oe(e,"bx--dropdown__wrapper--inline",i[23]),oe(e,"bx--list-box__wrapper--inline",i[23]),oe(e,"bx--dropdown__wrapper--inline--invalid",i[23]&&i[11])},m(c,d){N(c,e,d),a&&a.m(e,null),v(e,l),H(t,e,null),v(e,n),f&&f.m(e,null),o=!0,s||(r=Ae(window,"click",i[26]),s=!0)},p(c,d){c[10]?a?a.p(c,d):(a=nl(c),a.c(),a.m(e,l)):a&&(a.d(1),a=null);const h={};d[0]&32&&(h.type=c[5]),d[0]&128&&(h.size=c[7]),d[0]&1048576&&(h.name=c[20]),d[0]&268435456&&(h["aria-label"]=c[28]["aria-label"]),d[0]&8399810&&(h.class=`bx--dropdown 
      `+(c[6]==="top"&&"bx--list-box--up")+` 
      `+(c[11]&&"bx--dropdown--invalid")+` 
      `+(!c[11]&&c[13]&&"bx--dropdown--warning")+` 
      `+(c[1]&&"bx--dropdown--open")+`
      `+(c[7]==="sm"&&"bx--dropdown--sm")+`
      `+(c[7]==="xl"&&"bx--dropdown--xl")+`
      `+(c[23]&&"bx--dropdown--inline")+`
      `+(c[9]&&"bx--dropdown--disabled")+`
      `+(c[8]&&"bx--dropdown--light")),d[0]&512&&(h.disabled=c[9]),d[0]&2&&(h.open=c[1]),d[0]&2048&&(h.invalid=c[11]),d[0]&4096&&(h.invalidText=c[12]),d[0]&256&&(h.light=c[8]),d[0]&8192&&(h.warn=c[13]),d[0]&16384&&(h.warnText=c[14]),d[0]&7154207|d[1]&64&&(h.$$scope={dirty:d,ctx:c}),t.$set(h),!c[23]&&!c[11]&&!c[13]&&c[15]?f?f.p(c,d):(f=ol(c),f.c(),f.m(e,null)):f&&(f.d(1),f=null),Kt(e,_=Le(u,[d[0]&134217728&&c[27]])),oe(e,"bx--dropdown__wrapper",!0),oe(e,"bx--list-box__wrapper",!0),oe(e,"bx--dropdown__wrapper--inline",c[23]),oe(e,"bx--list-box__wrapper--inline",c[23]),oe(e,"bx--dropdown__wrapper--inline--invalid",c[23]&&c[11])},i(c){o||(p(t.$$.fragment,c),o=!0)},o(c){$(t.$$.fragment,c),o=!1},d(c){c&&m(e),a&&a.d(),R(t),f&&f.d(),s=!1,r()}}}function _r(i,e,l){let t,n;const o=["items","itemToString","selectedId","type","direction","size","open","light","disabled","titleText","invalid","invalidText","warn","warnText","helperText","label","hideLabel","translateWithId","id","name","ref"];let s=Te(e,o),{$$slots:r={},$$scope:a}=e,{items:f=[]}=e,{itemToString:u=J=>J.text||J.id}=e,{selectedId:_}=e,{type:c="default"}=e,{direction:d="bottom"}=e,{size:h=void 0}=e,{open:b=!1}=e,{light:w=!1}=e,{disabled:k=!1}=e,{titleText:g=""}=e,{invalid:E=!1}=e,{invalidText:y=""}=e,{warn:M=!1}=e,{warnText:C=""}=e,{helperText:I=""}=e,{label:F=void 0}=e,{hideLabel:X=!1}=e,{translateWithId:U=void 0}=e,{id:j="ccs-"+Math.random().toString(36)}=e,{name:A=void 0}=e,{ref:L=null}=e;const ie=ht();let q=-1;function Y(J){let P=q+J;if(f.length===0)return;P<0?P=f.length-1:P>=f.length&&(P=0);let ne=f[P].disabled;for(;ne;)P=P+J,P<0?P=f.length-1:P>=f.length&&(P=0),ne=f[P].disabled;l(21,q=P)}const K=()=>{ie("select",{selectedId:_,selectedItem:f.find(J=>J.id===_)})},z=({target:J})=>{b&&L&&!L.contains(J)&&l(1,b=!1)};li(()=>(parent&&parent.addEventListener("click",z),()=>{parent&&parent.removeEventListener("click",z)}));const ee=J=>{J.stopPropagation(),!k&&l(1,b=!b)};function se(J){Re[J?"unshift":"push"](()=>{L=J,l(2,L)})}const re=J=>{const{key:P}=J;["Enter","ArrowDown","ArrowUp"].includes(P)&&J.preventDefault(),P==="Enter"?(l(1,b=!b),q>-1&&f[q].id!==_&&(l(0,_=f[q].id),K(),l(1,b=!1))):P==="Tab"?(l(1,b=!1),L.blur()):P==="ArrowDown"?(b||l(1,b=!0),Y(1)):P==="ArrowUp"?(b||l(1,b=!0),Y(-1)):P==="Escape"&&l(1,b=!1)},ce=J=>{const{key:P}=J;if([" "].includes(P))J.preventDefault();else return;l(1,b=!b),q>-1&&f[q].id!==_&&(l(0,_=f[q].id),K(),l(1,b=!1))},ae=(J,P)=>{if(J.disabled){P.stopPropagation();return}l(0,_=J.id),K(),L.focus()},de=(J,P)=>{J.disabled||l(21,q=P)},ve=({target:J})=>{k||l(1,b=L.contains(J)?!b:!1)};return i.$$set=J=>{l(28,e=be(be({},e),Ve(J))),l(27,s=Te(e,o)),"items"in J&&l(3,f=J.items),"itemToString"in J&&l(4,u=J.itemToString),"selectedId"in J&&l(0,_=J.selectedId),"type"in J&&l(5,c=J.type),"direction"in J&&l(6,d=J.direction),"size"in J&&l(7,h=J.size),"open"in J&&l(1,b=J.open),"light"in J&&l(8,w=J.light),"disabled"in J&&l(9,k=J.disabled),"titleText"in J&&l(10,g=J.titleText),"invalid"in J&&l(11,E=J.invalid),"invalidText"in J&&l(12,y=J.invalidText),"warn"in J&&l(13,M=J.warn),"warnText"in J&&l(14,C=J.warnText),"helperText"in J&&l(15,I=J.helperText),"label"in J&&l(16,F=J.label),"hideLabel"in J&&l(17,X=J.hideLabel),"translateWithId"in J&&l(18,U=J.translateWithId),"id"in J&&l(19,j=J.id),"name"in J&&l(20,A=J.name),"ref"in J&&l(2,L=J.ref),"$$scope"in J&&l(37,a=J.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&32&&l(23,t=c==="inline"),i.$$.dirty[0]&9&&l(22,n=f.find(J=>J.id===_)),i.$$.dirty[0]&2&&(b||l(21,q=-1))},e=Ve(e),[_,b,L,f,u,c,d,h,w,k,g,E,y,M,C,I,F,X,U,j,A,q,n,t,Y,K,z,s,e,r,ee,se,re,ce,ae,de,ve,a]}class gr extends $e{constructor(e){super(),Ee(this,e,_r,hr,ke,{items:3,itemToString:4,selectedId:0,type:5,direction:6,size:7,open:1,light:8,disabled:9,titleText:10,invalid:11,invalidText:12,warn:13,warnText:14,helperText:15,label:16,hideLabel:17,translateWithId:18,id:19,name:20,ref:2},null,[-1,-1])}}const pr=gr;function fl(i){let e,l;return{c(){e=ge("title"),l=Z(i[1])},l(t){e=pe(t,"title",{});var n=S(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function br(i){let e,l,t=i[1]&&fl(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let s=0;s<n.length;s+=1)o=be(o,n[s]);return{c(){e=ge("svg"),t&&t.c(),l=ge("path"),this.h()},l(s){e=pe(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=S(e);t&&t.l(r),l=pe(r,"path",{d:!0}),S(l).forEach(m),r.forEach(m),this.h()},h(){D(l,"d","M17 15L17 8 15 8 15 15 8 15 8 17 15 17 15 24 17 24 17 17 24 17 24 15z"),Ce(e,o)},m(s,r){N(s,e,r),t&&t.m(e,null),v(e,l)},p(s,[r]){s[1]?t?t.p(s,r):(t=fl(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ce(e,o=Le(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:s[0]},r&1&&{height:s[0]},r&4&&s[2],r&8&&s[3]]))},i:x,o:x,d(s){s&&m(e),t&&t.d()}}}function vr(i,e,l){let t,n;const o=["size","title"];let s=Te(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=be(be({},e),Ve(f))),l(3,s=Te(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[r,a,n,s,t]}class Wt extends $e{constructor(e){super(),Ee(this,e,vr,br,ke,{size:0,title:1})}}function ul(i){let e,l;return{c(){e=ge("title"),l=Z(i[1])},l(t){e=pe(t,"title",{});var n=S(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function wr(i){let e,l,t=i[1]&&ul(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let s=0;s<n.length;s+=1)o=be(o,n[s]);return{c(){e=ge("svg"),t&&t.c(),l=ge("path"),this.h()},l(s){e=pe(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=S(e);t&&t.l(r),l=pe(r,"path",{d:!0}),S(l).forEach(m),r.forEach(m),this.h()},h(){D(l,"d","M26 24v4H6V24H4v4H4a2 2 0 002 2H26a2 2 0 002-2h0V24zM26 14L24.59 12.59 17 20.17 17 2 15 2 15 20.17 7.41 12.59 6 14 16 24 26 14z"),Ce(e,o)},m(s,r){N(s,e,r),t&&t.m(e,null),v(e,l)},p(s,[r]){s[1]?t?t.p(s,r):(t=ul(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ce(e,o=Le(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:s[0]},r&1&&{height:s[0]},r&4&&s[2],r&8&&s[3]]))},i:x,o:x,d(s){s&&m(e),t&&t.d()}}}function kr(i,e,l){let t,n;const o=["size","title"];let s=Te(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=be(be({},e),Ve(f))),l(3,s=Te(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[r,a,n,s,t]}class $r extends $e{constructor(e){super(),Ee(this,e,kr,wr,ke,{size:0,title:1})}}function cl(i){let e,l;return{c(){e=ge("title"),l=Z(i[1])},l(t){e=pe(t,"title",{});var n=S(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function Er(i){let e,l,t=i[1]&&cl(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let s=0;s<n.length;s+=1)o=be(o,n[s]);return{c(){e=ge("svg"),t&&t.c(),l=ge("path"),this.h()},l(s){e=pe(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=S(e);t&&t.l(r),l=pe(r,"path",{d:!0}),S(l).forEach(m),r.forEach(m),this.h()},h(){D(l,"d","M16 7a3 3 0 113-3A3.0033 3.0033 0 0116 7zm0-4a1 1 0 101 1A1.001 1.001 0 0016 3zM11 30a3 3 0 113-3A3.0033 3.0033 0 0111 30zm0-4a1 1 0 101 1A1.001 1.001 0 0011 26zM7 11a3 3 0 113-3A3.0033 3.0033 0 017 11zM7 7A1 1 0 108 8 1.001 1.001 0 007 7zM21 30a3 3 0 113-3A3.0033 3.0033 0 0121 30zm0-4a1 1 0 101 1A1.001 1.001 0 0021 26zM25 11a3 3 0 113-3A3.0033 3.0033 0 0125 11zm0-4a1 1 0 101 1A1.001 1.001 0 0025 7zM4 21a3 3 0 113-3A3.0033 3.0033 0 014 21zm0-4a1 1 0 101 1A1.001 1.001 0 004 17zM28 21a3 3 0 113-3A3.0033 3.0033 0 0128 21zm0-4a1 1 0 101 1A1.001 1.001 0 0028 17zM16 22a6 6 0 116-6A6.0069 6.0069 0 0116 22zm0-10a4 4 0 104 4A4.0045 4.0045 0 0016 12z"),Ce(e,o)},m(s,r){N(s,e,r),t&&t.m(e,null),v(e,l)},p(s,[r]){s[1]?t?t.p(s,r):(t=cl(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ce(e,o=Le(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:s[0]},r&1&&{height:s[0]},r&4&&s[2],r&8&&s[3]]))},i:x,o:x,d(s){s&&m(e),t&&t.d()}}}function Sr(i,e,l){let t,n;const o=["size","title"];let s=Te(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=be(be({},e),Ve(f))),l(3,s=Te(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[r,a,n,s,t]}class yr extends $e{constructor(e){super(),Ee(this,e,Sr,Er,ke,{size:0,title:1})}}function dl(i){let e,l;return{c(){e=ge("title"),l=Z(i[1])},l(t){e=pe(t,"title",{});var n=S(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function Ir(i){let e,l,t,n,o,s,r,a,f,u=i[1]&&dl(i),_=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],c={};for(let d=0;d<_.length;d+=1)c=be(c,_[d]);return{c(){e=ge("svg"),u&&u.c(),l=ge("path"),t=ge("circle"),n=ge("path"),o=ge("circle"),s=ge("path"),r=ge("circle"),a=ge("path"),f=ge("path"),this.h()},l(d){e=pe(d,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var h=S(e);u&&u.l(h),l=pe(h,"path",{d:!0}),S(l).forEach(m),t=pe(h,"circle",{cx:!0,cy:!0,r:!0}),S(t).forEach(m),n=pe(h,"path",{d:!0}),S(n).forEach(m),o=pe(h,"circle",{cx:!0,cy:!0,r:!0}),S(o).forEach(m),s=pe(h,"path",{d:!0}),S(s).forEach(m),r=pe(h,"circle",{cx:!0,cy:!0,r:!0}),S(r).forEach(m),a=pe(h,"path",{d:!0}),S(a).forEach(m),f=pe(h,"path",{d:!0}),S(f).forEach(m),h.forEach(m),this.h()},h(){D(l,"d","M20 25H27V27H20zM22 29H25V31H22zM27 23h-2c0-1.1.4-2 1.2-2.8l.5-.5c.8-.8 1.3-2 1.3-3.2 0-2.5-2-4.5-4.5-4.5S19 14 19 16.5c0 1.2.5 2.3 1.3 3.2l.5.5C21.6 21 22 21.9 22 23h-2c0-.5-.2-1-.6-1.4l-.5-.5c-1.2-1.2-1.9-2.9-1.9-4.6 0-3.6 2.9-6.5 6.5-6.5s6.5 2.9 6.5 6.5c0 1.7-.7 3.4-1.9 4.6l-.5.5C27.2 22 27 22.5 27 23zM6 22H14V24H6z"),D(t,"cx","12"),D(t,"cy","19"),D(t,"r","1"),D(n,"d","M6 18H9V20H6zM6 14H13V16H6zM10 10H17V12H10z"),D(o,"cx","7"),D(o,"cy","11"),D(o,"r","1"),D(s,"d","M16 6H20V8H16z"),D(r,"cx","13"),D(r,"cy","7"),D(r,"r","1"),D(a,"d","M6 6H10V8H6z"),D(f,"d","M18,28H4V4l18,0v4h2V4c0-1.1-0.9-2-2-2H4C2.9,2,2,2.9,2,4v24c0,1.1,0.9,2,2,2h14V28z"),Ce(e,c)},m(d,h){N(d,e,h),u&&u.m(e,null),v(e,l),v(e,t),v(e,n),v(e,o),v(e,s),v(e,r),v(e,a),v(e,f)},p(d,[h]){d[1]?u?u.p(d,h):(u=dl(d),u.c(),u.m(e,l)):u&&(u.d(1),u=null),Ce(e,c=Le(_,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},h&1&&{width:d[0]},h&1&&{height:d[0]},h&4&&d[2],h&8&&d[3]]))},i:x,o:x,d(d){d&&m(e),u&&u.d()}}}function Dr(i,e,l){let t,n;const o=["size","title"];let s=Te(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=be(be({},e),Ve(f))),l(3,s=Te(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[r,a,n,s,t]}class Tr extends $e{constructor(e){super(),Ee(this,e,Dr,Ir,ke,{size:0,title:1})}}function ml(i){let e,l;return{c(){e=ge("title"),l=Z(i[1])},l(t){e=pe(t,"title",{});var n=S(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function Vr(i){let e,l,t,n=i[1]&&ml(i),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],s={};for(let r=0;r<o.length;r+=1)s=be(s,o[r]);return{c(){e=ge("svg"),n&&n.c(),l=ge("path"),t=ge("path"),this.h()},l(r){e=pe(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var a=S(e);n&&n.l(a),l=pe(a,"path",{d:!0}),S(l).forEach(m),t=pe(a,"path",{d:!0}),S(t).forEach(m),a.forEach(m),this.h()},h(){D(l,"d","M17 22L17 14 13 14 13 16 15 16 15 22 12 22 12 24 20 24 20 22 17 22zM16 8a1.5 1.5 0 101.5 1.5A1.5 1.5 0 0016 8z"),D(t,"d","M16,30A14,14,0,1,1,30,16,14,14,0,0,1,16,30ZM16,4A12,12,0,1,0,28,16,12,12,0,0,0,16,4Z"),Ce(e,s)},m(r,a){N(r,e,a),n&&n.m(e,null),v(e,l),v(e,t)},p(r,[a]){r[1]?n?n.p(r,a):(n=ml(r),n.c(),n.m(e,l)):n&&(n.d(1),n=null),Ce(e,s=Le(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},a&1&&{width:r[0]},a&1&&{height:r[0]},a&4&&r[2],a&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),n&&n.d()}}}function Nr(i,e,l){let t,n;const o=["size","title"];let s=Te(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=be(be({},e),Ve(f))),l(3,s=Te(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[r,a,n,s,t]}class mt extends $e{constructor(e){super(),Ee(this,e,Nr,Vr,ke,{size:0,title:1})}}function hl(i){let e,l;return{c(){e=ge("title"),l=Z(i[1])},l(t){e=pe(t,"title",{});var n=S(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function Mr(i){let e,l,t=i[1]&&hl(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let s=0;s<n.length;s+=1)o=be(o,n[s]);return{c(){e=ge("svg"),t&&t.c(),l=ge("path"),this.h()},l(s){e=pe(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=S(e);t&&t.l(r),l=pe(r,"path",{d:!0}),S(l).forEach(m),r.forEach(m),this.h()},h(){D(l,"d","M29,27.5859l-7.5521-7.5521a11.0177,11.0177,0,1,0-1.4141,1.4141L27.5859,29ZM4,13a9,9,0,1,1,9,9A9.01,9.01,0,0,1,4,13Z"),Ce(e,o)},m(s,r){N(s,e,r),t&&t.m(e,null),v(e,l)},p(s,[r]){s[1]?t?t.p(s,r):(t=hl(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ce(e,o=Le(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:s[0]},r&1&&{height:s[0]},r&4&&s[2],r&8&&s[3]]))},i:x,o:x,d(s){s&&m(e),t&&t.d()}}}function Cr(i,e,l){let t,n;const o=["size","title"];let s=Te(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=be(be({},e),Ve(f))),l(3,s=Te(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[r,a,n,s,t]}class Fi extends $e{constructor(e){super(),Ee(this,e,Cr,Mr,ke,{size:0,title:1})}}function _l(i){let e,l;return{c(){e=ge("title"),l=Z(i[1])},l(t){e=pe(t,"title",{});var n=S(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function zr(i){let e,l,t=i[1]&&_l(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let s=0;s<n.length;s+=1)o=be(o,n[s]);return{c(){e=ge("svg"),t&&t.c(),l=ge("path"),this.h()},l(s){e=pe(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=S(e);t&&t.l(r),l=pe(r,"path",{d:!0}),S(l).forEach(m),r.forEach(m),this.h()},h(){D(l,"d","M30 6L26 6 26 2 24 2 24 6 20 6 20 8 24 8 24 12 26 12 26 8 30 8 30 6zM24 28.5859l-5.9751-5.9751a9.0234 9.0234 0 10-1.4141 1.4141L22.5859 30zM4 17a7 7 0 117 7A7.0078 7.0078 0 014 17z"),Ce(e,o)},m(s,r){N(s,e,r),t&&t.m(e,null),v(e,l)},p(s,[r]){s[1]?t?t.p(s,r):(t=_l(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ce(e,o=Le(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:s[0]},r&1&&{height:s[0]},r&4&&s[2],r&8&&s[3]]))},i:x,o:x,d(s){s&&m(e),t&&t.d()}}}function Fr(i,e,l){let t,n;const o=["size","title"];let s=Te(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=be(be({},e),Ve(f))),l(3,s=Te(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[r,a,n,s,t]}class Pi extends $e{constructor(e){super(),Ee(this,e,Fr,zr,ke,{size:0,title:1})}}function gl(i){let e,l;return{c(){e=ge("title"),l=Z(i[1])},l(t){e=pe(t,"title",{});var n=S(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function Pr(i){let e,l,t=i[1]&&gl(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let s=0;s<n.length;s+=1)o=be(o,n[s]);return{c(){e=ge("svg"),t&&t.c(),l=ge("path"),this.h()},l(s){e=pe(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=S(e);t&&t.l(r),l=pe(r,"path",{d:!0}),S(l).forEach(m),r.forEach(m),this.h()},h(){D(l,"d","M18 22L19.414 20.586 23 24.172 23 4 25 4 25 24.172 28.586 20.586 30 22 24 28 18 22zM2 18H16V20H2zM6 12H16V14H6zM10 6H16V8H10z"),Ce(e,o)},m(s,r){N(s,e,r),t&&t.m(e,null),v(e,l)},p(s,[r]){s[1]?t?t.p(s,r):(t=gl(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ce(e,o=Le(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:s[0]},r&1&&{height:s[0]},r&4&&s[2],r&8&&s[3]]))},i:x,o:x,d(s){s&&m(e),t&&t.d()}}}function Ar(i,e,l){let t,n;const o=["size","title"];let s=Te(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=be(be({},e),Ve(f))),l(3,s=Te(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[r,a,n,s,t]}class Ai extends $e{constructor(e){super(),Ee(this,e,Ar,Pr,ke,{size:0,title:1})}}function pl(i){let e,l;return{c(){e=ge("title"),l=Z(i[1])},l(t){e=pe(t,"title",{});var n=S(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function Br(i){let e,l,t=i[1]&&pl(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let s=0;s<n.length;s+=1)o=be(o,n[s]);return{c(){e=ge("svg"),t&&t.c(),l=ge("path"),this.h()},l(s){e=pe(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=S(e);t&&t.l(r),l=pe(r,"path",{d:!0}),S(l).forEach(m),r.forEach(m),this.h()},h(){D(l,"d","M18 22L19.414 20.586 23 24.172 23 4 25 4 25 24.172 28.586 20.586 30 22 24 28 18 22zM2 6H16V8H2zM6 12H16V14H6zM10 18H16V20H10z"),Ce(e,o)},m(s,r){N(s,e,r),t&&t.m(e,null),v(e,l)},p(s,[r]){s[1]?t?t.p(s,r):(t=pl(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ce(e,o=Le(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:s[0]},r&1&&{height:s[0]},r&4&&s[2],r&8&&s[3]]))},i:x,o:x,d(s){s&&m(e),t&&t.d()}}}function Hr(i,e,l){let t,n;const o=["size","title"];let s=Te(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=be(be({},e),Ve(f))),l(3,s=Te(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[r,a,n,s,t]}class Bi extends $e{constructor(e){super(),Ee(this,e,Hr,Br,ke,{size:0,title:1})}}function bl(i){let e,l;return{c(){e=ge("title"),l=Z(i[1])},l(t){e=pe(t,"title",{});var n=S(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function Rr(i){let e,l,t=i[1]&&bl(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let s=0;s<n.length;s+=1)o=be(o,n[s]);return{c(){e=ge("svg"),t&&t.c(),l=ge("path"),this.h()},l(s){e=pe(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=S(e);t&&t.l(r),l=pe(r,"path",{d:!0}),S(l).forEach(m),r.forEach(m),this.h()},h(){D(l,"d","M30 19.415L28.586 18 25 21.587 21.414 18 20 19.415 23.586 23 20 26.586 21.414 28 25 24.414 28.586 28 30 26.586 26.414 23 30 19.415zM10 18H16V20H10zM2 6H16V8H2zM6 12H16V14H6z"),Ce(e,o)},m(s,r){N(s,e,r),t&&t.m(e,null),v(e,l)},p(s,[r]){s[1]?t?t.p(s,r):(t=bl(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ce(e,o=Le(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:s[0]},r&1&&{height:s[0]},r&4&&s[2],r&8&&s[3]]))},i:x,o:x,d(s){s&&m(e),t&&t.d()}}}function Lr(i,e,l){let t,n;const o=["size","title"];let s=Te(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=be(be({},e),Ve(f))),l(3,s=Te(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[r,a,n,s,t]}class Or extends $e{constructor(e){super(),Ee(this,e,Lr,Rr,ke,{size:0,title:1})}}function vl(i){let e,l;return{c(){e=ge("title"),l=Z(i[1])},l(t){e=pe(t,"title",{});var n=S(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function qr(i){let e,l,t=i[1]&&vl(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let s=0;s<n.length;s+=1)o=be(o,n[s]);return{c(){e=ge("svg"),t&&t.c(),l=ge("path"),this.h()},l(s){e=pe(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=S(e);t&&t.l(r),l=pe(r,"path",{d:!0}),S(l).forEach(m),r.forEach(m),this.h()},h(){D(l,"d","M4 6H22V8H4zM4 12H22V14H4zM4 18H22V20H4zM4 24H22V26H4zM26 6H28V8H26zM26 12H28V14H26zM26 18H28V20H26zM26 24H28V26H26z"),Ce(e,o)},m(s,r){N(s,e,r),t&&t.m(e,null),v(e,l)},p(s,[r]){s[1]?t?t.p(s,r):(t=vl(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ce(e,o=Le(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:s[0]},r&1&&{height:s[0]},r&4&&s[2],r&8&&s[3]]))},i:x,o:x,d(s){s&&m(e),t&&t.d()}}}function jr(i,e,l){let t,n;const o=["size","title"];let s=Te(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=be(be({},e),Ve(f))),l(3,s=Te(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[r,a,n,s,t]}class Ur extends $e{constructor(e){super(),Ee(this,e,jr,qr,ke,{size:0,title:1})}}function wl(i){let e,l;return{c(){e=ge("title"),l=Z(i[1])},l(t){e=pe(t,"title",{});var n=S(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function Yr(i){let e,l,t,n=i[1]&&wl(i),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],s={};for(let r=0;r<o.length;r+=1)s=be(s,o[r]);return{c(){e=ge("svg"),n&&n.c(),l=ge("path"),t=ge("path"),this.h()},l(r){e=pe(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var a=S(e);n&&n.l(a),l=pe(a,"path",{d:!0}),S(l).forEach(m),t=pe(a,"path",{d:!0}),S(t).forEach(m),a.forEach(m),this.h()},h(){D(l,"d","M10,14a4,4,0,1,1,4-4A4.0045,4.0045,0,0,1,10,14Zm0-6a2,2,0,1,0,1.998,2.0044A2.002,2.002,0,0,0,10,8Z"),D(t,"d","M16.6436,29.4145,2.5858,15.3555A2,2,0,0,1,2,13.9414V4A2,2,0,0,1,4,2h9.9413a2,2,0,0,1,1.4142.5858L29.4144,16.6436a2.0005,2.0005,0,0,1,0,2.8285l-9.9424,9.9425a2.0008,2.0008,0,0,1-2.8285,0ZM4,4v9.9417L18.0578,28,28,18.0579,13.9416,4Z"),Ce(e,s)},m(r,a){N(r,e,a),n&&n.m(e,null),v(e,l),v(e,t)},p(r,[a]){r[1]?n?n.p(r,a):(n=wl(r),n.c(),n.m(e,l)):n&&(n.d(1),n=null),Ce(e,s=Le(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},a&1&&{width:r[0]},a&1&&{height:r[0]},a&4&&r[2],a&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),n&&n.d()}}}function Qr(i,e,l){let t,n;const o=["size","title"];let s=Te(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=be(be({},e),Ve(f))),l(3,s=Te(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[r,a,n,s,t]}class Wr extends $e{constructor(e){super(),Ee(this,e,Qr,Yr,ke,{size:0,title:1})}}function kl(i){let e;return{c(){e=T("div"),this.h()},l(l){e=V(l,"DIV",{id:!0,style:!0}),S(e).forEach(m),this.h()},h(){D(e,"id","svelte-infinite-scroll"),ct(e,"width","0")},m(l,t){N(l,e,t),i[11](e)},p:x,d(l){l&&m(e),i[11](null)}}}function Zr(i){let e,l=!i[1]&&!i[0]&&kl(i);return{c(){l&&l.c(),e=ue()},l(t){l&&l.l(t),e=ue()},m(t,n){l&&l.m(t,n),N(t,e,n)},p(t,[n]){!t[1]&&!t[0]?l?l.p(t,n):(l=kl(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:x,o:x,d(t){l&&l.d(t),t&&m(e)}}}function Gr(i,e,l){let{threshold:t=0}=e,{horizontal:n=!1}=e,{elementScroll:o=null}=e,{hasMore:s=!0}=e,{reverse:r=!1}=e,{window:a=!1}=e;const f=ht();let u=!1,_,c,d,h;const b=g=>{if(!s)return;const E=g.target;w(E,r,n)<=t?(!u&&s&&(f("loadMore"),l(8,c=E.scrollHeight),l(9,d=E.scrollTop)),l(7,u=!0)):l(7,u=!1)},w=(g,E,y)=>{const M=g.documentElement?g.documentElement:g;return E?y?M.scrollLeft:M.scrollTop:y?M.scrollWidth-M.clientWidth-M.scrollLeft:M.scrollHeight-M.clientHeight-M.scrollTop};li(()=>{a?l(10,h=document):o?l(10,h=o):l(10,h=_.parentNode)}),Wi(()=>{h&&(h.removeEventListener("scroll",b),h.removeEventListener("resize",b))});function k(g){Re[g?"unshift":"push"](()=>{_=g,l(2,_)})}return i.$$set=g=>{"threshold"in g&&l(3,t=g.threshold),"horizontal"in g&&l(4,n=g.horizontal),"elementScroll"in g&&l(0,o=g.elementScroll),"hasMore"in g&&l(5,s=g.hasMore),"reverse"in g&&l(6,r=g.reverse),"window"in g&&l(1,a=g.window)},i.$$.update=()=>{i.$$.dirty&1088&&h&&(r&&l(10,h.scrollTop=h.scrollHeight,h),h.addEventListener("scroll",b),h.addEventListener("resize",b)),i.$$.dirty&1984&&u&&r&&l(10,h.scrollTop=h.scrollHeight-c+d,h)},[o,a,_,t,n,s,r,u,c,d,h,k]}class Kr extends $e{constructor(e){super(),Ee(this,e,Gr,Zr,ke,{threshold:3,horizontal:4,elementScroll:0,hasMore:5,reverse:6,window:1})}}function $l(i){const e=i[6].find(function(...t){return i[23](i[30],...t)});i[31]=e}function El(i){let e,l;return{c(){e=T("span"),l=Z(i[0]),this.h()},l(t){e=V(t,"SPAN",{class:!0});var n=S(e);l=G(n,i[0]),n.forEach(m),this.h()},h(){D(e,"class","mr-1")},m(t,n){N(t,e,n),v(e,l)},p(t,n){n[0]&1&&fe(l,t[0])},d(t){t&&m(e)}}}function Jr(i){let e,l,t;function n(s){i[25](s)}let o={size:"sm",open:i[4],items:i[6],shouldFilterItem:sa,placeholder:"Select or add a new label",$$slots:{default:[na,({item:s})=>({30:s}),({item:s})=>[s?1073741824:0]]},$$scope:{ctx:i}};return i[2]!==void 0&&(o.value=i[2]),e=new zi({props:o}),i[24](e),Re.push(()=>We(e,"value",n)),e.$on("select",i[13]),{c(){B(e.$$.fragment)},l(s){O(e.$$.fragment,s)},m(s,r){H(e,s,r),t=!0},p(s,r){const a={};r[0]&16&&(a.open=s[4]),r[0]&64&&(a.items=s[6]),r[0]&1073741892|r[1]&2&&(a.$$scope={dirty:r,ctx:s}),!l&&r[0]&4&&(l=!0,a.value=s[2],Ze(()=>l=!1)),e.$set(a)},i(s){t||(p(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){i[24](null),R(e,s)}}}function Xr(i){let e,l;return e=new Oe({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function xr(i){let e,l=i[31].text+"",t;return{c(){e=T("div"),t=Z(l),this.h()},l(n){e=V(n,"DIV",{class:!0});var o=S(e);t=G(o,l),o.forEach(m),this.h()},h(){D(e,"class","flex justify-between gap-x-8")},m(n,o){N(n,e,o),v(e,t)},p(n,o){o[0]&1073741888&&l!==(l=n[31].text+"")&&fe(t,l)},i:x,o:x,d(n){n&&m(e)}}}function ea(i){let e,l,t,n,o,s,r;return l=new Wr({props:{$$slots:{default:[la]},$$scope:{ctx:i}}}),{c(){e=T("div"),B(l.$$.fragment),t=Q(),n=T("div"),o=Z("New label: "),s=Z(i[2]),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);O(l.$$.fragment,f),t=W(f),n=V(f,"DIV",{class:!0});var u=S(n);o=G(u,"New label: "),s=G(u,i[2]),u.forEach(m),f.forEach(m),this.h()},h(){D(n,"class","ml-2"),D(e,"class","new-concept flex flex-row items-center justify-items-center")},m(a,f){N(a,e,f),H(l,e,null),v(e,t),v(e,n),v(n,o),v(n,s),r=!0},p(a,f){const u={};f[1]&2&&(u.$$scope={dirty:f,ctx:a}),l.$set(u),(!r||f[0]&4)&&fe(s,a[2])},i(a){r||(p(l.$$.fragment,a),r=!0)},o(a){$(l.$$.fragment,a),r=!1},d(a){a&&m(e),R(l)}}}function ta(i){let e;return{c(){e=T("div")},l(l){e=V(l,"DIV",{}),S(e).forEach(m)},m(l,t){N(l,e,t)},p:x,i:x,o:x,d(l){l&&m(e)}}}function la(i){let e,l;return e=new Wt({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function na(i){$l(i);let e,l,t,n;const o=[ta,ea,xr],s=[];function r(a,f){return a[31]==null?0:a[31].id==="new-label"?1:2}return e=r(i),l=s[e]=o[e](i),{c(){l.c(),t=ue()},l(a){l.l(a),t=ue()},m(a,f){s[e].m(a,f),N(a,t,f),n=!0},p(a,f){$l(a);let u=e;e=r(a),e===u?s[e].p(a,f):(te(),$(s[u],1,1,()=>{s[u]=null}),le(),l=s[e],l?l.p(a,f):(l=s[e]=o[e](a),l.c()),p(l,1),l.m(t.parentNode,t))},i(a){n||(p(l),n=!0)},o(a){$(l),n=!1},d(a){s[e].d(a),a&&m(t)}}}function ia(i){let e,l,t,n,o,s,r,a,f,u,_,c,d,h,b;t=new Wt({});let w=i[0]!=null&&El(i);const k=[Xr,Jr],g=[];function E(y,M){return y[8]==null||y[8].isLoading?0:1}return u=E(i),_=g[u]=k[u](i),{c(){e=T("div"),l=T("button"),B(t.$$.fragment),n=Q(),w&&w.c(),a=Q(),f=T("div"),_.c(),this.h()},l(y){e=V(y,"DIV",{class:!0});var M=S(e);l=V(M,"BUTTON",{class:!0});var C=S(l);O(t.$$.fragment,C),n=W(C),w&&w.l(C),C.forEach(m),M.forEach(m),a=W(y),f=V(y,"DIV",{class:!0});var I=S(f);_.l(I),I.forEach(m),this.h()},h(){l.disabled=o=!i[7],D(l,"class","flex items-center gap-x-2 border border-gray-300"),oe(l,"opacity-30",!i[7]),oe(l,"hidden",i[4]),D(e,"class","w-full"),D(f,"class","absolute left-0 top-0 w-60"),oe(f,"hidden",!i[4])},m(y,M){N(y,e,M),v(e,l),H(t,l,null),v(l,n),w&&w.m(l,null),N(y,a,M),N(y,f,M),g[u].m(f,null),d=!0,h||(b=[Ae(l,"click",i[12]),ye(s=Ie.call(null,l,{text:i[1]})),ye(r=Ie.call(null,e,{text:i[7]?"":"You do not have access to add labels."})),ye(c=er.call(null,f,i[26]))],h=!0)},p(y,M){y[0]!=null?w?w.p(y,M):(w=El(y),w.c(),w.m(l,null)):w&&(w.d(1),w=null),(!d||M[0]&128&&o!==(o=!y[7]))&&(l.disabled=o),s&&Be(s.update)&&M[0]&2&&s.update.call(null,{text:y[1]}),(!d||M[0]&128)&&oe(l,"opacity-30",!y[7]),(!d||M[0]&16)&&oe(l,"hidden",y[4]),r&&Be(r.update)&&M[0]&128&&r.update.call(null,{text:y[7]?"":"You do not have access to add labels."});let C=u;u=E(y),u===C?g[u].p(y,M):(te(),$(g[C],1,1,()=>{g[C]=null}),le(),_=g[u],_?_.p(y,M):(_=g[u]=k[u](y),_.c()),p(_,1),_.m(f,null)),c&&Be(c.update)&&M[0]&16&&c.update.call(null,y[26]),(!d||M[0]&16)&&oe(f,"hidden",!y[4])},i(y){d||(p(t.$$.fragment,y),p(_),d=!0)},o(y){$(t.$$.fragment,y),$(_),d=!1},d(y){y&&m(e),R(t),w&&w.d(),y&&m(a),y&&m(f),g[u].d(),h=!1,Ge(b)}}}const sa=(i,e)=>i.text.toLowerCase().includes(e.toLowerCase())||i.id==="new-label";function ra(i,e,l){let t,n,o,s,r,a,f,u,_,c,d,h=x,b=()=>(h(),h=Me(c,ee=>l(8,d=ee)),c),w,k,g;i.$$.on_destroy.push(()=>h());let{addLabelsQuery:E}=e,{hideLabels:y=void 0}=e,{buttonText:M=void 0}=e,{helperText:C="Add label"}=e,I,F="";const X=Vi(),U=Xe();we(i,U,ee=>l(20,w=ee));const j=Ye();we(i,j,ee=>l(22,g=ee));const A=_t();we(i,A,ee=>l(21,k=ee));function L(){l(4,t=!0),requestAnimationFrame(()=>{I.$set({open:!0})})}const ie=ee=>{const se=ee.detail.selectedItem,re={...E,label_name:se.text};d.mutate([n,o,re],{onSuccess:ce=>{const ae=re.row_ids!=null?`Document id: ${re.row_ids}`:`${ce.toLocaleString()} rows labeled`;X.addNotification({kind:"success",title:`Added label "${re.label_name}"`,message:ae}),l(4,t=!1)}}),I.clear()},q=(ee,se)=>se.id===ee.id;function Y(ee){Re[ee?"unshift":"push"](()=>{I=ee,l(3,I)})}function K(ee){F=ee,l(2,F)}const z=()=>l(4,t=!1);return i.$$set=ee=>{"addLabelsQuery"in ee&&l(14,E=ee.addLabelsQuery),"hideLabels"in ee&&l(15,y=ee.hideLabels),"buttonText"in ee&&l(0,M=ee.buttonText),"helperText"in ee&&l(1,C=ee.helperText)},i.$$.update=()=>{var ee;i.$$.dirty[0]&4194304&&(n=g.namespace),i.$$.dirty[0]&4194304&&(o=g.datasetName),i.$$.dirty[0]&2097152&&l(7,s=(ee=k.data)==null?void 0:ee.access.dataset.edit_labels),i.$$.dirty[0]&1048576&&l(18,r=w.schema&&oi(w.schema)),i.$$.dirty[0]&4&&l(19,a=/^[A-Za-z0-9_-]+$/.test(F)),i.$$.dirty[0]&524292&&l(17,f={id:"new-label",text:F,disabled:!a}),i.$$.dirty[0]&294912&&l(16,u=(r==null?void 0:r.filter(se=>!(y||[]).includes(se)).map((se,re)=>({id:`label_${re}`,text:se})))||[]),i.$$.dirty[0]&196612&&l(6,_=[...F!=""?[f]:[],...u]),i.$$.dirty[0]&1048576&&b(l(5,c=w.schema!=null?ls(w.schema):null))},l(4,t=!1),[M,C,F,I,t,c,_,s,d,U,j,A,L,ie,E,y,u,f,r,a,w,k,g,q,Y,K,z]}class Hi extends $e{constructor(e){super(),Ee(this,e,ra,ia,ke,{addLabelsQuery:14,hideLabels:15,buttonText:0,helperText:1},null,[-1,-1])}}function aa(i){let e,l,t,n,o,s,r,a,f,u;t=new ns({});const _=i[7].default,c=ni(_,i,i[10],null);return{c(){e=T("div"),l=T("button"),B(t.$$.fragment),o=Q(),s=T("span"),c&&c.c(),this.h()},l(d){e=V(d,"DIV",{class:!0});var h=S(e);l=V(h,"BUTTON",{class:!0});var b=S(l);O(t.$$.fragment,b),b.forEach(m),o=W(h),s=V(h,"SPAN",{class:!0});var w=S(s);c&&c.l(w),w.forEach(m),h.forEach(m),this.h()},h(){l.disabled=i[1],D(l,"class","p-0 opacity-50 hover:opacity-100"),D(s,"class","truncate"),D(e,"class","removable-tag flex items-center gap-x-1")},m(d,h){N(d,e,h),v(e,l),H(t,l,null),v(e,o),v(e,s),c&&c.m(s,null),a=!0,f||(u=[ye(n=Ie.call(null,l,{text:i[1]?i[2]:i[3]})),Ae(l,"click",Zi(i[8])),ye(r=Ie.call(null,s,{text:i[4]}))],f=!0)},p(d,h){(!a||h&2)&&(l.disabled=d[1]),n&&Be(n.update)&&h&14&&n.update.call(null,{text:d[1]?d[2]:d[3]}),c&&c.p&&(!a||h&1024)&&ii(c,_,d,d[10],a?ri(_,d[10],h,null):si(d[10]),null),r&&Be(r.update)&&h&16&&r.update.call(null,{text:d[4]})},i(d){a||(p(t.$$.fragment,d),p(c,d),a=!0)},o(d){$(t.$$.fragment,d),$(c,d),a=!1},d(d){d&&m(e),R(t),c&&c.d(d),f=!1,Ge(u)}}}function oa(i){let e,l;const t=[{type:i[0]},i[6]];let n={$$slots:{default:[aa]},$$scope:{ctx:i}};for(let o=0;o<t.length;o+=1)n=be(n,t[o]);return e=new xe({props:n}),e.$on("click",i[9]),{c(){B(e.$$.fragment)},l(o){O(e.$$.fragment,o)},m(o,s){H(e,o,s),l=!0},p(o,[s]){const r=s&65?Le(t,[s&1&&{type:o[0]},s&64&&ai(o[6])]):{};s&1054&&(r.$$scope={dirty:s,ctx:o}),e.$set(r)},i(o){l||(p(e.$$.fragment,o),l=!0)},o(o){$(e.$$.fragment,o),l=!1},d(o){R(e,o)}}}function fa(i,e,l){const t=["type","removeDisabled","removeDisabledHelperText","closeHelperText","clickHelperText"];let n=Te(e,t),{$$slots:o={},$$scope:s}=e;const r=ht();let{type:a}=e,{removeDisabled:f=!1}=e,{removeDisabledHelperText:u=void 0}=e,{closeHelperText:_=void 0}=e,{clickHelperText:c=void 0}=e;const d=()=>r("remove");function h(b){bt.call(this,i,b)}return i.$$set=b=>{e=be(be({},e),Ve(b)),l(6,n=Te(e,t)),"type"in b&&l(0,a=b.type),"removeDisabled"in b&&l(1,f=b.removeDisabled),"removeDisabledHelperText"in b&&l(2,u=b.removeDisabledHelperText),"closeHelperText"in b&&l(3,_=b.closeHelperText),"clickHelperText"in b&&l(4,c=b.clickHelperText),"$$scope"in b&&l(10,s=b.$$scope)},[a,f,u,_,c,r,n,o,d,h,s]}class St extends $e{constructor(e){super(),Ee(this,e,fa,oa,ke,{type:0,removeDisabled:1,removeDisabledHelperText:2,closeHelperText:3,clickHelperText:4})}}function ua(i){let e,l=(i[2]?"":i[5])+"",t,n,o=i[0][i[1].op]+"",s,r,a;return{c(){e=T("span"),t=Z(l),n=Q(),s=Z(o),r=Q(),a=Z(i[4]),this.h()},l(f){e=V(f,"SPAN",{class:!0});var u=S(e);t=G(u,l),u.forEach(m),n=W(f),s=G(f,o),r=W(f),a=G(f,i[4]),this.h()},h(){D(e,"class","font-mono")},m(f,u){N(f,e,u),v(e,t),N(f,n,u),N(f,s,u),N(f,r,u),N(f,a,u)},p(f,u){u&36&&l!==(l=(f[2]?"":f[5])+"")&&fe(t,l),u&2&&o!==(o=f[0][f[1].op]+"")&&fe(s,o),u&16&&fe(a,f[4])},d(f){f&&m(e),f&&m(n),f&&m(s),f&&m(r),f&&m(a)}}}function ca(i){let e,l,t=(i[2]?"":i[5])+"",n;return{c(){e=Z("has "),l=T("span"),n=Z(t),this.h()},l(o){e=G(o,"has "),l=V(o,"SPAN",{class:!0});var s=S(l);n=G(s,t),s.forEach(m),this.h()},h(){D(l,"class","font-mono")},m(o,s){N(o,e,s),N(o,l,s),v(l,n)},p(o,s){s&36&&t!==(t=(o[2]?"":o[5])+"")&&fe(n,t)},d(o){o&&m(e),o&&m(l)}}}function da(i){let e,l;return{c(){e=Z("is labeled "),l=Z(i[7])},l(t){e=G(t,"is labeled "),l=G(t,i[7])},m(t,n){N(t,e,n),N(t,l,n)},p(t,n){n&128&&fe(l,t[7])},d(t){t&&m(e),t&&m(l)}}}function ma(i){let e;function l(o,s){return o[7]!=null?da:o[1].op==="exists"?ca:ua}let t=l(i),n=t(i);return{c(){n.c(),e=ue()},l(o){n.l(o),e=ue()},m(o,s){n.m(o,s),N(o,e,s)},p(o,s){t===(t=l(o))&&n?n.p(o,s):(n.d(1),n=t(o),n&&(n.c(),n.m(e.parentNode,e)))},d(o){n.d(o),o&&m(e)}}}function ha(i){let e,l,t,n,o,s;return l=new St({props:{interactive:!0,type:"magenta",$$slots:{default:[ma]},$$scope:{ctx:i}}}),l.$on("click",i[12]),l.$on("remove",i[13]),{c(){e=T("div"),B(l.$$.fragment),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);O(l.$$.fragment,a),a.forEach(m),this.h()},h(){D(e,"class","filter-pill items-center")},m(r,a){N(r,e,a),H(l,e,null),n=!0,o||(s=ye(t=Ie.call(null,e,{text:i[6]})),o=!0)},p(r,[a]){const f={};a&16566&&(f.$$scope={dirty:a,ctx:r}),l.$set(f),t&&Be(t.update)&&a&64&&t.update.call(null,{text:r[6]})},i(r){n||(p(l.$$.fragment,r),n=!0)},o(r){$(l.$$.fragment,r),n=!1},d(r){r&&m(e),R(l),o=!1,s()}}}function _a(i,e,l){let t,n,o,s,r,a,f;const u={equals:"=",not_equal:"≠",less:"<",less_equal:"≤",greater:">",greater_equal:"≥",in:"in",exists:"exists"};let{filter:_}=e,{hidePath:c=!1}=e,{schema:d}=e;const h=Ye();we(i,h,k=>l(8,f=k));const b=()=>tt({command:lt.EditFilter,namespace:f.namespace,datasetName:f.datasetName,path:s}),w=()=>h.removeFilter(_);return i.$$set=k=>{"filter"in k&&l(1,_=k.filter),"hidePath"in k&&l(2,c=k.hidePath),"schema"in k&&l(10,d=k.schema)},i.$$.update=()=>{i.$$.dirty&1026&&l(11,t=fi(d,typeof _.path=="string"?[_.path]:_.path)),i.$$.dirty&2048&&l(7,n=t!=null?is(t):null),i.$$.dirty&2&&l(4,o=De(_.value||"false")),i.$$.dirty&2&&l(3,s=zt(_.path)),i.$$.dirty&26&&l(6,r=_.op==="exists"?`has ${Ue(s)}`:`${Ue(s)} ${u[_.op]} ${o}`),i.$$.dirty&8&&l(5,a=ui(s))},[u,_,c,s,o,a,r,n,f,h,d,t,b,w]}class Ri extends $e{constructor(e){super(),Ee(this,e,_a,ha,ke,{FILTER_SHORTHANDS:0,filter:1,hidePath:2,schema:10})}get FILTER_SHORTHANDS(){return this.$$.ctx[0]}}function Sl(i){let e,l=i[0].concept_namespace+"",t,n,o=i[0].concept_name+"",s;return{c(){e=T("div"),t=Z(l),n=Z(" / "),s=Z(o),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);t=G(a,l),n=G(a," / "),s=G(a,o),a.forEach(m),this.h()},h(){D(e,"class","mb-2 w-full text-center text-xs")},m(r,a){N(r,e,a),v(e,t),v(e,n),v(e,s)},p(r,a){a&1&&l!==(l=r[0].concept_namespace+"")&&fe(t,l),a&1&&o!==(o=r[0].concept_name+"")&&fe(s,o)},d(r){r&&m(e)}}}function ga(i){let e=Ue(i[0].path)+"",l,t,n=i[0].type+"",o;return{c(){l=Z(e),t=Z(": "),o=Z(n)},l(s){l=G(s,e),t=G(s,": "),o=G(s,n)},m(s,r){N(s,l,r),N(s,t,r),N(s,o,r)},p(s,r){r&1&&e!==(e=Ue(s[0].path)+"")&&fe(l,e),r&1&&n!==(n=s[0].type+"")&&fe(o,n)},d(s){s&&m(l),s&&m(t),s&&m(o)}}}function yl(i){let e,l,t;return l=new Ni({props:{embedding:i[0].embedding}}),{c(){e=T("div"),B(l.$$.fragment),this.h()},l(n){e=V(n,"DIV",{class:!0});var o=S(e);O(l.$$.fragment,o),o.forEach(m),this.h()},h(){D(e,"class","ml-2")},m(n,o){N(n,e,o),H(l,e,null),t=!0},p(n,o){const s={};o&1&&(s.embedding=n[0].embedding),l.$set(s)},i(n){t||(p(l.$$.fragment,n),t=!0)},o(n){$(l.$$.fragment,n),t=!1},d(n){n&&m(e),R(l)}}}function Il(i){let e,l;return{c(){e=T("div"),l=Z(i[2]),this.h()},l(t){e=V(t,"DIV",{class:!0});var n=S(e);l=G(n,i[2]),n.forEach(m),this.h()},h(){D(e,"class","mt-2 whitespace-pre-wrap text-left")},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&4&&fe(l,t[2])},d(t){t&&m(e)}}}function pa(i){let e,l,t,n,o,s,r,a,f=i[0].type==="concept"&&Sl(i);n=new xe({props:{type:i[1],$$slots:{default:[ga]},$$scope:{ctx:i}}});let u=(i[0].type==="semantic"||i[0].type==="concept")&&yl(i),_=i[2]&&Il(i);return{c(){f&&f.c(),e=Q(),l=T("div"),t=T("div"),B(n.$$.fragment),o=Q(),u&&u.c(),s=Q(),_&&_.c(),r=ue(),this.h()},l(c){f&&f.l(c),e=W(c),l=V(c,"DIV",{class:!0});var d=S(l);t=V(d,"DIV",{class:!0});var h=S(t);O(n.$$.fragment,h),h.forEach(m),o=W(d),u&&u.l(d),d.forEach(m),s=W(c),_&&_.l(c),r=ue(),this.h()},h(){D(t,"class","whitespace-nowrap"),D(l,"class","flex items-center justify-items-center")},m(c,d){f&&f.m(c,d),N(c,e,d),N(c,l,d),v(l,t),H(n,t,null),v(l,o),u&&u.m(l,null),N(c,s,d),_&&_.m(c,d),N(c,r,d),a=!0},p(c,[d]){c[0].type==="concept"?f?f.p(c,d):(f=Sl(c),f.c(),f.m(e.parentNode,e)):f&&(f.d(1),f=null);const h={};d&2&&(h.type=c[1]),d&9&&(h.$$scope={dirty:d,ctx:c}),n.$set(h),c[0].type==="semantic"||c[0].type==="concept"?u?(u.p(c,d),d&1&&p(u,1)):(u=yl(c),u.c(),p(u,1),u.m(l,null)):u&&(te(),$(u,1,1,()=>{u=null}),le()),c[2]?_?_.p(c,d):(_=Il(c),_.c(),_.m(r.parentNode,r)):_&&(_.d(1),_=null)},i(c){a||(p(n.$$.fragment,c),p(u),a=!0)},o(c){$(n.$$.fragment,c),$(u),a=!1},d(c){f&&f.d(c),c&&m(e),c&&m(l),R(n),u&&u.d(),c&&m(s),_&&_.d(c),c&&m(r)}}}function ba(i,e,l){let t,{search:n}=e,{tagType:o="outline"}=e;return i.$$set=s=>{"search"in s&&l(0,n=s.search),"tagType"in s&&l(1,o=s.tagType)},i.$$.update=()=>{i.$$.dirty&1&&l(2,t=n.type==="concept"?"":n.query)},[n,o,t]}class Dl extends $e{constructor(e){super(),Ee(this,e,ba,pa,ke,{search:0,tagType:1})}}function va(i){let e,l=Ue(i[0].path)+"",t,n,o,s;return{c(){e=T("span"),t=Z(l),n=Z(' has "'),o=Z(i[2]),s=Z('"'),this.h()},l(r){e=V(r,"SPAN",{class:!0});var a=S(e);t=G(a,l),a.forEach(m),n=G(r,' has "'),o=G(r,i[2]),s=G(r,'"'),this.h()},h(){D(e,"class","font-mono")},m(r,a){N(r,e,a),v(e,t),N(r,n,a),N(r,o,a),N(r,s,a)},p(r,a){a&1&&l!==(l=Ue(r[0].path)+"")&&fe(t,l),a&4&&fe(o,r[2])},d(r){r&&m(e),r&&m(n),r&&m(o),r&&m(s)}}}function wa(i){let e,l,t,n,o,s;return l=new St({props:{title:"query",interactive:!0,type:i[1],$$slots:{default:[va]},$$scope:{ctx:i}}}),l.$on("click",i[6]),l.$on("remove",i[7]),{c(){e=T("div"),B(l.$$.fragment),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);O(l.$$.fragment,a),a.forEach(m),this.h()},h(){D(e,"class","search-pill items-center text-left")},m(r,a){N(r,e,a),H(l,e,null),n=!0,o||(s=ye(t=Ie.call(null,e,{component:Dl,props:{search:i[0],tagType:i[1]}})),o=!0)},p(r,[a]){const f={};a&2&&(f.type=r[1]),a&517&&(f.$$scope={dirty:a,ctx:r}),l.$set(f),t&&Be(t.update)&&a&3&&t.update.call(null,{component:Dl,props:{search:r[0],tagType:r[1]}})},i(r){n||(p(l.$$.fragment,r),n=!0)},o(r){$(l.$$.fragment,r),n=!1},d(r){r&&m(e),R(l),o=!1,s()}}}function ka(i,e,l){let t,n,o,{search:s}=e;const r={keyword:"outline",semantic:"teal",concept:"green"},a=Ye(),f=Xe();we(i,f,c=>l(3,o=c));function u(c){bt.call(this,i,c)}const _=()=>{var c;return a.removeSearch(s,((c=o.selectRowsSchema)==null?void 0:c.data)||null)};return i.$$set=c=>{"search"in c&&l(0,s=c.search)},i.$$.update=()=>{i.$$.dirty&1&&l(2,t=s.type==="concept"?s.concept_name:s.query),i.$$.dirty&1&&l(1,n=s.type!=null?r[s.type]:"outline")},[s,n,t,o,a,f,u,_]}class Li extends $e{constructor(e){super(),Ee(this,e,ka,wa,ke,{search:0})}}function Tl(i,e,l){const t=i.slice();return t[27]=e[l][0],t[28]=e[l][1],t}function Vl(i,e,l){const t=i.slice();return t[31]=e[l],t}function Nl(i,e,l){const t=i.slice();return t[34]=e[l],t}function Ml(i,e,l){const t=i.slice();return t[37]=e[l],t}function Cl(i,e,l){const t=i.slice();return t[40]=e[l],t}function zl(i){let e,l,t,n=i[15],o=[];for(let a=0;a<n.length;a+=1)o[a]=Al(Ml(i,n,a));const s=a=>$(o[a],1,1,()=>{o[a]=null});let r=i[10]!=null&&i[10].length>0&&Bl(i);return{c(){e=T("div");for(let a=0;a<o.length;a+=1)o[a].c();l=Q(),r&&r.c(),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);for(let u=0;u<o.length;u+=1)o[u].l(f);l=W(f),r&&r.l(f),f.forEach(m),this.h()},h(){D(e,"class","flex w-full flex-row gap-x-4")},m(a,f){N(a,e,f);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);v(e,l),r&&r.m(e,null),t=!0},p(a,f){if(f[0]&229384){n=a[15];let u;for(u=0;u<n.length;u+=1){const _=Ml(a,n,u);o[u]?(o[u].p(_,f),p(o[u],1)):(o[u]=Al(_),o[u].c(),p(o[u],1),o[u].m(e,l))}for(te(),u=n.length;u<o.length;u+=1)s(u);le()}a[10]!=null&&a[10].length>0?r?(r.p(a,f),f[0]&1024&&p(r,1)):(r=Bl(a),r.c(),p(r,1),r.m(e,null)):r&&(te(),$(r,1,1,()=>{r=null}),le())},i(a){if(!t){for(let f=0;f<n.length;f+=1)p(o[f]);p(r),t=!0}},o(a){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)$(o[f]);$(r),t=!1},d(a){a&&m(e),He(o,a),r&&r.d()}}}function Fl(i){let e,l,t=i[16][i[37]]+"",n,o,s,r,a,f=i[3][i[37]],u=[];for(let c=0;c<f.length;c+=1)u[c]=Pl(Cl(i,f,c));const _=c=>$(u[c],1,1,()=>{u[c]=null});return{c(){e=T("div"),l=T("div"),n=Z(t),o=Q(),s=T("div");for(let c=0;c<u.length;c+=1)u[c].c();r=Q(),this.h()},l(c){e=V(c,"DIV",{class:!0});var d=S(e);l=V(d,"DIV",{class:!0});var h=S(l);n=G(h,t),h.forEach(m),o=W(d),s=V(d,"DIV",{class:!0});var b=S(s);for(let w=0;w<u.length;w+=1)u[w].l(b);b.forEach(m),r=W(d),d.forEach(m),this.h()},h(){D(l,"class","text-xs font-light"),D(s,"class","flex flex-row gap-x-1"),D(e,"class","filter-group rounded bg-slate-50 px-2 py-1 shadow-sm svelte-16ln9ke")},m(c,d){N(c,e,d),v(e,l),v(l,n),v(e,o),v(e,s);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(s,null);v(e,r),a=!0},p(c,d){if(d[0]&163848){f=c[3][c[37]];let h;for(h=0;h<f.length;h+=1){const b=Cl(c,f,h);u[h]?(u[h].p(b,d),p(u[h],1)):(u[h]=Pl(b),u[h].c(),p(u[h],1),u[h].m(s,null))}for(te(),h=f.length;h<u.length;h+=1)_(h);le()}},i(c){if(!a){for(let d=0;d<f.length;d+=1)p(u[d]);a=!0}},o(c){u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)$(u[d]);a=!1},d(c){c&&m(e),He(u,c)}}}function Pl(i){let e,l;function t(){return i[24](i[40])}return e=new Li({props:{search:i[40]}}),e.$on("click",t),{c(){B(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,o){H(e,n,o),l=!0},p(n,o){i=n;const s={};o[0]&8&&(s.search=i[40]),e.$set(s)},i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){$(e.$$.fragment,n),l=!1},d(n){R(e,n)}}}function Al(i){let e,l,t=i[3][i[37]]&&Fl(i);return{c(){t&&t.c(),e=ue()},l(n){t&&t.l(n),e=ue()},m(n,o){t&&t.m(n,o),N(n,e,o),l=!0},p(n,o){n[3][n[37]]?t?(t.p(n,o),o[0]&8&&p(t,1)):(t=Fl(n),t.c(),p(t,1),t.m(e.parentNode,e)):t&&(te(),$(t,1,1,()=>{t=null}),le())},i(n){l||(p(t),l=!0)},o(n){$(t),l=!1},d(n){t&&t.d(n),n&&m(e)}}}function Bl(i){let e,l,t,n,o,s,r=i[10],a=[];for(let u=0;u<r.length;u+=1)a[u]=Hl(Nl(i,r,u));const f=u=>$(a[u],1,1,()=>{a[u]=null});return{c(){e=T("div"),l=T("div"),t=Z("Filters"),n=Q(),o=T("div");for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){e=V(u,"DIV",{class:!0});var _=S(e);l=V(_,"DIV",{class:!0});var c=S(l);t=G(c,"Filters"),c.forEach(m),n=W(_),o=V(_,"DIV",{class:!0});var d=S(o);for(let h=0;h<a.length;h+=1)a[h].l(d);d.forEach(m),_.forEach(m),this.h()},h(){D(l,"class","text-xs font-light"),D(o,"class","flex flex-row gap-x-1"),D(e,"class","filter-group rounded bg-slate-50 px-2 py-1 shadow-sm svelte-16ln9ke")},m(u,_){N(u,e,_),v(e,l),v(l,t),v(e,n),v(e,o);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(o,null);s=!0},p(u,_){if(_[0]&1088){r=u[10];let c;for(c=0;c<r.length;c+=1){const d=Nl(u,r,c);a[c]?(a[c].p(d,_),p(a[c],1)):(a[c]=Hl(d),a[c].c(),p(a[c],1),a[c].m(o,null))}for(te(),c=r.length;c<a.length;c+=1)f(c);le()}},i(u){if(!s){for(let _=0;_<r.length;_+=1)p(a[_]);s=!0}},o(u){a=a.filter(Boolean);for(let _=0;_<a.length;_+=1)$(a[_]);s=!1},d(u){u&&m(e),He(a,u)}}}function Hl(i){let e,l;return e=new Ri({props:{schema:i[6],filter:i[34]}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p(t,n){const o={};n[0]&64&&(o.schema=t[6]),n[0]&1024&&(o.filter=t[34]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Rl(i){let e;function l(o,s){return o[0]==o[1].dataset_manifest.num_items?Ea:$a}let t=l(i),n=t(i);return{c(){n.c(),e=ue()},l(o){n.l(o),e=ue()},m(o,s){n.m(o,s),N(o,e,s)},p(o,s){t===(t=l(o))&&n?n.p(o,s):(n.d(1),n=t(o),n&&(n.c(),n.m(e.parentNode,e)))},d(o){n.d(o),o&&m(e)}}}function $a(i){let e=De(i[0])+"",l,t,n=De(i[1].dataset_manifest.num_items)+"",o,s;return{c(){l=Z(e),t=Z(" of "),o=Z(n),s=Z(" rows")},l(r){l=G(r,e),t=G(r," of "),o=G(r,n),s=G(r," rows")},m(r,a){N(r,l,a),N(r,t,a),N(r,o,a),N(r,s,a)},p(r,a){a[0]&1&&e!==(e=De(r[0])+"")&&fe(l,e),a[0]&2&&n!==(n=De(r[1].dataset_manifest.num_items)+"")&&fe(o,n)},d(r){r&&m(l),r&&m(t),r&&m(o),r&&m(s)}}}function Ea(i){let e=De(i[0])+"",l,t;return{c(){l=Z(e),t=Z(" rows")},l(n){l=G(n,e),t=G(n," rows")},m(n,o){N(n,l,o),N(n,t,o)},p(n,o){o[0]&1&&e!==(e=De(n[0])+"")&&fe(l,e)},d(n){n&&m(l),n&&m(t)}}}function Ll(i){let e,l;return e=new At({props:{value:i[31].path!=null?qe(i[31].path):void 0,text:i[31].text,disabled:i[31].disabled}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p(t,n){const o={};n[0]&512&&(o.value=t[31].path!=null?qe(t[31].path):void 0),n[0]&512&&(o.text=t[31].text),n[0]&512&&(o.disabled=t[31].disabled),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Sa(i){let e,l,t=i[28],n=[];for(let s=0;s<t.length;s+=1)n[s]=Ll(Vl(i,t,s));const o=s=>$(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=Q()},l(s){for(let r=0;r<n.length;r+=1)n[r].l(s);e=W(s)},m(s,r){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(s,r);N(s,e,r),l=!0},p(s,r){if(r[0]&512){t=s[28];let a;for(a=0;a<t.length;a+=1){const f=Vl(s,t,a);n[a]?(n[a].p(f,r),p(n[a],1)):(n[a]=Ll(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(te(),a=t.length;a<n.length;a+=1)o(a);le()}},i(s){if(!l){for(let r=0;r<t.length;r+=1)p(n[r]);l=!0}},o(s){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)$(n[r]);l=!1},d(s){He(n,s),s&&m(e)}}}function Ol(i){let e,l;return e=new as({props:{label:i[27],$$slots:{default:[Sa]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p(t,n){const o={};n[0]&512&&(o.label=t[27]),n[0]&512|n[1]&4096&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function ya(i){let e,l,t=Object.entries(i[9]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Ol(Tl(i,t,s));const o=s=>$(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ue()},l(s){for(let r=0;r<n.length;r+=1)n[r].l(s);e=ue()},m(s,r){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(s,r);N(s,e,r),l=!0},p(s,r){if(r[0]&512){t=Object.entries(s[9]);let a;for(a=0;a<t.length;a+=1){const f=Tl(s,t,a);n[a]?(n[a].p(f,r),p(n[a],1)):(n[a]=Ol(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(te(),a=t.length;a<n.length;a+=1)o(a);le()}},i(s){if(!l){for(let r=0;r<t.length;r+=1)p(n[r]);l=!0}},o(s){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)$(n[r]);l=!1},d(s){He(n,s),s&&m(e)}}}function ql(i){let e,l,t,n,o,s;return l=new rs({}),{c(){e=T("button"),B(l.$$.fragment),this.h()},l(r){e=V(r,"BUTTON",{});var a=S(e);O(l.$$.fragment,a),a.forEach(m),this.h()},h(){e.disabled=t=i[4]==null},m(r,a){N(r,e,a),H(l,e,null),n=!0,o||(s=[ye(Ie.call(null,e,{text:"Clear sort"})),Ae(e,"click",i[20])],o=!0)},p(r,a){(!n||a[0]&16&&t!==(t=r[4]==null))&&(e.disabled=t)},i(r){n||(p(l.$$.fragment,r),n=!0)},o(r){$(l.$$.fragment,r),n=!1},d(r){r&&m(e),R(l),o=!1,Ge(s)}}}function Ia(i){let e,l;return e=new Bi({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Da(i){let e,l;return e=new Ai({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Ta(i){let e,l;return e=new Or({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function jl(i){let e,l;return e=new Yt({props:{open:!0,modalHeading:"",passiveModal:!0,size:"lg",$$slots:{default:[za]},$$scope:{ctx:i}}}),e.$on("close",i[25]),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p(t,n){const o={};n[0]&4096|n[1]&4096&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Va(i){var s;let e,l,t,n,o;return l=new mi({props:{size:"small",kind:"ghost",icon:hi,href:Xt((s=i[12])==null?void 0:s.data.namespace,i[12].data.concept_name),iconDescription:"Open concept page",$$slots:{default:[Ca]},$$scope:{ctx:i}}}),n=new Ws({props:{concept:i[12].data}}),{c(){e=T("div"),B(l.$$.fragment),t=Q(),B(n.$$.fragment),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);O(l.$$.fragment,a),a.forEach(m),t=W(r),O(n.$$.fragment,r),this.h()},h(){D(e,"class","mb-4 ml-6")},m(r,a){N(r,e,a),H(l,e,null),N(r,t,a),H(n,r,a),o=!0},p(r,a){var _;const f={};a[0]&4096&&(f.href=Xt((_=r[12])==null?void 0:_.data.namespace,r[12].data.concept_name)),a[1]&4096&&(f.$$scope={dirty:a,ctx:r}),l.$set(f);const u={};a[0]&4096&&(u.concept=r[12].data),n.$set(u)},i(r){o||(p(l.$$.fragment,r),p(n.$$.fragment,r),o=!0)},o(r){$(l.$$.fragment,r),$(n.$$.fragment,r),o=!1},d(r){r&&m(e),R(l),r&&m(t),R(n,r)}}}function Na(i){let e,l=i[12].error.message+"",t;return{c(){e=T("p"),t=Z(l)},l(n){e=V(n,"P",{});var o=S(e);t=G(o,l),o.forEach(m)},m(n,o){N(n,e,o),v(e,t)},p(n,o){o[0]&4096&&l!==(l=n[12].error.message+"")&&fe(t,l)},i:x,o:x,d(n){n&&m(e)}}}function Ma(i){let e,l;return e=new Oe({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Ca(i){let e;return{c(){e=Z("Go to concept")},l(l){e=G(l,"Go to concept")},m(l,t){N(l,e,t)},d(l){l&&m(e)}}}function za(i){let e,l,t,n;const o=[Ma,Na,Va],s=[];function r(a,f){var u,_,c;return(u=a[12])!=null&&u.isLoading?0:(_=a[12])!=null&&_.isError?1:(c=a[12])!=null&&c.isSuccess?2:-1}return~(e=r(i))&&(l=s[e]=o[e](i)),{c(){l&&l.c(),t=ue()},l(a){l&&l.l(a),t=ue()},m(a,f){~e&&s[e].m(a,f),N(a,t,f),n=!0},p(a,f){let u=e;e=r(a),e===u?~e&&s[e].p(a,f):(l&&(te(),$(s[u],1,1,()=>{s[u]=null}),le()),~e?(l=s[e],l?l.p(a,f):(l=s[e]=o[e](a),l.c()),p(l,1),l.m(t.parentNode,t)):l=null)},i(a){n||(p(l),n=!0)},o(a){$(l),n=!1},d(a){~e&&s[e].d(a),a&&m(t)}}}function Fa(i){let e,l,t,n,o,s,r,a,f,u,_,c,d,h,b,w,k,g,E,y,M,C,I,F,X,U,j=i[15].length>0&&i[6]!=null&&zl(i);o=new Hi({props:{addLabelsQuery:{searches:i[8],filters:i[10]},buttonText:"Label all",helperText:"Apply label to all results within the current filter set."}});let A=i[0]&&i[1]&&Rl(i);h=new ci({props:{noLabel:!0,size:"sm",class:"w-60",selected:i[5],$$slots:{default:[ya]},$$scope:{ctx:i}}}),h.$on("update",i[18]);let L=i[7]!=null&&ql(i);const ie=[Ta,Da,Ia],q=[];function Y(z,ee){var se,re,ce;return((se=z[4])==null?void 0:se.order)==null?0:((re=z[4])==null?void 0:re.order)==="ASC"?1:((ce=z[4])==null?void 0:ce.order)==="DESC"?2:-1}~(g=Y(i))&&(E=q[g]=ie[g](i));let K=i[2]&&jl(i);return{c(){e=T("div"),j&&j.c(),l=Q(),t=T("div"),n=T("div"),B(o.$$.fragment),s=Q(),r=T("div"),a=T("div"),A&&A.c(),f=Q(),u=T("div"),_=T("div"),c=Z("Sort by"),d=Q(),B(h.$$.fragment),b=Q(),L&&L.c(),w=Q(),k=T("button"),E&&E.c(),C=Q(),K&&K.c(),I=ue(),this.h()},l(z){e=V(z,"DIV",{class:!0});var ee=S(e);j&&j.l(ee),l=W(ee),t=V(ee,"DIV",{class:!0});var se=S(t);n=V(se,"DIV",{class:!0});var re=S(n);O(o.$$.fragment,re),re.forEach(m),s=W(se),r=V(se,"DIV",{class:!0});var ce=S(r);a=V(ce,"DIV",{class:!0});var ae=S(a);A&&A.l(ae),ae.forEach(m),f=W(ce),u=V(ce,"DIV",{class:!0});var de=S(u);_=V(de,"DIV",{class:!0});var ve=S(_);c=G(ve,"Sort by"),ve.forEach(m),d=W(de),O(h.$$.fragment,de),b=W(de),L&&L.l(de),w=W(de),k=V(de,"BUTTON",{});var J=S(k);E&&E.l(J),J.forEach(m),de.forEach(m),ce.forEach(m),se.forEach(m),ee.forEach(m),C=W(z),K&&K.l(z),I=ue(),this.h()},h(){D(n,"class","relative flex h-8 flex-col items-end justify-end"),D(a,"class","flex justify-end py-2"),D(_,"class","mr-1 whitespace-nowrap"),k.disabled=y=i[4]==null,D(u,"class","sort-container flex flex-row items-center gap-x-1 pt-2 md:w-fit"),D(r,"class","flex flex-col"),D(t,"class","flex w-full flex-row items-end justify-between"),D(e,"class","mx-5 my-2 flex flex-col gap-y-2")},m(z,ee){var se;N(z,e,ee),j&&j.m(e,null),v(e,l),v(e,t),v(t,n),H(o,n,null),v(t,s),v(t,r),v(r,a),A&&A.m(a,null),v(r,f),v(r,u),v(u,_),v(_,c),v(u,d),H(h,u,null),v(u,b),L&&L.m(u,null),v(u,w),v(u,k),~g&&q[g].m(k,null),N(z,C,ee),K&&K.m(z,ee),N(z,I,ee),F=!0,X||(U=[ye(M=Ie.call(null,k,{text:((se=i[4])==null?void 0:se.order)==="ASC"?"Sorted ascending. Toggle to switch to descending.":"Sorted descending. Toggle to switch to ascending."})),Ae(k,"click",i[19])],X=!0)},p(z,ee){var ae;z[15].length>0&&z[6]!=null?j?(j.p(z,ee),ee[0]&64&&p(j,1)):(j=zl(z),j.c(),p(j,1),j.m(e,l)):j&&(te(),$(j,1,1,()=>{j=null}),le());const se={};ee[0]&1280&&(se.addLabelsQuery={searches:z[8],filters:z[10]}),o.$set(se),z[0]&&z[1]?A?A.p(z,ee):(A=Rl(z),A.c(),A.m(a,null)):A&&(A.d(1),A=null);const re={};ee[0]&32&&(re.selected=z[5]),ee[0]&512|ee[1]&4096&&(re.$$scope={dirty:ee,ctx:z}),h.$set(re),z[7]!=null?L?(L.p(z,ee),ee[0]&128&&p(L,1)):(L=ql(z),L.c(),p(L,1),L.m(u,w)):L&&(te(),$(L,1,1,()=>{L=null}),le());let ce=g;g=Y(z),g!==ce&&(E&&(te(),$(q[ce],1,1,()=>{q[ce]=null}),le()),~g?(E=q[g],E||(E=q[g]=ie[g](z),E.c()),p(E,1),E.m(k,null)):E=null),(!F||ee[0]&16&&y!==(y=z[4]==null))&&(k.disabled=y),M&&Be(M.update)&&ee[0]&16&&M.update.call(null,{text:((ae=z[4])==null?void 0:ae.order)==="ASC"?"Sorted ascending. Toggle to switch to descending.":"Sorted descending. Toggle to switch to ascending."}),z[2]?K?(K.p(z,ee),ee[0]&4&&p(K,1)):(K=jl(z),K.c(),p(K,1),K.m(I.parentNode,I)):K&&(te(),$(K,1,1,()=>{K=null}),le())},i(z){F||(p(j),p(o.$$.fragment,z),p(h.$$.fragment,z),p(L),p(E),p(K),F=!0)},o(z){$(j),$(o.$$.fragment,z),$(h.$$.fragment,z),$(L),$(E),$(K),F=!1},d(z){z&&m(e),j&&j.d(),R(o),A&&A.d(),R(h),L&&L.d(),~g&&q[g].d(),z&&m(C),K&&K.d(z),z&&m(I),X=!1,Ge(U)}}}function Pa(i,e,l){let t,n,o,s,r,a,f,u,_,c,d,h,b=x,w=()=>(b(),b=Me(t,Y=>l(12,h=Y)),t);i.$$.on_destroy.push(()=>b());let{totalNumRows:k}=e,{manifest:g}=e,E=Ye();we(i,E,Y=>l(23,d=Y));let y=Xe();we(i,y,Y=>l(22,c=Y));let M=null;const C=["keyword","semantic","concept"],I={keyword:"Keyword",semantic:"Semantic",concept:"Concepts"};let F={};function X(Y){Y.type==="concept"&&l(2,M={namespace:Y.concept_namespace,name:Y.concept_name})}let U={};const j=Y=>{const K=Y.detail;K!==r&&E.setSortBy(K===""?null:zt(K))},A=()=>{s!=null&&E.setSortBy(s.path),E.setSortOrder((s==null?void 0:s.order)==="ASC"?"DESC":"ASC")},L=()=>{E.clearSorts()},ie=Y=>X(Y),q=()=>l(2,M=null);return i.$$set=Y=>{"totalNumRows"in Y&&l(0,k=Y.totalNumRows),"manifest"in Y&&l(1,g=Y.manifest)},i.$$.update=()=>{var Y,K,z,ee;if(i.$$.dirty[0]&4&&w(l(11,t=M?di(M.namespace,M.name):void 0)),i.$$.dirty[0]&8388608&&l(8,n=Ft(d)),i.$$.dirty[0]&8388608&&l(10,o=d.query.filters),i.$$.dirty[0]&264){l(3,F={});for(const se of n)se.type&&(se.type in F||l(3,F[se.type]=[],F),F[se.type].push(se))}if(i.$$.dirty[0]&4194304&&l(4,s=ss(c)),i.$$.dirty[0]&4194304)for(const se of((K=(Y=c.selectRowsSchema)==null?void 0:Y.data)==null?void 0:K.search_results)||[])U[qe(se.result_path)]=se;i.$$.dirty[0]&16&&l(5,r=s!=null&&s.path?qe(s.path):""),i.$$.dirty[0]&8388608&&l(7,a=d.query.sort_by),i.$$.dirty[0]&4194304&&l(6,f=(ee=(z=c==null?void 0:c.selectRowsSchema)==null?void 0:z.data)==null?void 0:ee.schema),i.$$.dirty[0]&224&&l(21,u=f!=null?[{path:[""],text:"None",disabled:a==null&&r!==""},...Pt(f).filter(se=>se.dtype!="embedding"&&se.dtype!="string_span").map(se=>({path:se.path,text:Ue(se.path.slice(1)),disabled:!1}))]:[]),i.$$.dirty[0]&2097152&&l(9,_=u.reduce((se,re)=>{const ce=re.path[0];return(se[ce]=se[ce]||[]).push(re),se},{}))},[k,g,M,F,s,r,f,a,n,_,o,t,h,E,y,C,I,X,j,A,L,u,c,d,ie,q]}class Aa extends $e{constructor(e){super(),Ee(this,e,Pa,Fa,ke,{totalNumRows:0,manifest:1},null,[-1,-1])}}function Ul(i,e,l){const t=i.slice();t[18]=e[l];const n=dt.value(t[18]);t[19]=n;const o=t[4].length===0;return t[20]=o,t}function yt(i){var n,o,s;const e=i.slice(),l=dt.path(e[18])||[];e[2]=l;const t=((s=(o=(n=e[8].data)==null?void 0:n.ui)==null?void 0:o.markdown_paths)==null?void 0:s.find(function(...a){return i[15](e[2],...a)}))!=null;return e[23]=t,e}function Yl(i){let e,l,t,n,o=Ue(i[2])+"",s,r,a,f,u,_,c,d,h,b,w,k,g,E,y,M;c=new Fi({props:{size:16}});function C(){return i[16](i[19])}return k=new Mi({props:{text:De(i[19]),row:i[0],path:i[2],field:i[1],markdown:i[23],spanPaths:i[7].spanPaths,valuePaths:i[7].valuePaths,datasetViewStore:i[9],datasetStore:i[3],embeddings:i[4]}}),{c(){e=T("div"),l=T("div"),t=T("div"),n=T("div"),s=Z(o),a=Q(),f=T("div"),u=T("div"),_=T("button"),B(c.$$.fragment),b=Q(),w=T("div"),B(k.$$.fragment),g=Q(),this.h()},l(I){e=V(I,"DIV",{class:!0});var F=S(e);l=V(F,"DIV",{class:!0});var X=S(l);t=V(X,"DIV",{class:!0});var U=S(t);n=V(U,"DIV",{title:!0,class:!0});var j=S(n);s=G(j,o),j.forEach(m),a=W(U),f=V(U,"DIV",{});var A=S(f);u=V(A,"DIV",{});var L=S(u);_=V(L,"BUTTON",{});var ie=S(_);O(c.$$.fragment,ie),ie.forEach(m),L.forEach(m),A.forEach(m),U.forEach(m),X.forEach(m),b=W(F),w=V(F,"DIV",{class:!0});var q=S(w);O(k.$$.fragment,q),q.forEach(m),g=W(F),F.forEach(m),this.h()},h(){D(n,"title",r=Ue(i[2])),D(n,"class","w-full truncate"),_.disabled=d=i[20],oe(u,"opacity-50",i[20]),D(t,"class","sticky top-0 flex w-full items-center self-start"),D(l,"class","relative flex w-28 flex-none font-mono font-medium text-neutral-500 md:w-44"),D(w,"class","w-full grow-0 pt-1 font-normal"),D(e,"class","flex w-full gap-x-4")},m(I,F){N(I,e,F),v(e,l),v(l,t),v(t,n),v(n,s),v(t,a),v(t,f),v(f,u),v(u,_),H(c,_,null),v(e,b),v(e,w),H(k,w,null),v(e,g),E=!0,y||(M=[Ae(_,"click",C),ye(Ie.call(null,_,{text:"More like this"})),ye(h=Ie.call(null,u,{text:i[20]?'"More like this" requires an embedding index':void 0}))],y=!0)},p(I,F){i=I,(!E||F&32)&&o!==(o=Ue(i[2])+"")&&fe(s,o),(!E||F&32&&r!==(r=Ue(i[2])))&&D(n,"title",r),(!E||F&16&&d!==(d=i[20]))&&(_.disabled=d),h&&Be(h.update)&&F&16&&h.update.call(null,{text:i[20]?'"More like this" requires an embedding index':void 0}),(!E||F&16)&&oe(u,"opacity-50",i[20]);const X={};F&32&&(X.text=De(i[19])),F&1&&(X.row=i[0]),F&32&&(X.path=i[2]),F&2&&(X.field=i[1]),F&288&&(X.markdown=i[23]),F&128&&(X.spanPaths=i[7].spanPaths),F&128&&(X.valuePaths=i[7].valuePaths),F&8&&(X.datasetStore=i[3]),F&16&&(X.embeddings=i[4]),k.$set(X)},i(I){E||(p(c.$$.fragment,I),p(k.$$.fragment,I),E=!0)},o(I){$(c.$$.fragment,I),$(k.$$.fragment,I),E=!1},d(I){I&&m(e),R(c),R(k),y=!1,Ge(M)}}}function Ql(i){let e=xt(i[19]),l,t,n=e&&Yl(yt(i));return{c(){n&&n.c(),l=ue()},l(o){n&&n.l(o),l=ue()},m(o,s){n&&n.m(o,s),N(o,l,s),t=!0},p(o,s){s&32&&(e=xt(o[19])),e?n?(n.p(yt(o),s),s&32&&p(n,1)):(n=Yl(yt(o)),n.c(),p(n,1),n.m(l.parentNode,l)):n&&(te(),$(n,1,1,()=>{n=null}),le())},i(o){t||(p(n),t=!0)},o(o){$(n),t=!1},d(o){n&&n.d(o),o&&m(l)}}}function Ba(i){let e,l,t=i[5],n=[];for(let s=0;s<t.length;s+=1)n[s]=Ql(Ul(i,t,s));const o=s=>$(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ue()},l(s){for(let r=0;r<n.length;r+=1)n[r].l(s);e=ue()},m(s,r){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(s,r);N(s,e,r),l=!0},p(s,[r]){if(r&5051){t=s[5];let a;for(a=0;a<t.length;a+=1){const f=Ul(s,t,a);n[a]?(n[a].p(f,r),p(n[a],1)):(n[a]=Ql(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(te(),a=t.length;a<n.length;a+=1)o(a);le()}},i(s){if(!l){for(let r=0;r<t.length;r+=1)p(n[r]);l=!0}},o(s){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)$(n[r]);l=!1},d(s){He(n,s),s&&m(e)}}}function Ha(i,e,l){let t,n,o,s,r,a,f=x,u=()=>(f(),f=Me(o,I=>l(8,a=I)),o),_,c;i.$$.on_destroy.push(()=>f());let{path:d}=e,{row:h}=e,{field:b}=e,{highlightedFields:w}=e;const k=Ye();we(i,k,I=>l(14,_=I));const g=Xe();we(i,g,I=>l(3,c=I));const E=Qt();we(i,E,I=>l(17,r=I));function y(I){var X;let F=t[0];if(((X=a.data)==null?void 0:X.preferred_embedding)!=null){const U=a.data.preferred_embedding;t.some(j=>j===U)&&(F=U)}if(r.embedding!=null){const U=r.embedding;t.some(j=>j===U)&&(F=U)}k.addSearch({path:b.path,type:"semantic",query:I,embedding:F})}const M=(I,F)=>nt(F,I),C=I=>y(I);return i.$$set=I=>{"path"in I&&l(2,d=I.path),"row"in I&&l(0,h=I.row),"field"in I&&l(1,b=I.field),"highlightedFields"in I&&l(13,w=I.highlightedFields)},i.$$.update=()=>{i.$$.dirty&12&&l(4,t=wt(c.schema,d)),i.$$.dirty&8194&&l(7,n=_i(b,w)),i.$$.dirty&16384&&u(l(6,o=ut(_.namespace,_.datasetName))),i.$$.dirty&5&&l(5,s=os(h,d))},[h,b,d,c,t,s,o,n,a,k,g,E,y,w,_,M,C]}class Ra extends $e{constructor(e){super(),Ee(this,e,Ha,Ba,ke,{path:2,row:0,field:1,highlightedFields:13})}}function Wl(i,e,l){const t=i.slice();return t[26]=e[l],t[28]=l,t}function Zl(i,e,l){const t=i.slice();return t[29]=e[l],t}function La(i){let e,l,t,n,o,s,r,a,f,u,_,c,d,h,b=i[7],w=[];for(let E=0;E<b.length;E+=1)w[E]=Gl(Zl(i,b,E));const k=E=>$(w[E],1,1,()=>{w[E]=null});o=new Hi({props:{addLabelsQuery:{row_ids:[i[0]]},hideLabels:i[7]}});let g=i[1].length>0&&Kl(i);return c=new rr({props:{row:i[3],selectRowsSchema:i[4],highlightedFields:i[2]}}),{c(){e=T("div"),l=T("div");for(let E=0;E<w.length;E+=1)w[E].c();t=Q(),n=T("div"),B(o.$$.fragment),s=Q(),g&&g.c(),a=Q(),f=T("div"),u=T("div"),_=T("div"),B(c.$$.fragment),this.h()},l(E){e=V(E,"DIV",{class:!0});var y=S(e);l=V(y,"DIV",{class:!0});var M=S(l);for(let U=0;U<w.length;U+=1)w[U].l(M);t=W(M),n=V(M,"DIV",{class:!0});var C=S(n);O(o.$$.fragment,C),C.forEach(m),M.forEach(m),s=W(y),g&&g.l(y),y.forEach(m),a=W(E),f=V(E,"DIV",{class:!0});var I=S(f);u=V(I,"DIV",{class:!0});var F=S(u);_=V(F,"DIV",{style:!0,class:!0});var X=S(_);O(c.$$.fragment,X),X.forEach(m),F.forEach(m),I.forEach(m),this.h()},h(){D(n,"class","relative h-8"),D(l,"class","flex flex-wrap gap-x-2 gap-y-2"),D(e,"class","flex flex-col gap-y-1 p-4 md:w-2/3"),Mt(()=>i[23].call(e)),D(_,"style",d=`max-height: ${Math.max(Xl,i[6])}px`),D(_,"class","overflow-y-auto py-2"),D(u,"class","sticky top-0 w-full self-start"),D(f,"class","flex h-full bg-neutral-100 md:w-1/3")},m(E,y){N(E,e,y),v(e,l);for(let M=0;M<w.length;M+=1)w[M]&&w[M].m(l,null);v(l,t),v(l,n),H(o,n,null),v(e,s),g&&g.m(e,null),r=Gi(e,i[23].bind(e)),N(E,a,y),N(E,f,y),v(f,u),v(u,_),H(c,_,null),h=!0},p(E,y){if(y[0]&19072){b=E[7];let I;for(I=0;I<b.length;I+=1){const F=Zl(E,b,I);w[I]?(w[I].p(F,y),p(w[I],1)):(w[I]=Gl(F),w[I].c(),p(w[I],1),w[I].m(l,t))}for(te(),I=b.length;I<w.length;I+=1)k(I);le()}const M={};y[0]&1&&(M.addLabelsQuery={row_ids:[E[0]]}),y[0]&128&&(M.hideLabels=E[7]),o.$set(M),E[1].length>0?g?(g.p(E,y),y[0]&2&&p(g,1)):(g=Kl(E),g.c(),p(g,1),g.m(e,null)):g&&(te(),$(g,1,1,()=>{g=null}),le());const C={};y[0]&8&&(C.row=E[3]),y[0]&16&&(C.selectRowsSchema=E[4]),y[0]&4&&(C.highlightedFields=E[2]),c.$set(C),(!h||y[0]&64&&d!==(d=`max-height: ${Math.max(Xl,E[6])}px`))&&D(_,"style",d)},i(E){if(!h){for(let y=0;y<b.length;y+=1)p(w[y]);p(o.$$.fragment,E),p(g),p(c.$$.fragment,E),h=!0}},o(E){w=w.filter(Boolean);for(let y=0;y<w.length;y+=1)$(w[y]);$(o.$$.fragment,E),$(g),$(c.$$.fragment,E),h=!1},d(E){E&&m(e),He(w,E),R(o),g&&g.d(),r(),E&&m(a),E&&m(f),R(c)}}}function Oa(i){let e,l;return e=new Oe({props:{lines:4,paragraph:!0,class:"w-full"}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function qa(i){let e=i[29]+"",l;return{c(){l=Z(e)},l(t){l=G(t,e)},m(t,n){N(t,l,n)},p(t,n){n[0]&128&&e!==(e=t[29]+"")&&fe(l,e)},d(t){t&&m(l)}}}function Gl(i){let e,l;function t(){return i[21](i[29])}function n(){return i[22](i[29])}return e=new St({props:{type:"cool-gray",class:"hover:cursor-pointer",removeDisabled:!i[9],removeDisabledHelperText:"You do not have access to remove labels.",closeHelperText:`Remove label "${i[29]}"`,clickHelperText:`View documents with label "${i[29]}"`,$$slots:{default:[qa]},$$scope:{ctx:i}}}),e.$on("click",t),e.$on("remove",n),{c(){B(e.$$.fragment)},l(o){O(e.$$.fragment,o)},m(o,s){H(e,o,s),l=!0},p(o,s){i=o;const r={};s[0]&512&&(r.removeDisabled=!i[9]),s[0]&128&&(r.closeHelperText=`Remove label "${i[29]}"`),s[0]&128&&(r.clickHelperText=`View documents with label "${i[29]}"`),s[0]&128|s[1]&2&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(o){l||(p(e.$$.fragment,o),l=!0)},o(o){$(e.$$.fragment,o),l=!1},d(o){R(e,o)}}}function Kl(i){let e=[],l=new Map,t,n,o=i[1];const s=r=>qe(r[26].path);for(let r=0;r<o.length;r+=1){let a=Wl(i,o,r),f=s(a);l.set(f,e[r]=Jl(f,a))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();t=ue()},l(r){for(let a=0;a<e.length;a+=1)e[a].l(r);t=ue()},m(r,a){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(r,a);N(r,t,a),n=!0},p(r,a){a[0]&14&&(o=r[1],te(),e=Vt(e,a,s,1,r,o,l,t.parentNode,Nt,Jl,t,Wl),le())},i(r){if(!n){for(let a=0;a<o.length;a+=1)p(e[a]);n=!0}},o(r){for(let a=0;a<e.length;a+=1)$(e[a]);n=!1},d(r){for(let a=0;a<e.length;a+=1)e[a].d(r);r&&m(t)}}}function Jl(i,e){let l,t,n,o;return t=new Ra({props:{row:e[3],path:e[26].path,field:e[26],highlightedFields:e[2]}}),{key:i,first:null,c(){l=T("div"),B(t.$$.fragment),n=Q(),this.h()},l(s){l=V(s,"DIV",{class:!0});var r=S(l);O(t.$$.fragment,r),n=W(r),r.forEach(m),this.h()},h(){D(l,"class","flex h-full w-full flex-col border-neutral-200"),oe(l,"border-b",e[28]<e[1].length-1),oe(l,"pb-2",e[28]<e[1].length-1),this.first=l},m(s,r){N(s,l,r),H(t,l,null),v(l,n),o=!0},p(s,r){e=s;const a={};r[0]&8&&(a.row=e[3]),r[0]&2&&(a.path=e[26].path),r[0]&2&&(a.field=e[26]),r[0]&4&&(a.highlightedFields=e[2]),t.$set(a),(!o||r[0]&2)&&oe(l,"border-b",e[28]<e[1].length-1),(!o||r[0]&2)&&oe(l,"pb-2",e[28]<e[1].length-1)},i(s){o||(p(t.$$.fragment,s),o=!0)},o(s){$(t.$$.fragment,s),o=!1},d(s){s&&m(l),R(t)}}}function ja(i){let e,l,t,n;const o=[Oa,La],s=[];function r(a,f){var u;return a[3]==null||(u=a[5])!=null&&u.isFetching?0:1}return l=r(i),t=s[l]=o[l](i),{c(){e=T("div"),t.c(),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);t.l(f),f.forEach(m),this.h()},h(){D(e,"class","flex flex-col rounded border border-neutral-300 md:flex-row")},m(a,f){N(a,e,f),s[l].m(e,null),n=!0},p(a,f){let u=l;l=r(a),l===u?s[l].p(a,f):(te(),$(s[u],1,1,()=>{s[u]=null}),le(),t=s[l],t?t.p(a,f):(t=s[l]=o[l](a),t.c()),p(t,1),t.m(e,null))},i(a){n||(p(t),n=!0)},o(a){$(t),n=!1},d(a){a&&m(e),s[l].d()}}}const Xl=320;function Ua(i,e,l){let t,n,o,s,r,a,f,u,_,c,d=x,h=()=>(d(),d=Me(a,q=>l(5,c=q)),a),b,w,k;i.$$.on_destroy.push(()=>d());let{rowId:g}=e,{mediaFields:E}=e,{highlightedFields:y}=e;const M=Xe();we(i,M,q=>l(19,w=q));const C=Ye();we(i,C,q=>l(18,b=q));const I=Vi(),F=_t();we(i,F,q=>l(20,k=q));let X=0;const U=w.schema!=null?fs(w.schema):null;we(i,U,q=>l(24,_=q));const j=q=>{const Y={label_name:q,row_ids:[g]};_.mutate([t,n,Y],{onSuccess:()=>{I.addNotification({kind:"success",title:`Removed label "${Y.label_name}"`,message:`Document id: ${g}`})}})},A=q=>C.addFilter({path:[q,"label"],op:"equals",value:"true"}),L=q=>j(q);function ie(){X=this.clientHeight,l(6,X)}return i.$$set=q=>{"rowId"in q&&l(0,g=q.rowId),"mediaFields"in q&&l(1,E=q.mediaFields),"highlightedFields"in q&&l(2,y=q.highlightedFields)},i.$$.update=()=>{var q,Y;i.$$.dirty[0]&262144&&l(16,t=b.namespace),i.$$.dirty[0]&262144&&l(15,n=b.datasetName),i.$$.dirty[0]&1048576&&l(9,o=(q=k.data)==null?void 0:q.access.dataset.edit_labels),i.$$.dirty[0]&524288&&l(4,s=(Y=w.selectRowsSchema)==null?void 0:Y.data),i.$$.dirty[0]&262144&&l(17,r=gi(b)),i.$$.dirty[0]&229393&&h(l(8,a=s!=null?us(t,n,g,r,s.schema):null)),i.$$.dirty[0]&32&&l(3,f=(c==null?void 0:c.data)!=null?c.data:null),i.$$.dirty[0]&8&&l(7,u=f!=null?cs(f):[])},[g,E,y,f,s,c,X,u,a,o,M,C,F,U,j,n,t,r,b,w,k,A,L,ie]}class Ya extends $e{constructor(e){super(),Ee(this,e,Ua,ja,ke,{rowId:0,mediaFields:1,highlightedFields:2},null,[-1,-1])}}function xl(i,e,l){const t=i.slice();return t[22]=e[l],t}function Qa(i){let e,l;return{c(){e=T("div"),l=Z("No results."),this.h()},l(t){e=V(t,"DIV",{class:!0});var n=S(e);l=G(n,"No results."),n.forEach(m),this.h()},h(){D(e,"class","mx-4 mt-8 w-full text-gray-600")},m(t,n){N(t,e,n),v(e,l)},p:x,i:x,o:x,d(t){t&&m(e)}}}function Wa(i){let e,l;return e=new Oe({props:{paragraph:!0,lines:3}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Za(i){var t,n;let e,l;return e=new pi({props:{lowContrast:!0,title:"Could not fetch schema:",subtitle:((t=i[1].error.body)==null?void 0:t.detail)||((n=i[1])==null?void 0:n.error.message)}}),{c(){B(e.$$.fragment)},l(o){O(e.$$.fragment,o)},m(o,s){H(e,o,s),l=!0},p(o,s){var a,f;const r={};s&2&&(r.subtitle=((a=o[1].error.body)==null?void 0:a.detail)||((f=o[1])==null?void 0:f.error.message)),e.$set(r)},i(o){l||(p(e.$$.fragment,o),l=!0)},o(o){$(e.$$.fragment,o),l=!1},d(o){R(e,o)}}}function Ga(i){var t;let e,l;return e=new pi({props:{lowContrast:!0,title:"Could not fetch rows:",subtitle:((t=i[3].error.body)==null?void 0:t.detail)||i[3].error.message}}),{c(){B(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,o){H(e,n,o),l=!0},p(n,o){var r;const s={};o&8&&(s.subtitle=((r=n[3].error.body)==null?void 0:r.detail)||n[3].error.message),e.$set(s)},i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){$(e.$$.fragment,n),l=!1},d(n){R(e,n)}}}function en(i){let e,l,t,n=i[5],o=[];for(let a=0;a<n.length;a+=1)o[a]=tn(xl(i,n,a));const s=a=>$(o[a],1,1,()=>{o[a]=null});let r=i[5].length>0&&ln(i);return{c(){e=T("div");for(let a=0;a<o.length;a+=1)o[a].c();l=Q(),r&&r.c(),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);for(let u=0;u<o.length;u+=1)o[u].l(f);l=W(f),r&&r.l(f),f.forEach(m),this.h()},h(){D(e,"class","flex h-full w-full flex-col gap-y-20 overflow-y-scroll px-5 pb-32")},m(a,f){N(a,e,f);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);v(e,l),r&&r.m(e,null),i[20](e),t=!0},p(a,f){if(f&304){n=a[5];let u;for(u=0;u<n.length;u+=1){const _=xl(a,n,u);o[u]?(o[u].p(_,f),p(o[u],1)):(o[u]=tn(_),o[u].c(),p(o[u],1),o[u].m(e,l))}for(te(),u=n.length;u<o.length;u+=1)s(u);le()}a[5].length>0?r?(r.p(a,f),f&32&&p(r,1)):(r=ln(a),r.c(),p(r,1),r.m(e,null)):r&&(te(),$(r,1,1,()=>{r=null}),le())},i(a){if(!t){for(let f=0;f<n.length;f+=1)p(o[f]);p(r),t=!0}},o(a){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)$(o[f]);$(r),t=!1},d(a){a&&m(e),He(o,a),r&&r.d(),i[20](null)}}}function tn(i){let e,l;return e=new Ya({props:{rowId:i[22],mediaFields:i[4],highlightedFields:i[8]}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p(t,n){const o={};n&32&&(o.rowId=t[22]),n&16&&(o.mediaFields=t[4]),n&256&&(o.highlightedFields=t[8]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function ln(i){let e,l;return e=new Kr({props:{threshold:100}}),e.$on("loadMore",i[19]),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Ka(i){let e,l,t,n,o,s,r;e=new Aa({props:{totalNumRows:i[6],manifest:i[12].data}});const a=[Ga,Za,Wa,Qa],f=[];function u(c,d){var h,b,w,k;return c[3].isError?0:(h=c[1])!=null&&h.isError?1:(b=c[3])!=null&&b.isFetching||c[13].isFetching||(w=c[1])!=null&&w.isFetching||c[2].isFetching?2:(k=c[3])!=null&&k.isSuccess&&c[5]&&c[5].length===0?3:-1}~(t=u(i))&&(n=f[t]=a[t](i));let _=i[5]&&i[13].isSuccess&&i[4]!=null&&en(i);return{c(){B(e.$$.fragment),l=Q(),n&&n.c(),o=Q(),_&&_.c(),s=ue()},l(c){O(e.$$.fragment,c),l=W(c),n&&n.l(c),o=W(c),_&&_.l(c),s=ue()},m(c,d){H(e,c,d),N(c,l,d),~t&&f[t].m(c,d),N(c,o,d),_&&_.m(c,d),N(c,s,d),r=!0},p(c,[d]){const h={};d&64&&(h.totalNumRows=c[6]),d&4096&&(h.manifest=c[12].data),e.$set(h);let b=t;t=u(c),t===b?~t&&f[t].p(c,d):(n&&(te(),$(f[b],1,1,()=>{f[b]=null}),le()),~t?(n=f[t],n?n.p(c,d):(n=f[t]=a[t](c),n.c()),p(n,1),n.m(o.parentNode,o)):n=null),c[5]&&c[13].isSuccess&&c[4]!=null?_?(_.p(c,d),d&8240&&p(_,1)):(_=en(c),_.c(),p(_,1),_.m(s.parentNode,s)):_&&(te(),$(_,1,1,()=>{_=null}),le())},i(c){r||(p(e.$$.fragment,c),p(n),p(_),r=!0)},o(c){$(e.$$.fragment,c),$(n),$(_),r=!1},d(c){R(e,c),c&&m(l),~t&&f[t].d(c),c&&m(o),_&&_.d(c),c&&m(s)}}}function Ja(i,e,l){let t,n,o,s,r,a,f,u,_,c,d,h=x,b=()=>(h(),h=Me(s,K=>l(2,d=K)),s),w,k,g=x,E=()=>(g(),g=Me(f,K=>l(3,k=K)),f),y,M,C=x,I=()=>(C(),C=Me(t,K=>l(12,M=K)),t),F,X=x,U=()=>(X(),X=Me(n,K=>l(13,F=K)),n);i.$$.on_destroy.push(()=>h()),i.$$.on_destroy.push(()=>g()),i.$$.on_destroy.push(()=>C()),i.$$.on_destroy.push(()=>X());const j=Ye();we(i,j,K=>l(18,y=K));const A=Xe();we(i,A,K=>l(17,w=K));let L=null;const ie=Qs(L),q=()=>k==null?void 0:k.fetchNextPage();function Y(K){Re[K?"unshift":"push"](()=>{L=K,l(0,L)})}return i.$$.update=()=>{var K,z,ee,se;i.$$.dirty&262144&&I(l(11,t=ds(y.namespace,y.datasetName))),i.$$.dirty&262144&&U(l(10,n=Bt(y.namespace,y.datasetName))),i.$$.dirty&262144&&l(16,o=gi(y)),i.$$.dirty&262144&&b(l(9,s=ut(y.namespace,y.datasetName))),i.$$.dirty&131072&&l(1,r=w.selectRowsSchema),i.$$.dirty&262146&&l(8,a=ms(y.query,r==null?void 0:r.data)),i.$$.dirty&327682&&E(l(7,f=hs(y.namespace,y.datasetName,{...o,columns:[Dt]},r!=null&&r.isSuccess?r.data.schema:void 0))),i.$$.dirty&8&&l(6,u=(K=k.data)==null?void 0:K.pages[0].total_num_rows),i.$$.dirty&8&&l(5,_=(z=k.data)==null?void 0:z.pages.flatMap(re=>re.rows).map(re=>dt.value(pt(re,[Dt]),"string"))),i.$$.dirty&131076&&l(4,c=d.data?_s((se=(ee=w.selectRowsSchema)==null?void 0:ee.data)==null?void 0:se.schema,d.data):[]),i.$$.dirty&1&&ie.set(L)},Ki(gs,ie),[L,r,d,k,c,_,u,f,a,s,n,t,M,F,j,A,o,w,y,q,Y]}class Xa extends $e{constructor(e){super(),Ee(this,e,Ja,Ka,ke,{})}}function nn(i){const e=i[3].find(function(...s){return i[39](i[50],...s)});i[51]=e;const l=i[51]!=null&&typeof i[51].id=="object"&&i[51].id.type==="field"&&i[51].id.isSignal;i[52]=l;const t=i[51]!=null&&typeof i[51].id=="object"&&i[51].id.type==="concept";i[53]=t;const n=i[51]!=null&&typeof i[51].id=="object"&&i[51].id.type==="label";i[54]=n}function sn(i){const e=i[5].find(function(...t){return i[38](i[51],...t)});i[55]=e}function rn(i){let e,l=i[55].text+"",t,n,o,s,r=i[55].embeddings.length>0&&an(i);return{c(){e=T("div"),t=Z(l),n=Q(),r&&r.c(),o=ue(),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);t=G(f,l),f.forEach(m),n=W(a),r&&r.l(a),o=ue(),this.h()},h(){D(e,"class","w-full flex-grow truncate")},m(a,f){N(a,e,f),v(e,t),N(a,n,f),r&&r.m(a,f),N(a,o,f),s=!0},p(a,f){(!s||f[0]&32|f[1]&1048576)&&l!==(l=a[55].text+"")&&fe(t,l),a[55].embeddings.length>0?r?(r.p(a,f),f[0]&32|f[1]&1048576&&p(r,1)):(r=an(a),r.c(),p(r,1),r.m(o.parentNode,o)):r&&(te(),$(r,1,1,()=>{r=null}),le())},i(a){s||(p(r),s=!0)},o(a){$(r),s=!1},d(a){a&&m(e),a&&m(n),r&&r.d(a),a&&m(o)}}}function an(i){let e,l,t,n,o,s;return l=new xe({props:{$$slots:{default:[xa]},$$scope:{ctx:i}}}),{c(){e=T("div"),B(l.$$.fragment)},l(r){e=V(r,"DIV",{});var a=S(e);O(l.$$.fragment,a),a.forEach(m)},m(r,a){N(r,e,a),H(l,e,null),n=!0,o||(s=ye(t=Ie.call(null,e,{text:`Computed embeddings: ${i[55].embeddings.join(", ")}`})),o=!0)},p(r,a){i=r;const f={};a[1]&33554432&&(f.$$scope={dirty:a,ctx:i}),l.$set(f),t&&Be(t.update)&&a[0]&32|a[1]&1048576&&t.update.call(null,{text:`Computed embeddings: ${i[55].embeddings.join(", ")}`})},i(r){n||(p(l.$$.fragment,r),n=!0)},o(r){$(l.$$.fragment,r),n=!1},d(r){r&&m(e),R(l),o=!1,s()}}}function xa(i){let e,l;return e=new Es({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function eo(i){sn(i);let e,l,t=i[55]&&rn(i);return{c(){e=T("div"),t&&t.c(),this.h()},l(n){e=V(n,"DIV",{class:!0});var o=S(e);t&&t.l(o),o.forEach(m),this.h()},h(){D(e,"class","flex h-full w-full items-center justify-between gap-x-1")},m(n,o){N(n,e,o),t&&t.m(e,null),l=!0},p(n,o){sn(n),n[55]?t?(t.p(n,o),o[0]&32|o[1]&1048576&&p(t,1)):(t=rn(n),t.c(),p(t,1),t.m(e,null)):t&&(te(),$(t,1,1,()=>{t=null}),le())},i(n){l||(p(t),l=!0)},o(n){$(t),l=!1},d(n){n&&m(e),t&&t.d()}}}function to(i){let e,l,t=i[51].text+"",n,o,s=i[51].description&&on(i);return{c(){e=T("div"),l=T("div"),n=Z(t),o=Q(),s&&s.c(),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);l=V(a,"DIV",{});var f=S(l);n=G(f,t),f.forEach(m),o=W(a),s&&s.l(a),a.forEach(m),this.h()},h(){D(e,"class","flex justify-between gap-x-8"),oe(e,"isSignal",i[52]),oe(e,"isConcept",i[53]),oe(e,"isLabel",i[54])},m(r,a){N(r,e,a),v(e,l),v(l,n),v(e,o),s&&s.m(e,null)},p(r,a){a[0]&8|a[1]&524288&&t!==(t=r[51].text+"")&&fe(n,t),r[51].description?s?s.p(r,a):(s=on(r),s.c(),s.m(e,null)):s&&(s.d(1),s=null),a[0]&8|a[1]&524288&&oe(e,"isSignal",r[52]),a[0]&8|a[1]&524288&&oe(e,"isConcept",r[53]),a[0]&8|a[1]&524288&&oe(e,"isLabel",r[54])},i:x,o:x,d(r){r&&m(e),s&&s.d()}}}function lo(i){let e,l,t,n,o,s;return l=new xe({props:{$$slots:{default:[ao]},$$scope:{ctx:i}}}),{c(){e=T("div"),B(l.$$.fragment),t=Q(),n=T("div"),o=Z("Compute embeddings to enable concept search."),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);O(l.$$.fragment,a),t=W(a),n=V(a,"DIV",{class:!0});var f=S(n);o=G(f,"Compute embeddings to enable concept search."),f.forEach(m),a.forEach(m),this.h()},h(){D(n,"class","ml-2"),D(e,"class","new-concept flex items-center")},m(r,a){N(r,e,a),H(l,e,null),v(e,t),v(e,n),v(n,o),s=!0},p(r,a){const f={};a[1]&33554432&&(f.$$scope={dirty:a,ctx:r}),l.$set(f)},i(r){s||(p(l.$$.fragment,r),s=!0)},o(r){$(l.$$.fragment,r),s=!1},d(r){r&&m(e),R(l)}}}function no(i){let e,l,t,n,o,s,r;return l=new xe({props:{$$slots:{default:[oo]},$$scope:{ctx:i}}}),{c(){e=T("div"),B(l.$$.fragment),t=Q(),n=T("div"),o=Z(`Semantic search:
              `),s=Z(i[1]),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);O(l.$$.fragment,f),t=W(f),n=V(f,"DIV",{class:!0});var u=S(n);o=G(u,`Semantic search:
              `),s=G(u,i[1]),u.forEach(m),f.forEach(m),this.h()},h(){D(n,"class","ml-2"),D(e,"class","new-keyword flex flex-row items-center justify-items-center")},m(a,f){N(a,e,f),H(l,e,null),v(e,t),v(e,n),v(n,o),v(n,s),r=!0},p(a,f){const u={};f[1]&33554432&&(u.$$scope={dirty:f,ctx:a}),l.$set(u),(!r||f[0]&2)&&fe(s,a[1])},i(a){r||(p(l.$$.fragment,a),r=!0)},o(a){$(l.$$.fragment,a),r=!1},d(a){a&&m(e),R(l)}}}function io(i){let e,l,t,n,o,s,r;return l=new xe({props:{$$slots:{default:[fo]},$$scope:{ctx:i}}}),{c(){e=T("div"),B(l.$$.fragment),t=Q(),n=T("div"),o=Z(`Keyword search:
              `),s=Z(i[1]),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);O(l.$$.fragment,f),t=W(f),n=V(f,"DIV",{class:!0});var u=S(n);o=G(u,`Keyword search:
              `),s=G(u,i[1]),u.forEach(m),f.forEach(m),this.h()},h(){D(n,"class","ml-2"),D(e,"class","new-keyword flex flex-row items-center justify-items-center")},m(a,f){N(a,e,f),H(l,e,null),v(e,t),v(e,n),v(n,o),v(n,s),r=!0},p(a,f){const u={};f[1]&33554432&&(u.$$scope={dirty:f,ctx:a}),l.$set(u),(!r||f[0]&2)&&fe(s,a[1])},i(a){r||(p(l.$$.fragment,a),r=!0)},o(a){$(l.$$.fragment,a),r=!1},d(a){a&&m(e),R(l)}}}function so(i){let e,l,t,n,o,s=i[1]!=""?":":"",r,a,f,u;return l=new xe({props:{$$slots:{default:[uo]},$$scope:{ctx:i}}}),{c(){e=T("div"),B(l.$$.fragment),t=Q(),n=T("div"),o=Z("New concept"),r=Z(s),a=Q(),f=Z(i[1]),this.h()},l(_){e=V(_,"DIV",{class:!0});var c=S(e);O(l.$$.fragment,c),t=W(c),n=V(c,"DIV",{class:!0});var d=S(n);o=G(d,"New concept"),r=G(d,s),a=W(d),f=G(d,i[1]),d.forEach(m),c.forEach(m),this.h()},h(){D(n,"class","ml-2"),D(e,"class","new-concept flex flex-row items-center justify-items-center")},m(_,c){N(_,e,c),H(l,e,null),v(e,t),v(e,n),v(n,o),v(n,r),v(n,a),v(n,f),u=!0},p(_,c){const d={};c[1]&33554432&&(d.$$scope={dirty:c,ctx:_}),l.$set(d),(!u||c[0]&2)&&s!==(s=_[1]!=""?":":"")&&fe(r,s),(!u||c[0]&2)&&fe(f,_[1])},i(_){u||(p(l.$$.fragment,_),u=!0)},o(_){$(l.$$.fragment,_),u=!1},d(_){_&&m(e),R(l)}}}function ro(i){let e;return{c(){e=T("div")},l(l){e=V(l,"DIV",{}),S(e).forEach(m)},m(l,t){N(l,e,t)},p:x,i:x,o:x,d(l){l&&m(e)}}}function on(i){let e,l=i[51].description+"",t;return{c(){e=T("div"),t=Z(l),this.h()},l(n){e=V(n,"DIV",{class:!0});var o=S(e);t=G(o,l),o.forEach(m),this.h()},h(){D(e,"class","truncate text-xs text-gray-500")},m(n,o){N(n,e,o),v(e,t)},p(n,o){o[0]&8|o[1]&524288&&l!==(l=n[51].description+"")&&fe(t,l)},d(n){n&&m(e)}}}function ao(i){let e,l;return e=new Ti({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function oo(i){let e,l;return e=new Pi({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function fo(i){let e,l;return e=new Pi({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function uo(i){let e,l;return e=new Wt({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function co(i){nn(i);let e,l,t,n;const o=[ro,so,io,no,lo,to],s=[];function r(a,f){return a[51]==null?0:a[51].id==="new-concept"?1:a[51].id==="keyword-search"?2:a[51].id==="semantic-search"?3:a[51].id==="compute-embedding"&&a[2]&&a[0]?4:5}return e=r(i),l=s[e]=o[e](i),{c(){l.c(),t=ue()},l(a){l.l(a),t=ue()},m(a,f){s[e].m(a,f),N(a,t,f),n=!0},p(a,f){nn(a);let u=e;e=r(a),e===u?s[e].p(a,f):(te(),$(s[u],1,1,()=>{s[u]=null}),le(),l=s[e],l?l.p(a,f):(l=s[e]=o[e](a),l.c()),p(l,1),l.m(t.parentNode,t))},i(a){n||(p(l),n=!0)},o(a){$(l),n=!1},d(a){s[e].d(a),a&&m(t)}}}function mo(i){var k;let e,l,t,n,o,s,r,a,f,u,_,c,d,h;n=new Fi({props:{class:"ml-2 mr-px",size:16}}),r=new pr({props:{size:"xl",class:"w-48",disabled:i[0]==null,selectedId:i[0]?qe(i[0]):(k=i[5][0])==null?void 0:k.id,items:i[5],$$slots:{default:[eo,({item:g})=>({51:g}),({item:g})=>[0,g?1048576:0]]},$$scope:{ctx:i}}}),r.$on("select",i[16]);function b(g){i[41](g)}let w={size:"xl",class:"w-full",items:i[3],shouldFilterItem:ho,placeholder:i[6],$$slots:{default:[co,({item:g})=>({50:g}),({item:g})=>[0,g?524288:0]]},$$scope:{ctx:i}};return i[1]!==void 0&&(w.value=i[1]),u=new zi({props:w}),i[40](u),Re.push(()=>We(u,"value",b)),u.$on("select",i[15]),{c(){e=T("div"),l=T("div"),t=T("div"),B(n.$$.fragment),o=Q(),s=T("div"),B(r.$$.fragment),a=Q(),f=T("div"),B(u.$$.fragment),this.h()},l(g){e=V(g,"DIV",{class:!0});var E=S(e);l=V(E,"DIV",{class:!0});var y=S(l);t=V(y,"DIV",{class:!0});var M=S(t);O(n.$$.fragment,M),M.forEach(m),o=W(y),s=V(y,"DIV",{class:!0});var C=S(s);O(r.$$.fragment,C),C.forEach(m),a=W(y),f=V(y,"DIV",{class:!0});var I=S(f);O(u.$$.fragment,I),I.forEach(m),y.forEach(m),E.forEach(m),this.h()},h(){D(t,"class","search-icon flex items-center svelte-18z5kej"),D(s,"class","embedding-dropdown rounded border-r border-gray-200"),D(f,"class","search-container w-full flex-grow"),D(l,"class","flex w-full rounded border border-gray-200"),D(e,"class","flex h-full w-full flex-grow items-center")},m(g,E){N(g,e,E),v(e,l),v(l,t),H(n,t,null),v(l,o),v(l,s),H(r,s,null),v(l,a),v(l,f),H(u,f,null),c=!0,d||(h=ye(Ie.call(null,t,{text:"Select the field to search over."})),d=!0)},p(g,E){var C;const y={};E[0]&1&&(y.disabled=g[0]==null),E[0]&33&&(y.selectedId=g[0]?qe(g[0]):(C=g[5][0])==null?void 0:C.id),E[0]&32&&(y.items=g[5]),E[0]&32|E[1]&34603008&&(y.$$scope={dirty:E,ctx:g}),r.$set(y);const M={};E[0]&8&&(M.items=g[3]),E[0]&64&&(M.placeholder=g[6]),E[0]&15|E[1]&34078720&&(M.$$scope={dirty:E,ctx:g}),!_&&E[0]&2&&(_=!0,M.value=g[1],Ze(()=>_=!1)),u.$set(M)},i(g){c||(p(n.$$.fragment,g),p(r.$$.fragment,g),p(u.$$.fragment,g),c=!0)},o(g){$(n.$$.fragment,g),$(r.$$.fragment,g),$(u.$$.fragment,g),c=!1},d(g){g&&m(e),R(n),R(r),i[40](null),R(u),d=!1,h()}}}const ho=(i,e)=>i.text.toLowerCase().includes(e.toLowerCase())||i.id==="new-concept"||i.id==="compute-embedding";function _o(i,e,l){let t,n,o,s,r,a,f,u,_,c,d,h,b,w,k,g,E,y,M,C,I,F,X,U,j=x,A=()=>(j(),j=Me(t,me=>l(36,U=me)),t),L;i.$$.on_destroy.push(()=>j());const ie=Ye();we(i,ie,me=>l(37,L=me));const q=Xe();we(i,q,me=>l(31,y=me));const Y=Qt();we(i,Y,me=>l(35,X=me));let K;function z(me,ze,et,Je){if(et==null||ze==null||me==null)return[];const it=et?st(et):[],Fe=[];for(const Pe of it){if(Pe.dtype==null||Pe.dtype==="embedding"||Pe.dtype==="binary"||!wi(Pe.path,me))continue;const je=$s(Pe);if((je==null?void 0:je.signal_name)==="concept_score"||(Je==null?void 0:Je.some(Qi=>Qi.name===(je==null?void 0:je.signal_name))))continue;const Zt=ui(Pe.path),Gt=Ue(Pe.path.slice(me.length));if(ki(Pe.dtype)){Fe.push({id:{type:"field",path:Pe.path,sort:"DESC",isSignal:je!=null},text:Gt,description:`Sort descending by ${Zt}`});continue}if(Pe.dtype==="string"||Pe.dtype==="string_span"){if(je==null)continue;Fe.push({id:{type:"field",path:Pe.path,op:"exists",isSignal:je!=null},text:Gt,description:`Find documents with ${Zt}`});continue}}return Fe}const ee=bi();we(i,ee,me=>l(44,M=me));const se=vi();we(i,se,me=>l(34,F=me));const re=(me,ze)=>`${qe(me||"")}_${ze}`;let ce={};const ae=ps();we(i,ae,me=>l(33,I=me));const de=_t();we(i,de,me=>l(32,C=me));let ve=[],J="",P;function ne(){f!=null&&(l(17,ce[re(K,f)]=!0,ce),M.mutate([n,o,{leaf_path:zt(K||[]),signal:{signal_name:f}}]))}let he;const Se=(me,ze)=>{K==null||f==null||(ie.addSearch({path:K,type:"concept",concept_namespace:me,concept_name:ze,embedding:f}),he.clear())},_e=me=>{ie.addFilter({path:[me,"label"],op:"equals",value:"true"})},Ne=me=>{if(K!=null){if(me.detail.selectedId==="new-concept"){J===P.id&&l(1,J="");const ze=J.split("/",2);let et="",Je="";ze.length===2?[et,Je]=ze:[Je]=ze,tt({command:lt.CreateConcept,namespace:et,conceptName:Je,dataset:{namespace:n,name:o},path:K,onCreate:it=>Se(it.detail.namespace,it.detail.name)})}else if(me.detail.selectedId==="keyword-search"){if(J=="")return;ie.addSearch({path:K,type:"keyword",query:J})}else if(me.detail.selectedId=="semantic-search"){if(J==""||f==null)return;ie.addSearch({path:K,type:"semantic",query:J,embedding:f})}else if(me.detail.selectedId=="compute-embedding")ne();else if(me.detail.selectedId.type==="concept")Se(me.detail.selectedId.namespace,me.detail.selectedId.name);else if(me.detail.selectedId.type==="label")_e(me.detail.selectedId.name);else if(me.detail.selectedId.type==="field"){const ze=me.detail.selectedId;if(ze.sort!=null)ie.setSortBy(ze.path),ie.setSortOrder(ze.sort);else if(ze.op!=null)ie.addFilter({path:ze.path,op:ze.op});else throw new Error(`Unknown search type ${me.detail.selectedId}`)}else throw new Error(`Unknown search type ${me.detail.selectedId}`);he.clear()}},Qe=me=>{l(0,K=me.detail.selectedItem.path)};let Ke=[];const qi=(me,ze)=>ze===me,ji=(me,ze)=>ze.id===me.id;function Ui(me){Re[me?"unshift":"push"](()=>{he=me,l(4,he)})}function Yi(me){J=me,l(1,J)}return i.$$.update=()=>{var me,ze,et,Je,it;i.$$.dirty[1]&64&&A(l(7,t=ut(L.namespace,L.datasetName))),i.$$.dirty[1]&64&&(n=L.namespace),i.$$.dirty[1]&64&&(o=L.datasetName),i.$$.dirty[1]&32&&l(19,s=(et=(ze=(me=U.data)==null?void 0:me.ui)==null?void 0:ze.media_paths)==null?void 0:et.map(Fe=>Array.isArray(Fe)?Fe:[Fe])),i.$$.dirty[0]&524289|i.$$.dirty[1]&1&&K==null&&s!=null&&l(0,K=bs(y,s)),i.$$.dirty[0]&1|i.$$.dirty[1]&64&&l(20,r=Ft(L,K)),i.$$.dirty[0]&1|i.$$.dirty[1]&9&&l(22,a=z(K,y.stats,y.schema,F.data)),i.$$.dirty[0]&1|i.$$.dirty[1]&57&&l(2,f=vs(U.data,X,y,K,(F.data||[]).map(Fe=>Fe.name))),i.$$.dirty[0]&1|i.$$.dirty[1]&1&&l(30,u=wt(y.schema,K)),i.$$.dirty[0]&1073741828&&l(25,_=u!=null&&!!u.includes(f||"")),i.$$.dirty[0]&33685509&&l(28,c=!_&&ce[re(K,f)]),i.$$.dirty[0]&33554432&&l(6,d=_?"Search by keyword, field or concept.":"Search by keyword or field. Compute embedding to enable concept search."),i.$$.dirty[1]&2&&l(29,h=(it=(Je=C.data)==null?void 0:Je.user)==null?void 0:it.id),i.$$.dirty[0]&570425344|i.$$.dirty[1]&4&&l(21,b=_?ws(I.data||[],h):[]),i.$$.dirty[0]&2&&l(18,P={id:"new-concept",text:J}),i.$$.dirty[0]&2&&l(27,w={id:"keyword-search",text:J}),i.$$.dirty[0]&2&&l(26,k={id:"semantic-search",text:J}),i.$$.dirty[0]&268435456&&l(24,g={id:"compute-embedding",text:"Compute embedding",disabled:c}),i.$$.dirty[1]&1&&l(23,E=y.schema!=null?oi(y.schema):[]),i.$$.dirty[0]&267649030|i.$$.dirty[1]&6&&l(3,ve=I!=null&&I.data?[...J!=""?[w]:[],...J!=""&&f&&_?[k]:[],..._?[P]:[g],...E.map(Fe=>({id:{type:"label",name:Fe},text:Fe,description:`Find documents labeled "${Fe}"`})),...a,...b.flatMap(Fe=>Fe.concepts.map(Pe=>({id:{namespace:Pe.namespace,name:Pe.name,type:"concept"},text:ks(Pe.namespace,Pe.name,C.data),description:Pe.metadata.description||void 0,disabled:r.some(je=>je.type==="concept"&&je.concept_namespace===Pe.namespace&&je.concept_name===Pe.name)})))]:[]),i.$$.dirty[0]&524288|i.$$.dirty[1]&1&&l(5,Ke=(s||[]).map(Fe=>({id:qe(Fe),text:Ue(Fe),path:Fe,embeddings:wt(y.schema,Fe)})))},[K,J,f,ve,he,Ke,d,t,ie,q,Y,ee,se,ae,de,Ne,Qe,ce,P,s,r,b,a,E,g,_,k,w,c,h,u,y,C,I,F,X,U,L,qi,ji,Ui,Yi]}class go extends $e{constructor(e){super(),Ee(this,e,_o,mo,ke,{},null,[-1,-1])}}function fn(i){let e,l;return e=new Xi({props:{light:!0,flipped:!0,$$slots:{default:[po]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p(t,n){const o={};n[0]&767|n[1]&1&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function un(i){let e,l;return e=new at({props:{text:"Sort by"}}),e.$on("click",i[20]),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function cn(i){let e,l;return e=new at({props:{text:"Filter"}}),e.$on("click",i[21]),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function dn(i){let e,l,t,n,o,s;return l=new at({props:{disabled:!i[7],text:"Compute embedding"}}),l.$on("click",i[22]),{c(){e=T("div"),B(l.$$.fragment),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);O(l.$$.fragment,a),a.forEach(m),this.h()},h(){D(e,"class","w-full")},m(r,a){N(r,e,a),H(l,e,null),n=!0,o||(s=ye(t=Ie.call(null,e,{text:i[7]?"":"User does not have access to compute embeddings over this dataset."})),o=!0)},p(r,a){const f={};a[0]&128&&(f.disabled=!r[7]),l.$set(f),t&&Be(t.update)&&a[0]&128&&t.update.call(null,{text:r[7]?"":"User does not have access to compute embeddings over this dataset."})},i(r){n||(p(l.$$.fragment,r),n=!0)},o(r){$(l.$$.fragment,r),n=!1},d(r){r&&m(e),R(l),o=!1,s()}}}function mn(i){let e,l,t,n,o,s;return l=new at({props:{text:"Compute concept",disabled:!i[7]||i[9].length===0}}),l.$on("click",i[23]),{c(){e=T("div"),B(l.$$.fragment),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);O(l.$$.fragment,a),a.forEach(m),this.h()},h(){D(e,"class","w-full")},m(r,a){N(r,e,a),H(l,e,null),n=!0,o||(s=ye(t=Ie.call(null,e,{text:i[7]?i[9].length===0?"No embeddings are computed for this field. Compute embeddings before using concepts.":"":"User does not have access to compute concepts over this dataset."})),o=!0)},p(r,a){const f={};a[0]&640&&(f.disabled=!r[7]||r[9].length===0),l.$set(f),t&&Be(t.update)&&a[0]&640&&t.update.call(null,{text:r[7]?r[9].length===0?"No embeddings are computed for this field. Compute embeddings before using concepts.":"":"User does not have access to compute concepts over this dataset."})},i(r){n||(p(l.$$.fragment,r),n=!0)},o(r){$(l.$$.fragment,r),n=!1},d(r){r&&m(e),R(l),o=!1,s()}}}function hn(i){let e,l,t,n,o,s;return l=new at({props:{text:"Compute signal",disabled:!i[7]}}),l.$on("click",i[24]),{c(){e=T("div"),B(l.$$.fragment),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);O(l.$$.fragment,a),a.forEach(m),this.h()},h(){D(e,"class","w-full")},m(r,a){N(r,e,a),H(l,e,null),n=!0,o||(s=ye(t=Ie.call(null,e,{text:i[7]?"":"User does not have access to compute signals over this dataset."})),o=!0)},p(r,a){const f={};a[0]&128&&(f.disabled=!r[7]),l.$set(f),t&&Be(t.update)&&a[0]&128&&t.update.call(null,{text:r[7]?"":"User does not have access to compute signals over this dataset."})},i(r){n||(p(l.$$.fragment,r),n=!0)},o(r){$(l.$$.fragment,r),n=!1},d(r){r&&m(e),R(l),o=!1,s()}}}function _n(i){let e,l;return e=new at({props:{text:"Preview signal"}}),e.$on("click",i[25]),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function gn(i){let e,l,t,n,o,s;return l=new at({props:{disabled:!i[6],text:"Delete signal"}}),l.$on("click",i[26]),{c(){e=T("div"),B(l.$$.fragment),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);O(l.$$.fragment,a),a.forEach(m),this.h()},h(){D(e,"class","w-full")},m(r,a){N(r,e,a),H(l,e,null),n=!0,o||(s=ye(t=Ie.call(null,e,{text:i[6]?"":"User does not have access to delete signals for this dataset."})),o=!0)},p(r,a){const f={};a[0]&64&&(f.disabled=!r[6]),l.$set(f),t&&Be(t.update)&&a[0]&64&&t.update.call(null,{text:r[6]?"":"User does not have access to delete signals for this dataset."})},i(r){n||(p(l.$$.fragment,r),n=!0)},o(r){$(l.$$.fragment,r),n=!1},d(r){r&&m(e),R(l),o=!1,s()}}}function po(i){let e=kt(i[0]),l,t=Tt(i[0]),n,o,s,r,a,f,u,_=e&&un(i),c=t&&cn(i),d=!i[2]&&dn(i),h=!i[2]&&mn(i),b=!i[2]&&hn(i),w=!i[2]&&_n(i),k=i[1]&&gn(i);return{c(){_&&_.c(),l=Q(),c&&c.c(),n=Q(),d&&d.c(),o=Q(),h&&h.c(),s=Q(),b&&b.c(),r=Q(),w&&w.c(),a=Q(),k&&k.c(),f=ue()},l(g){_&&_.l(g),l=W(g),c&&c.l(g),n=W(g),d&&d.l(g),o=W(g),h&&h.l(g),s=W(g),b&&b.l(g),r=W(g),w&&w.l(g),a=W(g),k&&k.l(g),f=ue()},m(g,E){_&&_.m(g,E),N(g,l,E),c&&c.m(g,E),N(g,n,E),d&&d.m(g,E),N(g,o,E),h&&h.m(g,E),N(g,s,E),b&&b.m(g,E),N(g,r,E),w&&w.m(g,E),N(g,a,E),k&&k.m(g,E),N(g,f,E),u=!0},p(g,E){E[0]&1&&(e=kt(g[0])),e?_?(_.p(g,E),E[0]&1&&p(_,1)):(_=un(g),_.c(),p(_,1),_.m(l.parentNode,l)):_&&(te(),$(_,1,1,()=>{_=null}),le()),E[0]&1&&(t=Tt(g[0])),t?c?(c.p(g,E),E[0]&1&&p(c,1)):(c=cn(g),c.c(),p(c,1),c.m(n.parentNode,n)):c&&(te(),$(c,1,1,()=>{c=null}),le()),g[2]?d&&(te(),$(d,1,1,()=>{d=null}),le()):d?(d.p(g,E),E[0]&4&&p(d,1)):(d=dn(g),d.c(),p(d,1),d.m(o.parentNode,o)),g[2]?h&&(te(),$(h,1,1,()=>{h=null}),le()):h?(h.p(g,E),E[0]&4&&p(h,1)):(h=mn(g),h.c(),p(h,1),h.m(s.parentNode,s)),g[2]?b&&(te(),$(b,1,1,()=>{b=null}),le()):b?(b.p(g,E),E[0]&4&&p(b,1)):(b=hn(g),b.c(),p(b,1),b.m(r.parentNode,r)),g[2]?w&&(te(),$(w,1,1,()=>{w=null}),le()):w?(w.p(g,E),E[0]&4&&p(w,1)):(w=_n(g),w.c(),p(w,1),w.m(a.parentNode,a)),g[1]?k?(k.p(g,E),E[0]&2&&p(k,1)):(k=gn(g),k.c(),p(k,1),k.m(f.parentNode,f)):k&&(te(),$(k,1,1,()=>{k=null}),le())},i(g){u||(p(_),p(c),p(d),p(h),p(b),p(w),p(k),u=!0)},o(g){$(_),$(c),$(d),$(h),$(b),$(w),$(k),u=!1},d(g){_&&_.d(g),g&&m(l),c&&c.d(g),g&&m(n),d&&d.d(g),g&&m(o),h&&h.d(g),g&&m(s),b&&b.d(g),g&&m(r),w&&w.d(g),g&&m(a),k&&k.d(g),g&&m(f)}}}function bo(i){let e,l,t,n=qe(i[0].path)+"",o,s,r,a,f;return{c(){e=T("p"),l=Z("Confirm deleting "),t=T("code"),o=Z(n),s=Z(" ?"),r=Q(),a=T("p"),f=Z("This is a permanent action and cannot be undone."),this.h()},l(u){e=V(u,"P",{class:!0});var _=S(e);l=G(_,"Confirm deleting "),t=V(_,"CODE",{});var c=S(t);o=G(c,n),c.forEach(m),s=G(_," ?"),_.forEach(m),r=W(u),a=V(u,"P",{class:!0});var d=S(a);f=G(d,"This is a permanent action and cannot be undone."),d.forEach(m),this.h()},h(){D(e,"class","!text-lg"),D(a,"class","mt-2")},m(u,_){N(u,e,_),v(e,l),v(e,t),v(t,o),v(e,s),N(u,r,_),N(u,a,_),v(a,f)},p(u,_){_[0]&1&&n!==(n=qe(u[0].path)+"")&&fe(o,n)},d(u){u&&m(e),u&&m(r),u&&m(a)}}}function vo(i){let e,l,t,n,o=i[8]&&fn(i);function s(a){i[27](a)}let r={danger:!0,modalHeading:"Delete signal",primaryButtonText:"Delete",primaryButtonIcon:i[10].isLoading?el:void 0,secondaryButtonText:"Cancel",$$slots:{default:[bo]},$$scope:{ctx:i}};return i[3]!==void 0&&(r.open=i[3]),l=new Yt({props:r}),Re.push(()=>We(l,"open",s)),l.$on("click:button--secondary",i[28]),l.$on("open",i[29]),l.$on("close",i[30]),l.$on("submit",i[15]),{c(){o&&o.c(),e=Q(),B(l.$$.fragment)},l(a){o&&o.l(a),e=W(a),O(l.$$.fragment,a)},m(a,f){o&&o.m(a,f),N(a,e,f),H(l,a,f),n=!0},p(a,f){a[8]?o?(o.p(a,f),f[0]&256&&p(o,1)):(o=fn(a),o.c(),p(o,1),o.m(e.parentNode,e)):o&&(te(),$(o,1,1,()=>{o=null}),le());const u={};f[0]&1024&&(u.primaryButtonIcon=a[10].isLoading?el:void 0),f[0]&1|f[1]&1&&(u.$$scope={dirty:f,ctx:a}),!t&&f[0]&8&&(t=!0,u.open=a[3],Ze(()=>t=!1)),l.$set(u)},i(a){n||(p(o),p(l.$$.fragment,a),n=!0)},o(a){$(o),$(l.$$.fragment,a),n=!1},d(a){o&&o.d(a),a&&m(e),R(l,a)}}}function wo(i,e,l){let t,n,o,s,r,a,f,u,_,c,d,h,b,{field:w}=e,k=!1;const g=Ye();we(i,g,z=>l(19,b=z));const E=Xe();we(i,E,z=>l(18,h=z));const y=Ss();we(i,y,z=>l(10,c=z));const M=_t();we(i,M,z=>l(17,d=z));function C(){c.mutate([t,n,{signal_path:w.path}],{onSuccess:()=>{l(3,k=!1),g.deleteSignal(w.path)}})}const I=()=>g.addSortBy(w.path),F=()=>tt({command:lt.EditFilter,namespace:t,datasetName:n,path:w.path}),X=()=>tt({command:lt.ComputeEmbedding,namespace:t,datasetName:n,path:w==null?void 0:w.path}),U=()=>tt({command:lt.ComputeConcept,namespace:t,datasetName:n,path:w==null?void 0:w.path}),j=()=>tt({command:lt.ComputeSignal,namespace:t,datasetName:n,path:w==null?void 0:w.path}),A=()=>tt({command:lt.PreviewConcept,namespace:t,datasetName:n,path:w==null?void 0:w.path}),L=()=>l(3,k=!0);function ie(z){k=z,l(3,k)}const q=()=>l(3,k=!1);function Y(z){bt.call(this,i,z)}function K(z){bt.call(this,i,z)}return i.$$set=z=>{"field"in z&&l(0,w=z.field)},i.$$.update=()=>{var z,ee,se;i.$$.dirty[0]&524288&&l(5,t=b.namespace),i.$$.dirty[0]&524288&&l(4,n=b.datasetName),i.$$.dirty[0]&1&&l(2,o=rt(w)),i.$$.dirty[0]&1&&l(1,s=Ht(w)),i.$$.dirty[0]&262145&&l(9,r=wt(h.schema,w.path)),i.$$.dirty[0]&262145&&l(16,a=$i(((z=h.selectRowsSchema)==null?void 0:z.data)||null,w.path)),i.$$.dirty[0]&65543&&l(8,f=(kt(w)||Tt(w)||!o||s)&&!a),i.$$.dirty[0]&131072&&l(7,u=(ee=d.data)==null?void 0:ee.access.dataset.compute_signals),i.$$.dirty[0]&131072&&l(6,_=(se=d.data)==null?void 0:se.access.dataset.delete_signals)},[w,s,o,k,n,t,_,u,f,r,c,g,E,y,M,C,a,d,h,b,I,F,X,U,j,A,L,ie,q,Y,K]}class ko extends $e{constructor(e){super(),Ee(this,e,wo,vo,ke,{field:0},null,[-1,-1])}}function $o(i){let e,l,t,n,o;const s=[i[3],{type:i[0]?"green":"blue"},{icon:i[2]}];let r={};for(let a=0;a<s.length;a+=1)r=be(r,s[a]);return l=new xe({props:r}),{c(){e=T("div"),B(l.$$.fragment),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);O(l.$$.fragment,f),f.forEach(m),this.h()},h(){D(e,"class","signal-badge")},m(a,f){N(a,e,f),H(l,e,null),t=!0,n||(o=ye(Ie.call(null,e,{text:i[1]})),n=!0)},p(a,[f]){const u=f&13?Le(s,[f&8&&ai(a[3]),f&1&&{type:a[0]?"green":"blue"},f&4&&{icon:a[2]}]):{};l.$set(u)},i(a){t||(p(l.$$.fragment,a),t=!0)},o(a){$(l.$$.fragment,a),t=!1},d(a){a&&m(e),R(l),n=!1,o()}}}function Eo(i,e,l){const t=["isPreview"];let n=Te(e,t),{isPreview:o=!1}=e;const s=o?"Signal is in preview mode and has not been computed for the whole dataset.":"Generated by a signal.",r=o?Zs:yr;return i.$$set=a=>{e=be(be({},e),Ve(a)),l(3,n=Te(e,t)),"isPreview"in a&&l(0,o=a.isPreview)},[o,s,r,n]}class So extends $e{constructor(e){super(),Ee(this,e,Eo,$o,ke,{isPreview:0})}}function pn(i,e,l){const t=i.slice();t[7]=e[l][0],t[8]=e[l][1];const n=t[2](t[7]);t[9]=n;const o=`${t[8]/t[1]*100}%`;t[10]=o;const s=De(t[8]);return t[11]=s,t}function bn(i){let e,l,t=i[9]+"",n,o,s,r,a,f=i[11]+"",u,_,c,d,h;function b(){return i[6](i[7])}return{c(){e=T("button"),l=T("div"),n=Z(t),s=Q(),r=T("div"),a=T("div"),u=Z(f),c=Q(),this.h()},l(w){e=V(w,"BUTTON",{class:!0});var k=S(e);l=V(k,"DIV",{title:!0,class:!0});var g=S(l);n=G(g,t),g.forEach(m),s=W(k),r=V(k,"DIV",{class:!0});var E=S(r);a=V(E,"DIV",{title:!0,class:!0});var y=S(a);u=G(y,f),y.forEach(m),E.forEach(m),c=W(k),k.forEach(m),this.h()},h(){D(l,"title",o=i[9]),D(l,"class","w-48 flex-none truncate px-2"),D(a,"title",_=i[11]),D(a,"class","histogram-bar my-px bg-indigo-200 pl-2 text-xs leading-5"),ct(a,"width",i[10]),D(r,"class","w-36 border-l border-gray-300 pl-2"),D(e,"class","flex items-center p-0 text-left text-xs text-black hover:bg-gray-200")},m(w,k){N(w,e,k),v(e,l),v(l,n),v(e,s),v(e,r),v(r,a),v(a,u),v(e,c),d||(h=Ae(e,"click",b),d=!0)},p(w,k){i=w,k&1&&t!==(t=i[9]+"")&&fe(n,t),k&1&&o!==(o=i[9])&&D(l,"title",o),k&1&&f!==(f=i[11]+"")&&fe(u,f),k&1&&_!==(_=i[11])&&D(a,"title",_),k&3&&ct(a,"width",i[10])},d(w){w&&m(e),d=!1,h()}}}function yo(i){let e,l=i[0],t=[];for(let n=0;n<l.length;n+=1)t[n]=bn(pn(i,l,n));return{c(){e=T("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=V(n,"DIV",{class:!0});var o=S(e);for(let s=0;s<t.length;s+=1)t[s].l(o);o.forEach(m),this.h()},h(){D(e,"class","histogram")},m(n,o){N(n,e,o);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(n,[o]){if(o&15){l=n[0];let s;for(s=0;s<l.length;s+=1){const r=pn(n,l,s);t[s]?t[s].p(r,o):(t[s]=bn(r),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=l.length}},i:x,o:x,d(n){n&&m(e),He(t,n)}}}function Io(i,e,l){let t,{field:n}=e,{counts:o}=e,{bins:s}=e;function r(u){if(u==null)return De(u);if(s==null||n.bins!=null)return De(u);const[_,c]=s[u.toString()];return _==null?`< ${De(c)}`:c==null?`≥ ${De(_)}`:`${De(_)} .. ${De(c)}`}const a=ht(),f=u=>a("row-click",{value:u});return i.$$set=u=>{"field"in u&&l(4,n=u.field),"counts"in u&&l(0,o=u.counts),"bins"in u&&l(5,s=u.bins)},i.$$.update=()=>{i.$$.dirty&1&&l(1,t=Math.max(...o.map(([u,_])=>_)))},[o,t,r,a,n,s,f]}class Do extends $e{constructor(e){super(),Ee(this,e,Io,yo,ke,{field:4,counts:0,bins:5})}}function To(i){let e,l,t,n,o,s,r,a,f,u,_,c=De(i[4].total_count)+"",d,h,b,w,k,g,E,y,M,C,I,F,X=De(i[4].approx_count_distinct)+"",U,j,A,L,ie,q;s=new mt({props:{class:"inline"}}),g=new mt({props:{class:"inline"}});let Y=i[4].avg_text_length&&vn(i),K=i[4].min_val&&i[4].max_val&&wn(i);return{c(){e=T("table"),l=T("tbody"),t=T("tr"),n=T("td"),o=T("span"),B(s.$$.fragment),r=Q(),a=T("span"),f=Z("Total count"),u=Q(),_=T("td"),d=Z(c),h=Q(),b=T("tr"),w=T("td"),k=T("span"),B(g.$$.fragment),E=Q(),y=T("span"),M=Z("Unique values"),C=Q(),I=T("td"),F=Z("~"),U=Z(X),j=Q(),Y&&Y.c(),A=Q(),K&&K.c(),this.h()},l(z){e=V(z,"TABLE",{class:!0});var ee=S(e);l=V(ee,"TBODY",{});var se=S(l);t=V(se,"TR",{});var re=S(t);n=V(re,"TD",{class:!0});var ce=S(n);o=V(ce,"SPAN",{});var ae=S(o);O(s.$$.fragment,ae),ae.forEach(m),r=W(ce),a=V(ce,"SPAN",{});var de=S(a);f=G(de,"Total count"),de.forEach(m),ce.forEach(m),u=W(re),_=V(re,"TD",{class:!0});var ve=S(_);d=G(ve,c),ve.forEach(m),re.forEach(m),h=W(se),b=V(se,"TR",{});var J=S(b);w=V(J,"TD",{class:!0});var P=S(w);k=V(P,"SPAN",{});var ne=S(k);O(g.$$.fragment,ne),ne.forEach(m),E=W(P),y=V(P,"SPAN",{});var he=S(y);M=G(he,"Unique values"),he.forEach(m),P.forEach(m),C=W(J),I=V(J,"TD",{class:!0});var Se=S(I);F=G(Se,"~"),U=G(Se,X),Se.forEach(m),J.forEach(m),j=W(se),Y&&Y.l(se),A=W(se),K&&K.l(se),se.forEach(m),ee.forEach(m),this.h()},h(){D(n,"class","svelte-1tctrjz"),D(_,"class","svelte-1tctrjz"),D(w,"class","svelte-1tctrjz"),D(I,"class","svelte-1tctrjz"),D(e,"class","stats-table w-full svelte-1tctrjz")},m(z,ee){N(z,e,ee),v(e,l),v(l,t),v(t,n),v(n,o),H(s,o,null),v(n,r),v(n,a),v(a,f),v(t,u),v(t,_),v(_,d),v(l,h),v(l,b),v(b,w),v(w,k),H(g,k,null),v(w,E),v(w,y),v(y,M),v(b,C),v(b,I),v(I,F),v(I,U),v(l,j),Y&&Y.m(l,null),v(l,A),K&&K.m(l,null),L=!0,ie||(q=[ye(Ie.call(null,o,{text:"Total number of rows where the value is defined."})),ye(Ie.call(null,k,{text:"An approximation of the total number of unique values."}))],ie=!0)},p(z,ee){(!L||ee&16)&&c!==(c=De(z[4].total_count)+"")&&fe(d,c),(!L||ee&16)&&X!==(X=De(z[4].approx_count_distinct)+"")&&fe(U,X),z[4].avg_text_length?Y?(Y.p(z,ee),ee&16&&p(Y,1)):(Y=vn(z),Y.c(),p(Y,1),Y.m(l,A)):Y&&(te(),$(Y,1,1,()=>{Y=null}),le()),z[4].min_val&&z[4].max_val?K?(K.p(z,ee),ee&16&&p(K,1)):(K=wn(z),K.c(),p(K,1),K.m(l,null)):K&&(te(),$(K,1,1,()=>{K=null}),le())},i(z){L||(p(s.$$.fragment,z),p(g.$$.fragment,z),p(Y),p(K),L=!0)},o(z){$(s.$$.fragment,z),$(g.$$.fragment,z),$(Y),$(K),L=!1},d(z){z&&m(e),R(s),R(g),Y&&Y.d(),K&&K.d(),ie=!1,Ge(q)}}}function Vo(i){let e,l;return e=new Oe({props:{paragraph:!0,width:"50%"}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function No(i){let e,l,t=i[2].error.message+"",n;return{c(){e=T("p"),l=Z("Error: "),n=Z(t)},l(o){e=V(o,"P",{});var s=S(e);l=G(s,"Error: "),n=G(s,t),s.forEach(m)},m(o,s){N(o,e,s),v(e,l),v(e,n)},p(o,s){s&4&&t!==(t=o[2].error.message+"")&&fe(n,t)},i:x,o:x,d(o){o&&m(e)}}}function vn(i){let e,l,t,n,o,s,r,a,f,u=De(i[4].avg_text_length)+"",_,c,d,h;return n=new mt({props:{class:"inline"}}),{c(){e=T("tr"),l=T("td"),t=T("span"),B(n.$$.fragment),o=Q(),s=T("span"),r=Z("Average text length"),a=Q(),f=T("td"),_=Z(u),this.h()},l(b){e=V(b,"TR",{});var w=S(e);l=V(w,"TD",{class:!0});var k=S(l);t=V(k,"SPAN",{});var g=S(t);O(n.$$.fragment,g),g.forEach(m),o=W(k),s=V(k,"SPAN",{});var E=S(s);r=G(E,"Average text length"),E.forEach(m),k.forEach(m),a=W(w),f=V(w,"TD",{class:!0});var y=S(f);_=G(y,u),y.forEach(m),w.forEach(m),this.h()},h(){D(l,"class","svelte-1tctrjz"),D(f,"class","svelte-1tctrjz")},m(b,w){N(b,e,w),v(e,l),v(l,t),H(n,t,null),v(l,o),v(l,s),v(s,r),v(e,a),v(e,f),v(f,_),c=!0,d||(h=ye(Ie.call(null,t,{text:"The average length of the text in characters."})),d=!0)},p(b,w){(!c||w&16)&&u!==(u=De(b[4].avg_text_length)+"")&&fe(_,u)},i(b){c||(p(n.$$.fragment,b),c=!0)},o(b){$(n.$$.fragment,b),c=!1},d(b){b&&m(e),R(n),d=!1,h()}}}function wn(i){let e,l,t,n,o,s,r,a,f,u=De(i[4].min_val)+"",_,c,d=De(i[4].max_val)+"",h,b,w,k;return n=new mt({props:{class:"inline"}}),{c(){e=T("tr"),l=T("td"),t=T("span"),B(n.$$.fragment),o=Q(),s=T("span"),r=Z("Range"),a=Q(),f=T("td"),_=Z(u),c=Z(" .. "),h=Z(d),this.h()},l(g){e=V(g,"TR",{});var E=S(e);l=V(E,"TD",{class:!0});var y=S(l);t=V(y,"SPAN",{});var M=S(t);O(n.$$.fragment,M),M.forEach(m),o=W(y),s=V(y,"SPAN",{});var C=S(s);r=G(C,"Range"),C.forEach(m),y.forEach(m),a=W(E),f=V(E,"TD",{class:!0});var I=S(f);_=G(I,u),c=G(I," .. "),h=G(I,d),I.forEach(m),E.forEach(m),this.h()},h(){D(l,"class","svelte-1tctrjz"),D(f,"class","svelte-1tctrjz")},m(g,E){N(g,e,E),v(e,l),v(l,t),H(n,t,null),v(l,o),v(l,s),v(s,r),v(e,a),v(e,f),v(f,_),v(f,c),v(f,h),b=!0,w||(k=ye(Ie.call(null,t,{text:"The minimum and maximum value across the dataset"})),w=!0)},p(g,E){(!b||E&16)&&u!==(u=De(g[4].min_val)+"")&&fe(_,u),(!b||E&16)&&d!==(d=De(g[4].max_val)+"")&&fe(h,d)},i(g){b||(p(n.$$.fragment,g),b=!0)},o(g){$(n.$$.fragment,g),b=!1},d(g){g&&m(e),R(n),w=!1,k()}}}function Mo(i){let e,l,t;return l=new Do({props:{counts:i[5],bins:i[3],field:i[0]}}),l.$on("row-click",i[13]),{c(){e=T("div"),B(l.$$.fragment),this.h()},l(n){e=V(n,"DIV",{class:!0});var o=S(e);O(l.$$.fragment,o),o.forEach(m),this.h()},h(){D(e,"class","mt-4")},m(n,o){N(n,e,o),H(l,e,null),t=!0},p(n,o){const s={};o&32&&(s.counts=n[5]),o&8&&(s.bins=n[3]),o&1&&(s.field=n[0]),l.$set(s)},i(n){t||(p(l.$$.fragment,n),t=!0)},o(n){$(l.$$.fragment,n),t=!1},d(n){n&&m(e),R(l)}}}function Co(i){let e,l;return e=new Oe({props:{paragraph:!0,width:"50%"}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function zo(i){let e,l,t=i[1].error.message+"",n;return{c(){e=T("p"),l=Z("Error: "),n=Z(t)},l(o){e=V(o,"P",{});var s=S(e);l=G(s,"Error: "),n=G(s,t),s.forEach(m)},m(o,s){N(o,e,s),v(e,l),v(e,n)},p(o,s){s&2&&t!==(t=o[1].error.message+"")&&fe(n,t)},i:x,o:x,d(o){o&&m(e)}}}function Fo(i){let e,l,t,n,o,s,r;const a=[No,Vo,To],f=[];function u(h,b){return h[2].error?0:h[4]==null?1:2}l=u(i),t=f[l]=a[l](i);const _=[zo,Co,Mo],c=[];function d(h,b){return h[1].error?0:h[5]==null?1:h[5].length>0?2:-1}return~(o=d(i))&&(s=c[o]=_[o](i)),{c(){e=T("div"),t.c(),n=Q(),s&&s.c(),this.h()},l(h){e=V(h,"DIV",{class:!0});var b=S(e);t.l(b),n=W(b),s&&s.l(b),b.forEach(m),this.h()},h(){D(e,"class","p-4")},m(h,b){N(h,e,b),f[l].m(e,null),v(e,n),~o&&c[o].m(e,null),r=!0},p(h,[b]){let w=l;l=u(h),l===w?f[l].p(h,b):(te(),$(f[w],1,1,()=>{f[w]=null}),le(),t=f[l],t?t.p(h,b):(t=f[l]=a[l](h),t.c()),p(t,1),t.m(e,n));let k=o;o=d(h),o===k?~o&&c[o].p(h,b):(s&&(te(),$(c[k],1,1,()=>{c[k]=null}),le()),~o?(s=c[o],s?s.p(h,b):(s=c[o]=_[o](h),s.c()),p(s,1),s.m(e,null)):s=null)},i(h){r||(p(t),p(s),r=!0)},o(h){$(t),$(s),r=!1},d(h){h&&m(e),f[l].d(),~o&&c[o].d()}}}function Po(i,e,l){let t,n,o,s,r,a=x,f=()=>(a(),a=Me(n,M=>l(1,r=M)),n),u,_=x,c=()=>(_(),_=Me(t,M=>l(2,u=M)),t),d;i.$$.on_destroy.push(()=>a()),i.$$.on_destroy.push(()=>_());let{field:h}=e;const b=Ye();we(i,b,M=>l(12,d=M));let w,k,g=null;function E(M){if(M==null)return;if(g!=null){const[I,F]=g[M.toString()];if(I!=null){const X={path:h.path,op:"greater_equal",value:I};b.addFilter(X)}if(F!=null){const X={path:h.path,op:"less",value:F};b.addFilter(X)}return}const C={path:h.path,op:"equals",value:M};b.addFilter(C)}const y=M=>E(M.detail.value);return i.$$set=M=>{"field"in M&&l(0,h=M.field)},i.$$.update=()=>{var M;if(i.$$.dirty&4097&&c(l(7,t=Ei(d.namespace,d.datasetName,{leaf_path:h.path}))),i.$$.dirty&1&&l(10,w=ki(h.dtype)&&!h.categorical?"value":"count"),i.$$.dirty&1024&&l(11,k=w==="value"?"ASC":"DESC"),i.$$.dirty&7169&&f(l(6,n=Si(d.namespace,d.datasetName,{leaf_path:h.path,filters:d.query.filters,sort_by:w,sort_order:k}))),i.$$.dirty&2&&l(5,o=r.data!=null?r.data.counts:null),i.$$.dirty&4&&l(4,s=u.data!=null?u.data:null),i.$$.dirty&2)if(((M=r.data)==null?void 0:M.bins)!=null){l(3,g={});for(const[C,I,F]of Object.values(r.data.bins))l(3,g[C]=[I,F],g)}else l(3,g=null)},[h,r,u,g,s,o,n,t,b,E,w,k,d,y]}class Ao extends $e{constructor(e){super(),Ee(this,e,Po,Fo,ke,{field:0})}}function kn(i,e,l){const t=i.slice();return t[40]=e[l],t}function $n(i,e,l){const t=i.slice();return t[43]=e[l],t}function En(i,e,l){const t=i.slice();return t[46]=e[l],t}function Sn(i,e,l){const t=i.slice();return t[49]=e[l],t}function Bo(i){let e,l="{}",t;return{c(){e=T("span"),t=Z(l),this.h()},l(n){e=V(n,"SPAN",{class:!0});var o=S(e);t=G(o,l),o.forEach(m),this.h()},h(){D(e,"class","font-mono")},m(n,o){N(n,e,o),v(e,t)},p:x,i:x,o:x,d(n){n&&m(e)}}}function Ho(i){let e,l,t,n;var o=ft[i[1].repeated_field.dtype];function s(r){return{props:{title:r[1].dtype||void 0}}}return o&&(l=ot(o,s(i))),{c(){e=T("div"),l&&B(l.$$.fragment),t=Z("[]"),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);l&&O(l.$$.fragment,a),t=G(a,"[]"),a.forEach(m),this.h()},h(){D(e,"class","flex")},m(r,a){N(r,e,a),l&&H(l,e,null),v(e,t),n=!0},p(r,a){const f={};if(a[0]&2&&(f.title=r[1].dtype||void 0),a[0]&2&&o!==(o=ft[r[1].repeated_field.dtype])){if(l){te();const u=l;$(u.$$.fragment,1,0,()=>{R(u,1)}),le()}o?(l=ot(o,s(r)),B(l.$$.fragment),p(l.$$.fragment,1),H(l,e,t)):l=null}else o&&l.$set(f)},i(r){n||(l&&p(l.$$.fragment,r),n=!0)},o(r){l&&$(l.$$.fragment,r),n=!1},d(r){r&&m(e),l&&R(l)}}}function Ro(i){let e,l,t;var n=ft[i[1].dtype];function o(s){return{props:{title:s[1].dtype}}}return n&&(e=ot(n,o(i))),{c(){e&&B(e.$$.fragment),l=ue()},l(s){e&&O(e.$$.fragment,s),l=ue()},m(s,r){e&&H(e,s,r),N(s,l,r),t=!0},p(s,r){const a={};if(r[0]&2&&(a.title=s[1].dtype),r[0]&2&&n!==(n=ft[s[1].dtype])){if(e){te();const f=e;$(f.$$.fragment,1,0,()=>{R(f,1)}),le()}n?(e=ot(n,o(s)),B(e.$$.fragment),p(e.$$.fragment,1),H(e,l.parentNode,l)):e=null}else n&&e.$set(a)},i(s){t||(e&&p(e.$$.fragment,s),t=!0)},o(s){e&&$(e.$$.fragment,s),t=!1},d(s){s&&m(l),e&&R(e,s)}}}function yn(i){let e,l;return e=new St({props:{interactive:!0,type:"green",$$slots:{default:[qo]},$$scope:{ctx:i}}}),e.$on("click",i[34]),e.$on("remove",i[35]),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p(t,n){const o={};n[0]&65536|n[1]&2097152&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Lo(i){let e,l;return e=new Bi({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Oo(i){let e,l;return e=new Ai({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function qo(i){let e,l,t,n,o,s,r,a;const f=[Oo,Lo],u=[];function _(c,d){return c[16]=="ASC"?0:1}return s=_(i),r=u[s]=f[s](i),{c(){e=T("div"),l=T("div"),t=Z("Sorted"),n=Q(),o=T("span"),r.c(),this.h()},l(c){e=V(c,"DIV",{class:!0});var d=S(e);l=V(d,"DIV",{class:!0});var h=S(l);t=G(h,"Sorted"),h.forEach(m),n=W(d),o=V(d,"SPAN",{});var b=S(o);r.l(b),b.forEach(m),d.forEach(m),this.h()},h(){D(l,"class","mr-1"),D(e,"class","flex flex-row")},m(c,d){N(c,e,d),v(e,l),v(l,t),v(e,n),v(e,o),u[s].m(o,null),a=!0},p(c,d){let h=s;s=_(c),s!==h&&(te(),$(u[h],1,1,()=>{u[h]=null}),le(),r=u[s],r||(r=u[s]=f[s](c),r.c()),p(r,1),r.m(o,null))},i(c){a||(p(r),a=!0)},o(c){$(r),a=!1},d(c){c&&m(e),u[s].d()}}}function In(i){let e,l,t=i[7],n=[];for(let s=0;s<t.length;s+=1)n[s]=Dn(Sn(i,t,s));const o=s=>$(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ue()},l(s){for(let r=0;r<n.length;r+=1)n[r].l(s);e=ue()},m(s,r){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(s,r);N(s,e,r),l=!0},p(s,r){if(r[0]&129){t=s[7];let a;for(a=0;a<t.length;a+=1){const f=Sn(s,t,a);n[a]?(n[a].p(f,r),p(n[a],1)):(n[a]=Dn(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(te(),a=t.length;a<n.length;a+=1)o(a);le()}},i(s){if(!l){for(let r=0;r<t.length;r+=1)p(n[r]);l=!0}},o(s){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)$(n[r]);l=!1},d(s){He(n,s),s&&m(e)}}}function Dn(i){let e,l;return e=new Ri({props:{schema:i[0],filter:i[49],hidePath:!0}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p(t,n){const o={};n[0]&1&&(o.schema=t[0]),n[0]&128&&(o.filter=t[49]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Tn(i){let e,l;return e=new Li({props:{search:i[46]}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p(t,n){const o={};n[0]&16384&&(o.search=t[46]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Vn(i){var t;let e,l;return e=new Ni({props:{embedding:(t=i[43].signal)==null?void 0:t.signal_name}}),{c(){B(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,o){H(e,n,o),l=!0},p(n,o){var r;const s={};o[0]&262144&&(s.embedding=(r=n[43].signal)==null?void 0:r.signal_name),e.$set(s)},i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){$(e.$$.fragment,n),l=!1},d(n){R(e,n)}}}function Nn(i){let e,l,t,n,o,s,r;return l=new xe({props:{type:"cyan",icon:Ti}}),l.$on("click",i[36]),n=new So({props:{isPreview:!0}}),n.$on("click",i[37]),{c(){e=T("div"),B(l.$$.fragment),t=Q(),B(n.$$.fragment),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);O(l.$$.fragment,f),f.forEach(m),t=W(a),O(n.$$.fragment,a),this.h()},h(){D(e,"class","compute-signal-preview pointer-events-auto")},m(a,f){N(a,e,f),H(l,e,null),N(a,t,f),H(n,a,f),o=!0,s||(r=ye(Ie.call(null,e,{text:`Compute signal over the column and save the result.

This may be expensive.`})),s=!0)},p:x,i(a){o||(p(l.$$.fragment,a),p(n.$$.fragment,a),o=!0)},o(a){$(l.$$.fragment,a),$(n.$$.fragment,a),o=!1},d(a){a&&m(e),R(l),a&&m(t),R(n,a),s=!1,r()}}}function Mn(i){let e,l,t,n,o,s,r;return t=new Xs({}),{c(){e=T("button"),l=T("div"),B(t.$$.fragment),this.h()},l(a){e=V(a,"BUTTON",{});var f=S(e);l=V(f,"DIV",{class:!0});var u=S(l);O(t.$$.fragment,u),u.forEach(m),f.forEach(m),this.h()},h(){D(l,"class","transition"),oe(l,"rotate-180",i[21]),oe(e,"bg-slate-300",i[21])},m(a,f){N(a,e,f),v(e,l),H(t,l,null),o=!0,s||(r=[ye(n=Ie.call(null,e,{text:i[21]?"Close statistics":"See statistics"})),Ae(e,"click",i[38])],s=!0)},p(a,f){(!o||f[0]&2097152)&&oe(l,"rotate-180",a[21]),n&&Be(n.update)&&f[0]&2097152&&n.update.call(null,{text:a[21]?"Close statistics":"See statistics"}),(!o||f[0]&2097152)&&oe(e,"bg-slate-300",a[21])},i(a){o||(p(t.$$.fragment,a),o=!0)},o(a){$(t.$$.fragment,a),o=!1},d(a){a&&m(e),R(t),s=!1,Ge(r)}}}function Cn(i){let e,l,t,n;return l=new Ao({props:{field:i[1]}}),{c(){e=T("div"),B(l.$$.fragment),this.h()},l(o){e=V(o,"DIV",{class:!0});var s=S(e);O(l.$$.fragment,s),s.forEach(m),this.h()},h(){D(e,"class","px-2")},m(o,s){N(o,e,s),H(l,e,null),n=!0},p(o,s){const r={};s[0]&2&&(r.field=o[1]),l.$set(r)},i(o){n||(p(l.$$.fragment,o),o&&Mt(()=>{n&&(t||(t=vt(e,Et,{},!0)),t.run(1))}),n=!0)},o(o){$(l.$$.fragment,o),o&&(t||(t=vt(e,Et,{},!1)),t.run(0)),n=!1},d(o){o&&m(e),R(l),o&&t&&t.end()}}}function zn(i){let e,l,t=i[19],n=[];for(let s=0;s<t.length;s+=1)n[s]=Fn(kn(i,t,s));const o=s=>$(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ue()},l(s){for(let r=0;r<n.length;r+=1)n[r].l(s);e=ue()},m(s,r){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(s,r);N(s,e,r),l=!0},p(s,r){if(r[0]&524559){t=s[19];let a;for(a=0;a<t.length;a+=1){const f=kn(s,t,a);n[a]?(n[a].p(f,r),p(n[a],1)):(n[a]=Fn(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(te(),a=t.length;a<n.length;a+=1)o(a);le()}},i(s){if(!l){for(let r=0;r<t.length;r+=1)p(n[r]);l=!0}},o(s){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)$(n[r]);l=!1},d(s){He(n,s),s&&m(e)}}}function Fn(i){let e,l;return e=new Oi({props:{schema:i[0],field:i[40],indent:i[3]+1,sourceField:i[8]&&rt(i[40])?i[1]:i[2]}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p(t,n){const o={};n[0]&1&&(o.schema=t[0]),n[0]&524288&&(o.field=t[40]),n[0]&8&&(o.indent=t[3]+1),n[0]&524550&&(o.sourceField=t[8]&&rt(t[40])?t[1]:t[2]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function jo(i){let e,l,t,n,o,s,r,a,f,u,_,c,d,h,b,w,k,g,E,y,M,C,I,F,X,U,j;const A=[Ro,Ho,Bo],L=[];function ie(P,ne){return P[1].dtype?0:P[1].repeated_field&&P[1].repeated_field.dtype?1:2}n=ie(i),o=L[n]=A[n](i);let q=i[17]&&yn(i),Y=i[15]&&In(i),K=i[14],z=[];for(let P=0;P<K.length;P+=1)z[P]=Tn(En(i,K,P));const ee=P=>$(z[P],1,1,()=>{z[P]=null});let se=i[18],re=[];for(let P=0;P<se.length;P+=1)re[P]=Vn($n(i,se,P));const ce=P=>$(re[P],1,1,()=>{re[P]=null});let ae=i[4]&&i[22]&&Nn(i),de=i[12]&&Mn(i);y=new ko({props:{field:i[1]}});let ve=i[21]&&Cn(i),J=i[19].length&&zn(i);return{c(){e=T("div"),l=T("div"),t=T("div"),o.c(),r=Q(),a=T("div"),f=T("button"),u=Z(i[20]),d=Q(),q&&q.c(),h=Q(),Y&&Y.c(),b=Q();for(let P=0;P<z.length;P+=1)z[P].c();w=Q();for(let P=0;P<re.length;P+=1)re[P].c();k=Q(),ae&&ae.c(),g=Q(),de&&de.c(),E=Q(),B(y.$$.fragment),M=Q(),ve&&ve.c(),C=Q(),I=T("div"),J&&J.c(),this.h()},l(P){e=V(P,"DIV",{class:!0});var ne=S(e);l=V(ne,"DIV",{class:!0});var he=S(l);t=V(he,"DIV",{class:!0});var Se=S(t);o.l(Se),Se.forEach(m),r=W(he),a=V(he,"DIV",{class:!0});var _e=S(a);f=V(_e,"BUTTON",{class:!0});var Ne=S(f);u=G(Ne,i[20]),Ne.forEach(m),_e.forEach(m),d=W(he),q&&q.l(he),h=W(he),Y&&Y.l(he),b=W(he);for(let Ke=0;Ke<z.length;Ke+=1)z[Ke].l(he);w=W(he);for(let Ke=0;Ke<re.length;Ke+=1)re[Ke].l(he);k=W(he),ae&&ae.l(he),g=W(he),de&&de.l(he),E=W(he),O(y.$$.fragment,he),he.forEach(m),M=W(ne),ve&&ve.l(ne),C=W(ne),I=V(ne,"DIV",{});var Qe=S(I);J&&J.l(Qe),Qe.forEach(m),ne.forEach(m),this.h()},h(){D(t,"class","rounded-md bg-blue-200 p-0.5"),oe(t,"bg-blue-200",i[5]),ct(t,"margin-left",i[3]*1.5+"rem"),D(f,"class","ml-2 w-full cursor-pointer truncate whitespace-nowrap text-left text-gray-900"),f.disabled=_=!i[12],oe(f,"cursor-default",!i[12]),D(a,"class","grow"),D(l,"class","flex w-full flex-row items-center gap-x-2 border-gray-300 px-4 hover:bg-gray-100"),oe(l,"bg-blue-50",i[5]),oe(l,"bg-emerald-100",i[4]),oe(l,"bg-teal-100",i[9]),oe(l,"hover:bg-blue-100",i[5]),D(e,"class","border-gray-300"),oe(e,"border-b",i[8])},m(P,ne){N(P,e,ne),v(e,l),v(l,t),L[n].m(t,null),v(l,r),v(l,a),v(a,f),v(f,u),v(l,d),q&&q.m(l,null),v(l,h),Y&&Y.m(l,null),v(l,b);for(let he=0;he<z.length;he+=1)z[he]&&z[he].m(l,null);v(l,w);for(let he=0;he<re.length;he+=1)re[he]&&re[he].m(l,null);v(l,k),ae&&ae.m(l,null),v(l,g),de&&de.m(l,null),v(l,E),H(y,l,null),v(e,M),ve&&ve.m(e,null),v(e,C),v(e,I),J&&J.m(I,null),X=!0,U||(j=[ye(s=Ie.call(null,t,{text:i[13]})),Ae(f,"click",i[33]),ye(c=Ie.call(null,a,{text:i[11]||""}))],U=!0)},p(P,ne){let he=n;if(n=ie(P),n===he?L[n].p(P,ne):(te(),$(L[he],1,1,()=>{L[he]=null}),le(),o=L[n],o?o.p(P,ne):(o=L[n]=A[n](P),o.c()),p(o,1),o.m(t,null)),s&&Be(s.update)&&ne[0]&8192&&s.update.call(null,{text:P[13]}),(!X||ne[0]&32)&&oe(t,"bg-blue-200",P[5]),ne[0]&8&&ct(t,"margin-left",P[3]*1.5+"rem"),(!X||ne[0]&1048576)&&fe(u,P[20]),(!X||ne[0]&4096&&_!==(_=!P[12]))&&(f.disabled=_),(!X||ne[0]&4096)&&oe(f,"cursor-default",!P[12]),c&&Be(c.update)&&ne[0]&2048&&c.update.call(null,{text:P[11]||""}),P[17]?q?(q.p(P,ne),ne[0]&131072&&p(q,1)):(q=yn(P),q.c(),p(q,1),q.m(l,h)):q&&(te(),$(q,1,1,()=>{q=null}),le()),P[15]?Y?(Y.p(P,ne),ne[0]&32768&&p(Y,1)):(Y=In(P),Y.c(),p(Y,1),Y.m(l,b)):Y&&(te(),$(Y,1,1,()=>{Y=null}),le()),ne[0]&16384){K=P[14];let _e;for(_e=0;_e<K.length;_e+=1){const Ne=En(P,K,_e);z[_e]?(z[_e].p(Ne,ne),p(z[_e],1)):(z[_e]=Tn(Ne),z[_e].c(),p(z[_e],1),z[_e].m(l,w))}for(te(),_e=K.length;_e<z.length;_e+=1)ee(_e);le()}if(ne[0]&262144){se=P[18];let _e;for(_e=0;_e<se.length;_e+=1){const Ne=$n(P,se,_e);re[_e]?(re[_e].p(Ne,ne),p(re[_e],1)):(re[_e]=Vn(Ne),re[_e].c(),p(re[_e],1),re[_e].m(l,k))}for(te(),_e=se.length;_e<re.length;_e+=1)ce(_e);le()}P[4]&&P[22]?ae?(ae.p(P,ne),ne[0]&4194320&&p(ae,1)):(ae=Nn(P),ae.c(),p(ae,1),ae.m(l,g)):ae&&(te(),$(ae,1,1,()=>{ae=null}),le()),P[12]?de?(de.p(P,ne),ne[0]&4096&&p(de,1)):(de=Mn(P),de.c(),p(de,1),de.m(l,E)):de&&(te(),$(de,1,1,()=>{de=null}),le());const Se={};ne[0]&2&&(Se.field=P[1]),y.$set(Se),(!X||ne[0]&32)&&oe(l,"bg-blue-50",P[5]),(!X||ne[0]&16)&&oe(l,"bg-emerald-100",P[4]),(!X||ne[0]&512)&&oe(l,"bg-teal-100",P[9]),(!X||ne[0]&32)&&oe(l,"hover:bg-blue-100",P[5]),P[21]?ve?(ve.p(P,ne),ne[0]&2097152&&p(ve,1)):(ve=Cn(P),ve.c(),p(ve,1),ve.m(e,C)):ve&&(te(),$(ve,1,1,()=>{ve=null}),le()),P[19].length?J?(J.p(P,ne),ne[0]&524288&&p(J,1)):(J=zn(P),J.c(),p(J,1),J.m(I,null)):J&&(te(),$(J,1,1,()=>{J=null}),le()),(!X||ne[0]&256)&&oe(e,"border-b",P[8])},i(P){if(!X){p(o),p(q),p(Y);for(let ne=0;ne<K.length;ne+=1)p(z[ne]);for(let ne=0;ne<se.length;ne+=1)p(re[ne]);p(ae),p(de),p(y.$$.fragment,P),p(ve),p(J),P&&Mt(()=>{X&&(F||(F=vt(I,Et,{},!0)),F.run(1))}),X=!0}},o(P){$(o),$(q),$(Y),z=z.filter(Boolean);for(let ne=0;ne<z.length;ne+=1)$(z[ne]);re=re.filter(Boolean);for(let ne=0;ne<re.length;ne+=1)$(re[ne]);$(ae),$(de),$(y.$$.fragment,P),$(ve),$(J),P&&(F||(F=vt(I,Et,{},!1)),F.run(0)),X=!1},d(P){P&&m(e),L[n].d(),q&&q.d(),Y&&Y.d(),He(z,P),He(re,P),ae&&ae.d(),de&&de.d(),R(y),ve&&ve.d(),J&&J.d(),P&&F&&F.end(),U=!1,Ge(j)}}}function Uo(i,e,l){let t,n,o,s,r,a,f,u,_,c,d,h,b,w,k,g,E,y,M,C,I,F,X,U,{schema:j}=e,{field:A}=e,{sourceField:L=void 0}=e,{indent:ie=0}=e;const q=bi();we(i,q,P=>l(23,U=P));const Y=Ye();we(i,Y,P=>l(10,I=P));const K=Xe();we(i,K,P=>l(31,F=P));const z=ys();we(i,z,P=>l(32,X=P));let ee=null;function se(P){return P!=null&&P.repeated_field?se(P.repeated_field):P!=null&&P.fields?[...Object.values(P.fields).filter(ne=>ne.path.at(-1)!==Is)].filter(ne=>{var he,Se,_e,Ne;return!(ne.dtype==="embedding"||ne.signal!=null&&st(ne).some(Qe=>Qe.dtype==="embedding")||((he=ne.signal)==null?void 0:he.signal_name)==="sentences"||((Se=ne.signal)==null?void 0:Se.signal_name)==="substring_search"||((_e=ne.signal)==null?void 0:_e.signal_name)==="semantic_similarity"||((Ne=ne.signal)==null?void 0:Ne.signal_name)==="concept_labels")}):[]}const re=()=>{C&&(a?Y.removeExpandedColumn(r):Y.addExpandedColumn(r))},ce=()=>h==="ASC"?It(Y,I.query.sort_order="DESC",I):It(Y,I.query.sort_order="ASC",I),ae=()=>Y.removeSortBy(r),de=()=>A.signal&&k&&L&&U.mutate([I.namespace,I.datasetName,{leaf_path:L.path,signal:A.signal}]),ve=()=>{var P;return A.signal&&k&&tt({command:lt.EditPreviewConcept,namespace:I.namespace,datasetName:I.datasetName,path:L==null?void 0:L.path,signalName:(P=A.signal)==null?void 0:P.signal_name,value:A.signal})},J=()=>{a?Y.removeExpandedColumn(r):Y.addExpandedColumn(r)};return i.$$set=P=>{"schema"in P&&l(0,j=P.schema),"field"in P&&l(1,A=P.field),"sourceField"in P&&l(2,L=P.sourceField),"indent"in P&&l(3,ie=P.indent)},i.$$.update=()=>{var P,ne,he;if(i.$$.dirty[0]&2&&l(5,t=rt(A)),i.$$.dirty[0]&2&&l(22,n=Ht(A)),i.$$.dirty[0]&2&&l(9,o=Rt(A)),i.$$.dirty[0]&544&&l(8,s=!t&&!o),i.$$.dirty[0]&2&&l(6,r=A.path),i.$$.dirty[0]&1088&&l(21,a=I.expandedStats[qe(r)]||!1),i.$$.dirty[0]&64&&l(30,f=r.at(-1)===$t),i.$$.dirty[0]&1073741888&&l(20,u=f?r.at(-2):r.at(-1)),i.$$.dirty[0]&2|i.$$.dirty[1]&2&&A.signal&&X.data!=null)if(A.signal.signal_name==="concept_score"){const Se=A.signal;l(20,u=`${Se.concept_name}`),l(11,ee=`Concept '${Se.namespace}/${Se.concept_name}' arguments:

embedding: '${Se.embedding}'`+(Se.version!=null?`
version: ${Se.version}`:""))}else{const Se=X.data.find(_e=>{var Ne;return _e.name===((Ne=A.signal)==null?void 0:Ne.signal_name)});if(Se!=null){l(20,u=Se.json_schema.title);const _e=Object.entries(A.signal||{}).filter(([Ne,Qe])=>Ne!="signal_name").map(([Ne,Qe])=>`${Ne}: ${Qe}`);_e.length>0&&l(11,ee=`Signal '${Se.name}' arguments: 

${_e}`)}}i.$$.dirty[0]&2&&l(19,_=se(A)),i.$$.dirty[0]&258&&l(18,c=s?st(A).filter(Se=>Se.signal!=null&&st(Se).some(_e=>_e.dtype==="embedding")):[]),i.$$.dirty[0]&1088&&l(17,d=(P=I.query.sort_by)==null?void 0:P.some(Se=>nt(Se,r))),i.$$.dirty[0]&1024&&l(16,h=I.query.sort_order),i.$$.dirty[0]&1088&&l(7,b=((ne=I.query.filters)==null?void 0:ne.filter(Se=>nt(Se.path,r)))||[]),i.$$.dirty[0]&128&&l(15,w=b.length>0),i.$$.dirty[0]&64|i.$$.dirty[1]&1&&l(4,k=$i(((he=F.selectRowsSchema)==null?void 0:he.data)||null,r)),i.$$.dirty[0]&1088&&l(14,g=Ft(I,r)),i.$$.dirty[0]&32&&l(28,E=t?". Generated by a signal":""),i.$$.dirty[0]&2&&l(29,y=A.dtype??(A.repeated_field&&A.repeated_field.dtype?`${A.repeated_field.dtype}[]`:"object")),i.$$.dirty[0]&805306368&&l(13,M=`${y}${E}`),i.$$.dirty[0]&18&&l(12,C=kt(A)&&!k)},[j,A,L,ie,k,t,r,b,s,o,I,ee,C,M,g,w,h,d,c,_,u,a,n,U,q,Y,K,z,E,y,f,F,X,re,ce,ae,de,ve,J]}class Oi extends $e{constructor(e){super(),Ee(this,e,Uo,jo,ke,{schema:0,field:1,sourceField:2,indent:3},null,[-1,-1])}}function Pn(i,e,l){const t=i.slice();return t[3]=e[l],t}function Yo(i){let e=[],l=new Map,t,n,o=Object.keys(i[0].data.schema.fields);const s=r=>r[3];for(let r=0;r<o.length;r+=1){let a=Pn(i,o,r),f=s(a);l.set(f,e[r]=An(f,a))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();t=ue()},l(r){for(let a=0;a<e.length;a+=1)e[a].l(r);t=ue()},m(r,a){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(r,a);N(r,t,a),n=!0},p(r,a){a&1&&(o=Object.keys(r[0].data.schema.fields),te(),e=Vt(e,a,s,1,r,o,l,t.parentNode,Nt,An,t,Pn),le())},i(r){if(!n){for(let a=0;a<o.length;a+=1)p(e[a]);n=!0}},o(r){for(let a=0;a<e.length;a+=1)$(e[a]);n=!1},d(r){for(let a=0;a<e.length;a+=1)e[a].d(r);r&&m(t)}}}function Qo(i){let e,l;return e=new Oe({props:{paragraph:!0,lines:3}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function An(i,e){let l,t,n;return t=new Oi({props:{schema:e[0].data.schema,field:e[0].data.schema.fields[e[3]]}}),{key:i,first:null,c(){l=ue(),B(t.$$.fragment),this.h()},l(o){l=ue(),O(t.$$.fragment,o),this.h()},h(){this.first=l},m(o,s){N(o,l,s),H(t,o,s),n=!0},p(o,s){e=o;const r={};s&1&&(r.schema=e[0].data.schema),s&1&&(r.field=e[0].data.schema.fields[e[3]]),t.$set(r)},i(o){n||(p(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){o&&m(l),R(t,o)}}}function Wo(i){let e,l,t,n;const o=[Qo,Yo],s=[];function r(a,f){var u,_;return(u=a[0])!=null&&u.isLoading?0:(_=a[0])!=null&&_.isSuccess&&a[0].data.schema.fields!=null?1:-1}return~(l=r(i))&&(t=s[l]=o[l](i)),{c(){e=T("div"),t&&t.c(),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);t&&t.l(f),f.forEach(m),this.h()},h(){D(e,"class","schema flex h-full flex-col overflow-y-auto")},m(a,f){N(a,e,f),~l&&s[l].m(e,null),n=!0},p(a,[f]){let u=l;l=r(a),l===u?~l&&s[l].p(a,f):(t&&(te(),$(s[u],1,1,()=>{s[u]=null}),le()),~l?(t=s[l],t?t.p(a,f):(t=s[l]=o[l](a),t.c()),p(t,1),t.m(e,null)):t=null)},i(a){n||(p(t),n=!0)},o(a){$(t),n=!1},d(a){a&&m(e),~l&&s[l].d()}}}function Zo(i,e,l){let t,n;const o=Xe();return we(i,o,s=>l(2,n=s)),i.$$.update=()=>{i.$$.dirty&4&&l(0,t=n.selectRowsSchema)},[t,o,n]}class Go extends $e{constructor(e){super(),Ee(this,e,Zo,Wo,ke,{})}}function Bn(i,e,l){const t=i.slice();t[5]=e[l];const n=rt(t[5]);t[6]=n;const o=Rt(t[5]);return t[7]=o,t}function Ko(i){let e,l="{}",t;return{c(){e=T("span"),t=Z(l),this.h()},l(n){e=V(n,"SPAN",{class:!0});var o=S(e);t=G(o,l),o.forEach(m),this.h()},h(){D(e,"class","font-mono")},m(n,o){N(n,e,o),v(e,t)},p:x,i:x,o:x,d(n){n&&m(e)}}}function Jo(i){let e,l,t;var n=ft[i[5].dtype];function o(s){return{props:{title:s[5].dtype}}}return n&&(e=ot(n,o(i))),{c(){e&&B(e.$$.fragment),l=ue()},l(s){e&&O(e.$$.fragment,s),l=ue()},m(s,r){e&&H(e,s,r),N(s,l,r),t=!0},p(s,r){const a={};if(r&2&&(a.title=s[5].dtype),r&2&&n!==(n=ft[s[5].dtype])){if(e){te();const f=e;$(f.$$.fragment,1,0,()=>{R(f,1)}),le()}n?(e=ot(n,o(s)),B(e.$$.fragment),p(e.$$.fragment,1),H(e,l.parentNode,l)):e=null}else n&&e.$set(a)},i(s){t||(e&&p(e.$$.fragment,s),t=!0)},o(s){e&&$(e.$$.fragment,s),t=!1},d(s){s&&m(l),e&&R(e,s)}}}function Hn(i){let e;return{c(){e=Z("[]")},l(l){e=G(l,"[]")},m(l,t){N(l,e,t)},d(l){l&&m(e)}}}function Rn(i){let e,l,t,n,o,s,r,a,f,u=i[5].path.indexOf($t)>=0,_,c,d=qe(i[5].path)+"",h,b,w;function k(...I){return i[3](i[5],...I)}function g(...I){return i[4](i[5],...I)}t=new Ds({props:{labelText:"Download",hideLabel:!0,checked:i[0].find(k)!=null}}),t.$on("change",g);const E=[Jo,Ko],y=[];function M(I,F){return I[5].dtype?0:1}r=M(i),a=y[r]=E[r](i);let C=u&&Hn();return{c(){e=T("div"),l=T("div"),B(t.$$.fragment),n=Q(),o=T("div"),s=T("div"),a.c(),f=Q(),C&&C.c(),_=Q(),c=T("div"),h=Z(d),b=Q(),this.h()},l(I){e=V(I,"DIV",{class:!0});var F=S(e);l=V(F,"DIV",{class:!0});var X=S(l);O(t.$$.fragment,X),X.forEach(m),n=W(F),o=V(F,"DIV",{class:!0});var U=S(o);s=V(U,"DIV",{class:!0});var j=S(s);a.l(j),f=W(j),C&&C.l(j),j.forEach(m),U.forEach(m),_=W(F),c=V(F,"DIV",{class:!0});var A=S(c);h=G(A,d),A.forEach(m),b=W(F),F.forEach(m),this.h()},h(){D(l,"class","mr-2"),D(s,"class","inline-flex items-center rounded-md p-0.5"),oe(s,"bg-blue-200",i[6]),oe(s,"bg-teal-100",i[7]),D(o,"class","flex w-10"),D(c,"class","flex-grow"),D(e,"class","flex items-center")},m(I,F){N(I,e,F),v(e,l),H(t,l,null),v(e,n),v(e,o),v(o,s),y[r].m(s,null),v(s,f),C&&C.m(s,null),v(e,_),v(e,c),v(c,h),v(e,b),w=!0},p(I,F){i=I;const X={};F&3&&(X.checked=i[0].find(k)!=null),t.$set(X);let U=r;r=M(i),r===U?y[r].p(i,F):(te(),$(y[U],1,1,()=>{y[U]=null}),le(),a=y[r],a?a.p(i,F):(a=y[r]=E[r](i),a.c()),p(a,1),a.m(s,f)),F&2&&(u=i[5].path.indexOf($t)>=0),u?C||(C=Hn(),C.c(),C.m(s,null)):C&&(C.d(1),C=null),(!w||F&2)&&oe(s,"bg-blue-200",i[6]),(!w||F&2)&&oe(s,"bg-teal-100",i[7]),(!w||F&2)&&d!==(d=qe(i[5].path)+"")&&fe(h,d)},i(I){w||(p(t.$$.fragment,I),p(a),w=!0)},o(I){$(t.$$.fragment,I),$(a),w=!1},d(I){I&&m(e),R(t),y[r].d(),C&&C.d()}}}function Xo(i){let e,l,t=i[1],n=[];for(let s=0;s<t.length;s+=1)n[s]=Rn(Bn(i,t,s));const o=s=>$(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ue()},l(s){for(let r=0;r<n.length;r+=1)n[r].l(s);e=ue()},m(s,r){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(s,r);N(s,e,r),l=!0},p(s,[r]){if(r&7){t=s[1];let a;for(a=0;a<t.length;a+=1){const f=Bn(s,t,a);n[a]?(n[a].p(f,r),p(n[a],1)):(n[a]=Rn(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(te(),a=t.length;a<n.length;a+=1)o(a);le()}},i(s){if(!l){for(let r=0;r<t.length;r+=1)p(n[r]);l=!0}},o(s){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)$(n[r]);l=!1},d(s){He(n,s),s&&m(e)}}}function xo(i,e,l){let{fields:t}=e,{checkedFields:n}=e;function o(a,f){f.target.checked?(n.push(a),l(0,n)):l(0,n=n.filter(_=>!nt(_.path,a.path)))}const s=(a,f)=>nt(f.path,a.path),r=(a,f)=>o(a,f);return i.$$set=a=>{"fields"in a&&l(1,t=a.fields),"checkedFields"in a&&l(0,n=a.checkedFields)},[n,t,o,s,r]}class gt extends $e{constructor(e){super(),Ee(this,e,xo,Xo,ke,{fields:1,checkedFields:0})}}function Ln(i,e,l){const t=i.slice();return t[29]=e[l],t}function ef(i){let e,l,t,n,o,s,r,a,f,u,_,c,d,h,b,w,k,g,E,y,M,C,I,F,X,U,j,A;function L(q){i[23](q)}let ie={invalid:i[8]!=i[9]};return i[8]!==void 0&&(ie.value=i[8]),E=new Cs({props:ie}),Re.push(()=>We(E,"value",L)),F=new Gs({}),{c(){e=T("div"),l=T("section"),t=T("div"),n=Z("Delete this dataset"),o=Q(),s=T("div"),r=T("p"),a=Z("This action cannot be undone."),f=Q(),u=T("p"),_=Z(`This will permanently delete the
                  `),c=T("span"),d=Z(i[9]),h=Z(` dataset and all its files. Please type
                  `),b=T("span"),w=Z(i[9]),k=Z(" to confirm."),g=Q(),B(E.$$.fragment),M=Q(),C=T("button"),I=Z(`I understand, delete this dataset
                `),B(F.$$.fragment),this.h()},l(q){e=V(q,"DIV",{class:!0});var Y=S(e);l=V(Y,"SECTION",{class:!0});var K=S(l);t=V(K,"DIV",{class:!0});var z=S(t);n=G(z,"Delete this dataset"),z.forEach(m),o=W(K),s=V(K,"DIV",{class:!0});var ee=S(s);r=V(ee,"P",{class:!0});var se=S(r);a=G(se,"This action cannot be undone."),se.forEach(m),f=W(ee),u=V(ee,"P",{});var re=S(u);_=G(re,`This will permanently delete the
                  `),c=V(re,"SPAN",{class:!0});var ce=S(c);d=G(ce,i[9]),ce.forEach(m),h=G(re,` dataset and all its files. Please type
                  `),b=V(re,"SPAN",{class:!0});var ae=S(b);w=G(ae,i[9]),ae.forEach(m),k=G(re," to confirm."),re.forEach(m),ee.forEach(m),g=W(K),O(E.$$.fragment,K),M=W(K),C=V(K,"BUTTON",{class:!0});var de=S(C);I=G(de,`I understand, delete this dataset
                `),O(F.$$.fragment,de),de.forEach(m),K.forEach(m),Y.forEach(m),this.h()},h(){D(t,"class","text-lg text-gray-700"),D(r,"class","mb-2"),D(c,"class","font-bold"),D(b,"class","font-bold"),D(s,"class","mb-4 text-sm text-gray-500"),D(C,"class","mt-2 flex cursor-pointer flex-row justify-between p-4 text-left outline-red-400 hover:bg-gray-200"),C.disabled=X=i[8]!=i[9],oe(C,"cursor-not-allowed",i[8]!=i[9]),oe(C,"outline",i[8]==i[9]),oe(C,"opacity-50",i[8]!=i[9]),D(l,"class","flex flex-col gap-y-1"),D(e,"class","flex flex-col gap-y-6")},m(q,Y){N(q,e,Y),v(e,l),v(l,t),v(t,n),v(l,o),v(l,s),v(s,r),v(r,a),v(s,f),v(s,u),v(u,_),v(u,c),v(c,d),v(u,h),v(u,b),v(b,w),v(u,k),v(l,g),H(E,l,null),v(l,M),v(l,C),v(C,I),H(F,C,null),U=!0,j||(A=Ae(C,"click",i[24]),j=!0)},p(q,Y){(!U||Y[0]&512)&&fe(d,q[9]),(!U||Y[0]&512)&&fe(w,q[9]);const K={};Y[0]&768&&(K.invalid=q[8]!=q[9]),!y&&Y[0]&256&&(y=!0,K.value=q[8],Ze(()=>y=!1)),E.$set(K),(!U||Y[0]&768&&X!==(X=q[8]!=q[9]))&&(C.disabled=X),(!U||Y[0]&768)&&oe(C,"cursor-not-allowed",q[8]!=q[9]),(!U||Y[0]&768)&&oe(C,"outline",q[8]==q[9]),(!U||Y[0]&768)&&oe(C,"opacity-50",q[8]!=q[9])},i(q){U||(p(E.$$.fragment,q),p(F.$$.fragment,q),U=!0)},o(q){$(E.$$.fragment,q),$(F.$$.fragment,q),U=!1},d(q){q&&m(e),R(E),R(F),j=!1,A()}}}function tf(i){let e,l,t,n;const o=[nf,lf],s=[];function r(a,f){return a[6].isFetching?0:1}return e=r(i),l=s[e]=o[e](i),{c(){l.c(),t=ue()},l(a){l.l(a),t=ue()},m(a,f){s[e].m(a,f),N(a,t,f),n=!0},p(a,f){let u=e;e=r(a),e===u?s[e].p(a,f):(te(),$(s[u],1,1,()=>{s[u]=null}),le(),l=s[e],l?l.p(a,f):(l=s[e]=o[e](a),l.c()),p(l,1),l.m(t.parentNode,t))},i(a){n||(p(l),n=!0)},o(a){$(l),n=!1},d(a){s[e].d(a),a&&m(t)}}}function lf(i){let e,l,t,n,o,s,r,a,f,u,_,c,d,h,b,w,k,g,E,y,M,C,I,F,X,U,j,A,L;const ie=[rf,sf],q=[];function Y(ae,de){return ae[3]!=null?0:1}f=Y(i),u=q[f]=ie[f](i);const K=[of,af],z=[];function ee(ae,de){return ae[11].isFetching?0:1}y=ee(i),M=z[y]=K[y](i);const se=[cf,uf],re=[];function ce(ae,de){return ae[3]!=null&&ae[4]!=null?0:1}return j=ce(i),A=re[j]=se[j](i),{c(){e=T("div"),l=T("section"),t=T("div"),n=Z("Media fields"),o=Q(),s=T("div"),r=Z("These fields will be presented differently from the rest of the metadata fields."),a=Q(),u.c(),_=Q(),c=T("section"),d=T("div"),h=Z("Preferred embedding"),b=Q(),w=T("div"),k=Z("This embedding will be used by default when indexing and querying the data."),g=Q(),E=T("div"),M.c(),C=Q(),I=T("section"),F=T("div"),X=Z("Render as markdown"),U=Q(),A.c(),this.h()},l(ae){e=V(ae,"DIV",{class:!0});var de=S(e);l=V(de,"SECTION",{class:!0});var ve=S(l);t=V(ve,"DIV",{class:!0});var J=S(t);n=G(J,"Media fields"),J.forEach(m),o=W(ve),s=V(ve,"DIV",{class:!0});var P=S(s);r=G(P,"These fields will be presented differently from the rest of the metadata fields."),P.forEach(m),a=W(ve),u.l(ve),ve.forEach(m),_=W(de),c=V(de,"SECTION",{class:!0});var ne=S(c);d=V(ne,"DIV",{class:!0});var he=S(d);h=G(he,"Preferred embedding"),he.forEach(m),b=W(ne),w=V(ne,"DIV",{class:!0});var Se=S(w);k=G(Se,"This embedding will be used by default when indexing and querying the data."),Se.forEach(m),g=W(ne),E=V(ne,"DIV",{class:!0});var _e=S(E);M.l(_e),_e.forEach(m),ne.forEach(m),C=W(de),I=V(de,"SECTION",{class:!0});var Ne=S(I);F=V(Ne,"DIV",{class:!0});var Qe=S(F);X=G(Qe,"Render as markdown"),Qe.forEach(m),U=W(Ne),A.l(Ne),Ne.forEach(m),de.forEach(m),this.h()},h(){D(t,"class","text-lg text-gray-700"),D(s,"class","text-sm text-gray-500"),D(l,"class","flex flex-col gap-y-1"),D(d,"class","text-lg text-gray-700"),D(w,"class","text-sm text-gray-500"),D(E,"class","w-60"),D(c,"class","flex flex-col gap-y-1"),D(F,"class","text-lg text-gray-700"),D(I,"class","flex flex-col gap-y-1"),D(e,"class","flex flex-col gap-y-6")},m(ae,de){N(ae,e,de),v(e,l),v(l,t),v(t,n),v(l,o),v(l,s),v(s,r),v(l,a),q[f].m(l,null),v(e,_),v(e,c),v(c,d),v(d,h),v(c,b),v(c,w),v(w,k),v(c,g),v(c,E),z[y].m(E,null),v(e,C),v(e,I),v(I,F),v(F,X),v(I,U),re[j].m(I,null),L=!0},p(ae,de){let ve=f;f=Y(ae),f===ve?q[f].p(ae,de):(te(),$(q[ve],1,1,()=>{q[ve]=null}),le(),u=q[f],u?u.p(ae,de):(u=q[f]=ie[f](ae),u.c()),p(u,1),u.m(l,null));let J=y;y=ee(ae),y===J?z[y].p(ae,de):(te(),$(z[J],1,1,()=>{z[J]=null}),le(),M=z[y],M?M.p(ae,de):(M=z[y]=K[y](ae),M.c()),p(M,1),M.m(E,null));let P=j;j=ce(ae),j===P?re[j].p(ae,de):(te(),$(re[P],1,1,()=>{re[P]=null}),le(),A=re[j],A?A.p(ae,de):(A=re[j]=se[j](ae),A.c()),p(A,1),A.m(I,null))},i(ae){L||(p(u),p(M),p(A),L=!0)},o(ae){$(u),$(M),$(A),L=!1},d(ae){ae&&m(e),q[f].d(),z[y].d(),re[j].d()}}}function nf(i){let e,l;return e=new Oe({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function sf(i){let e,l;return e=new Ut({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function rf(i){let e,l,t;function n(s){i[21](s)}let o={fields:i[5]};return i[3]!==void 0&&(o.checkedFields=i[3]),e=new gt({props:o}),Re.push(()=>We(e,"checkedFields",n)),{c(){B(e.$$.fragment)},l(s){O(e.$$.fragment,s)},m(s,r){H(e,s,r),t=!0},p(s,r){const a={};r[0]&32&&(a.fields=s[5]),!l&&r[0]&8&&(l=!0,a.checkedFields=s[3],Ze(()=>l=!1)),e.$set(a)},i(s){t||(p(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){R(e,s)}}}function af(i){var t;let e,l;return e=new ci({props:{selected:((t=i[6].data)==null?void 0:t.preferred_embedding)||void 0,$$slots:{default:[ff]},$$scope:{ctx:i}}}),e.$on("change",i[16]),{c(){B(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,o){H(e,n,o),l=!0},p(n,o){var r;const s={};o[0]&64&&(s.selected=((r=n[6].data)==null?void 0:r.preferred_embedding)||void 0),o[0]&2048|o[1]&2&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){$(e.$$.fragment,n),l=!1},d(n){R(e,n)}}}function of(i){let e,l;return e=new Ut({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function On(i){let e,l;return e=new At({props:{value:i[29].name}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p(t,n){const o={};n[0]&2048&&(o.value=t[29].name),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function ff(i){let e,l,t,n;e=new At({props:{value:void 0,text:"None"}});let o=i[11].data||[],s=[];for(let a=0;a<o.length;a+=1)s[a]=On(Ln(i,o,a));const r=a=>$(s[a],1,1,()=>{s[a]=null});return{c(){B(e.$$.fragment),l=Q();for(let a=0;a<s.length;a+=1)s[a].c();t=ue()},l(a){O(e.$$.fragment,a),l=W(a);for(let f=0;f<s.length;f+=1)s[f].l(a);t=ue()},m(a,f){H(e,a,f),N(a,l,f);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(a,f);N(a,t,f),n=!0},p(a,f){if(f[0]&2048){o=a[11].data||[];let u;for(u=0;u<o.length;u+=1){const _=Ln(a,o,u);s[u]?(s[u].p(_,f),p(s[u],1)):(s[u]=On(_),s[u].c(),p(s[u],1),s[u].m(t.parentNode,t))}for(te(),u=o.length;u<s.length;u+=1)r(u);le()}},i(a){if(!n){p(e.$$.fragment,a);for(let f=0;f<o.length;f+=1)p(s[f]);n=!0}},o(a){$(e.$$.fragment,a),s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)$(s[f]);n=!1},d(a){R(e,a),a&&m(l),He(s,a),a&&m(t)}}}function uf(i){let e,l;return e=new Ut({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function cf(i){let e,l,t;function n(s){i[22](s)}let o={fields:i[3]};return i[4]!==void 0&&(o.checkedFields=i[4]),e=new gt({props:o}),Re.push(()=>We(e,"checkedFields",n)),{c(){B(e.$$.fragment)},l(s){O(e.$$.fragment,s)},m(s,r){H(e,s,r),t=!0},p(s,r){const a={};r[0]&8&&(a.fields=s[3]),!l&&r[0]&16&&(l=!0,a.checkedFields=s[4],Ze(()=>l=!1)),e.$set(a)},i(s){t||(p(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){R(e,s)}}}function df(i){let e,l,t,n,o,s,r,a;t=new Ms({props:{items:[{title:"Fields",value:"fields"},{title:"Administration",value:"administration"}],item:i[7]}}),t.$on("select",i[20]);const f=[tf,ef],u=[];function _(c,d){return c[7]==="fields"?0:c[7]==="administration"?1:-1}return~(s=_(i))&&(r=u[s]=f[s](i)),{c(){e=T("div"),l=T("div"),B(t.$$.fragment),n=Q(),o=T("div"),r&&r.c(),this.h()},l(c){e=V(c,"DIV",{class:!0});var d=S(e);l=V(d,"DIV",{class:!0});var h=S(l);O(t.$$.fragment,h),h.forEach(m),n=W(d),o=V(d,"DIV",{class:!0});var b=S(o);r&&r.l(b),b.forEach(m),d.forEach(m),this.h()},h(){D(l,"class","-ml-4 mr-4 w-96 grow-0"),D(o,"class","flex w-full flex-col gap-y-6 rounded border border-gray-300 bg-white p-4"),D(e,"class","flex flex-row")},m(c,d){N(c,e,d),v(e,l),H(t,l,null),v(e,n),v(e,o),~s&&u[s].m(o,null),a=!0},p(c,d){const h={};d[0]&128&&(h.item=c[7]),t.$set(h);let b=s;s=_(c),s===b?~s&&u[s].p(c,d):(r&&(te(),$(u[b],1,1,()=>{u[b]=null}),le()),~s?(r=u[s],r?r.p(c,d):(r=u[s]=f[s](c),r.c()),p(r,1),r.m(o,null)):r=null)},i(c){a||(p(t.$$.fragment,c),p(r),a=!0)},o(c){$(t.$$.fragment,c),$(r),a=!1},d(c){c&&m(e),R(t),~s&&u[s].d()}}}function mf(i){let e,l,t,n,o,s;return e=new Ot({props:{label:"Changes",title:"Dataset settings"}}),t=new qt({props:{hasForm:!0,$$slots:{default:[df]},$$scope:{ctx:i}}}),o=new jt({props:{danger:i[7]==="administration",primaryButtonText:"Save",secondaryButtonText:"Cancel",primaryButtonDisabled:i[7]==="administration"}}),o.$on("click:button--secondary",close),{c(){B(e.$$.fragment),l=Q(),B(t.$$.fragment),n=Q(),B(o.$$.fragment)},l(r){O(e.$$.fragment,r),l=W(r),O(t.$$.fragment,r),n=W(r),O(o.$$.fragment,r)},m(r,a){H(e,r,a),N(r,l,a),H(t,r,a),N(r,n,a),H(o,r,a),s=!0},p(r,a){const f={};a[0]&7166|a[1]&2&&(f.$$scope={dirty:a,ctx:r}),t.$set(f);const u={};a[0]&128&&(u.danger=r[7]==="administration"),a[0]&128&&(u.primaryButtonDisabled=r[7]==="administration"),o.$set(u)},i(r){s||(p(e.$$.fragment,r),p(t.$$.fragment,r),p(o.$$.fragment,r),s=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),$(o.$$.fragment,r),s=!1},d(r){R(e,r),r&&m(l),R(t,r),r&&m(n),R(o,r)}}}function hf(i){let e,l;return e=new Lt({props:{open:i[0],$$slots:{default:[mf]},$$scope:{ctx:i}}}),e.$on("submit",i[17]),e.$on("close",i[25]),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p(t,n){const o={};n[0]&1&&(o.open=t[0]),n[0]&7166|n[1]&2&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function _f(i,e,l){let t,n,o,s,r,a=x,f=()=>(a(),a=Me(t,z=>l(6,r=z)),t),u,_,c;i.$$.on_destroy.push(()=>a());let{namespace:d}=e,{name:h}=e,{open:b=!1}=e,{schema:w}=e;const k=Qt();we(i,k,z=>l(28,u=z));const g=vi();we(i,g,z=>l(11,_=z));const E=Ts();we(i,E,z=>l(27,s=z));let y="fields",M=null,C=null,I=u.embedding;function F(z){I=z.target.value,I===""&&(I=void 0)}function X(){if(M==null)return;const z={ui:{media_paths:M.map(ee=>ee.path),markdown_paths:C==null?void 0:C.map(ee=>ee.path)},preferred_embedding:I};s.mutate([d,h,z],{onSuccess:()=>{l(0,b=!1)}})}let U="";const j=Vs();we(i,j,z=>l(12,c=z));const A=z=>l(7,y=z.detail);function L(z){M=z,l(3,M),l(6,r),l(5,o),l(19,w)}function ie(z){C=z,l(4,C),l(6,r),l(5,o),l(19,w)}function q(z){U=z,l(8,U)}const Y=()=>c.mutate([d,h],{onSuccess:()=>Ct("/")}),K=()=>l(0,b=!1);return i.$$set=z=>{"namespace"in z&&l(1,d=z.namespace),"name"in z&&l(2,h=z.name),"open"in z&&l(0,b=z.open),"schema"in z&&l(19,w=z.schema)},i.$$.update=()=>{var z,ee,se,re;if(i.$$.dirty[0]&6&&f(l(10,t=ut(d,h))),i.$$.dirty[0]&6&&l(9,n=Ns(d,h)),i.$$.dirty[0]&524288&&l(5,o=Pt(w).filter(ce=>ce.dtype==="string"&&!nt(ce.path,[Dt])&&!rt(ce))),i.$$.dirty[0]&104&&M==null){const ce=(((ee=(z=r.data)==null?void 0:z.ui)==null?void 0:ee.media_paths)||[]).map(ae=>Array.isArray(ae)?ae:[ae]);l(3,M=o.filter(ae=>ce.some(de=>nt(ae.path,de))))}if(i.$$.dirty[0]&112&&C==null){const ce=(((re=(se=r.data)==null?void 0:se.ui)==null?void 0:re.markdown_paths)||[]).map(ae=>Array.isArray(ae)?ae:[ae]);l(4,C=o.filter(ae=>ce.some(de=>nt(ae.path,de))))}},[b,d,h,M,C,o,r,y,U,n,t,_,c,k,g,E,F,X,j,w,A,L,ie,q,Y,K]}class gf extends $e{constructor(e){super(),Ee(this,e,_f,hf,ke,{namespace:1,name:2,open:0,schema:19},null,[-1,-1])}}function qn(i){let e,l,t,n,o,s,r;function a(u){i[16](u)}let f={fields:i[6]};return i[2]!==void 0&&(f.checkedFields=i[2]),o=new gt({props:f}),Re.push(()=>We(o,"checkedFields",a)),{c(){e=T("section"),l=T("h4"),t=Z("Label fields"),n=Q(),B(o.$$.fragment),this.h()},l(u){e=V(u,"SECTION",{});var _=S(e);l=V(_,"H4",{class:!0});var c=S(l);t=G(c,"Label fields"),c.forEach(m),n=W(_),O(o.$$.fragment,_),_.forEach(m),this.h()},h(){D(l,"class","svelte-1ge817j")},m(u,_){N(u,e,_),v(e,l),v(l,t),v(e,n),H(o,e,null),r=!0},p(u,_){const c={};_&64&&(c.fields=u[6]),!s&&_&4&&(s=!0,c.checkedFields=u[2],Ze(()=>s=!1)),o.$set(c)},i(u){r||(p(o.$$.fragment,u),r=!0)},o(u){$(o.$$.fragment,u),r=!1},d(u){u&&m(e),R(o)}}}function jn(i){let e,l,t,n,o,s,r;function a(u){i[17](u)}let f={fields:i[7]};return i[3]!==void 0&&(f.checkedFields=i[3]),o=new gt({props:f}),Re.push(()=>We(o,"checkedFields",a)),{c(){e=T("section"),l=T("h4"),t=Z("Enriched fields"),n=Q(),B(o.$$.fragment),this.h()},l(u){e=V(u,"SECTION",{});var _=S(e);l=V(_,"H4",{class:!0});var c=S(l);t=G(c,"Enriched fields"),c.forEach(m),n=W(_),O(o.$$.fragment,_),_.forEach(m),this.h()},h(){D(l,"class","svelte-1ge817j")},m(u,_){N(u,e,_),v(e,l),v(l,t),v(e,n),H(o,e,null),r=!0},p(u,_){const c={};_&128&&(c.fields=u[7]),!s&&_&8&&(s=!0,c.checkedFields=u[3],Ze(()=>s=!1)),o.$set(c)},i(u){r||(p(o.$$.fragment,u),r=!0)},o(u){$(o.$$.fragment,u),r=!1},d(u){u&&m(e),R(o)}}}function Un(i){let e,l;return{c(){e=T("p"),l=Z("No fields selected. Please select at least one field to download."),this.h()},l(t){e=V(t,"P",{class:!0});var n=S(e);l=G(n,"No fields selected. Please select at least one field to download."),n.forEach(m),this.h()},h(){D(e,"class","text-gray-600")},m(t,n){N(t,e,n),v(e,l)},d(t){t&&m(e)}}}function pf(i){let e,l;return e=new Ci({props:{value:JSON.stringify(i[9].data,null,2),readonly:!0,rows:30,placeholder:"3 rows of data for previewing the response",class:"mb-2 font-mono"}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p(t,n){const o={};n&512&&(o.value=JSON.stringify(t[9].data,null,2)),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function bf(i){let e,l;return e=new Oe({props:{paragraph:!0}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function vf(i){let e,l,t,n,o,s,r,a,f,u,_,c,d,h,b,w,k,g,E;function y(A){i[15](A)}let M={fields:i[8]};i[1]!==void 0&&(M.checkedFields=i[1]),s=new gt({props:M}),Re.push(()=>We(s,"checkedFields",y));let C=i[6].length>0&&qn(i),I=i[7].length>0&&jn(i),F=i[4].length===0&&Un();const X=[bf,pf],U=[];function j(A,L){return A[9]&&A[9].isFetching?0:A[5]&&A[9]?1:-1}return~(k=j(i))&&(g=U[k]=X[k](i)),{c(){e=T("div"),l=T("section"),t=T("h4"),n=Z("Source fields"),o=Q(),B(s.$$.fragment),a=Q(),C&&C.c(),f=Q(),I&&I.c(),u=Q(),_=T("section"),c=T("h4"),d=Z("Download preview"),h=Q(),F&&F.c(),b=Q(),w=T("div"),g&&g.c(),this.h()},l(A){e=V(A,"DIV",{class:!0});var L=S(e);l=V(L,"SECTION",{});var ie=S(l);t=V(ie,"H4",{class:!0});var q=S(t);n=G(q,"Source fields"),q.forEach(m),o=W(ie),O(s.$$.fragment,ie),ie.forEach(m),a=W(L),C&&C.l(L),f=W(L),I&&I.l(L),L.forEach(m),u=W(A),_=V(A,"SECTION",{});var Y=S(_);c=V(Y,"H4",{class:!0});var K=S(c);d=G(K,"Download preview"),K.forEach(m),h=W(Y),F&&F.l(Y),b=W(Y),w=V(Y,"DIV",{class:!0});var z=S(w);g&&g.l(z),z.forEach(m),Y.forEach(m),this.h()},h(){D(t,"class","svelte-1ge817j"),D(e,"class","flex flex-wrap gap-x-12"),D(c,"class","svelte-1ge817j"),D(w,"class","preview svelte-1ge817j")},m(A,L){N(A,e,L),v(e,l),v(l,t),v(t,n),v(l,o),H(s,l,null),v(e,a),C&&C.m(e,null),v(e,f),I&&I.m(e,null),N(A,u,L),N(A,_,L),v(_,c),v(c,d),v(_,h),F&&F.m(_,null),v(_,b),v(_,w),~k&&U[k].m(w,null),E=!0},p(A,L){const ie={};L&256&&(ie.fields=A[8]),!r&&L&2&&(r=!0,ie.checkedFields=A[1],Ze(()=>r=!1)),s.$set(ie),A[6].length>0?C?(C.p(A,L),L&64&&p(C,1)):(C=qn(A),C.c(),p(C,1),C.m(e,f)):C&&(te(),$(C,1,1,()=>{C=null}),le()),A[7].length>0?I?(I.p(A,L),L&128&&p(I,1)):(I=jn(A),I.c(),p(I,1),I.m(e,null)):I&&(te(),$(I,1,1,()=>{I=null}),le()),A[4].length===0?F||(F=Un(),F.c(),F.m(_,b)):F&&(F.d(1),F=null);let q=k;k=j(A),k===q?~k&&U[k].p(A,L):(g&&(te(),$(U[q],1,1,()=>{U[q]=null}),le()),~k?(g=U[k],g?g.p(A,L):(g=U[k]=X[k](A),g.c()),p(g,1),g.m(w,null)):g=null)},i(A){E||(p(s.$$.fragment,A),p(C),p(I),p(g),E=!0)},o(A){$(s.$$.fragment,A),$(C),$(I),$(g),E=!1},d(A){A&&m(e),R(s),C&&C.d(),I&&I.d(),A&&m(u),A&&m(_),F&&F.d(),~k&&U[k].d()}}}function wf(i){let e,l,t,n,o,s;return e=new Ot({props:{title:"Download data"}}),t=new qt({props:{hasForm:!0,$$slots:{default:[vf]},$$scope:{ctx:i}}}),o=new jt({props:{primaryButtonText:"Download",primaryButtonDisabled:i[4].length===0,secondaryButtonText:"Cancel"}}),o.$on("click:button--secondary",i[12]),{c(){B(e.$$.fragment),l=Q(),B(t.$$.fragment),n=Q(),B(o.$$.fragment)},l(r){O(e.$$.fragment,r),l=W(r),O(t.$$.fragment,r),n=W(r),O(o.$$.fragment,r)},m(r,a){H(e,r,a),N(r,l,a),H(t,r,a),N(r,n,a),H(o,r,a),s=!0},p(r,a){const f={};a&2098174&&(f.$$scope={dirty:a,ctx:r}),t.$set(f);const u={};a&16&&(u.primaryButtonDisabled=r[4].length===0),o.$set(u)},i(r){s||(p(e.$$.fragment,r),p(t.$$.fragment,r),p(o.$$.fragment,r),s=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),$(o.$$.fragment,r),s=!1},d(r){R(e,r),r&&m(l),R(t,r),r&&m(n),R(o,r)}}}function kf(i){let e,l;return e=new Lt({props:{size:"lg",open:i[0],$$slots:{default:[wf]},$$scope:{ctx:i}}}),e.$on("submit",i[11]),e.$on("close",i[18]),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p(t,[n]){const o={};n&1&&(o.open=t[0]),n&2098174&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function $f(i,e,l){let t,n,o,s,r,a,f,u=x,_=()=>(u(),u=Me(r,U=>l(9,f=U)),r);i.$$.on_destroy.push(()=>u());let{open:c=!1}=e,{schema:d}=e;const h=ht(),b=Ye();we(i,b,U=>l(14,a=U));let w=[],k=[],g=[];function E(U){const j=st(U),L=Pt(U).filter(Y=>["embedding"].indexOf(Y.dtype)===-1).filter(Y=>!rt(Y)&&!Rt(Y)),ie=j.filter(Y=>Y.label!=null),q=j.filter(Y=>Ht(Y)).filter(Y=>!st(Y).some(K=>K.dtype==="embedding"));return{sourceFields:L,enrichedFields:q,labelFields:ie}}async function y(){const U=a.namespace,j=a.datasetName,A={combine_columns:!1,columns:s.map(q=>q.path)},L=`/api/v1/datasets/${U}/${j}/select_rows_download?url_safe_options=${encodeURIComponent(JSON.stringify(A))}`,ie=document.createElement("a");ie.download=`${U}_${j}.json`,ie.href=L,document.body.appendChild(ie),ie.click(),ie.remove()}function M(){l(0,c=!1),h("close")}function C(U){w=U,l(1,w)}function I(U){k=U,l(2,k)}function F(U){g=U,l(3,g)}const X=()=>l(0,c=!1);return i.$$set=U=>{"open"in U&&l(0,c=U.open),"schema"in U&&l(13,d=U.schema)},i.$$.update=()=>{i.$$.dirty&8192&&l(8,{sourceFields:t,enrichedFields:n,labelFields:o}=E(d),t,(l(7,n),l(13,d)),(l(6,o),l(13,d))),i.$$.dirty&14&&l(4,s=[...w,...k,...g]),i.$$.dirty&16400&&_(l(5,r=s.length>0?yi(a.namespace,a.datasetName,{columns:s.map(U=>U.path),limit:3,combine_columns:!1}):null))},[c,w,k,g,s,r,o,n,t,f,b,y,M,d,a,C,I,F,X]}class Ef extends $e{constructor(e){super(),Ee(this,e,$f,kf,ke,{open:0,schema:13})}}function Yn(i,e,l){const t=i.slice();t[12]=e[l];const n=t[3](t[12]);t[13]=n;const o=t[4](t[12]);return t[14]=o,t}function Sf(i){let e,l,t,n,o,s,r,a,f;r=new mi({props:{size:"small",tooltipPosition:"left",icon:hi,iconDescription:"Sort dataset by concept score"}}),r.$on("click",i[5]);let u=i[2].data.rows,_=[];for(let d=0;d<u.length;d+=1)_[d]=Qn(Yn(i,u,d));const c=d=>$(_[d],1,1,()=>{_[d]=null});return{c(){e=T("div"),l=T("div"),t=T("div"),n=Z("Items with highest score"),o=Q(),s=T("div"),B(r.$$.fragment),a=Q();for(let d=0;d<_.length;d+=1)_[d].c();this.h()},l(d){e=V(d,"DIV",{class:!0});var h=S(e);l=V(h,"DIV",{class:!0});var b=S(l);t=V(b,"DIV",{});var w=S(t);n=G(w,"Items with highest score"),w.forEach(m),o=W(b),s=V(b,"DIV",{});var k=S(s);O(r.$$.fragment,k),k.forEach(m),b.forEach(m),a=W(h);for(let g=0;g<_.length;g+=1)_[g].l(h);h.forEach(m),this.h()},h(){D(l,"class","flex h-8 justify-between text-lg"),D(e,"class","flex flex-col gap-y-4")},m(d,h){N(d,e,h),v(e,l),v(l,t),v(t,n),v(l,o),v(l,s),H(r,s,null),v(e,a);for(let b=0;b<_.length;b+=1)_[b]&&_[b].m(e,null);f=!0},p(d,h){if(h&29){u=d[2].data.rows;let b;for(b=0;b<u.length;b+=1){const w=Yn(d,u,b);_[b]?(_[b].p(w,h),p(_[b],1)):(_[b]=Qn(w),_[b].c(),p(_[b],1),_[b].m(e,null))}for(te(),b=u.length;b<_.length;b+=1)c(b);le()}},i(d){if(!f){p(r.$$.fragment,d);for(let h=0;h<u.length;h+=1)p(_[h]);f=!0}},o(d){$(r.$$.fragment,d),_=_.filter(Boolean);for(let h=0;h<_.length;h+=1)$(_[h]);f=!1},d(d){d&&m(e),R(r),He(_,d)}}}function yf(i){let e,l;return e=new Oe({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Qn(i){let e,l,t,n,o,s,r,a,f,u=De(i[14])+"",_,c,d;return t=new Mi({props:{text:i[13],row:i[12],spanPaths:i[0].spanPaths,valuePaths:i[0].valuePaths,embeddings:[]}}),{c(){e=T("div"),l=T("div"),B(t.$$.fragment),n=Q(),o=T("div"),s=T("div"),r=Z("Max score"),a=Q(),f=T("div"),_=Z(u),c=Q(),this.h()},l(h){e=V(h,"DIV",{class:!0});var b=S(e);l=V(b,"DIV",{class:!0});var w=S(l);O(t.$$.fragment,w),w.forEach(m),n=W(b),o=V(b,"DIV",{class:!0});var k=S(o);s=V(k,"DIV",{class:!0});var g=S(s);r=G(g,"Max score"),g.forEach(m),a=W(k),f=V(k,"DIV",{class:!0});var E=S(f);_=G(E,u),E.forEach(m),k.forEach(m),c=W(b),b.forEach(m),this.h()},h(){D(l,"class","flex-grow"),D(s,"class","text-sm text-gray-500"),D(f,"class","text-lg"),D(o,"class","flex flex-none flex-col items-end"),D(e,"class","flex gap-x-4 rounded border border-gray-300 px-4 py-2")},m(h,b){N(h,e,b),v(e,l),H(t,l,null),v(e,n),v(e,o),v(o,s),v(s,r),v(o,a),v(o,f),v(f,_),v(e,c),d=!0},p(h,b){const w={};b&4&&(w.text=h[13]),b&4&&(w.row=h[12]),b&1&&(w.spanPaths=h[0].spanPaths),b&1&&(w.valuePaths=h[0].valuePaths),t.$set(w),(!d||b&4)&&u!==(u=De(h[14])+"")&&fe(_,u)},i(h){d||(p(t.$$.fragment,h),d=!0)},o(h){$(t.$$.fragment,h),d=!1},d(h){h&&m(e),R(t)}}}function If(i){let e,l,t,n;const o=[yf,Sf],s=[];function r(a,f){return a[2].isFetching?0:a[2].data?1:-1}return~(e=r(i))&&(l=s[e]=o[e](i)),{c(){l&&l.c(),t=ue()},l(a){l&&l.l(a),t=ue()},m(a,f){~e&&s[e].m(a,f),N(a,t,f),n=!0},p(a,[f]){let u=e;e=r(a),e===u?~e&&s[e].p(a,f):(l&&(te(),$(s[u],1,1,()=>{s[u]=null}),le()),~e?(l=s[e],l?l.p(a,f):(l=s[e]=o[e](a),l.c()),p(l,1),l.m(t.parentNode,t)):l=null)},i(a){n||(p(l),n=!0)},o(a){$(l),n=!1},d(a){~e&&s[e].d(a),a&&m(t)}}}const Df=5;function Tf(i,e,l){let t,n,o,s,r=x,a=()=>(r(),r=Me(t,k=>l(2,s=k)),t);i.$$.on_destroy.push(()=>r());let{schema:f}=e,{namespace:u}=e,{datasetName:_}=e,{mediaPath:c}=e,{scorePath:d}=e;function h(k){return dt.value(pt(k,c),"string")}function b(k){const g=d.slice(0,d.length-2),E=pt(k,g);let y=0;for(const M of E){const C=dt.value(pt(M,["score"]),"float32");y=Math.max(y,C)}return y}function w(){const k=Di(u,_);k.query.sort_by=[d],k.query.sort_order="DESC",k.insightsOpen=!1,Ct(Ii(u,_,k))}return i.$$set=k=>{"schema"in k&&l(6,f=k.schema),"namespace"in k&&l(7,u=k.namespace),"datasetName"in k&&l(8,_=k.datasetName),"mediaPath"in k&&l(9,c=k.mediaPath),"scorePath"in k&&l(10,d=k.scorePath)},i.$$.update=()=>{i.$$.dirty&1984&&a(l(1,t=yi(u,_,{columns:[c,d],limit:Df,combine_columns:!0,sort_by:[d]},f))),i.$$.dirty&1088&&l(11,n=[fi(f,d)]),i.$$.dirty&2112&&l(0,o=_i(f,n))},[o,t,s,h,b,w,f,u,_,c,d,n]}class Vf extends $e{constructor(e){super(),Ee(this,e,Tf,If,ke,{schema:6,namespace:7,datasetName:8,mediaPath:9,scorePath:10})}}function Nf(i){let e,l;return e=new Oe({props:{lines:1,width:"200px"}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Mf(i){let e,l;return{c(){e=T("div"),l=Z(i[9]),this.h()},l(t){e=V(t,"DIV",{class:!0});var n=S(e);l=G(n,i[9]),n.forEach(m),this.h()},h(){D(e,"class","text-sm text-gray-500")},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&512&&fe(l,t[9])},i:x,o:x,d(t){t&&m(e)}}}function Cf(i){let e,l=i[7].toFixed(2)+"",t,n,o=De(i[3])+"",s,r;return{c(){e=T("div"),t=Z(l),n=Z("% ("),s=Z(o),r=Z(" items)"),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);t=G(f,l),n=G(f,"% ("),s=G(f,o),r=G(f," items)"),f.forEach(m),this.h()},h(){D(e,"class","text-lg font-bold")},m(a,f){N(a,e,f),v(e,t),v(e,n),v(e,s),v(e,r)},p(a,f){f&128&&l!==(l=a[7].toFixed(2)+"")&&fe(t,l),f&8&&o!==(o=De(a[3])+"")&&fe(s,o)},i:x,o:x,d(a){a&&m(e)}}}function zf(i){let e,l;return e=new Oe({props:{lines:1,width:"200px"}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Ff(i){let e,l,t,n,o=i[13].namespace+"",s,r,a=i[13].concept_name+"",f,u,_,c,d,h,b,w,k,g,E,y;const M=[Mf,Nf],C=[];function I(j,A){return j[9]?0:1}c=I(i),d=C[c]=M[c](i);const F=[zf,Cf],X=[];function U(j,A){return j[6].isFetching?0:1}return w=U(i),k=X[w]=F[w](i),{c(){e=T("div"),l=T("div"),t=T("div"),n=T("span"),s=Z(o),r=Z(" / "),f=Z(a),_=Q(),d.c(),h=Q(),b=T("div"),k.c(),this.h()},l(j){e=V(j,"DIV",{slot:!0,class:!0});var A=S(e);l=V(A,"DIV",{class:!0});var L=S(l);t=V(L,"DIV",{class:!0});var ie=S(t);n=V(ie,"SPAN",{});var q=S(n);s=G(q,o),r=G(q," / "),f=G(q,a),q.forEach(m),ie.forEach(m),_=W(L),d.l(L),L.forEach(m),h=W(A),b=V(A,"DIV",{class:!0});var Y=S(b);k.l(Y),Y.forEach(m),A.forEach(m),this.h()},h(){D(t,"class","text-lg"),D(l,"class","w-full flex-grow"),D(b,"class","flex-none"),D(e,"slot","above"),D(e,"class","flex w-full items-center")},m(j,A){N(j,e,A),v(e,l),v(l,t),v(t,n),v(n,s),v(n,r),v(n,f),v(l,_),C[c].m(l,null),v(e,h),v(e,b),X[w].m(b,null),g=!0,E||(y=ye(u=Ie.call(null,n,{text:`version: ${i[8]}`})),E=!0)},p(j,A){u&&Be(u.update)&&A&256&&u.update.call(null,{text:`version: ${j[8]}`});let L=c;c=I(j),c===L?C[c].p(j,A):(te(),$(C[L],1,1,()=>{C[L]=null}),le(),d=C[c],d?d.p(j,A):(d=C[c]=M[c](j),d.c()),p(d,1),d.m(l,null));let ie=w;w=U(j),w===ie?X[w].p(j,A):(te(),$(X[ie],1,1,()=>{X[ie]=null}),le(),k=X[w],k?k.p(j,A):(k=X[w]=F[w](j),k.c()),p(k,1),k.m(b,null))},i(j){g||(p(d),p(k),g=!0)},o(j){$(d),$(k),g=!1},d(j){j&&m(e),C[c].d(),X[w].d(),E=!1,y()}}}function Pf(i){let e,l;return e=new Oe({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Af(i){let e,l;return e=new Vf({props:{schema:i[0],namespace:i[1],datasetName:i[2],mediaPath:i[12],scorePath:i[4]}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p(t,n){const o={};n&1&&(o.schema=t[0]),n&2&&(o.namespace=t[1]),n&4&&(o.datasetName=t[2]),n&4096&&(o.mediaPath=t[12]),n&16&&(o.scorePath=t[4]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Bf(i){let e,l,t,n;const o=[Af,Pf],s=[];function r(a,f){return a[5].data?0:1}return l=r(i),t=s[l]=o[l](i),{c(){e=T("div"),t.c(),this.h()},l(a){e=V(a,"DIV",{slot:!0});var f=S(e);t.l(f),f.forEach(m),this.h()},h(){D(e,"slot","below")},m(a,f){N(a,e,f),s[l].m(e,null),n=!0},p(a,f){let u=l;l=r(a),l===u?s[l].p(a,f):(te(),$(s[u],1,1,()=>{s[u]=null}),le(),t=s[l],t?t.p(a,f):(t=s[l]=o[l](a),t.c()),p(t,1),t.m(e,null))},i(a){n||(p(t),n=!0)},o(a){$(t),n=!1},d(a){a&&m(e),s[l].d()}}}function Hf(i){let e,l;return e=new Ks({props:{$$slots:{below:[Bf],above:[Ff]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p(t,[n]){const o={};n&70655&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}const Rf="In concept",Lf="Not in concept";function Of(i,e,l){let t,n,o,s,r,a,f,u,_,c,d=x,h=()=>(d(),d=Me(s,I=>l(5,c=I)),s),b,w=x,k=()=>(w(),w=Me(o,I=>l(6,b=I)),o);i.$$.on_destroy.push(()=>d()),i.$$.on_destroy.push(()=>w());let{field:g}=e,{schema:E}=e,{namespace:y}=e,{datasetName:M}=e,C=g.signal;return i.$$set=I=>{"field"in I&&l(14,g=I.field),"schema"in I&&l(0,E=I.schema),"namespace"in I&&l(1,y=I.namespace),"datasetName"in I&&l(2,M=I.datasetName)},i.$$.update=()=>{var I,F,X,U,j,A,L;i.$$.dirty&16384&&l(4,t=[...g.path,$t,"score"]),i.$$.dirty&16384&&l(12,n=g.parent.path),i.$$.dirty&22&&k(l(11,o=Si(y,M,{leaf_path:t}))),i.$$.dirty&32&&l(9,r=(F=(I=c.data)==null?void 0:I.metadata)==null?void 0:F.description),i.$$.dirty&64&&l(15,a=((U=(X=b.data)==null?void 0:X.counts.find(([ie,q])=>ie===Lf))==null?void 0:U[1])||0),i.$$.dirty&64&&l(3,f=((A=(j=b.data)==null?void 0:j.counts.find(([ie,q])=>ie===Rf))==null?void 0:A[1])||0),i.$$.dirty&32&&l(8,u=(L=c.data)==null?void 0:L.version),i.$$.dirty&32776&&l(7,_=f/(f+a)*100)},h(l(10,s=di(C.namespace,C.concept_name))),[E,y,M,f,t,c,b,_,u,r,s,o,n,C,g,a]}class qf extends $e{constructor(e){super(),Ee(this,e,Of,Hf,ke,{field:14,schema:0,namespace:1,datasetName:2})}}function Wn(i,e,l){const t=i.slice();return t[9]=e[l],t}function jf(i){let e,l;return e=new Oe({props:{paragraph:!0,lines:2,width:"200px"}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Uf(i){let e,l=De(i[5])+"",t,n,o,s,r,a;return{c(){e=T("div"),t=Z(l),n=Z(" items"),o=Q(),s=T("div"),r=Z(i[6]),a=Z(" chars on average")},l(f){e=V(f,"DIV",{});var u=S(e);t=G(u,l),n=G(u," items"),u.forEach(m),o=W(f),s=V(f,"DIV",{});var _=S(s);r=G(_,i[6]),a=G(_," chars on average"),_.forEach(m)},m(f,u){N(f,e,u),v(e,t),v(e,n),N(f,o,u),N(f,s,u),v(s,r),v(s,a)},p(f,u){u&32&&l!==(l=De(f[5])+"")&&fe(t,l),u&64&&fe(r,f[6])},i:x,o:x,d(f){f&&m(e),f&&m(o),f&&m(s)}}}function Zn(i){let e,l;return e=new qf({props:{schema:i[2],namespace:i[3],datasetName:i[4],field:i[9]}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p(t,n){const o={};n&4&&(o.schema=t[2]),n&8&&(o.namespace=t[3]),n&16&&(o.datasetName=t[4]),n&1&&(o.field=t[9]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Yf(i){let e,l,t,n,o,s,r,a,f,u;const _=[Uf,jf],c=[];function d(k,g){return k[5]&&k[6]?0:1}r=d(i),a=c[r]=_[r](i);let h=i[0],b=[];for(let k=0;k<h.length;k+=1)b[k]=Zn(Wn(i,h,k));const w=k=>$(b[k],1,1,()=>{b[k]=null});return{c(){e=T("div"),l=T("div"),t=T("div"),n=Z(i[1]),o=Q(),s=T("div"),a.c(),f=Q();for(let k=0;k<b.length;k+=1)b[k].c();this.h()},l(k){e=V(k,"DIV",{class:!0});var g=S(e);l=V(g,"DIV",{class:!0});var E=S(l);t=V(E,"DIV",{class:!0});var y=S(t);n=G(y,i[1]),y.forEach(m),o=W(E),s=V(E,"DIV",{class:!0});var M=S(s);a.l(M),M.forEach(m),E.forEach(m),f=W(g);for(let C=0;C<b.length;C+=1)b[C].l(g);g.forEach(m),this.h()},h(){D(t,"class","flex-grow text-2xl font-semibold text-slate-900"),D(s,"class","flex-none text-sm text-gray-500"),D(l,"class","sticky top-0 flex rounded-xl border border-gray-300 bg-slate-50/80 px-4 py-3 backdrop-blur-sm"),D(e,"class","relative flex flex-col gap-y-4")},m(k,g){N(k,e,g),v(e,l),v(l,t),v(t,n),v(l,o),v(l,s),c[r].m(s,null),v(e,f);for(let E=0;E<b.length;E+=1)b[E]&&b[E].m(e,null);u=!0},p(k,[g]){(!u||g&2)&&fe(n,k[1]);let E=r;if(r=d(k),r===E?c[r].p(k,g):(te(),$(c[E],1,1,()=>{c[E]=null}),le(),a=c[r],a?a.p(k,g):(a=c[r]=_[r](k),a.c()),p(a,1),a.m(s,null)),g&29){h=k[0];let y;for(y=0;y<h.length;y+=1){const M=Wn(k,h,y);b[y]?(b[y].p(M,g),p(b[y],1)):(b[y]=Zn(M),b[y].c(),p(b[y],1),b[y].m(e,null))}for(te(),y=h.length;y<b.length;y+=1)w(y);le()}},i(k){if(!u){p(a);for(let g=0;g<h.length;g+=1)p(b[g]);u=!0}},o(k){$(a),b=b.filter(Boolean);for(let g=0;g<b.length;g+=1)$(b[g]);u=!1},d(k){k&&m(e),c[r].d(),He(b,k)}}}function Qf(i,e,l){let t,n,o,s,r=x,a=()=>(r(),r=Me(t,h=>l(8,s=h)),t);i.$$.on_destroy.push(()=>r());let{concepts:f}=e,{mediaPath:u}=e,{schema:_}=e,{namespace:c}=e,{datasetName:d}=e;return i.$$set=h=>{"concepts"in h&&l(0,f=h.concepts),"mediaPath"in h&&l(1,u=h.mediaPath),"schema"in h&&l(2,_=h.schema),"namespace"in h&&l(3,c=h.namespace),"datasetName"in h&&l(4,d=h.datasetName)},i.$$.update=()=>{var h,b;i.$$.dirty&26&&a(l(7,t=Ei(c,d,{leaf_path:u}))),i.$$.dirty&256&&l(6,n=(h=s.data)==null?void 0:h.avg_text_length),i.$$.dirty&256&&l(5,o=(b=s.data)==null?void 0:b.total_count)},[f,u,_,c,d,o,n,t,s]}class Wf extends $e{constructor(e){super(),Ee(this,e,Qf,Yf,ke,{concepts:0,mediaPath:1,schema:2,namespace:3,datasetName:4})}}function Gn(i,e,l){const t=i.slice();t[8]=e[l];const n=t[5](t[8]);return t[9]=n,t}function Kn(i){let e,l;return e=new Wf({props:{mediaPath:i[8],schema:i[0],namespace:i[1],datasetName:i[2],concepts:i[9]}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p(t,n){const o={};n&8&&(o.mediaPath=t[8]),n&1&&(o.schema=t[0]),n&2&&(o.namespace=t[1]),n&4&&(o.datasetName=t[2]),n&8&&(o.concepts=t[9]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Zf(i){let e,l,t=i[3],n=[];for(let s=0;s<t.length;s+=1)n[s]=Kn(Gn(i,t,s));const o=s=>$(n[s],1,1,()=>{n[s]=null});return{c(){e=T("div");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=V(s,"DIV",{class:!0});var r=S(e);for(let a=0;a<n.length;a+=1)n[a].l(r);r.forEach(m),this.h()},h(){D(e,"class","flex flex-col gap-y-6")},m(s,r){N(s,e,r);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);l=!0},p(s,[r]){if(r&47){t=s[3];let a;for(a=0;a<t.length;a+=1){const f=Gn(s,t,a);n[a]?(n[a].p(f,r),p(n[a],1)):(n[a]=Kn(f),n[a].c(),p(n[a],1),n[a].m(e,null))}for(te(),a=t.length;a<n.length;a+=1)o(a);le()}},i(s){if(!l){for(let r=0;r<t.length;r+=1)p(n[r]);l=!0}},o(s){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)$(n[r]);l=!1},d(s){s&&m(e),He(n,s)}}}function Gf(i,e,l){let t,n,o,s,r=x,a=()=>(r(),r=Me(n,d=>l(6,s=d)),n);i.$$.on_destroy.push(()=>r());let{schema:f}=e,{namespace:u}=e,{datasetName:_}=e;function c(d){return t.filter(h=>wi(h.path,d))}return i.$$set=d=>{"schema"in d&&l(0,f=d.schema),"namespace"in d&&l(1,u=d.namespace),"datasetName"in d&&l(2,_=d.datasetName)},i.$$.update=()=>{var d,h;i.$$.dirty&1&&(t=st(f).filter(b=>{var w;return((w=b.signal)==null?void 0:w.signal_name)=="concept_score"})),i.$$.dirty&6&&a(l(4,n=ut(u,_))),i.$$.dirty&64&&l(3,o=(((h=(d=s.data)==null?void 0:d.ui)==null?void 0:h.media_paths)||[]).map(b=>Array.isArray(b)?b:[b]))},[f,u,_,o,n,c,s]}class Kf extends $e{constructor(e){super(),Ee(this,e,Gf,Zf,ke,{schema:0,namespace:1,datasetName:2})}}function Jn(i){let e,l,t,n,o,s,r,a;function f(d){i[24](d)}let u={schema:i[12].data,namespace:i[0],name:i[1]};i[4]!==void 0&&(u.open=i[4]),e=new gf({props:u}),Re.push(()=>We(e,"open",f));function _(d){i[25](d)}let c={schema:i[12].data};return i[5]!==void 0&&(c.open=i[5]),n=new Ef({props:c}),Re.push(()=>We(n,"open",_)),r=new Lt({props:{size:"lg",open:i[3].insightsOpen,$$slots:{default:[Xf]},$$scope:{ctx:i}}}),r.$on("close",i[26]),r.$on("submit",i[27]),{c(){B(e.$$.fragment),t=Q(),B(n.$$.fragment),s=Q(),B(r.$$.fragment)},l(d){O(e.$$.fragment,d),t=W(d),O(n.$$.fragment,d),s=W(d),O(r.$$.fragment,d)},m(d,h){H(e,d,h),N(d,t,h),H(n,d,h),N(d,s,h),H(r,d,h),a=!0},p(d,h){const b={};h[0]&4096&&(b.schema=d[12].data),h[0]&1&&(b.namespace=d[0]),h[0]&2&&(b.name=d[1]),!l&&h[0]&16&&(l=!0,b.open=d[4],Ze(()=>l=!1)),e.$set(b);const w={};h[0]&4096&&(w.schema=d[12].data),!o&&h[0]&32&&(o=!0,w.open=d[5],Ze(()=>o=!1)),n.$set(w);const k={};h[0]&8&&(k.open=d[3].insightsOpen),h[0]&4107|h[1]&1&&(k.$$scope={dirty:h,ctx:d}),r.$set(k)},i(d){a||(p(e.$$.fragment,d),p(n.$$.fragment,d),p(r.$$.fragment,d),a=!0)},o(d){$(e.$$.fragment,d),$(n.$$.fragment,d),$(r.$$.fragment,d),a=!1},d(d){R(e,d),d&&m(t),R(n,d),d&&m(s),R(r,d)}}}function Xn(i){let e,l;return e=new Kf({props:{schema:i[12].data,namespace:i[0],datasetName:i[1]}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p(t,n){const o={};n[0]&4096&&(o.schema=t[12].data),n[0]&1&&(o.namespace=t[0]),n[0]&2&&(o.datasetName=t[1]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Jf(i){let e,l,t=i[3].insightsOpen&&Xn(i);return{c(){t&&t.c(),e=ue()},l(n){t&&t.l(n),e=ue()},m(n,o){t&&t.m(n,o),N(n,e,o),l=!0},p(n,o){n[3].insightsOpen?t?(t.p(n,o),o[0]&8&&p(t,1)):(t=Xn(n),t.c(),p(t,1),t.m(e.parentNode,e)):t&&(te(),$(t,1,1,()=>{t=null}),le())},i(n){l||(p(t),l=!0)},o(n){$(t),l=!1},d(n){t&&t.d(n),n&&m(e)}}}function Xf(i){let e,l,t,n,o,s;return e=new Ot({props:{title:"Insights"}}),t=new qt({props:{$$slots:{default:[Jf]},$$scope:{ctx:i}}}),o=new jt({props:{primaryButtonText:"Close"}}),{c(){B(e.$$.fragment),l=Q(),B(t.$$.fragment),n=Q(),B(o.$$.fragment)},l(r){O(e.$$.fragment,r),l=W(r),O(t.$$.fragment,r),n=W(r),O(o.$$.fragment,r)},m(r,a){H(e,r,a),N(r,l,a),H(t,r,a),N(r,n,a),H(o,r,a),s=!0},p(r,a){const f={};a[0]&4107|a[1]&1&&(f.$$scope={dirty:a,ctx:r}),t.$set(f)},i(r){s||(p(e.$$.fragment,r),p(t.$$.fragment,r),p(o.$$.fragment,r),s=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),$(o.$$.fragment,r),s=!1},d(r){R(e,r),r&&m(l),R(t,r),r&&m(n),R(o,r)}}}function xn(i){let e,l;return e=new Yt({props:{open:!0,modalHeading:"Dataset config",primaryButtonText:"Ok",secondaryButtonText:"Cancel",$$slots:{default:[tu]},$$scope:{ctx:i}}}),e.$on("click:button--secondary",i[28]),e.$on("close",i[29]),e.$on("submit",i[30]),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p(t,n){const o={};n[0]&8192|n[1]&1&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function xf(i){let e,l;return e=new Ci({props:{value:`${i[13].data}`,readonly:!0,rows:15,placeholder:"3 rows of data for previewing the response",class:"mb-2 font-mono"}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p(t,n){const o={};n[0]&8192&&(o.value=`${t[13].data}`),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function eu(i){let e,l;return e=new Oe({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function tu(i){let e,l,t,n,o,s,r,a,f,u;const _=[eu,xf],c=[];function d(h,b){var w,k;return(w=h[13])!=null&&w.isFetching?0:(k=h[13])!=null&&k.data?1:-1}return~(r=d(i))&&(a=c[r]=_[r](i)),{c(){e=T("div"),l=Z(`This dataset configuration represents the transformations that created the dataset,
        including signals, embeddings, and user settings. This can be used with lilac.load to
        generate the dataset with the same view as presented.`),t=Q(),n=T("div"),o=Z("config.yml"),s=Q(),a&&a.c(),f=ue(),this.h()},l(h){e=V(h,"DIV",{class:!0});var b=S(e);l=G(b,`This dataset configuration represents the transformations that created the dataset,
        including signals, embeddings, and user settings. This can be used with lilac.load to
        generate the dataset with the same view as presented.`),b.forEach(m),t=W(h),n=V(h,"DIV",{class:!0});var w=S(n);o=G(w,"config.yml"),w.forEach(m),s=W(h),a&&a.l(h),f=ue(),this.h()},h(){D(e,"class","mb-4 text-sm"),D(n,"class","font-mono text-xs")},m(h,b){N(h,e,b),v(e,l),N(h,t,b),N(h,n,b),v(n,o),N(h,s,b),~r&&c[r].m(h,b),N(h,f,b),u=!0},p(h,b){let w=r;r=d(h),r===w?~r&&c[r].p(h,b):(a&&(te(),$(c[w],1,1,()=>{c[w]=null}),le()),~r?(a=c[r],a?a.p(h,b):(a=c[r]=_[r](h),a.c()),p(a,1),a.m(f.parentNode,f)):a=null)},i(h){u||(p(a),u=!0)},o(h){$(a),u=!1},d(h){h&&m(e),h&&m(t),h&&m(n),h&&m(s),~r&&c[r].d(h),h&&m(f)}}}function lu(i){let e,l,t,n,o,s,r,a,f,u,_;t=new Go({}),r=new Xa({});let c=i[12].data&&Jn(i),d=i[2]&&xn(i);return{c(){e=T("div"),l=T("div"),B(t.$$.fragment),o=Q(),s=T("div"),B(r.$$.fragment),a=Q(),c&&c.c(),f=Q(),d&&d.c(),u=ue(),this.h()},l(h){e=V(h,"DIV",{class:!0});var b=S(e);l=V(b,"DIV",{class:!0});var w=S(l);O(t.$$.fragment,w),w.forEach(m),o=W(b),s=V(b,"DIV",{class:!0});var k=S(s);O(r.$$.fragment,k),k.forEach(m),b.forEach(m),a=W(h),c&&c.l(h),f=W(h),d&&d.l(h),u=ue(),this.h()},h(){D(l,"class",n=Jt(`schema-container relative h-full ${i[11]?"w-0":"w-1/3"} border-r border-gray-200`)+" svelte-1xlsh2v"),D(s,"class","h-full w-2/3 flex-grow"),D(e,"class","flex h-full w-full")},m(h,b){N(h,e,b),v(e,l),H(t,l,null),v(e,o),v(e,s),H(r,s,null),N(h,a,b),c&&c.m(h,b),N(h,f,b),d&&d.m(h,b),N(h,u,b),_=!0},p(h,b){(!_||b[0]&2048&&n!==(n=Jt(`schema-container relative h-full ${h[11]?"w-0":"w-1/3"} border-r border-gray-200`)+" svelte-1xlsh2v"))&&D(l,"class",n),h[12].data?c?(c.p(h,b),b[0]&4096&&p(c,1)):(c=Jn(h),c.c(),p(c,1),c.m(f.parentNode,f)):c&&(te(),$(c,1,1,()=>{c=null}),le()),h[2]?d?(d.p(h,b),b[0]&4&&p(d,1)):(d=xn(h),d.c(),p(d,1),d.m(u.parentNode,u)):d&&(te(),$(d,1,1,()=>{d=null}),le())},i(h){_||(p(t.$$.fragment,h),p(r.$$.fragment,h),p(c),p(d),_=!0)},o(h){$(t.$$.fragment,h),$(r.$$.fragment,h),$(c),$(d),_=!1},d(h){h&&m(e),R(t),R(r),h&&m(a),c&&c.d(h),h&&m(f),d&&d.d(h),h&&m(u)}}}function nu(i){let e,l,t=i[3].namespace+"",n,o,s=i[3].datasetName+"",r,a,f;return{c(){e=T("div"),l=T("a"),n=Z(t),o=Z("/"),r=Z(s),this.h()},l(u){e=V(u,"DIV",{class:!0});var _=S(e);l=V(_,"A",{class:!0,href:!0});var c=S(l);n=G(c,t),o=G(c,"/"),r=G(c,s),c.forEach(m),_.forEach(m),this.h()},h(){D(l,"class","font-semibold text-black"),D(l,"href",i[8]),D(e,"class","dataset-name svelte-1xlsh2v")},m(u,_){N(u,e,_),v(e,l),v(l,n),v(l,o),v(l,r),a||(f=Ae(l,"click",i[21]),a=!0)},p(u,_){_[0]&8&&t!==(t=u[3].namespace+"")&&fe(n,t),_[0]&8&&s!==(s=u[3].datasetName+"")&&fe(r,s),_[0]&256&&D(l,"href",u[8])},d(u){u&&m(e),a=!1,f()}}}function iu(i){let e,l,t,n,o,s,r,a,f,u,_,c,d,h,b;return t=new Ur({}),s=new xe({props:{type:"outline",$$slots:{default:[nu]},$$scope:{ctx:i}}}),f=new mt({}),c=new Tr({}),{c(){e=T("div"),l=T("button"),B(t.$$.fragment),o=Q(),B(s.$$.fragment),r=Q(),a=T("button"),B(f.$$.fragment),u=Q(),_=T("button"),B(c.$$.fragment),this.h()},l(w){e=V(w,"DIV",{slot:!0,class:!0});var k=S(e);l=V(k,"BUTTON",{class:!0});var g=S(l);O(t.$$.fragment,g),g.forEach(m),o=W(k),O(s.$$.fragment,k),r=W(k),a=V(k,"BUTTON",{});var E=S(a);O(f.$$.fragment,E),E.forEach(m),u=W(k),_=V(k,"BUTTON",{});var y=S(_);O(c.$$.fragment,y),y.forEach(m),k.forEach(m),this.h()},h(){D(l,"class","mr-2"),oe(l,"bg-blue-100",!i[11]),oe(l,"outline-blue-400",!i[11]),oe(l,"outline",!i[11]),D(e,"slot","header-subtext"),D(e,"class","flex flex-row items-center gap-x-1")},m(w,k){N(w,e,k),v(e,l),H(t,l,null),v(e,o),H(s,e,null),v(e,r),v(e,a),H(f,a,null),v(e,u),v(e,_),H(c,_,null),d=!0,h||(b=[ye(n=Ie.call(null,l,{text:i[11]?"Show Schema":"Hide Schema"})),Ae(l,"click",i[15]),Ae(l,"keypress",i[15]),Ae(a,"click",i[22]),ye(Ie.call(null,a,{text:"Dataset information"})),ye(Ie.call(null,_,{text:"Dataset insights"})),Ae(_,"click",i[23])],h=!0)},p(w,k){n&&Be(n.update)&&k[0]&2048&&n.update.call(null,{text:w[11]?"Show Schema":"Hide Schema"}),(!d||k[0]&2048)&&oe(l,"bg-blue-100",!w[11]),(!d||k[0]&2048)&&oe(l,"outline-blue-400",!w[11]),(!d||k[0]&2048)&&oe(l,"outline",!w[11]);const g={};k[0]&264|k[1]&1&&(g.$$scope={dirty:k,ctx:w}),s.$set(g)},i(w){d||(p(t.$$.fragment,w),p(s.$$.fragment,w),p(f.$$.fragment,w),p(c.$$.fragment,w),d=!0)},o(w){$(t.$$.fragment,w),$(s.$$.fragment,w),$(f.$$.fragment,w),$(c.$$.fragment,w),d=!1},d(w){w&&m(e),R(t),R(s),R(f),R(c),h=!1,Ge(b)}}}function su(i){let e,l,t;return l=new go({}),{c(){e=T("div"),B(l.$$.fragment),this.h()},l(n){e=V(n,"DIV",{slot:!0,class:!0});var o=S(e);O(l.$$.fragment,o),o.forEach(m),this.h()},h(){D(e,"slot","header-center"),D(e,"class","flex w-full items-center")},m(n,o){N(n,e,o),H(l,e,null),t=!0},p:x,i(n){t||(p(l.$$.fragment,n),t=!0)},o(n){$(l.$$.fragment,n),t=!1},d(n){n&&m(e),R(l)}}}function ei(i){let e,l,t,n;return{c(){e=T("div"),l=Z("Copied!"),this.h()},l(o){e=V(o,"DIV",{class:!0});var s=S(e);l=G(s,"Copied!"),s.forEach(m),this.h()},h(){D(e,"class","absolute right-12 z-50 mt-2 rounded border border-neutral-300 bg-neutral-50 px-4 py-1 text-xs")},m(o,s){N(o,e,s),v(e,l),n=!0},i(o){n||(t&&t.end(1),n=!0)},o(o){t=Ji(e,xs,{}),n=!1},d(o){o&&m(e),o&&t&&t.end()}}}function ru(i){let e,l,t,n,o,s,r,a,f,u,_,c,d,h,b,w,k,g,E,y=i[6]&&ei();return r=new Js({}),u=new $r({}),h=new sr({}),{c(){e=T("div"),l=T("div"),t=T("div"),n=T("div"),y&&y.c(),o=Q(),s=T("button"),B(r.$$.fragment),a=Q(),f=T("button"),B(u.$$.fragment),_=Q(),c=T("div"),d=T("button"),B(h.$$.fragment),this.h()},l(M){e=V(M,"DIV",{slot:!0});var C=S(e);l=V(C,"DIV",{class:!0});var I=S(l);t=V(I,"DIV",{class:!0});var F=S(t);n=V(F,"DIV",{class:!0});var X=S(n);y&&y.l(X),o=W(X),s=V(X,"BUTTON",{});var U=S(s);O(r.$$.fragment,U),U.forEach(m),X.forEach(m),a=W(F),f=V(F,"BUTTON",{});var j=S(f);O(u.$$.fragment,j),j.forEach(m),_=W(F),c=V(F,"DIV",{class:!0});var A=S(c);d=V(A,"BUTTON",{});var L=S(d);O(h.$$.fragment,L),L.forEach(m),A.forEach(m),F.forEach(m),I.forEach(m),C.forEach(m),this.h()},h(){D(n,"class","relative"),d.disabled=b=!i[9],D(c,"class","mr-2"),oe(c,"opacity-40",!i[9]),D(t,"class","flex"),D(l,"class","flex h-full flex-col"),D(e,"slot","header-right")},m(M,C){N(M,e,C),v(e,l),v(l,t),v(t,n),y&&y.m(n,null),v(n,o),v(n,s),H(r,s,null),v(t,a),v(t,f),H(u,f,null),v(t,_),v(t,c),v(c,d),H(h,d,null),k=!0,g||(E=[ye(Ie.call(null,s,{text:"Copy the URL"})),Ae(s,"click",i[18]),ye(Ie.call(null,f,{text:"Download data"})),Ae(f,"click",i[19]),ye(Ie.call(null,d,{text:"Dataset settings"})),Ae(d,"click",i[20]),ye(w=Ie.call(null,c,{text:i[9]?"":"User does not have access to update settings of this dataset."}))],g=!0)},p(M,C){M[6]?y?C[0]&64&&p(y,1):(y=ei(),y.c(),p(y,1),y.m(n,o)):y&&(te(),$(y,1,1,()=>{y=null}),le()),(!k||C[0]&512&&b!==(b=!M[9]))&&(d.disabled=b),w&&Be(w.update)&&C[0]&512&&w.update.call(null,{text:M[9]?"":"User does not have access to update settings of this dataset."}),(!k||C[0]&512)&&oe(c,"opacity-40",!M[9])},i(M){k||(p(y),p(r.$$.fragment,M),p(u.$$.fragment,M),p(h.$$.fragment,M),k=!0)},o(M){$(y),$(r.$$.fragment,M),$(u.$$.fragment,M),$(h.$$.fragment,M),k=!1},d(M){M&&m(e),y&&y.d(),R(r),R(u),R(h),g=!1,Ge(E)}}}function au(i){let e,l;return e=new xi({props:{$$slots:{"header-right":[ru],"header-center":[su],"header-subtext":[iu],default:[lu]},$$scope:{ctx:i}}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p(t,n){const o={};n[0]&15231|n[1]&1&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function ou(i,e,l){let t,n,o,s,r,a,f,u,_=x,c=()=>(_(),_=Me(n,ce=>l(12,u=ce)),n),d,h=x,b=()=>(h(),h=Me(r,ce=>l(13,d=ce)),r);i.$$.on_destroy.push(()=>_()),i.$$.on_destroy.push(()=>h());let{namespace:w}=e,{datasetName:k}=e;const g=Ye();we(i,g,ce=>l(3,f=ce));function E(){It(g,f.schemaCollapsed=!f.schemaCollapsed,f)}let y=!1,M=!1;const C=_t();we(i,C,ce=>l(17,a=ce));let I=!1,F=!1;const X=()=>navigator.clipboard.writeText(location.href).then(()=>{l(6,I=!0),setTimeout(()=>l(6,I=!1),2e3)},()=>{throw Error("Error copying link to clipboard.")}),U=()=>l(5,M=!0),j=()=>l(4,y=!0),A=()=>Ct(s),L=()=>l(2,F=!0),ie=()=>g.setInsightsOpen(!0);function q(ce){y=ce,l(4,y)}function Y(ce){M=ce,l(5,M)}const K=()=>g.setInsightsOpen(!1),z=()=>g.setInsightsOpen(!1),ee=()=>l(2,F=!1),se=()=>l(2,F=!1),re=()=>l(2,F=!1);return i.$$set=ce=>{"namespace"in ce&&l(0,w=ce.namespace),"datasetName"in ce&&l(1,k=ce.datasetName)},i.$$.update=()=>{var ce;i.$$.dirty[0]&8&&l(11,t=f.schemaCollapsed),i.$$.dirty[0]&8&&c(l(10,n=Bt(f.namespace,f.datasetName))),i.$$.dirty[0]&131072&&l(9,o=(ce=a.data)==null?void 0:ce.access.dataset.update_settings),i.$$.dirty[0]&3&&l(8,s=Ii(w,k)),i.$$.dirty[0]&7&&b(l(7,r=F?zs(w,k,"yaml"):null))},[w,k,F,f,y,M,I,r,s,o,n,t,u,d,g,E,C,a,X,U,j,A,L,ie,q,Y,K,z,ee,se,re]}class fu extends $e{constructor(e){super(),Ee(this,e,ou,au,ke,{namespace:0,datasetName:1},null,[-1,-1])}}function uu(i){let e;return{c(){e=Z("Page not found! Please specify a dataset.")},l(l){e=G(l,"Page not found! Please specify a dataset.")},m(l,t){N(l,e,t)},p:x,i:x,o:x,d(l){l&&m(e)}}}function cu(i){let e=i[2],l,t,n=ti(i);return{c(){n.c(),l=ue()},l(o){n.l(o),l=ue()},m(o,s){n.m(o,s),N(o,l,s),t=!0},p(o,s){s&4&&ke(e,e=o[2])?(te(),$(n,1,1,x),le(),n=ti(o),n.c(),p(n,1),n.m(l.parentNode,l)):n.p(o,s)},i(o){t||(p(n),t=!0)},o(o){$(n),t=!1},d(o){o&&m(l),n.d(o)}}}function ti(i){let e,l;return e=new fu({props:{namespace:i[0],datasetName:i[1]}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){H(e,t,n),l=!0},p(t,n){const o={};n&1&&(o.namespace=t[0]),n&2&&(o.datasetName=t[1]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function du(i){let e,l,t,n;const o=[cu,uu],s=[];function r(a,f){return a[2]&&a[0]&&a[1]?0:1}return e=r(i),l=s[e]=o[e](i),{c(){l.c(),t=ue()},l(a){l.l(a),t=ue()},m(a,f){s[e].m(a,f),N(a,t,f),n=!0},p(a,[f]){let u=e;e=r(a),e===u?s[e].p(a,f):(te(),$(s[u],1,1,()=>{s[u]=null}),le(),l=s[e],l?l.p(a,f):(l=s[e]=o[e](a),l.c()),p(l,1),l.m(t.parentNode,t))},i(a){n||(p(l),n=!0)},o(a){$(l),n=!1},d(a){s[e].d(a),a&&m(t)}}}function mu(i,e,l){let t,n,o,s,r,a,f,u,_=x,c=()=>(_(),_=Me(f,L=>l(10,u=L)),f),d,h=x,b=()=>(h(),h=Me(t,L=>l(11,d=L)),t),w,k=x,g=()=>(k(),k=Me(a,L=>l(12,w=L)),a),E,y=x,M=()=>(y(),y=Me(s,L=>l(13,E=L)),s),C,I=x,F=()=>(I(),I=Me(o,L=>l(14,C=L)),o),X;i.$$.on_destroy.push(()=>_()),i.$$.on_destroy.push(()=>h()),i.$$.on_destroy.push(()=>k()),i.$$.on_destroy.push(()=>y()),i.$$.on_destroy.push(()=>I());let U,j;const A=Fs();return we(i,A,L=>l(15,X=L)),i.$$.update=()=>{if(i.$$.dirty&32771&&X.page==="datasets")if(X.identifier==""||X.identifier==null)l(0,U=void 0),l(1,j=void 0);else{const[L,ie]=X.identifier.split("/");(U!=L||j!=ie)&&(l(0,U=L),l(1,j=ie))}if(i.$$.dirty&3&&b(l(2,t=U&&j?Ls(U,j):null)),i.$$.dirty&7&&t!=null){const L=Di(U,j);Ps("datasets",`${U}/${j}`,t,A,ie=>Rs(ie,L),ie=>Hs(ie,L))}i.$$.dirty&4&&t!=null&&As(t),i.$$.dirty&3&&l(8,n=U&&j?Os(U,j):null),i.$$.dirty&256&&n!=null&&Bs(n),i.$$.dirty&3&&F(l(6,o=U&&j?ut(U,j):null)),i.$$.dirty&16640&&n&&C!=null&&C.data&&n.setSettings(C.data),i.$$.dirty&3&&M(l(5,s=U&&j?Bt(U,j):null)),i.$$.dirty&8448&&n&&E!=null&&E.data&&n.setSchema(E.data),i.$$.dirty&8192&&l(9,r=E!=null&&E.data?qs("string",E.data):null),i.$$.dirty&515&&g(l(4,a=U&&j&&r?js(U,j,r.map(L=>L.path)):null)),i.$$.dirty&4352&&n&&w!=null&&w.data&&!w.isFetching&&n.setStats(w.data),i.$$.dirty&2051&&c(l(3,f=U&&j&&d?Us(U,j,Ys(d)):null)),i.$$.dirty&1280&&n&&u!=null&&u.data&&n.setSelectRowsSchema(u)},[U,j,t,f,a,s,o,A,n,r,u,d,w,E,C,X]}class Du extends $e{constructor(e){super(),Ee(this,e,mu,du,ke,{})}}export{Du as component};
