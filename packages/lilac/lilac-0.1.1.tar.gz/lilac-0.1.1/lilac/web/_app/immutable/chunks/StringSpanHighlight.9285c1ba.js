import{S as ee,i as te,s as le,E as D,k as H,a as U,l as L,m as w,c as W,h,F as ze,G as V,n as P,b as B,a0 as k,al as De,H as R,g as C,v as Q,d as I,f as Z,L as de,M as Ae,N as X,ah as kt,Q as x,D as St,I as wt,J as Et,K as Tt,q as M,r as z,u as Y,y as ne,z as ae,A as se,B as oe,R as K,w as yt,Z as q,_ as G,$ as re,a1 as j,a7 as ge,V as Nt,a2 as mt,a3 as Re,C as Ct,W as _t,X as Vt,p as $,ag as Pt,an as Bt,a4 as Ht,O as Oe,ai as Lt,e as ke,a8 as Fe}from"./index.8706e7a3.js";import{W as It,aE as Ye,d as At,h as bt,L as Mt,aD as Be,a1 as gt,ah as vt,ar as zt,af as be,a6 as He,bg as Dt,at as Rt,ae as Ot,aB as Ft,bB as Yt,B as pt,bv as jt}from"./Commands.7403edf1.js";import{f as je,g as Ut}from"./notificationsStore.2895bc3e.js";const Wt=i=>({}),Ue=i=>({});function We(i){let e,t,l,a;const f=i[20].labelText,o=St(f,i,i[19],Ue),n=o||Xt(i);let r=i[5]&&Xe(i);return{c(){e=H("div"),t=H("label"),n&&n.c(),l=U(),r&&r.c(),this.h()},l(s){e=L(s,"DIV",{});var u=w(e);t=L(u,"LABEL",{for:!0});var d=w(t);n&&n.l(d),d.forEach(h),l=W(u),r&&r.l(u),u.forEach(h),this.h()},h(){P(t,"for",i[14]),V(t,"bx--label",!0),V(t,"bx--visually-hidden",i[11]),V(t,"bx--label--disabled",i[7]),V(e,"bx--text-area__label-wrapper",!0)},m(s,u){B(s,e,u),k(e,t),n&&n.m(t,null),k(e,l),r&&r.m(e,null),a=!0},p(s,u){o?o.p&&(!a||u[0]&524288)&&wt(o,f,s,s[19],a?Tt(f,s[19],u,Wt):Et(s[19]),Ue):n&&n.p&&(!a||u[0]&1024)&&n.p(s,a?u:[-1,-1]),(!a||u[0]&16384)&&P(t,"for",s[14]),(!a||u[0]&2048)&&V(t,"bx--visually-hidden",s[11]),(!a||u[0]&128)&&V(t,"bx--label--disabled",s[7]),s[5]?r?r.p(s,u):(r=Xe(s),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(s){a||(C(n,s),a=!0)},o(s){I(n,s),a=!1},d(s){s&&h(e),n&&n.d(s),r&&r.d()}}}function Xt(i){let e;return{c(){e=M(i[10])},l(t){e=z(t,i[10])},m(t,l){B(t,e,l)},p(t,l){l[0]&1024&&Y(e,t[10])},d(t){t&&h(e)}}}function Xe(i){let e,t=i[0].length+"",l,a,f;return{c(){e=H("div"),l=M(t),a=M("/"),f=M(i[5]),this.h()},l(o){e=L(o,"DIV",{});var n=w(e);l=z(n,t),a=z(n,"/"),f=z(n,i[5]),n.forEach(h),this.h()},h(){V(e,"bx--label",!0),V(e,"bx--label--disabled",i[7])},m(o,n){B(o,e,n),k(e,l),k(e,a),k(e,f)},p(o,n){n[0]&1&&t!==(t=o[0].length+"")&&Y(l,t),n[0]&32&&Y(f,o[5]),n[0]&128&&V(e,"bx--label--disabled",o[7])},d(o){o&&h(e)}}}function qe(i){let e,t;return e=new It({props:{class:"bx--text-area__invalid-icon"}}),{c(){ne(e.$$.fragment)},l(l){ae(e.$$.fragment,l)},m(l,a){se(e,l,a),t=!0},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function Ge(i){let e,t;return{c(){e=H("div"),t=M(i[9]),this.h()},l(l){e=L(l,"DIV",{});var a=w(e);t=z(a,i[9]),a.forEach(h),this.h()},h(){V(e,"bx--form__helper-text",!0),V(e,"bx--form__helper-text--disabled",i[7])},m(l,a){B(l,e,a),k(e,t)},p(l,a){a[0]&512&&Y(t,l[9]),a[0]&128&&V(e,"bx--form__helper-text--disabled",l[7])},d(l){l&&h(e)}}}function Ke(i){let e,t;return{c(){e=H("div"),t=M(i[13]),this.h()},l(l){e=L(l,"DIV",{id:!0});var a=w(e);t=z(a,i[13]),a.forEach(h),this.h()},h(){P(e,"id",i[16]),V(e,"bx--form-requirement",!0)},m(l,a){B(l,e,a),k(e,t)},p(l,a){a[0]&8192&&Y(t,l[13]),a[0]&65536&&P(e,"id",l[16])},d(l){l&&h(e)}}}function qt(i){let e,t,l,a,f,o,n,r,s,u,d,m,g,T,_=(i[10]||i[17].labelText)&&!i[11]&&We(i),p=i[12]&&qe(),y=[{"aria-invalid":o=i[12]||void 0},{"aria-describedby":n=i[12]?i[16]:void 0},{disabled:i[7]},{id:i[14]},{name:i[15]},{cols:i[3]},{rows:i[4]},{placeholder:i[2]},{readOnly:i[8]},{maxlength:r=i[5]??void 0},i[18]],A={};for(let b=0;b<y.length;b+=1)A=D(A,y[b]);let E=!i[12]&&i[9]&&Ge(i),N=i[12]&&Ke(i);return{c(){e=H("div"),_&&_.c(),t=U(),l=H("div"),p&&p.c(),a=U(),f=H("textarea"),u=U(),E&&E.c(),d=U(),N&&N.c(),this.h()},l(b){e=L(b,"DIV",{});var S=w(e);_&&_.l(S),t=W(S),l=L(S,"DIV",{"data-invalid":!0});var F=w(l);p&&p.l(F),a=W(F),f=L(F,"TEXTAREA",{"aria-invalid":!0,"aria-describedby":!0,id:!0,name:!0,cols:!0,rows:!0,placeholder:!0,maxlength:!0}),w(f).forEach(h),F.forEach(h),u=W(S),E&&E.l(S),d=W(S),N&&N.l(S),S.forEach(h),this.h()},h(){ze(f,A),V(f,"bx--text-area",!0),V(f,"bx--text-area--light",i[6]),V(f,"bx--text-area--invalid",i[12]),P(l,"data-invalid",s=i[12]||void 0),V(l,"bx--text-area__wrapper",!0),V(e,"bx--form-item",!0)},m(b,S){B(b,e,S),_&&_.m(e,null),k(e,t),k(e,l),p&&p.m(l,null),k(l,a),k(l,f),f.autofocus&&f.focus(),i[32](f),De(f,i[0]),k(e,u),E&&E.m(e,null),k(e,d),N&&N.m(e,null),m=!0,g||(T=[R(f,"input",i[33]),R(f,"change",i[25]),R(f,"input",i[26]),R(f,"keydown",i[27]),R(f,"keyup",i[28]),R(f,"focus",i[29]),R(f,"blur",i[30]),R(f,"paste",i[31]),R(e,"click",i[21]),R(e,"mouseover",i[22]),R(e,"mouseenter",i[23]),R(e,"mouseleave",i[24])],g=!0)},p(b,S){(b[10]||b[17].labelText)&&!b[11]?_?(_.p(b,S),S[0]&134144&&C(_,1)):(_=We(b),_.c(),C(_,1),_.m(e,t)):_&&(Q(),I(_,1,1,()=>{_=null}),Z()),b[12]?p?S[0]&4096&&C(p,1):(p=qe(),p.c(),C(p,1),p.m(l,a)):p&&(Q(),I(p,1,1,()=>{p=null}),Z()),ze(f,A=de(y,[(!m||S[0]&4096&&o!==(o=b[12]||void 0))&&{"aria-invalid":o},(!m||S[0]&69632&&n!==(n=b[12]?b[16]:void 0))&&{"aria-describedby":n},(!m||S[0]&128)&&{disabled:b[7]},(!m||S[0]&16384)&&{id:b[14]},(!m||S[0]&32768)&&{name:b[15]},(!m||S[0]&8)&&{cols:b[3]},(!m||S[0]&16)&&{rows:b[4]},(!m||S[0]&4)&&{placeholder:b[2]},(!m||S[0]&256)&&{readOnly:b[8]},(!m||S[0]&32&&r!==(r=b[5]??void 0))&&{maxlength:r},S[0]&262144&&b[18]])),S[0]&1&&De(f,b[0]),V(f,"bx--text-area",!0),V(f,"bx--text-area--light",b[6]),V(f,"bx--text-area--invalid",b[12]),(!m||S[0]&4096&&s!==(s=b[12]||void 0))&&P(l,"data-invalid",s),!b[12]&&b[9]?E?E.p(b,S):(E=Ge(b),E.c(),E.m(e,d)):E&&(E.d(1),E=null),b[12]?N?N.p(b,S):(N=Ke(b),N.c(),N.m(e,null)):N&&(N.d(1),N=null)},i(b){m||(C(_),C(p),m=!0)},o(b){I(_),I(p),m=!1},d(b){b&&h(e),_&&_.d(),p&&p.d(),i[32](null),E&&E.d(),N&&N.d(),g=!1,Ae(T)}}}function Gt(i,e,t){let l;const a=["value","placeholder","cols","rows","maxCount","light","disabled","readonly","helperText","labelText","hideLabel","invalid","invalidText","id","name","ref"];let f=X(e,a),{$$slots:o={},$$scope:n}=e;const r=kt(o);let{value:s=""}=e,{placeholder:u=""}=e,{cols:d=50}=e,{rows:m=4}=e,{maxCount:g=void 0}=e,{light:T=!1}=e,{disabled:_=!1}=e,{readonly:p=!1}=e,{helperText:y=""}=e,{labelText:A=""}=e,{hideLabel:E=!1}=e,{invalid:N=!1}=e,{invalidText:b=""}=e,{id:S="ccs-"+Math.random().toString(36)}=e,{name:F=void 0}=e,{ref:O=null}=e;function ie(c){K.call(this,i,c)}function ue(c){K.call(this,i,c)}function ce(c){K.call(this,i,c)}function J(c){K.call(this,i,c)}function fe(c){K.call(this,i,c)}function Se(c){K.call(this,i,c)}function we(c){K.call(this,i,c)}function Ee(c){K.call(this,i,c)}function Te(c){K.call(this,i,c)}function ye(c){K.call(this,i,c)}function Ne(c){K.call(this,i,c)}function Ce(c){yt[c?"unshift":"push"](()=>{O=c,t(1,O)})}function v(){s=this.value,t(0,s)}return i.$$set=c=>{e=D(D({},e),x(c)),t(18,f=X(e,a)),"value"in c&&t(0,s=c.value),"placeholder"in c&&t(2,u=c.placeholder),"cols"in c&&t(3,d=c.cols),"rows"in c&&t(4,m=c.rows),"maxCount"in c&&t(5,g=c.maxCount),"light"in c&&t(6,T=c.light),"disabled"in c&&t(7,_=c.disabled),"readonly"in c&&t(8,p=c.readonly),"helperText"in c&&t(9,y=c.helperText),"labelText"in c&&t(10,A=c.labelText),"hideLabel"in c&&t(11,E=c.hideLabel),"invalid"in c&&t(12,N=c.invalid),"invalidText"in c&&t(13,b=c.invalidText),"id"in c&&t(14,S=c.id),"name"in c&&t(15,F=c.name),"ref"in c&&t(1,O=c.ref),"$$scope"in c&&t(19,n=c.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&16384&&t(16,l=`error-${S}`)},[s,O,u,d,m,g,T,_,p,y,A,E,N,b,S,F,l,r,f,n,o,ie,ue,ce,J,fe,Se,we,Ee,Te,ye,Ne,Ce,v]}class Kt extends ee{constructor(e){super(),te(this,e,Gt,qt,le,{value:0,placeholder:2,cols:3,rows:4,maxCount:5,light:6,disabled:7,readonly:8,helperText:9,labelText:10,hideLabel:11,invalid:12,invalidText:13,id:14,name:15,ref:1},null,[-1,-1])}}const Dl=Kt;function Je(i){let e,t;return{c(){e=q("title"),t=M(i[1])},l(l){e=G(l,"title",{});var a=w(e);t=z(a,i[1]),a.forEach(h)},m(l,a){B(l,e,a),k(e,t)},p(l,a){a&2&&Y(t,l[1])},d(l){l&&h(e)}}}function Jt(i){let e,t,l=i[1]&&Je(i),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],f={};for(let o=0;o<a.length;o+=1)f=D(f,a[o]);return{c(){e=q("svg"),l&&l.c(),t=q("path"),this.h()},l(o){e=G(o,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var n=w(e);l&&l.l(n),t=G(n,"path",{d:!0}),w(t).forEach(h),n.forEach(h),this.h()},h(){P(t,"d","M24.59 16.59L17 24.17 17 4 15 4 15 24.17 7.41 16.59 6 18 16 28 26 18 24.59 16.59z"),re(e,f)},m(o,n){B(o,e,n),l&&l.m(e,null),k(e,t)},p(o,[n]){o[1]?l?l.p(o,n):(l=Je(o),l.c(),l.m(e,t)):l&&(l.d(1),l=null),re(e,f=de(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},n&1&&{width:o[0]},n&1&&{height:o[0]},n&4&&o[2],n&8&&o[3]]))},i:j,o:j,d(o){o&&h(e),l&&l.d()}}}function Qt(i,e,t){let l,a;const f=["size","title"];let o=X(e,f),{size:n=16}=e,{title:r=void 0}=e;return i.$$set=s=>{t(5,e=D(D({},e),x(s))),t(3,o=X(e,f)),"size"in s&&t(0,n=s.size),"title"in s&&t(1,r=s.title)},i.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||r),t(2,a={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=x(e),[n,r,a,o,l]}class Zt extends ee{constructor(e){super(),te(this,e,Qt,Jt,le,{size:0,title:1})}}function Qe(i){let e,t;return{c(){e=q("title"),t=M(i[1])},l(l){e=G(l,"title",{});var a=w(e);t=z(a,i[1]),a.forEach(h)},m(l,a){B(l,e,a),k(e,t)},p(l,a){a&2&&Y(t,l[1])},d(l){l&&h(e)}}}function xt(i){let e,t,l=i[1]&&Qe(i),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],f={};for(let o=0;o<a.length;o+=1)f=D(f,a[o]);return{c(){e=q("svg"),l&&l.c(),t=q("path"),this.h()},l(o){e=G(o,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var n=w(e);l&&l.l(n),t=G(n,"path",{d:!0}),w(t).forEach(h),n.forEach(h),this.h()},h(){P(t,"d","M16 4L6 14 7.41 15.41 15 7.83 15 28 17 28 17 7.83 24.59 15.41 26 14 16 4z"),re(e,f)},m(o,n){B(o,e,n),l&&l.m(e,null),k(e,t)},p(o,[n]){o[1]?l?l.p(o,n):(l=Qe(o),l.c(),l.m(e,t)):l&&(l.d(1),l=null),re(e,f=de(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},n&1&&{width:o[0]},n&1&&{height:o[0]},n&4&&o[2],n&8&&o[3]]))},i:j,o:j,d(o){o&&h(e),l&&l.d()}}}function $t(i,e,t){let l,a;const f=["size","title"];let o=X(e,f),{size:n=16}=e,{title:r=void 0}=e;return i.$$set=s=>{t(5,e=D(D({},e),x(s))),t(3,o=X(e,f)),"size"in s&&t(0,n=s.size),"title"in s&&t(1,r=s.title)},i.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||r),t(2,a={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=x(e),[n,r,a,o,l]}class el extends ee{constructor(e){super(),te(this,e,$t,xt,le,{size:0,title:1})}}function Ze(i){let e,t;return{c(){e=q("title"),t=M(i[1])},l(l){e=G(l,"title",{});var a=w(e);t=z(a,i[1]),a.forEach(h)},m(l,a){B(l,e,a),k(e,t)},p(l,a){a&2&&Y(t,l[1])},d(l){l&&h(e)}}}function tl(i){let e,t,l=i[1]&&Ze(i),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],f={};for(let o=0;o<a.length;o+=1)f=D(f,a[o]);return{c(){e=q("svg"),l&&l.c(),t=q("path"),this.h()},l(o){e=G(o,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var n=w(e);l&&l.l(n),t=G(n,"path",{d:!0}),w(t).forEach(h),n.forEach(h),this.h()},h(){P(t,"d","M2 2H7V16H2zM23 2H9V16.8027l3.0422 4.5635.8453 5.9165A2.0094 2.0094 0 0014.8672 29H15a3.0033 3.0033 0 003-3V20h8a4.0045 4.0045 0 004-4V9A7.0078 7.0078 0 0023 2z"),re(e,f)},m(o,n){B(o,e,n),l&&l.m(e,null),k(e,t)},p(o,[n]){o[1]?l?l.p(o,n):(l=Ze(o),l.c(),l.m(e,t)):l&&(l.d(1),l=null),re(e,f=de(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},n&1&&{width:o[0]},n&1&&{height:o[0]},n&4&&o[2],n&8&&o[3]]))},i:j,o:j,d(o){o&&h(e),l&&l.d()}}}function ll(i,e,t){let l,a;const f=["size","title"];let o=X(e,f),{size:n=16}=e,{title:r=void 0}=e;return i.$$set=s=>{t(5,e=D(D({},e),x(s))),t(3,o=X(e,f)),"size"in s&&t(0,n=s.size),"title"in s&&t(1,r=s.title)},i.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||r),t(2,a={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=x(e),[n,r,a,o,l]}class il extends ee{constructor(e){super(),te(this,e,ll,tl,le,{size:0,title:1})}}function xe(i){let e,t;return{c(){e=q("title"),t=M(i[1])},l(l){e=G(l,"title",{});var a=w(e);t=z(a,i[1]),a.forEach(h)},m(l,a){B(l,e,a),k(e,t)},p(l,a){a&2&&Y(t,l[1])},d(l){l&&h(e)}}}function nl(i){let e,t,l=i[1]&&xe(i),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],f={};for(let o=0;o<a.length;o+=1)f=D(f,a[o]);return{c(){e=q("svg"),l&&l.c(),t=q("path"),this.h()},l(o){e=G(o,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var n=w(e);l&&l.l(n),t=G(n,"path",{d:!0}),w(t).forEach(h),n.forEach(h),this.h()},h(){P(t,"d","M2 16H7V30H2zM23 30H9V15.1973l3.0422-4.5635.8453-5.9165A2.0094 2.0094 0 0114.8672 3H15a3.0033 3.0033 0 013 3v6h8a4.0045 4.0045 0 014 4v7A7.0078 7.0078 0 0123 30z"),re(e,f)},m(o,n){B(o,e,n),l&&l.m(e,null),k(e,t)},p(o,[n]){o[1]?l?l.p(o,n):(l=xe(o),l.c(),l.m(e,t)):l&&(l.d(1),l=null),re(e,f=de(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},n&1&&{width:o[0]},n&1&&{height:o[0]},n&4&&o[2],n&8&&o[3]]))},i:j,o:j,d(o){o&&h(e),l&&l.d()}}}function al(i,e,t){let l,a;const f=["size","title"];let o=X(e,f),{size:n=16}=e,{title:r=void 0}=e;return i.$$set=s=>{t(5,e=D(D({},e),x(s))),t(3,o=X(e,f)),"size"in s&&t(0,n=s.size),"title"in s&&t(1,r=s.title)},i.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||r),t(2,a={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=x(e),[n,r,a,o,l]}class sl extends ee{constructor(e){super(),te(this,e,al,nl,le,{size:0,title:1})}}function ol(i,e){const t=l=>i&&!i.contains(l.target)&&!l.defaultPrevented&&e();return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function rl(i){let e=(i[1]?"":i[0])+"",t;return{c(){t=M(e)},l(l){t=z(l,e)},m(l,a){B(l,t,a)},p(l,a){a&3&&e!==(e=(l[1]?"":l[0])+"")&&Y(t,e)},d(l){l&&h(t)}}}function fl(i){let e,t,l,a,f;const o=[i[2],{type:"purple"},{icon:Ye}];let n={$$slots:{default:[rl]},$$scope:{ctx:i}};for(let r=0;r<o.length;r+=1)n=D(n,o[r]);return t=new At({props:n}),{c(){e=H("div"),ne(t.$$.fragment),this.h()},l(r){e=L(r,"DIV",{class:!0});var s=w(e);ae(t.$$.fragment,s),s.forEach(h),this.h()},h(){P(e,"class","embedding-badge truncate"),V(e,"embedding-badge-nolabel",i[1])},m(r,s){B(r,e,s),se(t,e,null),l=!0,a||(f=ge(bt.call(null,e,{text:"Embedding index"})),a=!0)},p(r,[s]){const u=s&4?de(o,[s&4&&Nt(r[2]),o[1],s&0&&{icon:Ye}]):{};s&11&&(u.$$scope={dirty:s,ctx:r}),t.$set(u),(!l||s&2)&&V(e,"embedding-badge-nolabel",r[1])},i(r){l||(C(t.$$.fragment,r),l=!0)},o(r){I(t.$$.fragment,r),l=!1},d(r){r&&h(e),oe(t),a=!1,f()}}}function ul(i,e,t){const l=["embedding","hideEmbeddingName"];let a=X(e,l),{embedding:f}=e,{hideEmbeddingName:o=!1}=e;return i.$$set=n=>{e=D(D({},e),x(n)),t(2,a=X(e,l)),"embedding"in n&&t(0,f=n.embedding),"hideEmbeddingName"in n&&t(1,o=n.hideEmbeddingName)},[f,o,a]}class dl extends ee{constructor(e){super(),te(this,e,ul,fl,le,{embedding:0,hideEmbeddingName:1})}}function $e(i,e,t){const l=i.slice();return l[12]=e[t],l}function et(i){let e,t,l=i[0].conceptNamespace+"",a,f,o=i[0].conceptName+"",n,r,s,u,d,m,g,T,_,p,y;return d=new sl({}),T=new il({}),{c(){e=H("div"),t=H("div"),a=M(l),f=M(" / "),n=M(o),r=U(),s=H("div"),u=H("button"),ne(d.$$.fragment),m=U(),g=H("button"),ne(T.$$.fragment),this.h()},l(A){e=L(A,"DIV",{class:!0});var E=w(e);t=L(E,"DIV",{class:!0});var N=w(t);a=z(N,l),f=z(N," / "),n=z(N,o),N.forEach(h),r=W(E),s=L(E,"DIV",{class:!0});var b=w(s);u=L(b,"BUTTON",{class:!0});var S=w(u);ae(d.$$.fragment,S),S.forEach(h),m=W(b),g=L(b,"BUTTON",{class:!0});var F=w(g);ae(T.$$.fragment,F),F.forEach(h),b.forEach(h),E.forEach(h),this.h()},h(){P(t,"class","flex-grow"),P(u,"class","p-1"),P(g,"class","p-1"),P(s,"class","shrink-0"),P(e,"class","flex flex-row items-center justify-between gap-x-4 p-2")},m(A,E){B(A,e,E),k(e,t),k(t,a),k(t,f),k(t,n),k(e,r),k(e,s),k(s,u),se(d,u,null),k(s,m),k(s,g),se(T,g,null),_=!0,p||(y=[R(u,"click",i[8]),R(g,"click",i[9])],p=!0)},p(A,E){(!_||E&1)&&l!==(l=A[0].conceptNamespace+"")&&Y(a,l),(!_||E&1)&&o!==(o=A[0].conceptName+"")&&Y(n,o)},i(A){_||(C(d.$$.fragment,A),C(T.$$.fragment,A),_=!0)},o(A){I(d.$$.fragment,A),I(T.$$.fragment,A),_=!1},d(A){A&&h(e),oe(d),oe(T),p=!1,Ae(y)}}}function tt(i){let e,t=[],l=new Map,a,f=i[2];const o=n=>n[12];for(let n=0;n<f.length;n+=1){let r=$e(i,f,n),s=o(r);l.set(s,t[n]=lt(s,r))}return{c(){e=H("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=L(n,"DIV",{class:!0});var r=w(e);for(let s=0;s<t.length;s+=1)t[s].l(r);r.forEach(h),this.h()},h(){P(e,"class","more-button flex flex-col")},m(n,r){B(n,e,r);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null);a=!0},p(n,r){r&29&&(f=n[2],Q(),t=_t(t,r,o,1,n,f,l,e,Vt,lt,null,$e),Z())},i(n){if(!a){for(let r=0;r<f.length;r+=1)C(t[r]);a=!0}},o(n){for(let r=0;r<t.length;r+=1)I(t[r]);a=!1},d(n){n&&h(e);for(let r=0;r<t.length;r+=1)t[r].d()}}}function lt(i,e){let t,l,a,f,o,n,r,s,u;o=new dl({props:{class:"hover:cursor-pointer",embedding:e[12]}});function d(){return e[10](e[12])}return{key:i,first:null,c(){t=H("button"),l=H("div"),a=M("Find similar"),f=U(),ne(o.$$.fragment),n=U(),this.h()},l(m){t=L(m,"BUTTON",{class:!0});var g=w(t);l=L(g,"DIV",{});var T=w(l);a=z(T,"Find similar"),T.forEach(h),f=W(g),ae(o.$$.fragment,g),n=W(g),g.forEach(h),this.h()},h(){P(t,"class","flex w-full items-center justify-between"),this.first=t},m(m,g){B(m,t,g),k(t,l),k(l,a),k(t,f),se(o,t,null),k(t,n),r=!0,s||(u=R(t,"click",d),s=!0)},p(m,g){e=m;const T={};g&4&&(T.embedding=e[12]),o.$set(T)},i(m){r||(C(o.$$.fragment,m),r=!0)},o(m){I(o.$$.fragment,m),r=!1},d(m){m&&h(t),oe(o),s=!1,u()}}}function cl(i){let e,t,l,a,f,o,n,r=i[0].conceptName!=null&&i[0].conceptNamespace!=null&&et(i),s=i[3]!=null&&tt(i);return{c(){e=H("div"),r&&r.c(),t=U(),s&&s.c(),this.h()},l(u){e=L(u,"DIV",{style:!0,class:!0});var d=w(e);r&&r.l(d),t=W(d),s&&s.l(d),d.forEach(h),this.h()},h(){P(e,"style",l=i[1]!=null?`left: ${i[1].x}px; top: ${i[1].y}px`:""),P(e,"class","absolute z-10 inline-flex -translate-x-1/2 translate-y-6 flex-col divide-y divide-gray-200 rounded border border-gray-200 bg-white shadow")},m(u,d){B(u,e,d),r&&r.m(e,null),k(e,t),s&&s.m(e,null),f=!0,o||(n=ge(ol.call(null,e,i[11])),o=!0)},p(u,[d]){u[0].conceptName!=null&&u[0].conceptNamespace!=null?r?(r.p(u,d),d&1&&C(r,1)):(r=et(u),r.c(),C(r,1),r.m(e,t)):r&&(Q(),I(r,1,1,()=>{r=null}),Z()),u[3]!=null?s?(s.p(u,d),d&8&&C(s,1)):(s=tt(u),s.c(),C(s,1),s.m(e,null)):s&&(Q(),I(s,1,1,()=>{s=null}),Z()),(!f||d&2&&l!==(l=u[1]!=null?`left: ${u[1].x}px; top: ${u[1].y}px`:""))&&P(e,"style",l)},i(u){f||(C(r),C(s),mt(()=>{f&&(a||(a=Re(e,je,{duration:60},!0)),a.run(1))}),f=!0)},o(u){I(r),I(s),a||(a=Re(e,je,{duration:60},!1)),a.run(0),f=!1},d(u){u&&h(e),r&&r.d(),s&&s.d(),u&&a&&a.end(),o=!1,n()}}}function hl(i,e,t){let{details:l}=e,{clickPosition:a}=e,{embeddings:f}=e,{addConceptLabel:o}=e,{findSimilar:n}=e,{addNotification:r}=e;const s=Ct();function u(_){if(!l.conceptName||!l.conceptNamespace)throw Error("Label could not be added, no active concept.");o(l.conceptNamespace,l.conceptName,l.text,_),r({kind:"success",title:`[${_===!0?"Positive":"Negative"}] Concept label added`,subtitle:Mt(l.conceptNamespace,l.conceptName),message:l.text}),s("click")}const d=()=>u(!0),m=()=>u(!1),g=_=>{n&&n(_,l.text),s("click")},T=()=>s("close");return i.$$set=_=>{"details"in _&&t(0,l=_.details),"clickPosition"in _&&t(1,a=_.clickPosition),"embeddings"in _&&t(2,f=_.embeddings),"addConceptLabel"in _&&t(6,o=_.addConceptLabel),"findSimilar"in _&&t(3,n=_.findSimilar),"addNotification"in _&&t(7,r=_.addNotification)},[l,a,f,n,s,u,o,r,d,m,g,T]}class ml extends ee{constructor(e){super(),te(this,e,hl,cl,le,{details:0,clickPosition:1,embeddings:2,addConceptLabel:6,findSimilar:3,addNotification:7})}}function _l(i,e){let t,l=e;i.addEventListener("click",o=>a(o));function a(o){l.disabled||(t=new ml({props:{details:l.details(),clickPosition:{x:o.clientX,y:o.clientY},embeddings:l.embeddings,addConceptLabel:l.addConceptLabel,addNotification:l.addNotification,findSimilar:l.findSimilar},target:document.body}),t.$on("close",f),t.$on("click",f))}function f(){t==null||t.$destroy(),t=void 0}return{update(o){l=o,t==null||t.$set({details:l.details()})},destroy(){f()}}}const Pe=.5,it=.3,bl=.8,nt="#3366cc";function Le(i){return`rgba(180,215,255,${i})`}function Ie(i){let e=0;if(i>Pe){const t=(i-Pe)/(1-Pe);e=it+t*(bl-it)}return Le(e)}function at(i,e,t){const l=i.slice();return l[7]=e[t],l}function st(i,e){let t,l,a=e[7].info.name+"",f,o,n,r,s=ot(e[7])+"",u,d;return{key:i,first:null,c(){t=H("div"),l=H("div"),f=M(a),o=U(),n=H("div"),r=H("span"),u=M(s),d=U(),this.h()},l(m){t=L(m,"DIV",{class:!0});var g=w(t);l=L(g,"DIV",{class:!0});var T=w(l);f=z(T,a),T.forEach(h),o=W(g),n=L(g,"DIV",{class:!0});var _=w(n);r=L(_,"SPAN",{class:!0});var p=w(r);u=z(p,s),p.forEach(h),_.forEach(h),d=W(g),g.forEach(h),this.h()},h(){P(l,"class","named-value-name table-cell max-w-xs truncate pr-2 svelte-1689hje"),P(r,"class","px-1"),V(r,"font-bold",e[7].info.type==="keyword"||e[7].info.type==="metadata"&&!Be(e[7].info.dtype)),$(r,"background-color",(e[7].info.type==="concept_score"||e[7].info.type==="semantic_similarity")&&typeof e[7].value=="number"?Ie(e[7].value):""),P(n,"class","table-cell rounded text-right"),P(t,"class","table-row"),this.first=t},m(m,g){B(m,t,g),k(t,l),k(l,f),k(t,o),k(t,n),k(n,r),k(r,u),k(t,d)},p(m,g){e=m,g&1&&a!==(a=e[7].info.name+"")&&Y(f,a),g&1&&s!==(s=ot(e[7])+"")&&Y(u,s),g&1&&V(r,"font-bold",e[7].info.type==="keyword"||e[7].info.type==="metadata"&&!Be(e[7].info.dtype)),g&1&&$(r,"background-color",(e[7].info.type==="concept_score"||e[7].info.type==="semantic_similarity")&&typeof e[7].value=="number"?Ie(e[7].value):"")},d(m){m&&h(t)}}}function gl(i){let e,t,l=[],a=new Map,f,o=`${i[4]}px`,n=`${Math.min(i[1],i[3]-i[2]-20)}px`,r=i[0];const s=u=>u[7];for(let u=0;u<r.length;u+=1){let d=at(i,r,u),m=s(d);a.set(m,l[u]=st(m,d))}return{c(){e=H("div"),t=H("div");for(let u=0;u<l.length;u+=1)l[u].c();this.h()},l(u){e=L(u,"DIV",{role:!0,class:!0});var d=w(e);t=L(d,"DIV",{class:!0});var m=w(t);for(let g=0;g<l.length;g+=1)l[g].l(m);m.forEach(h),d.forEach(h),this.h()},h(){P(t,"class","table border-spacing-y-2"),P(e,"role","tooltip"),P(e,"class","absolute max-w-fit -translate-y-full break-words border border-gray-300 bg-white px-2 shadow-md"),mt(()=>i[6].call(e)),V(e,"hidden",i[0].length===0),$(e,"top",o),$(e,"left",n)},m(u,d){B(u,e,d),k(e,t);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(t,null);f=Pt(e,i[6].bind(e))},p(u,[d]){d&1&&(r=u[0],l=_t(l,d,s,1,u,r,a,t,Bt,st,null,at)),d&1&&V(e,"hidden",u[0].length===0),d&6&&n!==(n=`${Math.min(u[1],u[3]-u[2]-20)}px`)&&$(e,"left",n)},i:j,o:j,d(u){u&&h(e);for(let d=0;d<l.length;d+=1)l[d].d();f()}}}function ot(i){return typeof i.value=="number"?i.value.toFixed(3):i.info.dtype==="string_span"?"true":i.value}function vl(i,e,t){let{namedValues:l}=e,{x:a}=e,{y:f}=e;const o=window.innerWidth;let n=0;const r=f-1;function s(){n=this.clientWidth,t(2,n)}return i.$$set=u=>{"namedValues"in u&&t(0,l=u.namedValues),"x"in u&&t(1,a=u.x),"y"in u&&t(5,f=u.y)},[l,a,n,o,r,f,s]}class pl extends ee{constructor(e){super(),te(this,e,vl,gl,le,{namedValues:0,x:1,y:5})}}function kl(i,e){let t,l=e;const a=()=>o();l.isHovered&&f();function f(){const n=l.namedValues.filter(m=>Array.from(l.spansHovered).some(g=>{const T=gt(g);return vt(m.specificPath.slice(0,T.length),T)}));l.itemScrollContainer!=null&&l.itemScrollContainer.addEventListener("scroll",a);const r=i.getBoundingClientRect(),s=window.getComputedStyle(i),u=parseInt(s.getPropertyValue("line-height")),d=r.height>u?r.x+i.offsetLeft||i.clientLeft:r.x;t=new pl({props:{namedValues:n,x:d,y:r.top},target:document.body})}function o(){var n;t==null||t.$destroy(),(n=l.itemScrollContainer)==null||n.removeEventListener("scroll",a)}return{update(n){o(),l=n,l.isHovered&&f()},destroy(){o()}}}const Sl=500,pe=100;function wl(i,e,t){const l=[],a=new Set;for(const f of i){let o=!1;const n=[];for(const y of f.paths)a.has(y)||(n.push(y),a.add(y));const r=[],s=[];let u=-1/0;for(const[y,A]of Object.entries(f.originalSpans)){const E=e[y],N=gt(y);if(!(E==null||E.length===0))for(const b of A)for(const S of E){const F=S.path.slice(N.length),O=zt(b,F);if(O==null)continue;const ie=be.value(O);if(ie==null)continue;if(S.dtype==="float32"){const fe=be.value(O);fe!=null&&(u=Math.max(u,fe))}const ue=He(be.path(b)),ce=!n.includes(ue),J={value:ie,info:S,specificPath:be.path(O)};ce||r.push(J),s.push(J),S.type==="concept_score"||S.type==="semantic_similarity"?ie>.5&&(o=!0):o=!0}}const d=s.some(y=>y.info.type==="label"),m=s.some(y=>y.info.type==="leaf_span"),g=s.some(y=>y.info.type==="keyword"),T=s.some(y=>y.info.type==="metadata"&&!Be(y.info.dtype)),_=f.paths.some(y=>t.has(y)),p=_&&n.length>0&&Array.from(t).some(y=>n.includes(y));l.push({backgroundColor:Ie(u),isBlackBolded:g||T||m,isHighlightBolded:d,isShownSnippet:o,snippetScore:u,namedValues:r,paths:f.paths,text:f.text,snippetText:f.text,originalSpans:f.originalSpans,isHovered:_,isFirstHover:p})}return l}function El(i,e){var o,n,r;if(i=i.map(s=>{if(s.text.length>pe){const u={...s,text:s.text.slice(0,pe),snippetText:s.snippetText.slice(0,pe)},d=s.text.slice(pe).split(`
`),m=d.map((g,T)=>{const _=T!==d.length-1,p=g+(_?`
`:"");return{...s,text:p,snippetText:p,isShownSnippet:!1,namedValues:[]}});return[u,...m]}else return[s]}).flat(),e)return{snippetSpans:i.map(s=>({renderSpan:s,isShown:!0})),someSnippetsHidden:!1};const t=[];let l=0;for(const s of i)s.isShownSnippet&&(l+=s.text.length);const a=i.filter(s=>!s.isShownSnippet).sort((s,u)=>u.snippetScore-s.snippetScore);for(const s of a)if(s.isShownSnippet=!0,l+=s.text.length,l>Sl)break;let f=!1;for(const[s,u]of i.entries())if(u.isShownSnippet)t.push({renderSpan:u,isShown:!0});else{const d=((o=i[s+1])==null?void 0:o.isShownSnippet)===!0,m=((n=i[s-1])==null?void 0:n.isShownSnippet)===!0,g=((r=t[t.length-1])==null?void 0:r.isShown)===!0;t.push({renderSpan:u,isShown:!1,isEllipsis:(d||m)&&g,hasNewline:u.text.includes(`
`)}),f=!0}return{snippetSpans:t,someSnippetsHidden:f}}function rt(i,e,t){const l=i.slice();l[34]=e[t];const a=l[34].renderSpan;return l[35]=a,l}function Tl(i){let e,t,l,a,f,o=i[34].hasNewline&&ft();return{c(){e=H("span"),t=M("..."),o&&o.c(),l=ke(),this.h()},l(n){e=L(n,"SPAN",{class:!0});var r=w(e);t=z(r,"..."),r.forEach(h),o&&o.l(n),l=ke(),this.h()},h(){P(e,"class","highlight-span text-sm leading-5 svelte-8ox5pu")},m(n,r){B(n,e,r),k(e,t),o&&o.m(n,r),B(n,l,r),a||(f=ge(bt.call(null,e,{text:`Some text was hidden to improve readability. 
Click "Show all" to show the entire document.`})),a=!0)},p(n,r){n[34].hasNewline?o||(o=ft(),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null)},i:j,o:j,d(n){n&&h(e),o&&o.d(n),n&&h(l),a=!1,f()}}}function yl(i){let e,t,l,a,f,o,n,r;const s=[Cl,Nl],u=[];function d(_,p){return _[1]?0:1}t=d(i),l=u[t]=s[t](i);function m(){return i[28](i[35])}function g(){return i[29](i[35])}function T(){return i[30](i[35])}return{c(){e=H("span"),l.c(),this.h()},l(_){e=L(_,"SPAN",{class:!0});var p=w(e);l.l(p),p.forEach(h),this.h()},h(){P(e,"class","hover:cursor-poiner highlight-span break-words text-sm leading-5 svelte-8ox5pu"),V(e,"hover:cursor-pointer",i[0].length>0),V(e,"font-bold",i[35].isBlackBolded),V(e,"font-medium",i[35].isHighlightBolded&&!i[35].isBlackBolded),$(e,"color",i[35].isHighlightBolded&&!i[35].isBlackBolded?nt:""),$(e,"background-color",i[35].isHovered?Le(ct):i[35].backgroundColor)},m(_,p){B(_,e,p),u[t].m(e,null),o=!0,n||(r=[ge(a=kl.call(null,e,{namedValues:i[35].namedValues,isHovered:i[35].isFirstHover,spansHovered:i[4],itemScrollContainer:i[8]})),ge(f=_l.call(null,e,{details:m,findSimilar:i[3]!=null?i[15]:null,embeddings:i[2],addConceptLabel:i[13],addNotification:i[16]!=null?i[16].addNotification:ht,disabled:i[35].paths.length===0||i[2].length===0})),R(e,"mouseenter",g),R(e,"mouseleave",T)],n=!0)},p(_,p){i=_;let y=t;t=d(i),t===y?u[t].p(i,p):(Q(),I(u[y],1,1,()=>{u[y]=null}),Z(),l=u[t],l?l.p(i,p):(l=u[t]=s[t](i),l.c()),C(l,1),l.m(e,null)),a&&Fe(a.update)&&p[0]&400&&a.update.call(null,{namedValues:i[35].namedValues,isHovered:i[35].isFirstHover,spansHovered:i[4],itemScrollContainer:i[8]}),f&&Fe(f.update)&&p[0]&140&&f.update.call(null,{details:m,findSimilar:i[3]!=null?i[15]:null,embeddings:i[2],addConceptLabel:i[13],addNotification:i[16]!=null?i[16].addNotification:ht,disabled:i[35].paths.length===0||i[2].length===0}),(!o||p[0]&1)&&V(e,"hover:cursor-pointer",i[0].length>0),(!o||p[0]&128)&&V(e,"font-bold",i[35].isBlackBolded),(!o||p[0]&128)&&V(e,"font-medium",i[35].isHighlightBolded&&!i[35].isBlackBolded),p[0]&128&&$(e,"color",i[35].isHighlightBolded&&!i[35].isBlackBolded?nt:""),p[0]&128&&$(e,"background-color",i[35].isHovered?Le(ct):i[35].backgroundColor)},i(_){o||(C(l),o=!0)},o(_){I(l),o=!1},d(_){_&&h(e),u[t].d(),n=!1,Ae(r)}}}function ft(i){let e,t;return{c(){e=H("span"),t=H("br")},l(l){e=L(l,"SPAN",{});var a=w(e);t=L(a,"BR",{}),a.forEach(h)},m(l,a){B(l,e,a),k(e,t)},d(l){l&&h(e)}}}function Nl(i){let e=i[35].snippetText+"",t;return{c(){t=M(e)},l(l){t=z(l,e)},m(l,a){B(l,t,a)},p(l,a){a[0]&128&&e!==(e=l[35].snippetText+"")&&Y(t,e)},i:j,o:j,d(l){l&&h(t)}}}function Cl(i){let e,t;return e=new jt({props:{source:i[35].snippetText}}),{c(){ne(e.$$.fragment)},l(l){ae(e.$$.fragment,l)},m(l,a){se(e,l,a),t=!0},p(l,a){const f={};a[0]&128&&(f.source=l[35].snippetText),e.$set(f)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function ut(i){let e,t,l,a;const f=[yl,Tl],o=[];function n(r,s){return r[34].isShown?0:r[34].isEllipsis?1:-1}return~(e=n(i))&&(t=o[e]=f[e](i)),{c(){t&&t.c(),l=ke()},l(r){t&&t.l(r),l=ke()},m(r,s){~e&&o[e].m(r,s),B(r,l,s),a=!0},p(r,s){let u=e;e=n(r),e===u?~e&&o[e].p(r,s):(t&&(Q(),I(o[u],1,1,()=>{o[u]=null}),Z()),~e?(t=o[e],t?t.p(r,s):(t=o[e]=f[e](r),t.c()),C(t,1),t.m(l.parentNode,l)):t=null)},i(r){a||(C(t),a=!0)},o(r){I(t),a=!1},d(r){~e&&o[e].d(r),r&&h(l)}}}function dt(i){let e,t,l,a,f;const o=[Pl,Vl],n=[];function r(s,u){return s[5]?1:0}return l=r(i),a=n[l]=o[l](i),{c(){e=H("div"),t=H("div"),a.c(),this.h()},l(s){e=L(s,"DIV",{class:!0});var u=w(e);t=L(u,"DIV",{class:!0});var d=w(t);a.l(d),d.forEach(h),u.forEach(h),this.h()},h(){P(t,"class","w-30 mt-2 rounded border border-neutral-300 text-center"),P(e,"class","flex flex-row justify-center")},m(s,u){B(s,e,u),k(e,t),n[l].m(t,null),f=!0},p(s,u){let d=l;l=r(s),l===d?n[l].p(s,u):(Q(),I(n[d],1,1,()=>{n[d]=null}),Z(),a=n[l],a?a.p(s,u):(a=n[l]=o[l](s),a.c()),C(a,1),a.m(t,null))},i(s){f||(C(a),f=!0)},o(s){I(a),f=!1},d(s){s&&h(e),n[l].d()}}}function Vl(i){let e,t;return e=new pt({props:{size:"small",class:"w-full",kind:"ghost",icon:el,$$slots:{default:[Bl]},$$scope:{ctx:i}}}),e.$on("click",i[32]),{c(){ne(e.$$.fragment)},l(l){ae(e.$$.fragment,l)},m(l,a){se(e,l,a),t=!0},p(l,a){const f={};a[1]&128&&(f.$$scope={dirty:a,ctx:l}),e.$set(f)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function Pl(i){let e,t;return e=new pt({props:{size:"small",class:"w-full",kind:"ghost",icon:Zt,$$slots:{default:[Hl]},$$scope:{ctx:i}}}),e.$on("click",i[31]),{c(){ne(e.$$.fragment)},l(l){ae(e.$$.fragment,l)},m(l,a){se(e,l,a),t=!0},p(l,a){const f={};a[1]&128&&(f.$$scope={dirty:a,ctx:l}),e.$set(f)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function Bl(i){let e;return{c(){e=M("Hide excess")},l(t){e=z(t,"Hide excess")},m(t,l){B(t,e,l)},d(t){t&&h(e)}}}function Hl(i){let e;return{c(){e=M("Show all")},l(t){e=z(t,"Show all")},m(t,l){B(t,e,l)},d(t){t&&h(e)}}}function Ll(i){let e,t,l,a=i[7],f=[];for(let r=0;r<a.length;r+=1)f[r]=ut(rt(i,a,r));const o=r=>I(f[r],1,1,()=>{f[r]=null});let n=(i[6]||i[5])&&dt(i);return{c(){e=H("div");for(let r=0;r<f.length;r+=1)f[r].c();t=U(),n&&n.c(),this.h()},l(r){e=L(r,"DIV",{class:!0});var s=w(e);for(let u=0;u<f.length;u+=1)f[u].l(s);t=W(s),n&&n.l(s),s.forEach(h),this.h()},h(){P(e,"class","relative overflow-x-hidden text-ellipsis whitespace-break-spaces")},m(r,s){B(r,e,s);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(e,null);k(e,t),n&&n.m(e,null),l=!0},p(r,s){if(s[0]&110495){a=r[7];let u;for(u=0;u<a.length;u+=1){const d=rt(r,a,u);f[u]?(f[u].p(d,s),C(f[u],1)):(f[u]=ut(d),f[u].c(),C(f[u],1),f[u].m(e,t))}for(Q(),u=a.length;u<f.length;u+=1)o(u);Z()}r[6]||r[5]?n?(n.p(r,s),s[0]&96&&C(n,1)):(n=dt(r),n.c(),C(n,1),n.m(e,null)):n&&(Q(),I(n,1,1,()=>{n=null}),Z())},i(r){if(!l){for(let s=0;s<a.length;s+=1)C(f[s]);C(n),l=!0}},o(r){f=f.filter(Boolean);for(let s=0;s<f.length;s+=1)I(f[s]);I(n),l=!1},d(r){r&&h(e),Ht(f,r),n&&n.d()}}}const ct=.9,ht=()=>null;function Il(i,e,t){let l,a,f,o,n,r,{text:s}=e,{row:u}=e,{field:d=void 0}=e,{spanPaths:m}=e,{path:g=void 0}=e,{valuePaths:T}=e,{markdown:_=!1}=e,{embeddings:p}=e,{datasetViewStore:y=void 0}=e,{datasetStore:A=void 0}=e,E,N={},b=new Set;const S=v=>{v.paths.forEach(c=>b.add(c)),t(4,b)},F=v=>{v.paths.forEach(c=>b.delete(c)),t(4,b)};let O={};const ie=v=>{const he={conceptName:null,conceptNamespace:null,text:a.filter(me=>me.paths.some(Ve=>((v==null?void 0:v.paths)||[]).some(_e=>vt(_e,Ve)))).map(me=>me.text).join("")};for(const me of Object.keys(v.originalSpans)){const Ve=(N[me]||[]).filter(_e=>_e.type==="concept_score");for(const _e of Ve){const Me=_e.signal;he.conceptName=Me.concept_name,he.conceptNamespace=Me.namespace;break}}return he},ue=Dt();Oe(i,ue,v=>t(33,n=v));const ce=(v,c,ve,he)=>{if(!c||!v)throw Error("Label could not be added, no active concept.");n.mutate([v,c,{insert:[{text:ve,label:he}]}])};let J=!1,fe=Lt(Rt);Oe(i,fe,v=>t(8,r=v));const Se=(v,c)=>{y==null||d==null||y.addSearch({path:d.path,type:"semantic",query:c,embedding:v})},we=Ut(),Ee=v=>ie(v),Te=v=>S(v),ye=v=>F(v),Ne=()=>t(5,J=!0),Ce=()=>t(5,J=!1);return i.$$set=v=>{"text"in v&&t(17,s=v.text),"row"in v&&t(18,u=v.row),"field"in v&&t(19,d=v.field),"spanPaths"in v&&t(0,m=v.spanPaths),"path"in v&&t(20,g=v.path),"valuePaths"in v&&t(21,T=v.valuePaths),"markdown"in v&&t(1,_=v.markdown),"embeddings"in v&&t(2,p=v.embeddings),"datasetViewStore"in v&&t(22,y=v.datasetViewStore),"datasetStore"in v&&t(3,A=v.datasetStore)},i.$$.update=()=>{if(i.$$.dirty[0]&1310721&&(t(23,E={}),m.forEach(v=>{const c=Ot(u,v);t(23,E[He(v)]=c.filter(ve=>Ft(be.path(ve),g)||g==null),E)})),i.$$.dirty[0]&18874368){t(24,N={});for(const v of T){const c=He(v.spanPath);N[c]==null&&t(24,N[c]=[],N),N[c].push(v)}}if(i.$$.dirty[0]&8519680&&t(27,l=Yt(s,E)),i.$$.dirty[0]&150994960&&t(26,a=wl(l,N,b)),i.$$.dirty[0]&167772160){t(25,O={});for(const v of l)for(const c of v.paths)t(25,O[c]=O[c]||[],O),O[c].push(v)}i.$$.dirty[0]&67108896&&t(7,{snippetSpans:f,someSnippetsHidden:o}=El(a,J),f,(t(6,o),t(26,a),t(5,J),t(27,l),t(24,N),t(4,b),t(17,s),t(23,E),t(21,T),t(0,m),t(18,u),t(20,g)))},[m,_,p,A,b,J,o,f,r,S,F,ie,ue,ce,fe,Se,we,s,u,d,g,T,y,E,N,O,a,l,Ee,Te,ye,Ne,Ce]}class Rl extends ee{constructor(e){super(),te(this,e,Il,Ll,le,{text:17,row:18,field:19,spanPaths:0,path:20,valuePaths:21,markdown:1,embeddings:2,datasetViewStore:22,datasetStore:3},null,[-1,-1])}}export{dl as E,Rl as S,Dl as T,Ie as a,sl as b,ol as c,il as d};
