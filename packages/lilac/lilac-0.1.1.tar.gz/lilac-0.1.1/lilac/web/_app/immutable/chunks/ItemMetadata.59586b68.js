import{S as ie,i as ae,s as re,k as C,a as j,q as se,e as F,l as z,m as M,h as v,c as G,r as oe,n as P,G as p,p as q,b as $,a0 as I,H as ue,v as B,d as k,f as H,g as b,u as fe,W as he,X as me,a2 as _e,a3 as J,y as O,z as T,A as K,B as U,a4 as ge,O as pe}from"./index.8706e7a3.js";import{a6 as be,aw as ve,af as R,_ as ke,ar as we,aH as Se,aN as Ee,a0 as Ve,aB as ye,aI as $e,aP as Ie,bz as Pe,bA as Fe,aq as Ne}from"./Commands.7403edf1.js";import{s as Q,C as Ae,a as De}from"./notificationsStore.2895bc3e.js";function Z(r,e,l){const t=r.slice();return t[2]=e[l],t}function Le(r){let e,l;return e=new Ae({}),{c(){O(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){K(e,t,n),l=!0},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function Re(r){let e,l;return e=new De({}),{c(){O(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){K(e,t,n),l=!0},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function x(r){var f;let e,l=(r[0].formattedValue||((f=r[0].children)!=null&&f.length?"":"n/a"))+"",t,n;return{c(){e=C("div"),t=se(l),this.h()},l(i){e=z(i,"DIV",{title:!0,class:!0});var o=M(e);t=oe(o,l),o.forEach(v),this.h()},h(){var i,o;P(e,"title",n=(i=r[0].value)==null?void 0:i.toString()),P(e,"class","truncated text-right svelte-1woyz4e"),p(e,"italic",!r[0].formattedValue&&!((o=r[0].children)!=null&&o.length))},m(i,o){$(i,e,o),I(e,t)},p(i,o){var a,c,d;o&1&&l!==(l=(i[0].formattedValue||((a=i[0].children)!=null&&a.length?"":"n/a"))+"")&&fe(t,l),o&1&&n!==(n=(c=i[0].value)==null?void 0:c.toString())&&P(e,"title",n),o&1&&p(e,"italic",!i[0].formattedValue&&!((d=i[0].children)!=null&&d.length))},d(i){i&&v(e)}}}function ee(r){let e,l=[],t=new Map,n,f,i=r[0].children;const o=a=>be(a[2].path);for(let a=0;a<i.length;a+=1){let c=Z(r,i,a),d=o(c);t.set(d,l[a]=te(d,c))}return{c(){e=C("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=z(a,"DIV",{});var c=M(e);for(let d=0;d<l.length;d+=1)l[d].l(c);c.forEach(v),this.h()},h(){p(e,"bg-blue-100",r[0].isSignal),p(e,"bg-emerald-100",r[0].isPreviewSignal)},m(a,c){$(a,e,c);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(e,null);f=!0},p(a,c){c&1&&(i=a[0].children,B(),l=he(l,c,o,1,a,i,t,e,me,te,null,Z),H()),(!f||c&1)&&p(e,"bg-blue-100",a[0].isSignal),(!f||c&1)&&p(e,"bg-emerald-100",a[0].isPreviewSignal)},i(a){if(!f){for(let c=0;c<i.length;c+=1)b(l[c]);a&&_e(()=>{f&&(n||(n=J(e,Q,{},!0)),n.run(1))}),f=!0}},o(a){for(let c=0;c<l.length;c+=1)k(l[c]);a&&(n||(n=J(e,Q,{},!1)),n.run(0)),f=!1},d(a){a&&v(e);for(let c=0;c<l.length;c+=1)l[c].d();a&&n&&n.end()}}}function te(r,e){let l,t,n;return t=new de({props:{node:e[2]}}),{key:r,first:null,c(){l=F(),O(t.$$.fragment),this.h()},l(f){l=F(),T(t.$$.fragment,f),this.h()},h(){this.first=l},m(f,i){$(f,l,i),K(t,f,i),n=!0},p(f,i){e=f;const o={};i&1&&(o.node=e[2]),t.$set(o)},i(f){n||(b(t.$$.fragment,f),n=!0)},o(f){k(t.$$.fragment,f),n=!1},d(f){f&&v(l),U(t,f)}}}function Ce(r){var D;let e,l,t,n,f,i,o=r[0].fieldName+"",a,c,d,g,_,S,N;const A=[Re,Le],E=[];function V(s,u){return s[0].expanded?0:1}t=V(r),n=E[t]=A[t](r);let m=(r[0].formattedValue||!((D=r[0].children)!=null&&D.length))&&x(r),h=r[0].children&&r[0].expanded&&ee(r);return{c(){e=C("div"),l=C("button"),n.c(),f=j(),i=C("div"),a=se(o),c=j(),m&&m.c(),d=j(),h&&h.c(),g=F(),this.h()},l(s){e=z(s,"DIV",{class:!0});var u=M(e);l=z(u,"BUTTON",{class:!0});var w=M(l);n.l(w),w.forEach(v),f=G(u),i=z(u,"DIV",{class:!0});var y=M(i);a=oe(y,o),y.forEach(v),c=G(u),m&&m.l(u),u.forEach(v),d=G(s),h&&h.l(s),g=F(),this.h()},h(){var s;P(l,"class","p-1"),p(l,"invisible",!((s=r[0].children)!=null&&s.length)),P(i,"class","truncated font-mono font-medium text-neutral-500 svelte-1woyz4e"),q(i,"min-width","10ch"),P(e,"class","flex items-center gap-x-1 pr-2 text-xs"),p(e,"bg-blue-100",r[0].isSignal),p(e,"bg-emerald-100",r[0].isPreviewSignal),p(e,"bg-teal-100",r[0].isLabel),q(e,"padding-left",.25+(r[0].path.length-1)*.5+"rem"),q(e,"line-height","1.7rem")},m(s,u){$(s,e,u),I(e,l),E[t].m(l,null),I(e,f),I(e,i),I(i,a),I(e,c),m&&m.m(e,null),$(s,d,u),h&&h.m(s,u),$(s,g,u),_=!0,S||(N=ue(l,"click",r[1]),S=!0)},p(s,[u]){var y,L;let w=t;t=V(s),t!==w&&(B(),k(E[w],1,1,()=>{E[w]=null}),H(),n=E[t],n||(n=E[t]=A[t](s),n.c()),b(n,1),n.m(l,null)),(!_||u&1)&&p(l,"invisible",!((y=s[0].children)!=null&&y.length)),(!_||u&1)&&o!==(o=s[0].fieldName+"")&&fe(a,o),s[0].formattedValue||!((L=s[0].children)!=null&&L.length)?m?m.p(s,u):(m=x(s),m.c(),m.m(e,null)):m&&(m.d(1),m=null),(!_||u&1)&&p(e,"bg-blue-100",s[0].isSignal),(!_||u&1)&&p(e,"bg-emerald-100",s[0].isPreviewSignal),(!_||u&1)&&p(e,"bg-teal-100",s[0].isLabel),u&1&&q(e,"padding-left",.25+(s[0].path.length-1)*.5+"rem"),s[0].children&&s[0].expanded?h?(h.p(s,u),u&1&&b(h,1)):(h=ee(s),h.c(),b(h,1),h.m(g.parentNode,g)):h&&(B(),k(h,1,1,()=>{h=null}),H())},i(s){_||(b(n),b(h),_=!0)},o(s){k(n),k(h),_=!1},d(s){s&&v(e),E[t].d(),m&&m.d(),s&&v(d),h&&h.d(s),s&&v(g),S=!1,N()}}}function ce(r){r.expanded=!0,r.children&&r.children.forEach(ce)}function ze(r,e,l){let{node:t}=e;const n=()=>{l(0,t.expanded=!t.expanded,t),t.isSignal&&t.expanded&&ce(t),l(0,t)};return r.$$set=f=>{"node"in f&&l(0,t=f.node)},[t,n]}class de extends ie{constructor(e){super(),ae(this,e,ze,Ce,re,{node:0})}}function le(r,e,l){const t=r.slice();return t[7]=e[l],t}function ne(r){let e,l;return e=new de({props:{node:r[7]}}),{c(){O(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){K(e,t,n),l=!0},p(t,n){const f={};n&1&&(f.node=t[7]),e.$set(f)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function Me(r){let e,l,t=r[0].children||[],n=[];for(let i=0;i<t.length;i+=1)n[i]=ne(le(r,t,i));const f=i=>k(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=F()},l(i){for(let o=0;o<n.length;o+=1)n[o].l(i);e=F()},m(i,o){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(i,o);$(i,e,o),l=!0},p(i,[o]){if(o&1){t=i[0].children||[];let a;for(a=0;a<t.length;a+=1){const c=le(i,t,a);n[a]?(n[a].p(c,o),b(n[a],1)):(n[a]=ne(c),n[a].c(),b(n[a],1),n[a].m(e.parentNode,e))}for(B(),a=t.length;a<n.length;a+=1)f(a);H()}},i(i){if(!l){for(let o=0;o<t.length;o+=1)b(n[o]);l=!0}},o(i){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)k(n[o]);l=!1},d(i){ge(n,i),i&&v(e)}}}function qe(r,e,l){let t,n,{row:f}=e,{selectRowsSchema:i=void 0}=e,{highlightedFields:o}=e;const a=ve();pe(r,a,d=>l(5,n=d));function c(d){var D;const g=R.field(d),_=R.path(d);let S=R.value(d);if(g.dtype==="string_span"){const s=[];for(let u=_.length-1;u>=0;u--){const w=_.slice(0,u);if(ke(i.schema,w).dtype==="string"){const L=R.value(we(f,w)),{start:Y,end:W}=S;s.push(L.slice(Y,W));break}}S=s}const N=((D=n.data)==null?void 0:D.some(s=>{var u;return s.name===((u=g.signal)==null?void 0:u.signal_name)}))||!1,A=Se(g),E=Ee(g);let V;N||A&&g.dtype==null||g.dtype==="embedding"||g.repeated_field!=null?V="":S==null?V=null:V=Ve(S);function m(s){const{[Ie]:u,[Pe]:w,[Fe]:y,[Ne]:L,...Y}=s;return Object.values(Y).filter(W=>{var X;return((X=R.field(W))==null?void 0:X.label)==null})}const h=o.some(s=>ye(s.path,_));return{children:Array.isArray(d)?d.map(c):m(d).map(c),fieldName:_[_.length-1],field:g,path:_,expanded:h,isSignal:A,isLabel:E,isPreviewSignal:i!=null?$e(i,_):!1,isEmbeddingSignal:N,value:S,formattedValue:V}}return r.$$set=d=>{"row"in d&&l(2,f=d.row),"selectRowsSchema"in d&&l(3,i=d.selectRowsSchema),"highlightedFields"in d&&l(4,o=d.highlightedFields)},r.$$.update=()=>{r.$$.dirty&4&&l(0,t=c(f))},[t,a,f,i,o]}class Te extends ie{constructor(e){super(),ae(this,e,qe,Me,re,{row:2,selectRowsSchema:3,highlightedFields:4})}}export{Te as I};
