import{S as we,i as ke,s as ve,E as pe,k as T,a as Y,y as H,l as V,m as S,c as Q,z as O,h as m,F as Kt,G as ue,b as N,a0 as v,A as R,H as Fe,L as He,g as p,d as $,B as L,N as ye,C as dt,o as li,Q as Ie,q as Z,r as G,n as D,u as ce,e as de,v as ne,f as ie,M as We,w as Be,W as Tt,X as Vt,D as ni,I as ii,J as si,K as ri,Z as _e,_ as ge,$ as Ve,a1 as x,Y as Wi,p as ft,a7 as $e,a8 as Pe,O as be,ab as Te,T as Ye,U as Qe,V as ai,R as pt,af as Zi,a4 as Ae,a2 as Nt,ag as Gi,P as Ki,a3 as bt,a9 as yt,x as rt,a6 as Jt,ad as Ji}from"../chunks/index.8706e7a3.js";import{g as Mt}from"../chunks/navigation.916b232f.js";import{O as Xi,a as it,P as xi}from"../chunks/Page.a1a87573.js";import{W as es,R as ts,h as Se,U as Ge,V as je,b as mt,X as oi,Y as ls,c as Re,d as Ke,Z as ns,_ as fi,$ as is,a0 as Ee,a1 as Ct,a2 as qe,a3 as ui,t as Xe,C as xe,S as ci,a4 as zt,a5 as ss,a6 as Le,a7 as Ft,a8 as rs,O as di,a9 as as,B as mi,aa as hi,n as Xt,a as Pt,ab as vt,ac as _i,ad as ot,ae as os,af as ut,ag as xt,ah as et,ai as fs,aj as gi,ak as us,al as cs,am as ds,an as At,ao as ms,ap as hs,aq as It,ar as gt,as as _s,at as gs,au as pi,av as bi,aw as vi,i as ps,ax as bs,ay as vs,az as ws,F as ks,aA as lt,aB as wi,aC as $s,aD as ki,aE as Es,aF as Ss,aG as nt,aH as Bt,aI as $i,aJ as wt,aK as Dt,aL as Ei,aM as Si,aN as Ht,aO as kt,aP as ys,aQ as at,K as Is,A as Rt,aR as Ds,aS as Ts,aT as Vs,M as Lt,G as Ot,H as qt,I as Ns,J as Ms,aU as jt,aV as yi,z as Ii,aW as Di,aX as Cs,g as zs,aY as Fs,aZ as Ps,a_ as As,a$ as Bs,b0 as Hs,b1 as Rs,b2 as Ls,b3 as Os,b4 as qs,b5 as js,b6 as Us}from"../chunks/Commands.7403edf1.js";import{w as Ys}from"../chunks/index.8b48d14e.js";import{C as Qs,b as Ti,I as el,a as Ws,T as Zs,E as Gs,S as Ks}from"../chunks/ConceptView.6f1d00f7.js";import{g as Vi,s as $t,C as Js,f as Xs}from"../chunks/notificationsStore.2895bc3e.js";import{c as xs,E as Ni,S as Mi,T as Ci}from"../chunks/StringSpanHighlight.9285c1ba.js";import{L as er,a as tr,b as lr,c as nr,C as zi}from"../chunks/ComboBox.6930dccc.js";import{M as Ut,S as ir}from"../chunks/Settings.72d06060.js";import{g as Yt}from"../chunks/settingsStore.7a558b1a.js";import{I as sr}from"../chunks/ItemMetadata.59586b68.js";function tl(i,e,l){const t=i.slice();return t[39]=e[l],t[41]=l,t}const rr=i=>({item:i[0]&8,index:i[0]&8}),ll=i=>({item:i[39],index:i[41]});function nl(i){let e,l;return{c(){e=T("label"),l=Z(i[10]),this.h()},l(t){e=V(t,"LABEL",{for:!0});var n=S(e);l=G(n,i[10]),n.forEach(m),this.h()},h(){D(e,"for",i[19]),ue(e,"bx--label",!0),ue(e,"bx--label--disabled",i[9]),ue(e,"bx--visually-hidden",i[17])},m(t,n){N(t,e,n),v(e,l)},p(t,n){n[0]&1024&&ce(l,t[10]),n[0]&524288&&D(e,"for",t[19]),n[0]&512&&ue(e,"bx--label--disabled",t[9]),n[0]&131072&&ue(e,"bx--visually-hidden",t[17])},d(t){t&&m(e)}}}function il(i){let e,l;return e=new es({props:{class:"bx--list-box__invalid-icon"}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function sl(i){let e,l;return e=new ts({props:{class:"bx--list-box__invalid-icon bx--list-box__invalid-icon--warning"}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function ar(i){let e;return{c(){e=Z(i[16])},l(l){e=G(l,i[16])},m(l,t){N(l,e,t)},p(l,t){t[0]&65536&&ce(e,l[16])},d(l){l&&m(e)}}}function or(i){let e=i[4](i[22])+"",l;return{c(){l=Z(e)},l(t){l=G(t,e)},m(t,n){N(t,l,n)},p(t,n){n[0]&4194320&&e!==(e=t[4](t[22])+"")&&ce(l,e)},d(t){t&&m(l)}}}function rl(i){let e,l;return e=new lr({props:{"aria-labelledby":i[19],id:i[19],$$slots:{default:[cr]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&524288&&(o["aria-labelledby"]=t[19]),n[0]&524288&&(o.id=t[19]),n[0]&2097181|n[1]&64&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function fr(i){let e=i[4](i[39])+"",l;return{c(){l=Z(e)},l(t){l=G(t,e)},m(t,n){N(t,l,n)},p(t,n){n[0]&24&&e!==(e=t[4](t[39])+"")&&ce(l,e)},d(t){t&&m(l)}}}function ur(i){let e,l;const t=i[29].default,n=ni(t,i,i[37],ll),o=n||fr(i);return{c(){o&&o.c(),e=Y()},l(s){o&&o.l(s),e=Q(s)},m(s,r){o&&o.m(s,r),N(s,e,r),l=!0},p(s,r){n?n.p&&(!l||r[0]&8|r[1]&64)&&ii(n,t,s,s[37],l?ri(t,s[37],r,rr):si(s[37]),ll):o&&o.p&&(!l||r[0]&24)&&o.p(s,l?r:[-1,-1])},i(s){l||(p(o,s),l=!0)},o(s){$(o,s),l=!1},d(s){o&&o.d(s),s&&m(e)}}}function al(i,e){let l,t,n;function o(...r){return e[34](e[39],...r)}function s(){return e[35](e[39],e[41])}return t=new nr({props:{id:e[39].id,active:e[0]===e[39].id,highlighted:e[21]===e[41],disabled:e[39].disabled,$$slots:{default:[ur]},$$scope:{ctx:e}}}),t.$on("click",o),t.$on("mouseenter",s),{key:i,first:null,c(){l=de(),H(t.$$.fragment),this.h()},l(r){l=de(),O(t.$$.fragment,r),this.h()},h(){this.first=l},m(r,a){N(r,l,a),R(t,r,a),n=!0},p(r,a){e=r;const f={};a[0]&8&&(f.id=e[39].id),a[0]&9&&(f.active=e[0]===e[39].id),a[0]&2097160&&(f.highlighted=e[21]===e[41]),a[0]&8&&(f.disabled=e[39].disabled),a[0]&24|a[1]&64&&(f.$$scope={dirty:a,ctx:e}),t.$set(f)},i(r){n||(p(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){r&&m(l),L(t,r)}}}function cr(i){let e=[],l=new Map,t,n,o=i[3];const s=r=>r[39].id;for(let r=0;r<o.length;r+=1){let a=tl(i,o,r),f=s(a);l.set(f,e[r]=al(f,a))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();t=de()},l(r){for(let a=0;a<e.length;a+=1)e[a].l(r);t=de()},m(r,a){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(r,a);N(r,t,a),n=!0},p(r,a){a[0]&35651613|a[1]&64&&(o=r[3],ne(),e=Tt(e,a,s,1,r,o,l,t.parentNode,Vt,al,t,tl),ie())},i(r){if(!n){for(let a=0;a<o.length;a+=1)p(e[a]);n=!0}},o(r){for(let a=0;a<e.length;a+=1)$(e[a]);n=!1},d(r){for(let a=0;a<e.length;a+=1)e[a].d(r);r&&m(t)}}}function dr(i){let e,l,t,n,o,s,r,a,f,u,_,c=i[11]&&il(),d=!i[11]&&i[13]&&sl();function h(g,E){return g[22]?or:ar}let b=h(i),w=b(i);s=new tr({props:{translateWithId:i[18],open:i[1]}}),s.$on("click",i[30]);let k=i[1]&&rl(i);return{c(){c&&c.c(),e=Y(),d&&d.c(),l=Y(),t=T("button"),n=T("span"),w.c(),o=Y(),H(s.$$.fragment),r=Y(),k&&k.c(),a=de(),this.h()},l(g){c&&c.l(g),e=Q(g),d&&d.l(g),l=Q(g),t=V(g,"BUTTON",{type:!0,tabindex:!0,"aria-expanded":!0,translatewithid:!0,id:!0});var E=S(t);n=V(E,"SPAN",{});var y=S(n);w.l(y),y.forEach(m),o=Q(E),O(s.$$.fragment,E),E.forEach(m),r=Q(g),k&&k.l(g),a=de(),this.h()},h(){ue(n,"bx--list-box__label",!0),D(t,"type","button"),D(t,"tabindex","0"),D(t,"aria-expanded",i[1]),t.disabled=i[9],D(t,"translatewithid",i[18]),D(t,"id",i[19]),ue(t,"bx--list-box__field",!0)},m(g,E){c&&c.m(g,E),N(g,e,E),d&&d.m(g,E),N(g,l,E),N(g,t,E),v(t,n),w.m(n,null),v(t,o),R(s,t,null),i[31](t),N(g,r,E),k&&k.m(g,E),N(g,a,E),f=!0,u||(_=[Fe(t,"keydown",i[32]),Fe(t,"keyup",i[33])],u=!0)},p(g,E){g[11]?c?E[0]&2048&&p(c,1):(c=il(),c.c(),p(c,1),c.m(e.parentNode,e)):c&&(ne(),$(c,1,1,()=>{c=null}),ie()),!g[11]&&g[13]?d?E[0]&10240&&p(d,1):(d=sl(),d.c(),p(d,1),d.m(l.parentNode,l)):d&&(ne(),$(d,1,1,()=>{d=null}),ie()),b===(b=h(g))&&w?w.p(g,E):(w.d(1),w=b(g),w&&(w.c(),w.m(n,null)));const y={};E[0]&262144&&(y.translateWithId=g[18]),E[0]&2&&(y.open=g[1]),s.$set(y),(!f||E[0]&2)&&D(t,"aria-expanded",g[1]),(!f||E[0]&512)&&(t.disabled=g[9]),(!f||E[0]&262144)&&D(t,"translatewithid",g[18]),(!f||E[0]&524288)&&D(t,"id",g[19]),g[1]?k?(k.p(g,E),E[0]&2&&p(k,1)):(k=rl(g),k.c(),p(k,1),k.m(a.parentNode,a)):k&&(ne(),$(k,1,1,()=>{k=null}),ie())},i(g){f||(p(c),p(d),p(s.$$.fragment,g),p(k),f=!0)},o(g){$(c),$(d),$(s.$$.fragment,g),$(k),f=!1},d(g){c&&c.d(g),g&&m(e),d&&d.d(g),g&&m(l),g&&m(t),w.d(),L(s),i[31](null),g&&m(r),k&&k.d(g),g&&m(a),u=!1,We(_)}}}function ol(i){let e,l;return{c(){e=T("div"),l=Z(i[15]),this.h()},l(t){e=V(t,"DIV",{});var n=S(e);l=G(n,i[15]),n.forEach(m),this.h()},h(){ue(e,"bx--form__helper-text",!0),ue(e,"bx--form__helper-text--disabled",i[9])},m(t,n){N(t,e,n),v(e,l)},p(t,n){n[0]&32768&&ce(l,t[15]),n[0]&512&&ue(e,"bx--form__helper-text--disabled",t[9])},d(t){t&&m(e)}}}function mr(i){let e,l,t,n,o,s,r,a=i[10]&&nl(i);t=new er({props:{role:void 0,type:i[5],size:i[7],name:i[20],"aria-label":i[28]["aria-label"],class:`bx--dropdown 
      `+(i[6]==="top"&&"bx--list-box--up")+` 
      `+(i[11]&&"bx--dropdown--invalid")+` 
      `+(!i[11]&&i[13]&&"bx--dropdown--warning")+` 
      `+(i[1]&&"bx--dropdown--open")+`
      `+(i[7]==="sm"&&"bx--dropdown--sm")+`
      `+(i[7]==="xl"&&"bx--dropdown--xl")+`
      `+(i[23]&&"bx--dropdown--inline")+`
      `+(i[9]&&"bx--dropdown--disabled")+`
      `+(i[8]&&"bx--dropdown--light"),disabled:i[9],open:i[1],invalid:i[11],invalidText:i[12],light:i[8],warn:i[13],warnText:i[14],$$slots:{default:[dr]},$$scope:{ctx:i}}}),t.$on("click",i[36]);let f=!i[23]&&!i[11]&&!i[13]&&i[15]&&ol(i),u=[i[27]],_={};for(let c=0;c<u.length;c+=1)_=pe(_,u[c]);return{c(){e=T("div"),a&&a.c(),l=Y(),H(t.$$.fragment),n=Y(),f&&f.c(),this.h()},l(c){e=V(c,"DIV",{});var d=S(e);a&&a.l(d),l=Q(d),O(t.$$.fragment,d),n=Q(d),f&&f.l(d),d.forEach(m),this.h()},h(){Kt(e,_),ue(e,"bx--dropdown__wrapper",!0),ue(e,"bx--list-box__wrapper",!0),ue(e,"bx--dropdown__wrapper--inline",i[23]),ue(e,"bx--list-box__wrapper--inline",i[23]),ue(e,"bx--dropdown__wrapper--inline--invalid",i[23]&&i[11])},m(c,d){N(c,e,d),a&&a.m(e,null),v(e,l),R(t,e,null),v(e,n),f&&f.m(e,null),o=!0,s||(r=Fe(window,"click",i[26]),s=!0)},p(c,d){c[10]?a?a.p(c,d):(a=nl(c),a.c(),a.m(e,l)):a&&(a.d(1),a=null);const h={};d[0]&32&&(h.type=c[5]),d[0]&128&&(h.size=c[7]),d[0]&1048576&&(h.name=c[20]),d[0]&268435456&&(h["aria-label"]=c[28]["aria-label"]),d[0]&8399810&&(h.class=`bx--dropdown 
      `+(c[6]==="top"&&"bx--list-box--up")+` 
      `+(c[11]&&"bx--dropdown--invalid")+` 
      `+(!c[11]&&c[13]&&"bx--dropdown--warning")+` 
      `+(c[1]&&"bx--dropdown--open")+`
      `+(c[7]==="sm"&&"bx--dropdown--sm")+`
      `+(c[7]==="xl"&&"bx--dropdown--xl")+`
      `+(c[23]&&"bx--dropdown--inline")+`
      `+(c[9]&&"bx--dropdown--disabled")+`
      `+(c[8]&&"bx--dropdown--light")),d[0]&512&&(h.disabled=c[9]),d[0]&2&&(h.open=c[1]),d[0]&2048&&(h.invalid=c[11]),d[0]&4096&&(h.invalidText=c[12]),d[0]&256&&(h.light=c[8]),d[0]&8192&&(h.warn=c[13]),d[0]&16384&&(h.warnText=c[14]),d[0]&7154207|d[1]&64&&(h.$$scope={dirty:d,ctx:c}),t.$set(h),!c[23]&&!c[11]&&!c[13]&&c[15]?f?f.p(c,d):(f=ol(c),f.c(),f.m(e,null)):f&&(f.d(1),f=null),Kt(e,_=He(u,[d[0]&134217728&&c[27]])),ue(e,"bx--dropdown__wrapper",!0),ue(e,"bx--list-box__wrapper",!0),ue(e,"bx--dropdown__wrapper--inline",c[23]),ue(e,"bx--list-box__wrapper--inline",c[23]),ue(e,"bx--dropdown__wrapper--inline--invalid",c[23]&&c[11])},i(c){o||(p(t.$$.fragment,c),o=!0)},o(c){$(t.$$.fragment,c),o=!1},d(c){c&&m(e),a&&a.d(),L(t),f&&f.d(),s=!1,r()}}}function hr(i,e,l){let t,n;const o=["items","itemToString","selectedId","type","direction","size","open","light","disabled","titleText","invalid","invalidText","warn","warnText","helperText","label","hideLabel","translateWithId","id","name","ref"];let s=ye(e,o),{$$slots:r={},$$scope:a}=e,{items:f=[]}=e,{itemToString:u=z=>z.text||z.id}=e,{selectedId:_}=e,{type:c="default"}=e,{direction:d="bottom"}=e,{size:h=void 0}=e,{open:b=!1}=e,{light:w=!1}=e,{disabled:k=!1}=e,{titleText:g=""}=e,{invalid:E=!1}=e,{invalidText:y=""}=e,{warn:M=!1}=e,{warnText:C=""}=e,{helperText:I=""}=e,{label:F=void 0}=e,{hideLabel:ee=!1}=e,{translateWithId:U=void 0}=e,{id:A="ccs-"+Math.random().toString(36)}=e,{name:q=void 0}=e,{ref:B=null}=e;const te=dt();let j=-1;function W(z){let se=j+z;if(f.length===0)return;se<0?se=f.length-1:se>=f.length&&(se=0);let De=f[se].disabled;for(;De;)se=se+z,se<0?se=f.length-1:se>=f.length&&(se=0),De=f[se].disabled;l(21,j=se)}const J=()=>{te("select",{selectedId:_,selectedItem:f.find(z=>z.id===_)})},P=({target:z})=>{b&&B&&!B.contains(z)&&l(1,b=!1)};li(()=>(parent&&parent.addEventListener("click",P),()=>{parent&&parent.removeEventListener("click",P)}));const K=z=>{z.stopPropagation(),!k&&l(1,b=!b)};function fe(z){Be[z?"unshift":"push"](()=>{B=z,l(2,B)})}const oe=z=>{const{key:se}=z;["Enter","ArrowDown","ArrowUp"].includes(se)&&z.preventDefault(),se==="Enter"?(l(1,b=!b),j>-1&&f[j].id!==_&&(l(0,_=f[j].id),J(),l(1,b=!1))):se==="Tab"?(l(1,b=!1),B.blur()):se==="ArrowDown"?(b||l(1,b=!0),W(1)):se==="ArrowUp"?(b||l(1,b=!0),W(-1)):se==="Escape"&&l(1,b=!1)},re=z=>{const{key:se}=z;if([" "].includes(se))z.preventDefault();else return;l(1,b=!b),j>-1&&f[j].id!==_&&(l(0,_=f[j].id),J(),l(1,b=!1))},ae=(z,se)=>{if(z.disabled){se.stopPropagation();return}l(0,_=z.id),J(),B.focus()},le=(z,se)=>{z.disabled||l(21,j=se)},X=({target:z})=>{k||l(1,b=B.contains(z)?!b:!1)};return i.$$set=z=>{l(28,e=pe(pe({},e),Ie(z))),l(27,s=ye(e,o)),"items"in z&&l(3,f=z.items),"itemToString"in z&&l(4,u=z.itemToString),"selectedId"in z&&l(0,_=z.selectedId),"type"in z&&l(5,c=z.type),"direction"in z&&l(6,d=z.direction),"size"in z&&l(7,h=z.size),"open"in z&&l(1,b=z.open),"light"in z&&l(8,w=z.light),"disabled"in z&&l(9,k=z.disabled),"titleText"in z&&l(10,g=z.titleText),"invalid"in z&&l(11,E=z.invalid),"invalidText"in z&&l(12,y=z.invalidText),"warn"in z&&l(13,M=z.warn),"warnText"in z&&l(14,C=z.warnText),"helperText"in z&&l(15,I=z.helperText),"label"in z&&l(16,F=z.label),"hideLabel"in z&&l(17,ee=z.hideLabel),"translateWithId"in z&&l(18,U=z.translateWithId),"id"in z&&l(19,A=z.id),"name"in z&&l(20,q=z.name),"ref"in z&&l(2,B=z.ref),"$$scope"in z&&l(37,a=z.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&32&&l(23,t=c==="inline"),i.$$.dirty[0]&9&&l(22,n=f.find(z=>z.id===_)),i.$$.dirty[0]&2&&(b||l(21,j=-1))},e=Ie(e),[_,b,B,f,u,c,d,h,w,k,g,E,y,M,C,I,F,ee,U,A,q,j,n,t,W,J,P,s,e,r,K,fe,oe,re,ae,le,X,a]}class _r extends we{constructor(e){super(),ke(this,e,hr,mr,ve,{items:3,itemToString:4,selectedId:0,type:5,direction:6,size:7,open:1,light:8,disabled:9,titleText:10,invalid:11,invalidText:12,warn:13,warnText:14,helperText:15,label:16,hideLabel:17,translateWithId:18,id:19,name:20,ref:2},null,[-1,-1])}}const gr=_r;function fl(i){let e,l;return{c(){e=_e("title"),l=Z(i[1])},l(t){e=ge(t,"title",{});var n=S(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&ce(l,t[1])},d(t){t&&m(e)}}}function pr(i){let e,l,t=i[1]&&fl(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let s=0;s<n.length;s+=1)o=pe(o,n[s]);return{c(){e=_e("svg"),t&&t.c(),l=_e("path"),this.h()},l(s){e=ge(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=S(e);t&&t.l(r),l=ge(r,"path",{d:!0}),S(l).forEach(m),r.forEach(m),this.h()},h(){D(l,"d","M17 15L17 8 15 8 15 15 8 15 8 17 15 17 15 24 17 24 17 17 24 17 24 15z"),Ve(e,o)},m(s,r){N(s,e,r),t&&t.m(e,null),v(e,l)},p(s,[r]){s[1]?t?t.p(s,r):(t=fl(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=He(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:s[0]},r&1&&{height:s[0]},r&4&&s[2],r&8&&s[3]]))},i:x,o:x,d(s){s&&m(e),t&&t.d()}}}function br(i,e,l){let t,n;const o=["size","title"];let s=ye(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ie(f))),l(3,s=ye(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[r,a,n,s,t]}class Qt extends we{constructor(e){super(),ke(this,e,br,pr,ve,{size:0,title:1})}}function ul(i){let e,l;return{c(){e=_e("title"),l=Z(i[1])},l(t){e=ge(t,"title",{});var n=S(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&ce(l,t[1])},d(t){t&&m(e)}}}function vr(i){let e,l,t=i[1]&&ul(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let s=0;s<n.length;s+=1)o=pe(o,n[s]);return{c(){e=_e("svg"),t&&t.c(),l=_e("path"),this.h()},l(s){e=ge(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=S(e);t&&t.l(r),l=ge(r,"path",{d:!0}),S(l).forEach(m),r.forEach(m),this.h()},h(){D(l,"d","M26 24v4H6V24H4v4H4a2 2 0 002 2H26a2 2 0 002-2h0V24zM26 14L24.59 12.59 17 20.17 17 2 15 2 15 20.17 7.41 12.59 6 14 16 24 26 14z"),Ve(e,o)},m(s,r){N(s,e,r),t&&t.m(e,null),v(e,l)},p(s,[r]){s[1]?t?t.p(s,r):(t=ul(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=He(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:s[0]},r&1&&{height:s[0]},r&4&&s[2],r&8&&s[3]]))},i:x,o:x,d(s){s&&m(e),t&&t.d()}}}function wr(i,e,l){let t,n;const o=["size","title"];let s=ye(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ie(f))),l(3,s=ye(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[r,a,n,s,t]}class kr extends we{constructor(e){super(),ke(this,e,wr,vr,ve,{size:0,title:1})}}function cl(i){let e,l;return{c(){e=_e("title"),l=Z(i[1])},l(t){e=ge(t,"title",{});var n=S(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&ce(l,t[1])},d(t){t&&m(e)}}}function $r(i){let e,l,t=i[1]&&cl(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let s=0;s<n.length;s+=1)o=pe(o,n[s]);return{c(){e=_e("svg"),t&&t.c(),l=_e("path"),this.h()},l(s){e=ge(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=S(e);t&&t.l(r),l=ge(r,"path",{d:!0}),S(l).forEach(m),r.forEach(m),this.h()},h(){D(l,"d","M16 7a3 3 0 113-3A3.0033 3.0033 0 0116 7zm0-4a1 1 0 101 1A1.001 1.001 0 0016 3zM11 30a3 3 0 113-3A3.0033 3.0033 0 0111 30zm0-4a1 1 0 101 1A1.001 1.001 0 0011 26zM7 11a3 3 0 113-3A3.0033 3.0033 0 017 11zM7 7A1 1 0 108 8 1.001 1.001 0 007 7zM21 30a3 3 0 113-3A3.0033 3.0033 0 0121 30zm0-4a1 1 0 101 1A1.001 1.001 0 0021 26zM25 11a3 3 0 113-3A3.0033 3.0033 0 0125 11zm0-4a1 1 0 101 1A1.001 1.001 0 0025 7zM4 21a3 3 0 113-3A3.0033 3.0033 0 014 21zm0-4a1 1 0 101 1A1.001 1.001 0 004 17zM28 21a3 3 0 113-3A3.0033 3.0033 0 0128 21zm0-4a1 1 0 101 1A1.001 1.001 0 0028 17zM16 22a6 6 0 116-6A6.0069 6.0069 0 0116 22zm0-10a4 4 0 104 4A4.0045 4.0045 0 0016 12z"),Ve(e,o)},m(s,r){N(s,e,r),t&&t.m(e,null),v(e,l)},p(s,[r]){s[1]?t?t.p(s,r):(t=cl(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=He(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:s[0]},r&1&&{height:s[0]},r&4&&s[2],r&8&&s[3]]))},i:x,o:x,d(s){s&&m(e),t&&t.d()}}}function Er(i,e,l){let t,n;const o=["size","title"];let s=ye(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ie(f))),l(3,s=ye(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[r,a,n,s,t]}class Sr extends we{constructor(e){super(),ke(this,e,Er,$r,ve,{size:0,title:1})}}function dl(i){let e,l;return{c(){e=_e("title"),l=Z(i[1])},l(t){e=ge(t,"title",{});var n=S(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&ce(l,t[1])},d(t){t&&m(e)}}}function yr(i){let e,l,t,n,o,s,r,a,f,u=i[1]&&dl(i),_=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],c={};for(let d=0;d<_.length;d+=1)c=pe(c,_[d]);return{c(){e=_e("svg"),u&&u.c(),l=_e("path"),t=_e("circle"),n=_e("path"),o=_e("circle"),s=_e("path"),r=_e("circle"),a=_e("path"),f=_e("path"),this.h()},l(d){e=ge(d,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var h=S(e);u&&u.l(h),l=ge(h,"path",{d:!0}),S(l).forEach(m),t=ge(h,"circle",{cx:!0,cy:!0,r:!0}),S(t).forEach(m),n=ge(h,"path",{d:!0}),S(n).forEach(m),o=ge(h,"circle",{cx:!0,cy:!0,r:!0}),S(o).forEach(m),s=ge(h,"path",{d:!0}),S(s).forEach(m),r=ge(h,"circle",{cx:!0,cy:!0,r:!0}),S(r).forEach(m),a=ge(h,"path",{d:!0}),S(a).forEach(m),f=ge(h,"path",{d:!0}),S(f).forEach(m),h.forEach(m),this.h()},h(){D(l,"d","M20 25H27V27H20zM22 29H25V31H22zM27 23h-2c0-1.1.4-2 1.2-2.8l.5-.5c.8-.8 1.3-2 1.3-3.2 0-2.5-2-4.5-4.5-4.5S19 14 19 16.5c0 1.2.5 2.3 1.3 3.2l.5.5C21.6 21 22 21.9 22 23h-2c0-.5-.2-1-.6-1.4l-.5-.5c-1.2-1.2-1.9-2.9-1.9-4.6 0-3.6 2.9-6.5 6.5-6.5s6.5 2.9 6.5 6.5c0 1.7-.7 3.4-1.9 4.6l-.5.5C27.2 22 27 22.5 27 23zM6 22H14V24H6z"),D(t,"cx","12"),D(t,"cy","19"),D(t,"r","1"),D(n,"d","M6 18H9V20H6zM6 14H13V16H6zM10 10H17V12H10z"),D(o,"cx","7"),D(o,"cy","11"),D(o,"r","1"),D(s,"d","M16 6H20V8H16z"),D(r,"cx","13"),D(r,"cy","7"),D(r,"r","1"),D(a,"d","M6 6H10V8H6z"),D(f,"d","M18,28H4V4l18,0v4h2V4c0-1.1-0.9-2-2-2H4C2.9,2,2,2.9,2,4v24c0,1.1,0.9,2,2,2h14V28z"),Ve(e,c)},m(d,h){N(d,e,h),u&&u.m(e,null),v(e,l),v(e,t),v(e,n),v(e,o),v(e,s),v(e,r),v(e,a),v(e,f)},p(d,[h]){d[1]?u?u.p(d,h):(u=dl(d),u.c(),u.m(e,l)):u&&(u.d(1),u=null),Ve(e,c=He(_,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},h&1&&{width:d[0]},h&1&&{height:d[0]},h&4&&d[2],h&8&&d[3]]))},i:x,o:x,d(d){d&&m(e),u&&u.d()}}}function Ir(i,e,l){let t,n;const o=["size","title"];let s=ye(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ie(f))),l(3,s=ye(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[r,a,n,s,t]}class Dr extends we{constructor(e){super(),ke(this,e,Ir,yr,ve,{size:0,title:1})}}function ml(i){let e,l;return{c(){e=_e("title"),l=Z(i[1])},l(t){e=ge(t,"title",{});var n=S(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&ce(l,t[1])},d(t){t&&m(e)}}}function Tr(i){let e,l,t,n=i[1]&&ml(i),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],s={};for(let r=0;r<o.length;r+=1)s=pe(s,o[r]);return{c(){e=_e("svg"),n&&n.c(),l=_e("path"),t=_e("path"),this.h()},l(r){e=ge(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var a=S(e);n&&n.l(a),l=ge(a,"path",{d:!0}),S(l).forEach(m),t=ge(a,"path",{d:!0}),S(t).forEach(m),a.forEach(m),this.h()},h(){D(l,"d","M17 22L17 14 13 14 13 16 15 16 15 22 12 22 12 24 20 24 20 22 17 22zM16 8a1.5 1.5 0 101.5 1.5A1.5 1.5 0 0016 8z"),D(t,"d","M16,30A14,14,0,1,1,30,16,14,14,0,0,1,16,30ZM16,4A12,12,0,1,0,28,16,12,12,0,0,0,16,4Z"),Ve(e,s)},m(r,a){N(r,e,a),n&&n.m(e,null),v(e,l),v(e,t)},p(r,[a]){r[1]?n?n.p(r,a):(n=ml(r),n.c(),n.m(e,l)):n&&(n.d(1),n=null),Ve(e,s=He(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},a&1&&{width:r[0]},a&1&&{height:r[0]},a&4&&r[2],a&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),n&&n.d()}}}function Vr(i,e,l){let t,n;const o=["size","title"];let s=ye(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ie(f))),l(3,s=ye(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[r,a,n,s,t]}class ct extends we{constructor(e){super(),ke(this,e,Vr,Tr,ve,{size:0,title:1})}}function hl(i){let e,l;return{c(){e=_e("title"),l=Z(i[1])},l(t){e=ge(t,"title",{});var n=S(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&ce(l,t[1])},d(t){t&&m(e)}}}function Nr(i){let e,l,t=i[1]&&hl(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let s=0;s<n.length;s+=1)o=pe(o,n[s]);return{c(){e=_e("svg"),t&&t.c(),l=_e("path"),this.h()},l(s){e=ge(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=S(e);t&&t.l(r),l=ge(r,"path",{d:!0}),S(l).forEach(m),r.forEach(m),this.h()},h(){D(l,"d","M29,27.5859l-7.5521-7.5521a11.0177,11.0177,0,1,0-1.4141,1.4141L27.5859,29ZM4,13a9,9,0,1,1,9,9A9.01,9.01,0,0,1,4,13Z"),Ve(e,o)},m(s,r){N(s,e,r),t&&t.m(e,null),v(e,l)},p(s,[r]){s[1]?t?t.p(s,r):(t=hl(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=He(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:s[0]},r&1&&{height:s[0]},r&4&&s[2],r&8&&s[3]]))},i:x,o:x,d(s){s&&m(e),t&&t.d()}}}function Mr(i,e,l){let t,n;const o=["size","title"];let s=ye(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ie(f))),l(3,s=ye(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[r,a,n,s,t]}class Fi extends we{constructor(e){super(),ke(this,e,Mr,Nr,ve,{size:0,title:1})}}function _l(i){let e,l;return{c(){e=_e("title"),l=Z(i[1])},l(t){e=ge(t,"title",{});var n=S(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&ce(l,t[1])},d(t){t&&m(e)}}}function Cr(i){let e,l,t=i[1]&&_l(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let s=0;s<n.length;s+=1)o=pe(o,n[s]);return{c(){e=_e("svg"),t&&t.c(),l=_e("path"),this.h()},l(s){e=ge(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=S(e);t&&t.l(r),l=ge(r,"path",{d:!0}),S(l).forEach(m),r.forEach(m),this.h()},h(){D(l,"d","M30 6L26 6 26 2 24 2 24 6 20 6 20 8 24 8 24 12 26 12 26 8 30 8 30 6zM24 28.5859l-5.9751-5.9751a9.0234 9.0234 0 10-1.4141 1.4141L22.5859 30zM4 17a7 7 0 117 7A7.0078 7.0078 0 014 17z"),Ve(e,o)},m(s,r){N(s,e,r),t&&t.m(e,null),v(e,l)},p(s,[r]){s[1]?t?t.p(s,r):(t=_l(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=He(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:s[0]},r&1&&{height:s[0]},r&4&&s[2],r&8&&s[3]]))},i:x,o:x,d(s){s&&m(e),t&&t.d()}}}function zr(i,e,l){let t,n;const o=["size","title"];let s=ye(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ie(f))),l(3,s=ye(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[r,a,n,s,t]}class Pi extends we{constructor(e){super(),ke(this,e,zr,Cr,ve,{size:0,title:1})}}function gl(i){let e,l;return{c(){e=_e("title"),l=Z(i[1])},l(t){e=ge(t,"title",{});var n=S(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&ce(l,t[1])},d(t){t&&m(e)}}}function Fr(i){let e,l,t=i[1]&&gl(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let s=0;s<n.length;s+=1)o=pe(o,n[s]);return{c(){e=_e("svg"),t&&t.c(),l=_e("path"),this.h()},l(s){e=ge(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=S(e);t&&t.l(r),l=ge(r,"path",{d:!0}),S(l).forEach(m),r.forEach(m),this.h()},h(){D(l,"d","M18 22L19.414 20.586 23 24.172 23 4 25 4 25 24.172 28.586 20.586 30 22 24 28 18 22zM2 18H16V20H2zM6 12H16V14H6zM10 6H16V8H10z"),Ve(e,o)},m(s,r){N(s,e,r),t&&t.m(e,null),v(e,l)},p(s,[r]){s[1]?t?t.p(s,r):(t=gl(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=He(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:s[0]},r&1&&{height:s[0]},r&4&&s[2],r&8&&s[3]]))},i:x,o:x,d(s){s&&m(e),t&&t.d()}}}function Pr(i,e,l){let t,n;const o=["size","title"];let s=ye(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ie(f))),l(3,s=ye(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[r,a,n,s,t]}class Ai extends we{constructor(e){super(),ke(this,e,Pr,Fr,ve,{size:0,title:1})}}function pl(i){let e,l;return{c(){e=_e("title"),l=Z(i[1])},l(t){e=ge(t,"title",{});var n=S(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&ce(l,t[1])},d(t){t&&m(e)}}}function Ar(i){let e,l,t=i[1]&&pl(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let s=0;s<n.length;s+=1)o=pe(o,n[s]);return{c(){e=_e("svg"),t&&t.c(),l=_e("path"),this.h()},l(s){e=ge(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=S(e);t&&t.l(r),l=ge(r,"path",{d:!0}),S(l).forEach(m),r.forEach(m),this.h()},h(){D(l,"d","M18 22L19.414 20.586 23 24.172 23 4 25 4 25 24.172 28.586 20.586 30 22 24 28 18 22zM2 6H16V8H2zM6 12H16V14H6zM10 18H16V20H10z"),Ve(e,o)},m(s,r){N(s,e,r),t&&t.m(e,null),v(e,l)},p(s,[r]){s[1]?t?t.p(s,r):(t=pl(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=He(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:s[0]},r&1&&{height:s[0]},r&4&&s[2],r&8&&s[3]]))},i:x,o:x,d(s){s&&m(e),t&&t.d()}}}function Br(i,e,l){let t,n;const o=["size","title"];let s=ye(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ie(f))),l(3,s=ye(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[r,a,n,s,t]}class Bi extends we{constructor(e){super(),ke(this,e,Br,Ar,ve,{size:0,title:1})}}function bl(i){let e,l;return{c(){e=_e("title"),l=Z(i[1])},l(t){e=ge(t,"title",{});var n=S(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&ce(l,t[1])},d(t){t&&m(e)}}}function Hr(i){let e,l,t=i[1]&&bl(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let s=0;s<n.length;s+=1)o=pe(o,n[s]);return{c(){e=_e("svg"),t&&t.c(),l=_e("path"),this.h()},l(s){e=ge(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=S(e);t&&t.l(r),l=ge(r,"path",{d:!0}),S(l).forEach(m),r.forEach(m),this.h()},h(){D(l,"d","M30 19.415L28.586 18 25 21.587 21.414 18 20 19.415 23.586 23 20 26.586 21.414 28 25 24.414 28.586 28 30 26.586 26.414 23 30 19.415zM10 18H16V20H10zM2 6H16V8H2zM6 12H16V14H6z"),Ve(e,o)},m(s,r){N(s,e,r),t&&t.m(e,null),v(e,l)},p(s,[r]){s[1]?t?t.p(s,r):(t=bl(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=He(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:s[0]},r&1&&{height:s[0]},r&4&&s[2],r&8&&s[3]]))},i:x,o:x,d(s){s&&m(e),t&&t.d()}}}function Rr(i,e,l){let t,n;const o=["size","title"];let s=ye(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ie(f))),l(3,s=ye(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[r,a,n,s,t]}class Lr extends we{constructor(e){super(),ke(this,e,Rr,Hr,ve,{size:0,title:1})}}function vl(i){let e,l;return{c(){e=_e("title"),l=Z(i[1])},l(t){e=ge(t,"title",{});var n=S(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&ce(l,t[1])},d(t){t&&m(e)}}}function Or(i){let e,l,t=i[1]&&vl(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let s=0;s<n.length;s+=1)o=pe(o,n[s]);return{c(){e=_e("svg"),t&&t.c(),l=_e("path"),this.h()},l(s){e=ge(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=S(e);t&&t.l(r),l=ge(r,"path",{d:!0}),S(l).forEach(m),r.forEach(m),this.h()},h(){D(l,"d","M4 6H22V8H4zM4 12H22V14H4zM4 18H22V20H4zM4 24H22V26H4zM26 6H28V8H26zM26 12H28V14H26zM26 18H28V20H26zM26 24H28V26H26z"),Ve(e,o)},m(s,r){N(s,e,r),t&&t.m(e,null),v(e,l)},p(s,[r]){s[1]?t?t.p(s,r):(t=vl(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=He(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:s[0]},r&1&&{height:s[0]},r&4&&s[2],r&8&&s[3]]))},i:x,o:x,d(s){s&&m(e),t&&t.d()}}}function qr(i,e,l){let t,n;const o=["size","title"];let s=ye(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ie(f))),l(3,s=ye(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[r,a,n,s,t]}class jr extends we{constructor(e){super(),ke(this,e,qr,Or,ve,{size:0,title:1})}}function wl(i){let e,l;return{c(){e=_e("title"),l=Z(i[1])},l(t){e=ge(t,"title",{});var n=S(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&ce(l,t[1])},d(t){t&&m(e)}}}function Ur(i){let e,l,t,n=i[1]&&wl(i),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],s={};for(let r=0;r<o.length;r+=1)s=pe(s,o[r]);return{c(){e=_e("svg"),n&&n.c(),l=_e("path"),t=_e("path"),this.h()},l(r){e=ge(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var a=S(e);n&&n.l(a),l=ge(a,"path",{d:!0}),S(l).forEach(m),t=ge(a,"path",{d:!0}),S(t).forEach(m),a.forEach(m),this.h()},h(){D(l,"d","M10,14a4,4,0,1,1,4-4A4.0045,4.0045,0,0,1,10,14Zm0-6a2,2,0,1,0,1.998,2.0044A2.002,2.002,0,0,0,10,8Z"),D(t,"d","M16.6436,29.4145,2.5858,15.3555A2,2,0,0,1,2,13.9414V4A2,2,0,0,1,4,2h9.9413a2,2,0,0,1,1.4142.5858L29.4144,16.6436a2.0005,2.0005,0,0,1,0,2.8285l-9.9424,9.9425a2.0008,2.0008,0,0,1-2.8285,0ZM4,4v9.9417L18.0578,28,28,18.0579,13.9416,4Z"),Ve(e,s)},m(r,a){N(r,e,a),n&&n.m(e,null),v(e,l),v(e,t)},p(r,[a]){r[1]?n?n.p(r,a):(n=wl(r),n.c(),n.m(e,l)):n&&(n.d(1),n=null),Ve(e,s=He(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},a&1&&{width:r[0]},a&1&&{height:r[0]},a&4&&r[2],a&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),n&&n.d()}}}function Yr(i,e,l){let t,n;const o=["size","title"];let s=ye(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ie(f))),l(3,s=ye(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[r,a,n,s,t]}class Qr extends we{constructor(e){super(),ke(this,e,Yr,Ur,ve,{size:0,title:1})}}function kl(i){let e;return{c(){e=T("div"),this.h()},l(l){e=V(l,"DIV",{id:!0,style:!0}),S(e).forEach(m),this.h()},h(){D(e,"id","svelte-infinite-scroll"),ft(e,"width","0")},m(l,t){N(l,e,t),i[11](e)},p:x,d(l){l&&m(e),i[11](null)}}}function Wr(i){let e,l=!i[1]&&!i[0]&&kl(i);return{c(){l&&l.c(),e=de()},l(t){l&&l.l(t),e=de()},m(t,n){l&&l.m(t,n),N(t,e,n)},p(t,[n]){!t[1]&&!t[0]?l?l.p(t,n):(l=kl(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:x,o:x,d(t){l&&l.d(t),t&&m(e)}}}function Zr(i,e,l){let{threshold:t=0}=e,{horizontal:n=!1}=e,{elementScroll:o=null}=e,{hasMore:s=!0}=e,{reverse:r=!1}=e,{window:a=!1}=e;const f=dt();let u=!1,_,c,d,h;const b=g=>{if(!s)return;const E=g.target;w(E,r,n)<=t?(!u&&s&&(f("loadMore"),l(8,c=E.scrollHeight),l(9,d=E.scrollTop)),l(7,u=!0)):l(7,u=!1)},w=(g,E,y)=>{const M=g.documentElement?g.documentElement:g;return E?y?M.scrollLeft:M.scrollTop:y?M.scrollWidth-M.clientWidth-M.scrollLeft:M.scrollHeight-M.clientHeight-M.scrollTop};li(()=>{a?l(10,h=document):o?l(10,h=o):l(10,h=_.parentNode)}),Wi(()=>{h&&(h.removeEventListener("scroll",b),h.removeEventListener("resize",b))});function k(g){Be[g?"unshift":"push"](()=>{_=g,l(2,_)})}return i.$$set=g=>{"threshold"in g&&l(3,t=g.threshold),"horizontal"in g&&l(4,n=g.horizontal),"elementScroll"in g&&l(0,o=g.elementScroll),"hasMore"in g&&l(5,s=g.hasMore),"reverse"in g&&l(6,r=g.reverse),"window"in g&&l(1,a=g.window)},i.$$.update=()=>{i.$$.dirty&1088&&h&&(r&&l(10,h.scrollTop=h.scrollHeight,h),h.addEventListener("scroll",b),h.addEventListener("resize",b)),i.$$.dirty&1984&&u&&r&&l(10,h.scrollTop=h.scrollHeight-c+d,h)},[o,a,_,t,n,s,r,u,c,d,h,k]}class Gr extends we{constructor(e){super(),ke(this,e,Zr,Wr,ve,{threshold:3,horizontal:4,elementScroll:0,hasMore:5,reverse:6,window:1})}}function $l(i){const e=i[6].find(function(...t){return i[23](i[30],...t)});i[31]=e}function El(i){let e,l;return{c(){e=T("span"),l=Z(i[0]),this.h()},l(t){e=V(t,"SPAN",{class:!0});var n=S(e);l=G(n,i[0]),n.forEach(m),this.h()},h(){D(e,"class","mr-1")},m(t,n){N(t,e,n),v(e,l)},p(t,n){n[0]&1&&ce(l,t[0])},d(t){t&&m(e)}}}function Kr(i){let e,l,t;function n(s){i[25](s)}let o={size:"sm",open:i[4],items:i[6],shouldFilterItem:ia,placeholder:"Select or add a new label",$$slots:{default:[la,({item:s})=>({30:s}),({item:s})=>[s?1073741824:0]]},$$scope:{ctx:i}};return i[2]!==void 0&&(o.value=i[2]),e=new zi({props:o}),i[24](e),Be.push(()=>Ye(e,"value",n)),e.$on("select",i[13]),{c(){H(e.$$.fragment)},l(s){O(e.$$.fragment,s)},m(s,r){R(e,s,r),t=!0},p(s,r){const a={};r[0]&16&&(a.open=s[4]),r[0]&64&&(a.items=s[6]),r[0]&1073741892|r[1]&2&&(a.$$scope={dirty:r,ctx:s}),!l&&r[0]&4&&(l=!0,a.value=s[2],Qe(()=>l=!1)),e.$set(a)},i(s){t||(p(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){i[24](null),L(e,s)}}}function Jr(i){let e,l;return e=new Re({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Xr(i){let e,l=i[31].text+"",t;return{c(){e=T("div"),t=Z(l),this.h()},l(n){e=V(n,"DIV",{class:!0});var o=S(e);t=G(o,l),o.forEach(m),this.h()},h(){D(e,"class","flex justify-between gap-x-8")},m(n,o){N(n,e,o),v(e,t)},p(n,o){o[0]&1073741888&&l!==(l=n[31].text+"")&&ce(t,l)},i:x,o:x,d(n){n&&m(e)}}}function xr(i){let e,l,t,n,o,s,r;return l=new Qr({props:{$$slots:{default:[ta]},$$scope:{ctx:i}}}),{c(){e=T("div"),H(l.$$.fragment),t=Y(),n=T("div"),o=Z("New label: "),s=Z(i[2]),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);O(l.$$.fragment,f),t=Q(f),n=V(f,"DIV",{class:!0});var u=S(n);o=G(u,"New label: "),s=G(u,i[2]),u.forEach(m),f.forEach(m),this.h()},h(){D(n,"class","ml-2"),D(e,"class","new-concept flex flex-row items-center justify-items-center")},m(a,f){N(a,e,f),R(l,e,null),v(e,t),v(e,n),v(n,o),v(n,s),r=!0},p(a,f){const u={};f[1]&2&&(u.$$scope={dirty:f,ctx:a}),l.$set(u),(!r||f[0]&4)&&ce(s,a[2])},i(a){r||(p(l.$$.fragment,a),r=!0)},o(a){$(l.$$.fragment,a),r=!1},d(a){a&&m(e),L(l)}}}function ea(i){let e;return{c(){e=T("div")},l(l){e=V(l,"DIV",{}),S(e).forEach(m)},m(l,t){N(l,e,t)},p:x,i:x,o:x,d(l){l&&m(e)}}}function ta(i){let e,l;return e=new Qt({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function la(i){$l(i);let e,l,t,n;const o=[ea,xr,Xr],s=[];function r(a,f){return a[31]==null?0:a[31].id==="new-label"?1:2}return e=r(i),l=s[e]=o[e](i),{c(){l.c(),t=de()},l(a){l.l(a),t=de()},m(a,f){s[e].m(a,f),N(a,t,f),n=!0},p(a,f){$l(a);let u=e;e=r(a),e===u?s[e].p(a,f):(ne(),$(s[u],1,1,()=>{s[u]=null}),ie(),l=s[e],l?l.p(a,f):(l=s[e]=o[e](a),l.c()),p(l,1),l.m(t.parentNode,t))},i(a){n||(p(l),n=!0)},o(a){$(l),n=!1},d(a){s[e].d(a),a&&m(t)}}}function na(i){let e,l,t,n,o,s,r,a,f,u,_,c,d,h,b;t=new Qt({});let w=i[0]!=null&&El(i);const k=[Jr,Kr],g=[];function E(y,M){return y[8]==null||y[8].isLoading?0:1}return u=E(i),_=g[u]=k[u](i),{c(){e=T("div"),l=T("button"),H(t.$$.fragment),n=Y(),w&&w.c(),a=Y(),f=T("div"),_.c(),this.h()},l(y){e=V(y,"DIV",{class:!0});var M=S(e);l=V(M,"BUTTON",{class:!0});var C=S(l);O(t.$$.fragment,C),n=Q(C),w&&w.l(C),C.forEach(m),M.forEach(m),a=Q(y),f=V(y,"DIV",{class:!0});var I=S(f);_.l(I),I.forEach(m),this.h()},h(){l.disabled=o=!i[7],D(l,"class","flex items-center gap-x-2 border border-gray-300"),ue(l,"opacity-30",!i[7]),ue(l,"hidden",i[4]),D(e,"class","w-full"),D(f,"class","absolute left-0 top-0 w-60"),ue(f,"hidden",!i[4])},m(y,M){N(y,e,M),v(e,l),R(t,l,null),v(l,n),w&&w.m(l,null),N(y,a,M),N(y,f,M),g[u].m(f,null),d=!0,h||(b=[Fe(l,"click",i[12]),$e(s=Se.call(null,l,{text:i[1]})),$e(r=Se.call(null,e,{text:i[7]?"":"You do not have access to add labels."})),$e(c=xs.call(null,f,i[26]))],h=!0)},p(y,M){y[0]!=null?w?w.p(y,M):(w=El(y),w.c(),w.m(l,null)):w&&(w.d(1),w=null),(!d||M[0]&128&&o!==(o=!y[7]))&&(l.disabled=o),s&&Pe(s.update)&&M[0]&2&&s.update.call(null,{text:y[1]}),(!d||M[0]&128)&&ue(l,"opacity-30",!y[7]),(!d||M[0]&16)&&ue(l,"hidden",y[4]),r&&Pe(r.update)&&M[0]&128&&r.update.call(null,{text:y[7]?"":"You do not have access to add labels."});let C=u;u=E(y),u===C?g[u].p(y,M):(ne(),$(g[C],1,1,()=>{g[C]=null}),ie(),_=g[u],_?_.p(y,M):(_=g[u]=k[u](y),_.c()),p(_,1),_.m(f,null)),c&&Pe(c.update)&&M[0]&16&&c.update.call(null,y[26]),(!d||M[0]&16)&&ue(f,"hidden",!y[4])},i(y){d||(p(t.$$.fragment,y),p(_),d=!0)},o(y){$(t.$$.fragment,y),$(_),d=!1},d(y){y&&m(e),L(t),w&&w.d(),y&&m(a),y&&m(f),g[u].d(),h=!1,We(b)}}}const ia=(i,e)=>i.text.toLowerCase().includes(e.toLowerCase())||i.id==="new-label";function sa(i,e,l){let t,n,o,s,r,a,f,u,_,c,d,h=x,b=()=>(h(),h=Te(c,K=>l(8,d=K)),c),w,k,g;i.$$.on_destroy.push(()=>h());let{addLabelsQuery:E}=e,{hideLabels:y=void 0}=e,{buttonText:M=void 0}=e,{helperText:C="Add label"}=e,I,F="";const ee=Vi(),U=Ge();be(i,U,K=>l(20,w=K));const A=je();be(i,A,K=>l(22,g=K));const q=mt();be(i,q,K=>l(21,k=K));function B(){l(4,t=!0),requestAnimationFrame(()=>{I.$set({open:!0})})}const te=K=>{const fe=K.detail.selectedItem,oe={...E,label_name:fe.text};d.mutate([n,o,oe],{onSuccess:re=>{const ae=oe.row_ids!=null?`Document id: ${oe.row_ids}`:`${re.toLocaleString()} rows labeled`;ee.addNotification({kind:"success",title:`Added label "${oe.label_name}"`,message:ae}),l(4,t=!1)}}),I.clear()},j=(K,fe)=>fe.id===K.id;function W(K){Be[K?"unshift":"push"](()=>{I=K,l(3,I)})}function J(K){F=K,l(2,F)}const P=()=>l(4,t=!1);return i.$$set=K=>{"addLabelsQuery"in K&&l(14,E=K.addLabelsQuery),"hideLabels"in K&&l(15,y=K.hideLabels),"buttonText"in K&&l(0,M=K.buttonText),"helperText"in K&&l(1,C=K.helperText)},i.$$.update=()=>{var K;i.$$.dirty[0]&4194304&&(n=g.namespace),i.$$.dirty[0]&4194304&&(o=g.datasetName),i.$$.dirty[0]&2097152&&l(7,s=(K=k.data)==null?void 0:K.access.dataset.edit_labels),i.$$.dirty[0]&1048576&&l(18,r=w.schema&&oi(w.schema)),i.$$.dirty[0]&4&&l(19,a=/^[A-Za-z0-9_-]+$/.test(F)),i.$$.dirty[0]&524292&&l(17,f={id:"new-label",text:F,disabled:!a}),i.$$.dirty[0]&294912&&l(16,u=(r==null?void 0:r.filter(fe=>!(y||[]).includes(fe)).map((fe,oe)=>({id:`label_${oe}`,text:fe})))||[]),i.$$.dirty[0]&196612&&l(6,_=[...F!=""?[f]:[],...u]),i.$$.dirty[0]&1048576&&b(l(5,c=w.schema!=null?ls(w.schema):null))},l(4,t=!1),[M,C,F,I,t,c,_,s,d,U,A,q,B,te,E,y,u,f,r,a,w,k,g,j,W,J,P]}class Hi extends we{constructor(e){super(),ke(this,e,sa,na,ve,{addLabelsQuery:14,hideLabels:15,buttonText:0,helperText:1},null,[-1,-1])}}function ra(i){let e,l,t,n,o,s,r,a,f,u;t=new ns({});const _=i[7].default,c=ni(_,i,i[10],null);return{c(){e=T("div"),l=T("button"),H(t.$$.fragment),o=Y(),s=T("span"),c&&c.c(),this.h()},l(d){e=V(d,"DIV",{class:!0});var h=S(e);l=V(h,"BUTTON",{class:!0});var b=S(l);O(t.$$.fragment,b),b.forEach(m),o=Q(h),s=V(h,"SPAN",{class:!0});var w=S(s);c&&c.l(w),w.forEach(m),h.forEach(m),this.h()},h(){l.disabled=i[1],D(l,"class","p-0 opacity-50 hover:opacity-100"),D(s,"class","truncate"),D(e,"class","removable-tag flex items-center gap-x-1")},m(d,h){N(d,e,h),v(e,l),R(t,l,null),v(e,o),v(e,s),c&&c.m(s,null),a=!0,f||(u=[$e(n=Se.call(null,l,{text:i[1]?i[2]:i[3]})),Fe(l,"click",Zi(i[8])),$e(r=Se.call(null,s,{text:i[4]}))],f=!0)},p(d,h){(!a||h&2)&&(l.disabled=d[1]),n&&Pe(n.update)&&h&14&&n.update.call(null,{text:d[1]?d[2]:d[3]}),c&&c.p&&(!a||h&1024)&&ii(c,_,d,d[10],a?ri(_,d[10],h,null):si(d[10]),null),r&&Pe(r.update)&&h&16&&r.update.call(null,{text:d[4]})},i(d){a||(p(t.$$.fragment,d),p(c,d),a=!0)},o(d){$(t.$$.fragment,d),$(c,d),a=!1},d(d){d&&m(e),L(t),c&&c.d(d),f=!1,We(u)}}}function aa(i){let e,l;const t=[{type:i[0]},i[6]];let n={$$slots:{default:[ra]},$$scope:{ctx:i}};for(let o=0;o<t.length;o+=1)n=pe(n,t[o]);return e=new Ke({props:n}),e.$on("click",i[9]),{c(){H(e.$$.fragment)},l(o){O(e.$$.fragment,o)},m(o,s){R(e,o,s),l=!0},p(o,[s]){const r=s&65?He(t,[s&1&&{type:o[0]},s&64&&ai(o[6])]):{};s&1054&&(r.$$scope={dirty:s,ctx:o}),e.$set(r)},i(o){l||(p(e.$$.fragment,o),l=!0)},o(o){$(e.$$.fragment,o),l=!1},d(o){L(e,o)}}}function oa(i,e,l){const t=["type","removeDisabled","removeDisabledHelperText","closeHelperText","clickHelperText"];let n=ye(e,t),{$$slots:o={},$$scope:s}=e;const r=dt();let{type:a}=e,{removeDisabled:f=!1}=e,{removeDisabledHelperText:u=void 0}=e,{closeHelperText:_=void 0}=e,{clickHelperText:c=void 0}=e;const d=()=>r("remove");function h(b){pt.call(this,i,b)}return i.$$set=b=>{e=pe(pe({},e),Ie(b)),l(6,n=ye(e,t)),"type"in b&&l(0,a=b.type),"removeDisabled"in b&&l(1,f=b.removeDisabled),"removeDisabledHelperText"in b&&l(2,u=b.removeDisabledHelperText),"closeHelperText"in b&&l(3,_=b.closeHelperText),"clickHelperText"in b&&l(4,c=b.clickHelperText),"$$scope"in b&&l(10,s=b.$$scope)},[a,f,u,_,c,r,n,o,d,h,s]}class Et extends we{constructor(e){super(),ke(this,e,oa,aa,ve,{type:0,removeDisabled:1,removeDisabledHelperText:2,closeHelperText:3,clickHelperText:4})}}function fa(i){let e,l=(i[2]?"":i[5])+"",t,n,o=i[0][i[1].op]+"",s,r,a;return{c(){e=T("span"),t=Z(l),n=Y(),s=Z(o),r=Y(),a=Z(i[4]),this.h()},l(f){e=V(f,"SPAN",{class:!0});var u=S(e);t=G(u,l),u.forEach(m),n=Q(f),s=G(f,o),r=Q(f),a=G(f,i[4]),this.h()},h(){D(e,"class","font-mono")},m(f,u){N(f,e,u),v(e,t),N(f,n,u),N(f,s,u),N(f,r,u),N(f,a,u)},p(f,u){u&36&&l!==(l=(f[2]?"":f[5])+"")&&ce(t,l),u&2&&o!==(o=f[0][f[1].op]+"")&&ce(s,o),u&16&&ce(a,f[4])},d(f){f&&m(e),f&&m(n),f&&m(s),f&&m(r),f&&m(a)}}}function ua(i){let e,l,t=(i[2]?"":i[5])+"",n;return{c(){e=Z("has "),l=T("span"),n=Z(t),this.h()},l(o){e=G(o,"has "),l=V(o,"SPAN",{class:!0});var s=S(l);n=G(s,t),s.forEach(m),this.h()},h(){D(l,"class","font-mono")},m(o,s){N(o,e,s),N(o,l,s),v(l,n)},p(o,s){s&36&&t!==(t=(o[2]?"":o[5])+"")&&ce(n,t)},d(o){o&&m(e),o&&m(l)}}}function ca(i){let e,l;return{c(){e=Z("is labeled "),l=Z(i[7])},l(t){e=G(t,"is labeled "),l=G(t,i[7])},m(t,n){N(t,e,n),N(t,l,n)},p(t,n){n&128&&ce(l,t[7])},d(t){t&&m(e),t&&m(l)}}}function da(i){let e;function l(o,s){return o[7]!=null?ca:o[1].op==="exists"?ua:fa}let t=l(i),n=t(i);return{c(){n.c(),e=de()},l(o){n.l(o),e=de()},m(o,s){n.m(o,s),N(o,e,s)},p(o,s){t===(t=l(o))&&n?n.p(o,s):(n.d(1),n=t(o),n&&(n.c(),n.m(e.parentNode,e)))},d(o){n.d(o),o&&m(e)}}}function ma(i){let e,l,t,n,o,s;return l=new Et({props:{interactive:!0,type:"magenta",$$slots:{default:[da]},$$scope:{ctx:i}}}),l.$on("click",i[12]),l.$on("remove",i[13]),{c(){e=T("div"),H(l.$$.fragment),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);O(l.$$.fragment,a),a.forEach(m),this.h()},h(){D(e,"class","filter-pill items-center")},m(r,a){N(r,e,a),R(l,e,null),n=!0,o||(s=$e(t=Se.call(null,e,{text:i[6]})),o=!0)},p(r,[a]){const f={};a&16566&&(f.$$scope={dirty:a,ctx:r}),l.$set(f),t&&Pe(t.update)&&a&64&&t.update.call(null,{text:r[6]})},i(r){n||(p(l.$$.fragment,r),n=!0)},o(r){$(l.$$.fragment,r),n=!1},d(r){r&&m(e),L(l),o=!1,s()}}}function ha(i,e,l){let t,n,o,s,r,a,f;const u={equals:"=",not_equal:"≠",less:"<",less_equal:"≤",greater:">",greater_equal:"≥",in:"in",exists:"exists"};let{filter:_}=e,{hidePath:c=!1}=e,{schema:d}=e;const h=je();be(i,h,k=>l(8,f=k));const b=()=>Xe({command:xe.EditFilter,namespace:f.namespace,datasetName:f.datasetName,path:s}),w=()=>h.removeFilter(_);return i.$$set=k=>{"filter"in k&&l(1,_=k.filter),"hidePath"in k&&l(2,c=k.hidePath),"schema"in k&&l(10,d=k.schema)},i.$$.update=()=>{i.$$.dirty&1026&&l(11,t=fi(d,typeof _.path=="string"?[_.path]:_.path)),i.$$.dirty&2048&&l(7,n=t!=null?is(t):null),i.$$.dirty&2&&l(4,o=Ee(_.value||"false")),i.$$.dirty&2&&l(3,s=Ct(_.path)),i.$$.dirty&26&&l(6,r=_.op==="exists"?`has ${qe(s)}`:`${qe(s)} ${u[_.op]} ${o}`),i.$$.dirty&8&&l(5,a=ui(s))},[u,_,c,s,o,a,r,n,f,h,d,t,b,w]}class Ri extends we{constructor(e){super(),ke(this,e,ha,ma,ve,{FILTER_SHORTHANDS:0,filter:1,hidePath:2,schema:10})}get FILTER_SHORTHANDS(){return this.$$.ctx[0]}}function Sl(i){let e,l=i[0].concept_namespace+"",t,n,o=i[0].concept_name+"",s;return{c(){e=T("div"),t=Z(l),n=Z(" / "),s=Z(o),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);t=G(a,l),n=G(a," / "),s=G(a,o),a.forEach(m),this.h()},h(){D(e,"class","mb-2 w-full text-center text-xs")},m(r,a){N(r,e,a),v(e,t),v(e,n),v(e,s)},p(r,a){a&1&&l!==(l=r[0].concept_namespace+"")&&ce(t,l),a&1&&o!==(o=r[0].concept_name+"")&&ce(s,o)},d(r){r&&m(e)}}}function _a(i){let e=qe(i[0].path)+"",l,t,n=i[0].type+"",o;return{c(){l=Z(e),t=Z(": "),o=Z(n)},l(s){l=G(s,e),t=G(s,": "),o=G(s,n)},m(s,r){N(s,l,r),N(s,t,r),N(s,o,r)},p(s,r){r&1&&e!==(e=qe(s[0].path)+"")&&ce(l,e),r&1&&n!==(n=s[0].type+"")&&ce(o,n)},d(s){s&&m(l),s&&m(t),s&&m(o)}}}function yl(i){let e,l,t;return l=new Ni({props:{embedding:i[0].embedding}}),{c(){e=T("div"),H(l.$$.fragment),this.h()},l(n){e=V(n,"DIV",{class:!0});var o=S(e);O(l.$$.fragment,o),o.forEach(m),this.h()},h(){D(e,"class","ml-2")},m(n,o){N(n,e,o),R(l,e,null),t=!0},p(n,o){const s={};o&1&&(s.embedding=n[0].embedding),l.$set(s)},i(n){t||(p(l.$$.fragment,n),t=!0)},o(n){$(l.$$.fragment,n),t=!1},d(n){n&&m(e),L(l)}}}function Il(i){let e,l;return{c(){e=T("div"),l=Z(i[2]),this.h()},l(t){e=V(t,"DIV",{class:!0});var n=S(e);l=G(n,i[2]),n.forEach(m),this.h()},h(){D(e,"class","mt-2 whitespace-pre-wrap text-left")},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&4&&ce(l,t[2])},d(t){t&&m(e)}}}function ga(i){let e,l,t,n,o,s,r,a,f=i[0].type==="concept"&&Sl(i);n=new Ke({props:{type:i[1],$$slots:{default:[_a]},$$scope:{ctx:i}}});let u=(i[0].type==="semantic"||i[0].type==="concept")&&yl(i),_=i[2]&&Il(i);return{c(){f&&f.c(),e=Y(),l=T("div"),t=T("div"),H(n.$$.fragment),o=Y(),u&&u.c(),s=Y(),_&&_.c(),r=de(),this.h()},l(c){f&&f.l(c),e=Q(c),l=V(c,"DIV",{class:!0});var d=S(l);t=V(d,"DIV",{class:!0});var h=S(t);O(n.$$.fragment,h),h.forEach(m),o=Q(d),u&&u.l(d),d.forEach(m),s=Q(c),_&&_.l(c),r=de(),this.h()},h(){D(t,"class","whitespace-nowrap"),D(l,"class","flex items-center justify-items-center")},m(c,d){f&&f.m(c,d),N(c,e,d),N(c,l,d),v(l,t),R(n,t,null),v(l,o),u&&u.m(l,null),N(c,s,d),_&&_.m(c,d),N(c,r,d),a=!0},p(c,[d]){c[0].type==="concept"?f?f.p(c,d):(f=Sl(c),f.c(),f.m(e.parentNode,e)):f&&(f.d(1),f=null);const h={};d&2&&(h.type=c[1]),d&9&&(h.$$scope={dirty:d,ctx:c}),n.$set(h),c[0].type==="semantic"||c[0].type==="concept"?u?(u.p(c,d),d&1&&p(u,1)):(u=yl(c),u.c(),p(u,1),u.m(l,null)):u&&(ne(),$(u,1,1,()=>{u=null}),ie()),c[2]?_?_.p(c,d):(_=Il(c),_.c(),_.m(r.parentNode,r)):_&&(_.d(1),_=null)},i(c){a||(p(n.$$.fragment,c),p(u),a=!0)},o(c){$(n.$$.fragment,c),$(u),a=!1},d(c){f&&f.d(c),c&&m(e),c&&m(l),L(n),u&&u.d(),c&&m(s),_&&_.d(c),c&&m(r)}}}function pa(i,e,l){let t,{search:n}=e,{tagType:o="outline"}=e;return i.$$set=s=>{"search"in s&&l(0,n=s.search),"tagType"in s&&l(1,o=s.tagType)},i.$$.update=()=>{i.$$.dirty&1&&l(2,t=n.type==="concept"?"":n.query)},[n,o,t]}class Dl extends we{constructor(e){super(),ke(this,e,pa,ga,ve,{search:0,tagType:1})}}function ba(i){let e,l=qe(i[0].path)+"",t,n,o,s;return{c(){e=T("span"),t=Z(l),n=Z(' has "'),o=Z(i[2]),s=Z('"'),this.h()},l(r){e=V(r,"SPAN",{class:!0});var a=S(e);t=G(a,l),a.forEach(m),n=G(r,' has "'),o=G(r,i[2]),s=G(r,'"'),this.h()},h(){D(e,"class","font-mono")},m(r,a){N(r,e,a),v(e,t),N(r,n,a),N(r,o,a),N(r,s,a)},p(r,a){a&1&&l!==(l=qe(r[0].path)+"")&&ce(t,l),a&4&&ce(o,r[2])},d(r){r&&m(e),r&&m(n),r&&m(o),r&&m(s)}}}function va(i){let e,l,t,n,o,s;return l=new Et({props:{title:"query",interactive:!0,type:i[1],$$slots:{default:[ba]},$$scope:{ctx:i}}}),l.$on("click",i[6]),l.$on("remove",i[7]),{c(){e=T("div"),H(l.$$.fragment),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);O(l.$$.fragment,a),a.forEach(m),this.h()},h(){D(e,"class","search-pill items-center text-left")},m(r,a){N(r,e,a),R(l,e,null),n=!0,o||(s=$e(t=Se.call(null,e,{component:Dl,props:{search:i[0],tagType:i[1]}})),o=!0)},p(r,[a]){const f={};a&2&&(f.type=r[1]),a&517&&(f.$$scope={dirty:a,ctx:r}),l.$set(f),t&&Pe(t.update)&&a&3&&t.update.call(null,{component:Dl,props:{search:r[0],tagType:r[1]}})},i(r){n||(p(l.$$.fragment,r),n=!0)},o(r){$(l.$$.fragment,r),n=!1},d(r){r&&m(e),L(l),o=!1,s()}}}function wa(i,e,l){let t,n,o,{search:s}=e;const r={keyword:"outline",semantic:"teal",concept:"green"},a=je(),f=Ge();be(i,f,c=>l(3,o=c));function u(c){pt.call(this,i,c)}const _=()=>{var c;return a.removeSearch(s,((c=o.selectRowsSchema)==null?void 0:c.data)||null)};return i.$$set=c=>{"search"in c&&l(0,s=c.search)},i.$$.update=()=>{i.$$.dirty&1&&l(2,t=s.type==="concept"?s.concept_name:s.query),i.$$.dirty&1&&l(1,n=s.type!=null?r[s.type]:"outline")},[s,n,t,o,a,f,u,_]}class Li extends we{constructor(e){super(),ke(this,e,wa,va,ve,{search:0})}}function Tl(i,e,l){const t=i.slice();return t[27]=e[l][0],t[28]=e[l][1],t}function Vl(i,e,l){const t=i.slice();return t[31]=e[l],t}function Nl(i,e,l){const t=i.slice();return t[34]=e[l],t}function Ml(i,e,l){const t=i.slice();return t[37]=e[l],t}function Cl(i,e,l){const t=i.slice();return t[40]=e[l],t}function zl(i){let e,l,t,n=i[15],o=[];for(let a=0;a<n.length;a+=1)o[a]=Al(Ml(i,n,a));const s=a=>$(o[a],1,1,()=>{o[a]=null});let r=i[10]!=null&&i[10].length>0&&Bl(i);return{c(){e=T("div");for(let a=0;a<o.length;a+=1)o[a].c();l=Y(),r&&r.c(),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);for(let u=0;u<o.length;u+=1)o[u].l(f);l=Q(f),r&&r.l(f),f.forEach(m),this.h()},h(){D(e,"class","flex w-full flex-row gap-x-4")},m(a,f){N(a,e,f);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);v(e,l),r&&r.m(e,null),t=!0},p(a,f){if(f[0]&229384){n=a[15];let u;for(u=0;u<n.length;u+=1){const _=Ml(a,n,u);o[u]?(o[u].p(_,f),p(o[u],1)):(o[u]=Al(_),o[u].c(),p(o[u],1),o[u].m(e,l))}for(ne(),u=n.length;u<o.length;u+=1)s(u);ie()}a[10]!=null&&a[10].length>0?r?(r.p(a,f),f[0]&1024&&p(r,1)):(r=Bl(a),r.c(),p(r,1),r.m(e,null)):r&&(ne(),$(r,1,1,()=>{r=null}),ie())},i(a){if(!t){for(let f=0;f<n.length;f+=1)p(o[f]);p(r),t=!0}},o(a){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)$(o[f]);$(r),t=!1},d(a){a&&m(e),Ae(o,a),r&&r.d()}}}function Fl(i){let e,l,t=i[16][i[37]]+"",n,o,s,r,a,f=i[3][i[37]],u=[];for(let c=0;c<f.length;c+=1)u[c]=Pl(Cl(i,f,c));const _=c=>$(u[c],1,1,()=>{u[c]=null});return{c(){e=T("div"),l=T("div"),n=Z(t),o=Y(),s=T("div");for(let c=0;c<u.length;c+=1)u[c].c();r=Y(),this.h()},l(c){e=V(c,"DIV",{class:!0});var d=S(e);l=V(d,"DIV",{class:!0});var h=S(l);n=G(h,t),h.forEach(m),o=Q(d),s=V(d,"DIV",{class:!0});var b=S(s);for(let w=0;w<u.length;w+=1)u[w].l(b);b.forEach(m),r=Q(d),d.forEach(m),this.h()},h(){D(l,"class","text-xs font-light"),D(s,"class","flex flex-row gap-x-1"),D(e,"class","filter-group rounded bg-slate-50 px-2 py-1 shadow-sm svelte-16ln9ke")},m(c,d){N(c,e,d),v(e,l),v(l,n),v(e,o),v(e,s);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(s,null);v(e,r),a=!0},p(c,d){if(d[0]&163848){f=c[3][c[37]];let h;for(h=0;h<f.length;h+=1){const b=Cl(c,f,h);u[h]?(u[h].p(b,d),p(u[h],1)):(u[h]=Pl(b),u[h].c(),p(u[h],1),u[h].m(s,null))}for(ne(),h=f.length;h<u.length;h+=1)_(h);ie()}},i(c){if(!a){for(let d=0;d<f.length;d+=1)p(u[d]);a=!0}},o(c){u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)$(u[d]);a=!1},d(c){c&&m(e),Ae(u,c)}}}function Pl(i){let e,l;function t(){return i[24](i[40])}return e=new Li({props:{search:i[40]}}),e.$on("click",t),{c(){H(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,o){R(e,n,o),l=!0},p(n,o){i=n;const s={};o[0]&8&&(s.search=i[40]),e.$set(s)},i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){$(e.$$.fragment,n),l=!1},d(n){L(e,n)}}}function Al(i){let e,l,t=i[3][i[37]]&&Fl(i);return{c(){t&&t.c(),e=de()},l(n){t&&t.l(n),e=de()},m(n,o){t&&t.m(n,o),N(n,e,o),l=!0},p(n,o){n[3][n[37]]?t?(t.p(n,o),o[0]&8&&p(t,1)):(t=Fl(n),t.c(),p(t,1),t.m(e.parentNode,e)):t&&(ne(),$(t,1,1,()=>{t=null}),ie())},i(n){l||(p(t),l=!0)},o(n){$(t),l=!1},d(n){t&&t.d(n),n&&m(e)}}}function Bl(i){let e,l,t,n,o,s,r=i[10],a=[];for(let u=0;u<r.length;u+=1)a[u]=Hl(Nl(i,r,u));const f=u=>$(a[u],1,1,()=>{a[u]=null});return{c(){e=T("div"),l=T("div"),t=Z("Filters"),n=Y(),o=T("div");for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){e=V(u,"DIV",{class:!0});var _=S(e);l=V(_,"DIV",{class:!0});var c=S(l);t=G(c,"Filters"),c.forEach(m),n=Q(_),o=V(_,"DIV",{class:!0});var d=S(o);for(let h=0;h<a.length;h+=1)a[h].l(d);d.forEach(m),_.forEach(m),this.h()},h(){D(l,"class","text-xs font-light"),D(o,"class","flex flex-row gap-x-1"),D(e,"class","filter-group rounded bg-slate-50 px-2 py-1 shadow-sm svelte-16ln9ke")},m(u,_){N(u,e,_),v(e,l),v(l,t),v(e,n),v(e,o);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(o,null);s=!0},p(u,_){if(_[0]&1088){r=u[10];let c;for(c=0;c<r.length;c+=1){const d=Nl(u,r,c);a[c]?(a[c].p(d,_),p(a[c],1)):(a[c]=Hl(d),a[c].c(),p(a[c],1),a[c].m(o,null))}for(ne(),c=r.length;c<a.length;c+=1)f(c);ie()}},i(u){if(!s){for(let _=0;_<r.length;_+=1)p(a[_]);s=!0}},o(u){a=a.filter(Boolean);for(let _=0;_<a.length;_+=1)$(a[_]);s=!1},d(u){u&&m(e),Ae(a,u)}}}function Hl(i){let e,l;return e=new Ri({props:{schema:i[6],filter:i[34]}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&64&&(o.schema=t[6]),n[0]&1024&&(o.filter=t[34]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Rl(i){let e;function l(o,s){return o[0]==o[1].dataset_manifest.num_items?$a:ka}let t=l(i),n=t(i);return{c(){n.c(),e=de()},l(o){n.l(o),e=de()},m(o,s){n.m(o,s),N(o,e,s)},p(o,s){t===(t=l(o))&&n?n.p(o,s):(n.d(1),n=t(o),n&&(n.c(),n.m(e.parentNode,e)))},d(o){n.d(o),o&&m(e)}}}function ka(i){let e=Ee(i[0])+"",l,t,n=Ee(i[1].dataset_manifest.num_items)+"",o,s;return{c(){l=Z(e),t=Z(" of "),o=Z(n),s=Z(" rows")},l(r){l=G(r,e),t=G(r," of "),o=G(r,n),s=G(r," rows")},m(r,a){N(r,l,a),N(r,t,a),N(r,o,a),N(r,s,a)},p(r,a){a[0]&1&&e!==(e=Ee(r[0])+"")&&ce(l,e),a[0]&2&&n!==(n=Ee(r[1].dataset_manifest.num_items)+"")&&ce(o,n)},d(r){r&&m(l),r&&m(t),r&&m(o),r&&m(s)}}}function $a(i){let e=Ee(i[0])+"",l,t;return{c(){l=Z(e),t=Z(" rows")},l(n){l=G(n,e),t=G(n," rows")},m(n,o){N(n,l,o),N(n,t,o)},p(n,o){o[0]&1&&e!==(e=Ee(n[0])+"")&&ce(l,e)},d(n){n&&m(l),n&&m(t)}}}function Ll(i){let e,l;return e=new Pt({props:{value:i[31].path!=null?Le(i[31].path):void 0,text:i[31].text,disabled:i[31].disabled}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&512&&(o.value=t[31].path!=null?Le(t[31].path):void 0),n[0]&512&&(o.text=t[31].text),n[0]&512&&(o.disabled=t[31].disabled),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Ea(i){let e,l,t=i[28],n=[];for(let s=0;s<t.length;s+=1)n[s]=Ll(Vl(i,t,s));const o=s=>$(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=Y()},l(s){for(let r=0;r<n.length;r+=1)n[r].l(s);e=Q(s)},m(s,r){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(s,r);N(s,e,r),l=!0},p(s,r){if(r[0]&512){t=s[28];let a;for(a=0;a<t.length;a+=1){const f=Vl(s,t,a);n[a]?(n[a].p(f,r),p(n[a],1)):(n[a]=Ll(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(ne(),a=t.length;a<n.length;a+=1)o(a);ie()}},i(s){if(!l){for(let r=0;r<t.length;r+=1)p(n[r]);l=!0}},o(s){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)$(n[r]);l=!1},d(s){Ae(n,s),s&&m(e)}}}function Ol(i){let e,l;return e=new as({props:{label:i[27],$$slots:{default:[Ea]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&512&&(o.label=t[27]),n[0]&512|n[1]&4096&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Sa(i){let e,l,t=Object.entries(i[9]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Ol(Tl(i,t,s));const o=s=>$(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=de()},l(s){for(let r=0;r<n.length;r+=1)n[r].l(s);e=de()},m(s,r){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(s,r);N(s,e,r),l=!0},p(s,r){if(r[0]&512){t=Object.entries(s[9]);let a;for(a=0;a<t.length;a+=1){const f=Tl(s,t,a);n[a]?(n[a].p(f,r),p(n[a],1)):(n[a]=Ol(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(ne(),a=t.length;a<n.length;a+=1)o(a);ie()}},i(s){if(!l){for(let r=0;r<t.length;r+=1)p(n[r]);l=!0}},o(s){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)$(n[r]);l=!1},d(s){Ae(n,s),s&&m(e)}}}function ql(i){let e,l,t,n,o,s;return l=new rs({}),{c(){e=T("button"),H(l.$$.fragment),this.h()},l(r){e=V(r,"BUTTON",{});var a=S(e);O(l.$$.fragment,a),a.forEach(m),this.h()},h(){e.disabled=t=i[4]==null},m(r,a){N(r,e,a),R(l,e,null),n=!0,o||(s=[$e(Se.call(null,e,{text:"Clear sort"})),Fe(e,"click",i[20])],o=!0)},p(r,a){(!n||a[0]&16&&t!==(t=r[4]==null))&&(e.disabled=t)},i(r){n||(p(l.$$.fragment,r),n=!0)},o(r){$(l.$$.fragment,r),n=!1},d(r){r&&m(e),L(l),o=!1,We(s)}}}function ya(i){let e,l;return e=new Bi({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Ia(i){let e,l;return e=new Ai({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Da(i){let e,l;return e=new Lr({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function jl(i){let e,l;return e=new Ut({props:{open:!0,modalHeading:"",passiveModal:!0,size:"lg",$$slots:{default:[Ca]},$$scope:{ctx:i}}}),e.$on("close",i[25]),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&4096|n[1]&4096&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Ta(i){var s;let e,l,t,n,o;return l=new mi({props:{size:"small",kind:"ghost",icon:hi,href:Xt((s=i[12])==null?void 0:s.data.namespace,i[12].data.concept_name),iconDescription:"Open concept page",$$slots:{default:[Ma]},$$scope:{ctx:i}}}),n=new Qs({props:{concept:i[12].data}}),{c(){e=T("div"),H(l.$$.fragment),t=Y(),H(n.$$.fragment),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);O(l.$$.fragment,a),a.forEach(m),t=Q(r),O(n.$$.fragment,r),this.h()},h(){D(e,"class","mb-4 ml-6")},m(r,a){N(r,e,a),R(l,e,null),N(r,t,a),R(n,r,a),o=!0},p(r,a){var _;const f={};a[0]&4096&&(f.href=Xt((_=r[12])==null?void 0:_.data.namespace,r[12].data.concept_name)),a[1]&4096&&(f.$$scope={dirty:a,ctx:r}),l.$set(f);const u={};a[0]&4096&&(u.concept=r[12].data),n.$set(u)},i(r){o||(p(l.$$.fragment,r),p(n.$$.fragment,r),o=!0)},o(r){$(l.$$.fragment,r),$(n.$$.fragment,r),o=!1},d(r){r&&m(e),L(l),r&&m(t),L(n,r)}}}function Va(i){let e,l=i[12].error.message+"",t;return{c(){e=T("p"),t=Z(l)},l(n){e=V(n,"P",{});var o=S(e);t=G(o,l),o.forEach(m)},m(n,o){N(n,e,o),v(e,t)},p(n,o){o[0]&4096&&l!==(l=n[12].error.message+"")&&ce(t,l)},i:x,o:x,d(n){n&&m(e)}}}function Na(i){let e,l;return e=new Re({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Ma(i){let e;return{c(){e=Z("Go to concept")},l(l){e=G(l,"Go to concept")},m(l,t){N(l,e,t)},d(l){l&&m(e)}}}function Ca(i){let e,l,t,n;const o=[Na,Va,Ta],s=[];function r(a,f){var u,_,c;return(u=a[12])!=null&&u.isLoading?0:(_=a[12])!=null&&_.isError?1:(c=a[12])!=null&&c.isSuccess?2:-1}return~(e=r(i))&&(l=s[e]=o[e](i)),{c(){l&&l.c(),t=de()},l(a){l&&l.l(a),t=de()},m(a,f){~e&&s[e].m(a,f),N(a,t,f),n=!0},p(a,f){let u=e;e=r(a),e===u?~e&&s[e].p(a,f):(l&&(ne(),$(s[u],1,1,()=>{s[u]=null}),ie()),~e?(l=s[e],l?l.p(a,f):(l=s[e]=o[e](a),l.c()),p(l,1),l.m(t.parentNode,t)):l=null)},i(a){n||(p(l),n=!0)},o(a){$(l),n=!1},d(a){~e&&s[e].d(a),a&&m(t)}}}function za(i){let e,l,t,n,o,s,r,a,f,u,_,c,d,h,b,w,k,g,E,y,M,C,I,F,ee,U,A=i[15].length>0&&i[6]!=null&&zl(i);o=new Hi({props:{addLabelsQuery:{searches:i[8],filters:i[10]},buttonText:"Label all",helperText:"Apply label to all results within the current filter set."}});let q=i[0]&&i[1]&&Rl(i);h=new ci({props:{noLabel:!0,size:"sm",class:"w-60",selected:i[5],$$slots:{default:[Sa]},$$scope:{ctx:i}}}),h.$on("update",i[18]);let B=i[7]!=null&&ql(i);const te=[Da,Ia,ya],j=[];function W(P,K){var fe,oe,re;return((fe=P[4])==null?void 0:fe.order)==null?0:((oe=P[4])==null?void 0:oe.order)==="ASC"?1:((re=P[4])==null?void 0:re.order)==="DESC"?2:-1}~(g=W(i))&&(E=j[g]=te[g](i));let J=i[2]&&jl(i);return{c(){e=T("div"),A&&A.c(),l=Y(),t=T("div"),n=T("div"),H(o.$$.fragment),s=Y(),r=T("div"),a=T("div"),q&&q.c(),f=Y(),u=T("div"),_=T("div"),c=Z("Sort by"),d=Y(),H(h.$$.fragment),b=Y(),B&&B.c(),w=Y(),k=T("button"),E&&E.c(),C=Y(),J&&J.c(),I=de(),this.h()},l(P){e=V(P,"DIV",{class:!0});var K=S(e);A&&A.l(K),l=Q(K),t=V(K,"DIV",{class:!0});var fe=S(t);n=V(fe,"DIV",{class:!0});var oe=S(n);O(o.$$.fragment,oe),oe.forEach(m),s=Q(fe),r=V(fe,"DIV",{class:!0});var re=S(r);a=V(re,"DIV",{class:!0});var ae=S(a);q&&q.l(ae),ae.forEach(m),f=Q(re),u=V(re,"DIV",{class:!0});var le=S(u);_=V(le,"DIV",{class:!0});var X=S(_);c=G(X,"Sort by"),X.forEach(m),d=Q(le),O(h.$$.fragment,le),b=Q(le),B&&B.l(le),w=Q(le),k=V(le,"BUTTON",{});var z=S(k);E&&E.l(z),z.forEach(m),le.forEach(m),re.forEach(m),fe.forEach(m),K.forEach(m),C=Q(P),J&&J.l(P),I=de(),this.h()},h(){D(n,"class","relative flex h-8 flex-col items-end justify-end"),D(a,"class","flex justify-end py-2"),D(_,"class","mr-1 whitespace-nowrap"),k.disabled=y=i[4]==null,D(u,"class","sort-container flex flex-row items-center gap-x-1 pt-2 md:w-fit"),D(r,"class","flex flex-col"),D(t,"class","flex w-full flex-row items-end justify-between"),D(e,"class","mx-5 my-2 flex flex-col gap-y-2")},m(P,K){var fe;N(P,e,K),A&&A.m(e,null),v(e,l),v(e,t),v(t,n),R(o,n,null),v(t,s),v(t,r),v(r,a),q&&q.m(a,null),v(r,f),v(r,u),v(u,_),v(_,c),v(u,d),R(h,u,null),v(u,b),B&&B.m(u,null),v(u,w),v(u,k),~g&&j[g].m(k,null),N(P,C,K),J&&J.m(P,K),N(P,I,K),F=!0,ee||(U=[$e(M=Se.call(null,k,{text:((fe=i[4])==null?void 0:fe.order)==="ASC"?"Sorted ascending. Toggle to switch to descending.":"Sorted descending. Toggle to switch to ascending."})),Fe(k,"click",i[19])],ee=!0)},p(P,K){var ae;P[15].length>0&&P[6]!=null?A?(A.p(P,K),K[0]&64&&p(A,1)):(A=zl(P),A.c(),p(A,1),A.m(e,l)):A&&(ne(),$(A,1,1,()=>{A=null}),ie());const fe={};K[0]&1280&&(fe.addLabelsQuery={searches:P[8],filters:P[10]}),o.$set(fe),P[0]&&P[1]?q?q.p(P,K):(q=Rl(P),q.c(),q.m(a,null)):q&&(q.d(1),q=null);const oe={};K[0]&32&&(oe.selected=P[5]),K[0]&512|K[1]&4096&&(oe.$$scope={dirty:K,ctx:P}),h.$set(oe),P[7]!=null?B?(B.p(P,K),K[0]&128&&p(B,1)):(B=ql(P),B.c(),p(B,1),B.m(u,w)):B&&(ne(),$(B,1,1,()=>{B=null}),ie());let re=g;g=W(P),g!==re&&(E&&(ne(),$(j[re],1,1,()=>{j[re]=null}),ie()),~g?(E=j[g],E||(E=j[g]=te[g](P),E.c()),p(E,1),E.m(k,null)):E=null),(!F||K[0]&16&&y!==(y=P[4]==null))&&(k.disabled=y),M&&Pe(M.update)&&K[0]&16&&M.update.call(null,{text:((ae=P[4])==null?void 0:ae.order)==="ASC"?"Sorted ascending. Toggle to switch to descending.":"Sorted descending. Toggle to switch to ascending."}),P[2]?J?(J.p(P,K),K[0]&4&&p(J,1)):(J=jl(P),J.c(),p(J,1),J.m(I.parentNode,I)):J&&(ne(),$(J,1,1,()=>{J=null}),ie())},i(P){F||(p(A),p(o.$$.fragment,P),p(h.$$.fragment,P),p(B),p(E),p(J),F=!0)},o(P){$(A),$(o.$$.fragment,P),$(h.$$.fragment,P),$(B),$(E),$(J),F=!1},d(P){P&&m(e),A&&A.d(),L(o),q&&q.d(),L(h),B&&B.d(),~g&&j[g].d(),P&&m(C),J&&J.d(P),P&&m(I),ee=!1,We(U)}}}function Fa(i,e,l){let t,n,o,s,r,a,f,u,_,c,d,h,b=x,w=()=>(b(),b=Te(t,W=>l(12,h=W)),t);i.$$.on_destroy.push(()=>b());let{totalNumRows:k}=e,{manifest:g}=e,E=je();be(i,E,W=>l(23,d=W));let y=Ge();be(i,y,W=>l(22,c=W));let M=null;const C=["keyword","semantic","concept"],I={keyword:"Keyword",semantic:"Semantic",concept:"Concepts"};let F={};function ee(W){W.type==="concept"&&l(2,M={namespace:W.concept_namespace,name:W.concept_name})}let U={};const A=W=>{const J=W.detail;J!==r&&E.setSortBy(J===""?null:Ct(J))},q=()=>{s!=null&&E.setSortBy(s.path),E.setSortOrder((s==null?void 0:s.order)==="ASC"?"DESC":"ASC")},B=()=>{E.clearSorts()},te=W=>ee(W),j=()=>l(2,M=null);return i.$$set=W=>{"totalNumRows"in W&&l(0,k=W.totalNumRows),"manifest"in W&&l(1,g=W.manifest)},i.$$.update=()=>{var W,J,P,K;if(i.$$.dirty[0]&4&&w(l(11,t=M?di(M.namespace,M.name):void 0)),i.$$.dirty[0]&8388608&&l(8,n=zt(d)),i.$$.dirty[0]&8388608&&l(10,o=d.query.filters),i.$$.dirty[0]&264){l(3,F={});for(const fe of n)fe.type&&(fe.type in F||l(3,F[fe.type]=[],F),F[fe.type].push(fe))}if(i.$$.dirty[0]&4194304&&l(4,s=ss(c)),i.$$.dirty[0]&4194304)for(const fe of((J=(W=c.selectRowsSchema)==null?void 0:W.data)==null?void 0:J.search_results)||[])U[Le(fe.result_path)]=fe;i.$$.dirty[0]&16&&l(5,r=s!=null&&s.path?Le(s.path):""),i.$$.dirty[0]&8388608&&l(7,a=d.query.sort_by),i.$$.dirty[0]&4194304&&l(6,f=(K=(P=c==null?void 0:c.selectRowsSchema)==null?void 0:P.data)==null?void 0:K.schema),i.$$.dirty[0]&224&&l(21,u=f!=null?[{path:[""],text:"None",disabled:a==null&&r!==""},...Ft(f).filter(fe=>fe.dtype!="embedding"&&fe.dtype!="string_span").map(fe=>({path:fe.path,text:qe(fe.path.slice(1)),disabled:!1}))]:[]),i.$$.dirty[0]&2097152&&l(9,_=u.reduce((fe,oe)=>{const re=oe.path[0];return(fe[re]=fe[re]||[]).push(oe),fe},{}))},[k,g,M,F,s,r,f,a,n,_,o,t,h,E,y,C,I,ee,A,q,B,u,c,d,te,j]}class Pa extends we{constructor(e){super(),ke(this,e,Fa,za,ve,{totalNumRows:0,manifest:1},null,[-1,-1])}}function Ul(i,e,l){const t=i.slice();t[18]=e[l];const n=ut.value(t[18]);t[19]=n;const o=t[4].length===0;return t[20]=o,t}function St(i){var n,o,s;const e=i.slice(),l=ut.path(e[18])||[];e[2]=l;const t=((s=(o=(n=e[8].data)==null?void 0:n.ui)==null?void 0:o.markdown_paths)==null?void 0:s.find(function(...a){return i[15](e[2],...a)}))!=null;return e[23]=t,e}function Yl(i){let e,l,t,n,o=qe(i[2])+"",s,r,a,f,u,_,c,d,h,b,w,k,g,E,y,M;c=new Fi({props:{size:16}});function C(){return i[16](i[19])}return k=new Mi({props:{text:Ee(i[19]),row:i[0],path:i[2],field:i[1],markdown:i[23],spanPaths:i[7].spanPaths,valuePaths:i[7].valuePaths,datasetViewStore:i[9],datasetStore:i[3],embeddings:i[4]}}),{c(){e=T("div"),l=T("div"),t=T("div"),n=T("div"),s=Z(o),a=Y(),f=T("div"),u=T("div"),_=T("button"),H(c.$$.fragment),b=Y(),w=T("div"),H(k.$$.fragment),g=Y(),this.h()},l(I){e=V(I,"DIV",{class:!0});var F=S(e);l=V(F,"DIV",{class:!0});var ee=S(l);t=V(ee,"DIV",{class:!0});var U=S(t);n=V(U,"DIV",{title:!0,class:!0});var A=S(n);s=G(A,o),A.forEach(m),a=Q(U),f=V(U,"DIV",{});var q=S(f);u=V(q,"DIV",{});var B=S(u);_=V(B,"BUTTON",{});var te=S(_);O(c.$$.fragment,te),te.forEach(m),B.forEach(m),q.forEach(m),U.forEach(m),ee.forEach(m),b=Q(F),w=V(F,"DIV",{class:!0});var j=S(w);O(k.$$.fragment,j),j.forEach(m),g=Q(F),F.forEach(m),this.h()},h(){D(n,"title",r=qe(i[2])),D(n,"class","w-full truncate"),_.disabled=d=i[20],ue(u,"opacity-50",i[20]),D(t,"class","sticky top-0 flex w-full items-center self-start"),D(l,"class","relative flex w-28 flex-none font-mono font-medium text-neutral-500 md:w-44"),D(w,"class","w-full grow-0 pt-1 font-normal"),D(e,"class","flex w-full gap-x-4")},m(I,F){N(I,e,F),v(e,l),v(l,t),v(t,n),v(n,s),v(t,a),v(t,f),v(f,u),v(u,_),R(c,_,null),v(e,b),v(e,w),R(k,w,null),v(e,g),E=!0,y||(M=[Fe(_,"click",C),$e(Se.call(null,_,{text:"More like this"})),$e(h=Se.call(null,u,{text:i[20]?'"More like this" requires an embedding index':void 0}))],y=!0)},p(I,F){i=I,(!E||F&32)&&o!==(o=qe(i[2])+"")&&ce(s,o),(!E||F&32&&r!==(r=qe(i[2])))&&D(n,"title",r),(!E||F&16&&d!==(d=i[20]))&&(_.disabled=d),h&&Pe(h.update)&&F&16&&h.update.call(null,{text:i[20]?'"More like this" requires an embedding index':void 0}),(!E||F&16)&&ue(u,"opacity-50",i[20]);const ee={};F&32&&(ee.text=Ee(i[19])),F&1&&(ee.row=i[0]),F&32&&(ee.path=i[2]),F&2&&(ee.field=i[1]),F&288&&(ee.markdown=i[23]),F&128&&(ee.spanPaths=i[7].spanPaths),F&128&&(ee.valuePaths=i[7].valuePaths),F&8&&(ee.datasetStore=i[3]),F&16&&(ee.embeddings=i[4]),k.$set(ee)},i(I){E||(p(c.$$.fragment,I),p(k.$$.fragment,I),E=!0)},o(I){$(c.$$.fragment,I),$(k.$$.fragment,I),E=!1},d(I){I&&m(e),L(c),L(k),y=!1,We(M)}}}function Ql(i){let e=xt(i[19]),l,t,n=e&&Yl(St(i));return{c(){n&&n.c(),l=de()},l(o){n&&n.l(o),l=de()},m(o,s){n&&n.m(o,s),N(o,l,s),t=!0},p(o,s){s&32&&(e=xt(o[19])),e?n?(n.p(St(o),s),s&32&&p(n,1)):(n=Yl(St(o)),n.c(),p(n,1),n.m(l.parentNode,l)):n&&(ne(),$(n,1,1,()=>{n=null}),ie())},i(o){t||(p(n),t=!0)},o(o){$(n),t=!1},d(o){n&&n.d(o),o&&m(l)}}}function Aa(i){let e,l,t=i[5],n=[];for(let s=0;s<t.length;s+=1)n[s]=Ql(Ul(i,t,s));const o=s=>$(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=de()},l(s){for(let r=0;r<n.length;r+=1)n[r].l(s);e=de()},m(s,r){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(s,r);N(s,e,r),l=!0},p(s,[r]){if(r&5051){t=s[5];let a;for(a=0;a<t.length;a+=1){const f=Ul(s,t,a);n[a]?(n[a].p(f,r),p(n[a],1)):(n[a]=Ql(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(ne(),a=t.length;a<n.length;a+=1)o(a);ie()}},i(s){if(!l){for(let r=0;r<t.length;r+=1)p(n[r]);l=!0}},o(s){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)$(n[r]);l=!1},d(s){Ae(n,s),s&&m(e)}}}function Ba(i,e,l){let t,n,o,s,r,a,f=x,u=()=>(f(),f=Te(o,I=>l(8,a=I)),o),_,c;i.$$.on_destroy.push(()=>f());let{path:d}=e,{row:h}=e,{field:b}=e,{highlightedFields:w}=e;const k=je();be(i,k,I=>l(14,_=I));const g=Ge();be(i,g,I=>l(3,c=I));const E=Yt();be(i,E,I=>l(17,r=I));function y(I){var ee;let F=t[0];if(((ee=a.data)==null?void 0:ee.preferred_embedding)!=null){const U=a.data.preferred_embedding;t.some(A=>A===U)&&(F=U)}if(r.embedding!=null){const U=r.embedding;t.some(A=>A===U)&&(F=U)}k.addSearch({path:b.path,type:"semantic",query:I,embedding:F})}const M=(I,F)=>et(F,I),C=I=>y(I);return i.$$set=I=>{"path"in I&&l(2,d=I.path),"row"in I&&l(0,h=I.row),"field"in I&&l(1,b=I.field),"highlightedFields"in I&&l(13,w=I.highlightedFields)},i.$$.update=()=>{i.$$.dirty&12&&l(4,t=vt(c.schema,d)),i.$$.dirty&8194&&l(7,n=_i(b,w)),i.$$.dirty&16384&&u(l(6,o=ot(_.namespace,_.datasetName))),i.$$.dirty&5&&l(5,s=os(h,d))},[h,b,d,c,t,s,o,n,a,k,g,E,y,w,_,M,C]}class Ha extends we{constructor(e){super(),ke(this,e,Ba,Aa,ve,{path:2,row:0,field:1,highlightedFields:13})}}function Wl(i,e,l){const t=i.slice();return t[26]=e[l],t[28]=l,t}function Zl(i,e,l){const t=i.slice();return t[29]=e[l],t}function Ra(i){let e,l,t,n,o,s,r,a,f,u,_,c,d,h,b=i[7],w=[];for(let E=0;E<b.length;E+=1)w[E]=Gl(Zl(i,b,E));const k=E=>$(w[E],1,1,()=>{w[E]=null});o=new Hi({props:{addLabelsQuery:{row_ids:[i[0]]},hideLabels:i[7]}});let g=i[1].length>0&&Kl(i);return c=new sr({props:{row:i[3],selectRowsSchema:i[4],highlightedFields:i[2]}}),{c(){e=T("div"),l=T("div");for(let E=0;E<w.length;E+=1)w[E].c();t=Y(),n=T("div"),H(o.$$.fragment),s=Y(),g&&g.c(),a=Y(),f=T("div"),u=T("div"),_=T("div"),H(c.$$.fragment),this.h()},l(E){e=V(E,"DIV",{class:!0});var y=S(e);l=V(y,"DIV",{class:!0});var M=S(l);for(let U=0;U<w.length;U+=1)w[U].l(M);t=Q(M),n=V(M,"DIV",{class:!0});var C=S(n);O(o.$$.fragment,C),C.forEach(m),M.forEach(m),s=Q(y),g&&g.l(y),y.forEach(m),a=Q(E),f=V(E,"DIV",{class:!0});var I=S(f);u=V(I,"DIV",{class:!0});var F=S(u);_=V(F,"DIV",{style:!0,class:!0});var ee=S(_);O(c.$$.fragment,ee),ee.forEach(m),F.forEach(m),I.forEach(m),this.h()},h(){D(n,"class","relative h-8"),D(l,"class","flex flex-wrap gap-x-2 gap-y-2"),D(e,"class","flex flex-col gap-y-1 p-4 md:w-2/3"),Nt(()=>i[23].call(e)),D(_,"style",d=`max-height: ${Math.max(Xl,i[6])}px`),D(_,"class","overflow-y-auto py-2"),D(u,"class","sticky top-0 w-full self-start"),D(f,"class","flex h-full bg-neutral-100 md:w-1/3")},m(E,y){N(E,e,y),v(e,l);for(let M=0;M<w.length;M+=1)w[M]&&w[M].m(l,null);v(l,t),v(l,n),R(o,n,null),v(e,s),g&&g.m(e,null),r=Gi(e,i[23].bind(e)),N(E,a,y),N(E,f,y),v(f,u),v(u,_),R(c,_,null),h=!0},p(E,y){if(y[0]&19072){b=E[7];let I;for(I=0;I<b.length;I+=1){const F=Zl(E,b,I);w[I]?(w[I].p(F,y),p(w[I],1)):(w[I]=Gl(F),w[I].c(),p(w[I],1),w[I].m(l,t))}for(ne(),I=b.length;I<w.length;I+=1)k(I);ie()}const M={};y[0]&1&&(M.addLabelsQuery={row_ids:[E[0]]}),y[0]&128&&(M.hideLabels=E[7]),o.$set(M),E[1].length>0?g?(g.p(E,y),y[0]&2&&p(g,1)):(g=Kl(E),g.c(),p(g,1),g.m(e,null)):g&&(ne(),$(g,1,1,()=>{g=null}),ie());const C={};y[0]&8&&(C.row=E[3]),y[0]&16&&(C.selectRowsSchema=E[4]),y[0]&4&&(C.highlightedFields=E[2]),c.$set(C),(!h||y[0]&64&&d!==(d=`max-height: ${Math.max(Xl,E[6])}px`))&&D(_,"style",d)},i(E){if(!h){for(let y=0;y<b.length;y+=1)p(w[y]);p(o.$$.fragment,E),p(g),p(c.$$.fragment,E),h=!0}},o(E){w=w.filter(Boolean);for(let y=0;y<w.length;y+=1)$(w[y]);$(o.$$.fragment,E),$(g),$(c.$$.fragment,E),h=!1},d(E){E&&m(e),Ae(w,E),L(o),g&&g.d(),r(),E&&m(a),E&&m(f),L(c)}}}function La(i){let e,l;return e=new Re({props:{lines:4,paragraph:!0,class:"w-full"}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Oa(i){let e=i[29]+"",l;return{c(){l=Z(e)},l(t){l=G(t,e)},m(t,n){N(t,l,n)},p(t,n){n[0]&128&&e!==(e=t[29]+"")&&ce(l,e)},d(t){t&&m(l)}}}function Gl(i){let e,l;function t(){return i[21](i[29])}function n(){return i[22](i[29])}return e=new Et({props:{type:"cool-gray",class:"hover:cursor-pointer",removeDisabled:!i[9],removeDisabledHelperText:"You do not have access to remove labels.",closeHelperText:`Remove label "${i[29]}"`,clickHelperText:`View documents with label "${i[29]}"`,$$slots:{default:[Oa]},$$scope:{ctx:i}}}),e.$on("click",t),e.$on("remove",n),{c(){H(e.$$.fragment)},l(o){O(e.$$.fragment,o)},m(o,s){R(e,o,s),l=!0},p(o,s){i=o;const r={};s[0]&512&&(r.removeDisabled=!i[9]),s[0]&128&&(r.closeHelperText=`Remove label "${i[29]}"`),s[0]&128&&(r.clickHelperText=`View documents with label "${i[29]}"`),s[0]&128|s[1]&2&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(o){l||(p(e.$$.fragment,o),l=!0)},o(o){$(e.$$.fragment,o),l=!1},d(o){L(e,o)}}}function Kl(i){let e=[],l=new Map,t,n,o=i[1];const s=r=>Le(r[26].path);for(let r=0;r<o.length;r+=1){let a=Wl(i,o,r),f=s(a);l.set(f,e[r]=Jl(f,a))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();t=de()},l(r){for(let a=0;a<e.length;a+=1)e[a].l(r);t=de()},m(r,a){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(r,a);N(r,t,a),n=!0},p(r,a){a[0]&14&&(o=r[1],ne(),e=Tt(e,a,s,1,r,o,l,t.parentNode,Vt,Jl,t,Wl),ie())},i(r){if(!n){for(let a=0;a<o.length;a+=1)p(e[a]);n=!0}},o(r){for(let a=0;a<e.length;a+=1)$(e[a]);n=!1},d(r){for(let a=0;a<e.length;a+=1)e[a].d(r);r&&m(t)}}}function Jl(i,e){let l,t,n,o;return t=new Ha({props:{row:e[3],path:e[26].path,field:e[26],highlightedFields:e[2]}}),{key:i,first:null,c(){l=T("div"),H(t.$$.fragment),n=Y(),this.h()},l(s){l=V(s,"DIV",{class:!0});var r=S(l);O(t.$$.fragment,r),n=Q(r),r.forEach(m),this.h()},h(){D(l,"class","flex h-full w-full flex-col border-neutral-200"),ue(l,"border-b",e[28]<e[1].length-1),ue(l,"pb-2",e[28]<e[1].length-1),this.first=l},m(s,r){N(s,l,r),R(t,l,null),v(l,n),o=!0},p(s,r){e=s;const a={};r[0]&8&&(a.row=e[3]),r[0]&2&&(a.path=e[26].path),r[0]&2&&(a.field=e[26]),r[0]&4&&(a.highlightedFields=e[2]),t.$set(a),(!o||r[0]&2)&&ue(l,"border-b",e[28]<e[1].length-1),(!o||r[0]&2)&&ue(l,"pb-2",e[28]<e[1].length-1)},i(s){o||(p(t.$$.fragment,s),o=!0)},o(s){$(t.$$.fragment,s),o=!1},d(s){s&&m(l),L(t)}}}function qa(i){let e,l,t,n;const o=[La,Ra],s=[];function r(a,f){var u;return a[3]==null||(u=a[5])!=null&&u.isFetching?0:1}return l=r(i),t=s[l]=o[l](i),{c(){e=T("div"),t.c(),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);t.l(f),f.forEach(m),this.h()},h(){D(e,"class","flex flex-col rounded border border-neutral-300 md:flex-row")},m(a,f){N(a,e,f),s[l].m(e,null),n=!0},p(a,f){let u=l;l=r(a),l===u?s[l].p(a,f):(ne(),$(s[u],1,1,()=>{s[u]=null}),ie(),t=s[l],t?t.p(a,f):(t=s[l]=o[l](a),t.c()),p(t,1),t.m(e,null))},i(a){n||(p(t),n=!0)},o(a){$(t),n=!1},d(a){a&&m(e),s[l].d()}}}const Xl=320;function ja(i,e,l){let t,n,o,s,r,a,f,u,_,c,d=x,h=()=>(d(),d=Te(a,j=>l(5,c=j)),a),b,w,k;i.$$.on_destroy.push(()=>d());let{rowId:g}=e,{mediaFields:E}=e,{highlightedFields:y}=e;const M=Ge();be(i,M,j=>l(19,w=j));const C=je();be(i,C,j=>l(18,b=j));const I=Vi(),F=mt();be(i,F,j=>l(20,k=j));let ee=0;const U=w.schema!=null?fs(w.schema):null;be(i,U,j=>l(24,_=j));const A=j=>{const W={label_name:j,row_ids:[g]};_.mutate([t,n,W],{onSuccess:()=>{I.addNotification({kind:"success",title:`Removed label "${W.label_name}"`,message:`Document id: ${g}`})}})},q=j=>C.addFilter({path:[j,"label"],op:"equals",value:"true"}),B=j=>A(j);function te(){ee=this.clientHeight,l(6,ee)}return i.$$set=j=>{"rowId"in j&&l(0,g=j.rowId),"mediaFields"in j&&l(1,E=j.mediaFields),"highlightedFields"in j&&l(2,y=j.highlightedFields)},i.$$.update=()=>{var j,W;i.$$.dirty[0]&262144&&l(16,t=b.namespace),i.$$.dirty[0]&262144&&l(15,n=b.datasetName),i.$$.dirty[0]&1048576&&l(9,o=(j=k.data)==null?void 0:j.access.dataset.edit_labels),i.$$.dirty[0]&524288&&l(4,s=(W=w.selectRowsSchema)==null?void 0:W.data),i.$$.dirty[0]&262144&&l(17,r=gi(b)),i.$$.dirty[0]&229393&&h(l(8,a=s!=null?us(t,n,g,r,s.schema):null)),i.$$.dirty[0]&32&&l(3,f=(c==null?void 0:c.data)!=null?c.data:null),i.$$.dirty[0]&8&&l(7,u=f!=null?cs(f):[])},[g,E,y,f,s,c,ee,u,a,o,M,C,F,U,A,n,t,r,b,w,k,q,B,te]}class Ua extends we{constructor(e){super(),ke(this,e,ja,qa,ve,{rowId:0,mediaFields:1,highlightedFields:2},null,[-1,-1])}}function xl(i,e,l){const t=i.slice();return t[22]=e[l],t}function Ya(i){let e,l;return{c(){e=T("div"),l=Z("No results."),this.h()},l(t){e=V(t,"DIV",{class:!0});var n=S(e);l=G(n,"No results."),n.forEach(m),this.h()},h(){D(e,"class","mx-4 mt-8 w-full text-gray-600")},m(t,n){N(t,e,n),v(e,l)},p:x,i:x,o:x,d(t){t&&m(e)}}}function Qa(i){let e,l;return e=new Re({props:{paragraph:!0,lines:3}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Wa(i){var t,n;let e,l;return e=new pi({props:{lowContrast:!0,title:"Could not fetch schema:",subtitle:((t=i[1].error.body)==null?void 0:t.detail)||((n=i[1])==null?void 0:n.error.message)}}),{c(){H(e.$$.fragment)},l(o){O(e.$$.fragment,o)},m(o,s){R(e,o,s),l=!0},p(o,s){var a,f;const r={};s&2&&(r.subtitle=((a=o[1].error.body)==null?void 0:a.detail)||((f=o[1])==null?void 0:f.error.message)),e.$set(r)},i(o){l||(p(e.$$.fragment,o),l=!0)},o(o){$(e.$$.fragment,o),l=!1},d(o){L(e,o)}}}function Za(i){var t;let e,l;return e=new pi({props:{lowContrast:!0,title:"Could not fetch rows:",subtitle:((t=i[3].error.body)==null?void 0:t.detail)||i[3].error.message}}),{c(){H(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,o){R(e,n,o),l=!0},p(n,o){var r;const s={};o&8&&(s.subtitle=((r=n[3].error.body)==null?void 0:r.detail)||n[3].error.message),e.$set(s)},i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){$(e.$$.fragment,n),l=!1},d(n){L(e,n)}}}function en(i){let e,l,t,n=i[5],o=[];for(let a=0;a<n.length;a+=1)o[a]=tn(xl(i,n,a));const s=a=>$(o[a],1,1,()=>{o[a]=null});let r=i[5].length>0&&ln(i);return{c(){e=T("div");for(let a=0;a<o.length;a+=1)o[a].c();l=Y(),r&&r.c(),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);for(let u=0;u<o.length;u+=1)o[u].l(f);l=Q(f),r&&r.l(f),f.forEach(m),this.h()},h(){D(e,"class","flex h-full w-full flex-col gap-y-20 overflow-y-scroll px-5 pb-32")},m(a,f){N(a,e,f);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);v(e,l),r&&r.m(e,null),i[20](e),t=!0},p(a,f){if(f&304){n=a[5];let u;for(u=0;u<n.length;u+=1){const _=xl(a,n,u);o[u]?(o[u].p(_,f),p(o[u],1)):(o[u]=tn(_),o[u].c(),p(o[u],1),o[u].m(e,l))}for(ne(),u=n.length;u<o.length;u+=1)s(u);ie()}a[5].length>0?r?(r.p(a,f),f&32&&p(r,1)):(r=ln(a),r.c(),p(r,1),r.m(e,null)):r&&(ne(),$(r,1,1,()=>{r=null}),ie())},i(a){if(!t){for(let f=0;f<n.length;f+=1)p(o[f]);p(r),t=!0}},o(a){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)$(o[f]);$(r),t=!1},d(a){a&&m(e),Ae(o,a),r&&r.d(),i[20](null)}}}function tn(i){let e,l;return e=new Ua({props:{rowId:i[22],mediaFields:i[4],highlightedFields:i[8]}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n&32&&(o.rowId=t[22]),n&16&&(o.mediaFields=t[4]),n&256&&(o.highlightedFields=t[8]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function ln(i){let e,l;return e=new Gr({props:{threshold:100}}),e.$on("loadMore",i[19]),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Ga(i){let e,l,t,n,o,s,r;e=new Pa({props:{totalNumRows:i[6],manifest:i[12].data}});const a=[Za,Wa,Qa,Ya],f=[];function u(c,d){var h,b,w,k;return c[3].isError?0:(h=c[1])!=null&&h.isError?1:(b=c[3])!=null&&b.isFetching||c[13].isFetching||(w=c[1])!=null&&w.isFetching||c[2].isFetching?2:(k=c[3])!=null&&k.isSuccess&&c[5]&&c[5].length===0?3:-1}~(t=u(i))&&(n=f[t]=a[t](i));let _=i[5]&&i[13].isSuccess&&i[4]!=null&&en(i);return{c(){H(e.$$.fragment),l=Y(),n&&n.c(),o=Y(),_&&_.c(),s=de()},l(c){O(e.$$.fragment,c),l=Q(c),n&&n.l(c),o=Q(c),_&&_.l(c),s=de()},m(c,d){R(e,c,d),N(c,l,d),~t&&f[t].m(c,d),N(c,o,d),_&&_.m(c,d),N(c,s,d),r=!0},p(c,[d]){const h={};d&64&&(h.totalNumRows=c[6]),d&4096&&(h.manifest=c[12].data),e.$set(h);let b=t;t=u(c),t===b?~t&&f[t].p(c,d):(n&&(ne(),$(f[b],1,1,()=>{f[b]=null}),ie()),~t?(n=f[t],n?n.p(c,d):(n=f[t]=a[t](c),n.c()),p(n,1),n.m(o.parentNode,o)):n=null),c[5]&&c[13].isSuccess&&c[4]!=null?_?(_.p(c,d),d&8240&&p(_,1)):(_=en(c),_.c(),p(_,1),_.m(s.parentNode,s)):_&&(ne(),$(_,1,1,()=>{_=null}),ie())},i(c){r||(p(e.$$.fragment,c),p(n),p(_),r=!0)},o(c){$(e.$$.fragment,c),$(n),$(_),r=!1},d(c){L(e,c),c&&m(l),~t&&f[t].d(c),c&&m(o),_&&_.d(c),c&&m(s)}}}function Ka(i,e,l){let t,n,o,s,r,a,f,u,_,c,d,h=x,b=()=>(h(),h=Te(s,J=>l(2,d=J)),s),w,k,g=x,E=()=>(g(),g=Te(f,J=>l(3,k=J)),f),y,M,C=x,I=()=>(C(),C=Te(t,J=>l(12,M=J)),t),F,ee=x,U=()=>(ee(),ee=Te(n,J=>l(13,F=J)),n);i.$$.on_destroy.push(()=>h()),i.$$.on_destroy.push(()=>g()),i.$$.on_destroy.push(()=>C()),i.$$.on_destroy.push(()=>ee());const A=je();be(i,A,J=>l(18,y=J));const q=Ge();be(i,q,J=>l(17,w=J));let B=null;const te=Ys(B),j=()=>k==null?void 0:k.fetchNextPage();function W(J){Be[J?"unshift":"push"](()=>{B=J,l(0,B)})}return i.$$.update=()=>{var J,P,K,fe;i.$$.dirty&262144&&I(l(11,t=ds(y.namespace,y.datasetName))),i.$$.dirty&262144&&U(l(10,n=At(y.namespace,y.datasetName))),i.$$.dirty&262144&&l(16,o=gi(y)),i.$$.dirty&262144&&b(l(9,s=ot(y.namespace,y.datasetName))),i.$$.dirty&131072&&l(1,r=w.selectRowsSchema),i.$$.dirty&262146&&l(8,a=ms(y.query,r==null?void 0:r.data)),i.$$.dirty&327682&&E(l(7,f=hs(y.namespace,y.datasetName,{...o,columns:[It]},r!=null&&r.isSuccess?r.data.schema:void 0))),i.$$.dirty&8&&l(6,u=(J=k.data)==null?void 0:J.pages[0].total_num_rows),i.$$.dirty&8&&l(5,_=(P=k.data)==null?void 0:P.pages.flatMap(oe=>oe.rows).map(oe=>ut.value(gt(oe,[It]),"string"))),i.$$.dirty&131076&&l(4,c=d.data?_s((fe=(K=w.selectRowsSchema)==null?void 0:K.data)==null?void 0:fe.schema,d.data):[]),i.$$.dirty&1&&te.set(B)},Ki(gs,te),[B,r,d,k,c,_,u,f,a,s,n,t,M,F,A,q,o,w,y,j,W]}class Ja extends we{constructor(e){super(),ke(this,e,Ka,Ga,ve,{})}}function nn(i){const e=i[3].find(function(...s){return i[39](i[50],...s)});i[51]=e;const l=i[51]!=null&&typeof i[51].id=="object"&&i[51].id.type==="field"&&i[51].id.isSignal;i[52]=l;const t=i[51]!=null&&typeof i[51].id=="object"&&i[51].id.type==="concept";i[53]=t;const n=i[51]!=null&&typeof i[51].id=="object"&&i[51].id.type==="label";i[54]=n}function sn(i){const e=i[5].find(function(...t){return i[38](i[51],...t)});i[55]=e}function rn(i){let e,l=i[55].text+"",t,n,o,s,r=i[55].embeddings.length>0&&an(i);return{c(){e=T("div"),t=Z(l),n=Y(),r&&r.c(),o=de(),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);t=G(f,l),f.forEach(m),n=Q(a),r&&r.l(a),o=de(),this.h()},h(){D(e,"class","w-full flex-grow truncate")},m(a,f){N(a,e,f),v(e,t),N(a,n,f),r&&r.m(a,f),N(a,o,f),s=!0},p(a,f){(!s||f[0]&32|f[1]&1048576)&&l!==(l=a[55].text+"")&&ce(t,l),a[55].embeddings.length>0?r?(r.p(a,f),f[0]&32|f[1]&1048576&&p(r,1)):(r=an(a),r.c(),p(r,1),r.m(o.parentNode,o)):r&&(ne(),$(r,1,1,()=>{r=null}),ie())},i(a){s||(p(r),s=!0)},o(a){$(r),s=!1},d(a){a&&m(e),a&&m(n),r&&r.d(a),a&&m(o)}}}function an(i){let e,l,t,n,o,s;return l=new Ke({props:{$$slots:{default:[Xa]},$$scope:{ctx:i}}}),{c(){e=T("div"),H(l.$$.fragment)},l(r){e=V(r,"DIV",{});var a=S(e);O(l.$$.fragment,a),a.forEach(m)},m(r,a){N(r,e,a),R(l,e,null),n=!0,o||(s=$e(t=Se.call(null,e,{text:`Computed embeddings: ${i[55].embeddings.join(", ")}`})),o=!0)},p(r,a){i=r;const f={};a[1]&33554432&&(f.$$scope={dirty:a,ctx:i}),l.$set(f),t&&Pe(t.update)&&a[0]&32|a[1]&1048576&&t.update.call(null,{text:`Computed embeddings: ${i[55].embeddings.join(", ")}`})},i(r){n||(p(l.$$.fragment,r),n=!0)},o(r){$(l.$$.fragment,r),n=!1},d(r){r&&m(e),L(l),o=!1,s()}}}function Xa(i){let e,l;return e=new Es({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function xa(i){sn(i);let e,l,t=i[55]&&rn(i);return{c(){e=T("div"),t&&t.c(),this.h()},l(n){e=V(n,"DIV",{class:!0});var o=S(e);t&&t.l(o),o.forEach(m),this.h()},h(){D(e,"class","flex h-full w-full items-center justify-between gap-x-1")},m(n,o){N(n,e,o),t&&t.m(e,null),l=!0},p(n,o){sn(n),n[55]?t?(t.p(n,o),o[0]&32|o[1]&1048576&&p(t,1)):(t=rn(n),t.c(),p(t,1),t.m(e,null)):t&&(ne(),$(t,1,1,()=>{t=null}),ie())},i(n){l||(p(t),l=!0)},o(n){$(t),l=!1},d(n){n&&m(e),t&&t.d()}}}function eo(i){let e,l,t=i[51].text+"",n,o,s=i[51].description&&on(i);return{c(){e=T("div"),l=T("div"),n=Z(t),o=Y(),s&&s.c(),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);l=V(a,"DIV",{});var f=S(l);n=G(f,t),f.forEach(m),o=Q(a),s&&s.l(a),a.forEach(m),this.h()},h(){D(e,"class","flex justify-between gap-x-8"),ue(e,"isSignal",i[52]),ue(e,"isConcept",i[53]),ue(e,"isLabel",i[54])},m(r,a){N(r,e,a),v(e,l),v(l,n),v(e,o),s&&s.m(e,null)},p(r,a){a[0]&8|a[1]&524288&&t!==(t=r[51].text+"")&&ce(n,t),r[51].description?s?s.p(r,a):(s=on(r),s.c(),s.m(e,null)):s&&(s.d(1),s=null),a[0]&8|a[1]&524288&&ue(e,"isSignal",r[52]),a[0]&8|a[1]&524288&&ue(e,"isConcept",r[53]),a[0]&8|a[1]&524288&&ue(e,"isLabel",r[54])},i:x,o:x,d(r){r&&m(e),s&&s.d()}}}function to(i){let e,l,t,n,o,s;return l=new Ke({props:{$$slots:{default:[ro]},$$scope:{ctx:i}}}),{c(){e=T("div"),H(l.$$.fragment),t=Y(),n=T("div"),o=Z("Compute embeddings to enable concept search."),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);O(l.$$.fragment,a),t=Q(a),n=V(a,"DIV",{class:!0});var f=S(n);o=G(f,"Compute embeddings to enable concept search."),f.forEach(m),a.forEach(m),this.h()},h(){D(n,"class","ml-2"),D(e,"class","new-concept flex items-center")},m(r,a){N(r,e,a),R(l,e,null),v(e,t),v(e,n),v(n,o),s=!0},p(r,a){const f={};a[1]&33554432&&(f.$$scope={dirty:a,ctx:r}),l.$set(f)},i(r){s||(p(l.$$.fragment,r),s=!0)},o(r){$(l.$$.fragment,r),s=!1},d(r){r&&m(e),L(l)}}}function lo(i){let e,l,t,n,o,s,r;return l=new Ke({props:{$$slots:{default:[ao]},$$scope:{ctx:i}}}),{c(){e=T("div"),H(l.$$.fragment),t=Y(),n=T("div"),o=Z(`Semantic search:
              `),s=Z(i[1]),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);O(l.$$.fragment,f),t=Q(f),n=V(f,"DIV",{class:!0});var u=S(n);o=G(u,`Semantic search:
              `),s=G(u,i[1]),u.forEach(m),f.forEach(m),this.h()},h(){D(n,"class","ml-2"),D(e,"class","new-keyword flex flex-row items-center justify-items-center")},m(a,f){N(a,e,f),R(l,e,null),v(e,t),v(e,n),v(n,o),v(n,s),r=!0},p(a,f){const u={};f[1]&33554432&&(u.$$scope={dirty:f,ctx:a}),l.$set(u),(!r||f[0]&2)&&ce(s,a[1])},i(a){r||(p(l.$$.fragment,a),r=!0)},o(a){$(l.$$.fragment,a),r=!1},d(a){a&&m(e),L(l)}}}function no(i){let e,l,t,n,o,s,r;return l=new Ke({props:{$$slots:{default:[oo]},$$scope:{ctx:i}}}),{c(){e=T("div"),H(l.$$.fragment),t=Y(),n=T("div"),o=Z(`Keyword search:
              `),s=Z(i[1]),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);O(l.$$.fragment,f),t=Q(f),n=V(f,"DIV",{class:!0});var u=S(n);o=G(u,`Keyword search:
              `),s=G(u,i[1]),u.forEach(m),f.forEach(m),this.h()},h(){D(n,"class","ml-2"),D(e,"class","new-keyword flex flex-row items-center justify-items-center")},m(a,f){N(a,e,f),R(l,e,null),v(e,t),v(e,n),v(n,o),v(n,s),r=!0},p(a,f){const u={};f[1]&33554432&&(u.$$scope={dirty:f,ctx:a}),l.$set(u),(!r||f[0]&2)&&ce(s,a[1])},i(a){r||(p(l.$$.fragment,a),r=!0)},o(a){$(l.$$.fragment,a),r=!1},d(a){a&&m(e),L(l)}}}function io(i){let e,l,t,n,o,s=i[1]!=""?":":"",r,a,f,u;return l=new Ke({props:{$$slots:{default:[fo]},$$scope:{ctx:i}}}),{c(){e=T("div"),H(l.$$.fragment),t=Y(),n=T("div"),o=Z("New concept"),r=Z(s),a=Y(),f=Z(i[1]),this.h()},l(_){e=V(_,"DIV",{class:!0});var c=S(e);O(l.$$.fragment,c),t=Q(c),n=V(c,"DIV",{class:!0});var d=S(n);o=G(d,"New concept"),r=G(d,s),a=Q(d),f=G(d,i[1]),d.forEach(m),c.forEach(m),this.h()},h(){D(n,"class","ml-2"),D(e,"class","new-concept flex flex-row items-center justify-items-center")},m(_,c){N(_,e,c),R(l,e,null),v(e,t),v(e,n),v(n,o),v(n,r),v(n,a),v(n,f),u=!0},p(_,c){const d={};c[1]&33554432&&(d.$$scope={dirty:c,ctx:_}),l.$set(d),(!u||c[0]&2)&&s!==(s=_[1]!=""?":":"")&&ce(r,s),(!u||c[0]&2)&&ce(f,_[1])},i(_){u||(p(l.$$.fragment,_),u=!0)},o(_){$(l.$$.fragment,_),u=!1},d(_){_&&m(e),L(l)}}}function so(i){let e;return{c(){e=T("div")},l(l){e=V(l,"DIV",{}),S(e).forEach(m)},m(l,t){N(l,e,t)},p:x,i:x,o:x,d(l){l&&m(e)}}}function on(i){let e,l=i[51].description+"",t;return{c(){e=T("div"),t=Z(l),this.h()},l(n){e=V(n,"DIV",{class:!0});var o=S(e);t=G(o,l),o.forEach(m),this.h()},h(){D(e,"class","truncate text-xs text-gray-500")},m(n,o){N(n,e,o),v(e,t)},p(n,o){o[0]&8|o[1]&524288&&l!==(l=n[51].description+"")&&ce(t,l)},d(n){n&&m(e)}}}function ro(i){let e,l;return e=new Ti({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function ao(i){let e,l;return e=new Pi({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function oo(i){let e,l;return e=new Pi({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function fo(i){let e,l;return e=new Qt({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function uo(i){nn(i);let e,l,t,n;const o=[so,io,no,lo,to,eo],s=[];function r(a,f){return a[51]==null?0:a[51].id==="new-concept"?1:a[51].id==="keyword-search"?2:a[51].id==="semantic-search"?3:a[51].id==="compute-embedding"&&a[2]&&a[0]?4:5}return e=r(i),l=s[e]=o[e](i),{c(){l.c(),t=de()},l(a){l.l(a),t=de()},m(a,f){s[e].m(a,f),N(a,t,f),n=!0},p(a,f){nn(a);let u=e;e=r(a),e===u?s[e].p(a,f):(ne(),$(s[u],1,1,()=>{s[u]=null}),ie(),l=s[e],l?l.p(a,f):(l=s[e]=o[e](a),l.c()),p(l,1),l.m(t.parentNode,t))},i(a){n||(p(l),n=!0)},o(a){$(l),n=!1},d(a){s[e].d(a),a&&m(t)}}}function co(i){var k;let e,l,t,n,o,s,r,a,f,u,_,c,d,h;n=new Fi({props:{class:"ml-2 mr-px",size:16}}),r=new gr({props:{size:"xl",class:"w-48",disabled:i[0]==null,selectedId:i[0]?Le(i[0]):(k=i[5][0])==null?void 0:k.id,items:i[5],$$slots:{default:[xa,({item:g})=>({51:g}),({item:g})=>[0,g?1048576:0]]},$$scope:{ctx:i}}}),r.$on("select",i[16]);function b(g){i[41](g)}let w={size:"xl",class:"w-full",items:i[3],shouldFilterItem:mo,placeholder:i[6],$$slots:{default:[uo,({item:g})=>({50:g}),({item:g})=>[0,g?524288:0]]},$$scope:{ctx:i}};return i[1]!==void 0&&(w.value=i[1]),u=new zi({props:w}),i[40](u),Be.push(()=>Ye(u,"value",b)),u.$on("select",i[15]),{c(){e=T("div"),l=T("div"),t=T("div"),H(n.$$.fragment),o=Y(),s=T("div"),H(r.$$.fragment),a=Y(),f=T("div"),H(u.$$.fragment),this.h()},l(g){e=V(g,"DIV",{class:!0});var E=S(e);l=V(E,"DIV",{class:!0});var y=S(l);t=V(y,"DIV",{class:!0});var M=S(t);O(n.$$.fragment,M),M.forEach(m),o=Q(y),s=V(y,"DIV",{class:!0});var C=S(s);O(r.$$.fragment,C),C.forEach(m),a=Q(y),f=V(y,"DIV",{class:!0});var I=S(f);O(u.$$.fragment,I),I.forEach(m),y.forEach(m),E.forEach(m),this.h()},h(){D(t,"class","search-icon flex items-center svelte-18z5kej"),D(s,"class","embedding-dropdown rounded border-r border-gray-200"),D(f,"class","search-container w-full flex-grow"),D(l,"class","flex w-full rounded border border-gray-200"),D(e,"class","flex h-full w-full flex-grow items-center")},m(g,E){N(g,e,E),v(e,l),v(l,t),R(n,t,null),v(l,o),v(l,s),R(r,s,null),v(l,a),v(l,f),R(u,f,null),c=!0,d||(h=$e(Se.call(null,t,{text:"Select the field to search over."})),d=!0)},p(g,E){var C;const y={};E[0]&1&&(y.disabled=g[0]==null),E[0]&33&&(y.selectedId=g[0]?Le(g[0]):(C=g[5][0])==null?void 0:C.id),E[0]&32&&(y.items=g[5]),E[0]&32|E[1]&34603008&&(y.$$scope={dirty:E,ctx:g}),r.$set(y);const M={};E[0]&8&&(M.items=g[3]),E[0]&64&&(M.placeholder=g[6]),E[0]&15|E[1]&34078720&&(M.$$scope={dirty:E,ctx:g}),!_&&E[0]&2&&(_=!0,M.value=g[1],Qe(()=>_=!1)),u.$set(M)},i(g){c||(p(n.$$.fragment,g),p(r.$$.fragment,g),p(u.$$.fragment,g),c=!0)},o(g){$(n.$$.fragment,g),$(r.$$.fragment,g),$(u.$$.fragment,g),c=!1},d(g){g&&m(e),L(n),L(r),i[40](null),L(u),d=!1,h()}}}const mo=(i,e)=>i.text.toLowerCase().includes(e.toLowerCase())||i.id==="new-concept"||i.id==="compute-embedding";function ho(i,e,l){let t,n,o,s,r,a,f,u,_,c,d,h,b,w,k,g,E,y,M,C,I,F,ee,U,A=x,q=()=>(A(),A=Te(t,me=>l(36,U=me)),t),B;i.$$.on_destroy.push(()=>A());const te=je();be(i,te,me=>l(37,B=me));const j=Ge();be(i,j,me=>l(31,y=me));const W=Yt();be(i,W,me=>l(35,ee=me));let J;function P(me,Ne,Je,Ze){if(Je==null||Ne==null||me==null)return[];const tt=Je?lt(Je):[],Ce=[];for(const ze of tt){if(ze.dtype==null||ze.dtype==="embedding"||ze.dtype==="binary"||!wi(ze.path,me))continue;const Oe=$s(ze);if((Oe==null?void 0:Oe.signal_name)==="concept_score"||(Ze==null?void 0:Ze.some(Qi=>Qi.name===(Oe==null?void 0:Oe.signal_name))))continue;const Zt=ui(ze.path),Gt=qe(ze.path.slice(me.length));if(ki(ze.dtype)){Ce.push({id:{type:"field",path:ze.path,sort:"DESC",isSignal:Oe!=null},text:Gt,description:`Sort descending by ${Zt}`});continue}if(ze.dtype==="string"||ze.dtype==="string_span"){if(Oe==null)continue;Ce.push({id:{type:"field",path:ze.path,op:"exists",isSignal:Oe!=null},text:Gt,description:`Find documents with ${Zt}`});continue}}return Ce}const K=bi();be(i,K,me=>l(44,M=me));const fe=vi();be(i,fe,me=>l(34,F=me));const oe=(me,Ne)=>`${Le(me||"")}_${Ne}`;let re={};const ae=ps();be(i,ae,me=>l(33,I=me));const le=mt();be(i,le,me=>l(32,C=me));let X=[],z="",se;function De(){f!=null&&(l(17,re[oe(J,f)]=!0,re),M.mutate([n,o,{leaf_path:Ct(J||[]),signal:{signal_name:f}}]))}let he;const Me=(me,Ne)=>{J==null||f==null||(te.addSearch({path:J,type:"concept",concept_namespace:me,concept_name:Ne,embedding:f}),he.clear())},Ue=me=>{te.addFilter({path:[me,"label"],op:"equals",value:"true"})},st=me=>{if(J!=null){if(me.detail.selectedId==="new-concept"){z===se.id&&l(1,z="");const Ne=z.split("/",2);let Je="",Ze="";Ne.length===2?[Je,Ze]=Ne:[Ze]=Ne,Xe({command:xe.CreateConcept,namespace:Je,conceptName:Ze,dataset:{namespace:n,name:o},path:J,onCreate:tt=>Me(tt.detail.namespace,tt.detail.name)})}else if(me.detail.selectedId==="keyword-search"){if(z=="")return;te.addSearch({path:J,type:"keyword",query:z})}else if(me.detail.selectedId=="semantic-search"){if(z==""||f==null)return;te.addSearch({path:J,type:"semantic",query:z,embedding:f})}else if(me.detail.selectedId=="compute-embedding")De();else if(me.detail.selectedId.type==="concept")Me(me.detail.selectedId.namespace,me.detail.selectedId.name);else if(me.detail.selectedId.type==="label")Ue(me.detail.selectedId.name);else if(me.detail.selectedId.type==="field"){const Ne=me.detail.selectedId;if(Ne.sort!=null)te.setSortBy(Ne.path),te.setSortOrder(Ne.sort);else if(Ne.op!=null)te.addFilter({path:Ne.path,op:Ne.op});else throw new Error(`Unknown search type ${me.detail.selectedId}`)}else throw new Error(`Unknown search type ${me.detail.selectedId}`);he.clear()}},_t=me=>{l(0,J=me.detail.selectedItem.path)};let Wt=[];const qi=(me,Ne)=>Ne===me,ji=(me,Ne)=>Ne.id===me.id;function Ui(me){Be[me?"unshift":"push"](()=>{he=me,l(4,he)})}function Yi(me){z=me,l(1,z)}return i.$$.update=()=>{var me,Ne,Je,Ze,tt;i.$$.dirty[1]&64&&q(l(7,t=ot(B.namespace,B.datasetName))),i.$$.dirty[1]&64&&(n=B.namespace),i.$$.dirty[1]&64&&(o=B.datasetName),i.$$.dirty[1]&32&&l(19,s=(Je=(Ne=(me=U.data)==null?void 0:me.ui)==null?void 0:Ne.media_paths)==null?void 0:Je.map(Ce=>Array.isArray(Ce)?Ce:[Ce])),i.$$.dirty[0]&524289|i.$$.dirty[1]&1&&J==null&&s!=null&&l(0,J=bs(y,s)),i.$$.dirty[0]&1|i.$$.dirty[1]&64&&l(20,r=zt(B,J)),i.$$.dirty[0]&1|i.$$.dirty[1]&9&&l(22,a=P(J,y.stats,y.schema,F.data)),i.$$.dirty[0]&1|i.$$.dirty[1]&57&&l(2,f=vs(U.data,ee,y,J,(F.data||[]).map(Ce=>Ce.name))),i.$$.dirty[0]&1|i.$$.dirty[1]&1&&l(30,u=vt(y.schema,J)),i.$$.dirty[0]&1073741828&&l(25,_=u!=null&&!!u.includes(f||"")),i.$$.dirty[0]&33685509&&l(28,c=!_&&re[oe(J,f)]),i.$$.dirty[0]&33554432&&l(6,d=_?"Search by keyword, field or concept.":"Search by keyword or field. Compute embedding to enable concept search."),i.$$.dirty[1]&2&&l(29,h=(tt=(Ze=C.data)==null?void 0:Ze.user)==null?void 0:tt.id),i.$$.dirty[0]&570425344|i.$$.dirty[1]&4&&l(21,b=_?ws(I.data||[],h):[]),i.$$.dirty[0]&2&&l(18,se={id:"new-concept",text:z}),i.$$.dirty[0]&2&&l(27,w={id:"keyword-search",text:z}),i.$$.dirty[0]&2&&l(26,k={id:"semantic-search",text:z}),i.$$.dirty[0]&268435456&&l(24,g={id:"compute-embedding",text:"Compute embedding",disabled:c}),i.$$.dirty[1]&1&&l(23,E=y.schema!=null?oi(y.schema):[]),i.$$.dirty[0]&267649030|i.$$.dirty[1]&6&&l(3,X=I!=null&&I.data?[...z!=""?[w]:[],...z!=""&&f&&_?[k]:[],..._?[se]:[g],...E.map(Ce=>({id:{type:"label",name:Ce},text:Ce,description:`Find documents labeled "${Ce}"`})),...a,...b.flatMap(Ce=>Ce.concepts.map(ze=>({id:{namespace:ze.namespace,name:ze.name,type:"concept"},text:ks(ze.namespace,ze.name,C.data),description:ze.metadata.description||void 0,disabled:r.some(Oe=>Oe.type==="concept"&&Oe.concept_namespace===ze.namespace&&Oe.concept_name===ze.name)})))]:[]),i.$$.dirty[0]&524288|i.$$.dirty[1]&1&&l(5,Wt=(s||[]).map(Ce=>({id:Le(Ce),text:qe(Ce),path:Ce,embeddings:vt(y.schema,Ce)})))},[J,z,f,X,he,Wt,d,t,te,j,W,K,fe,ae,le,st,_t,re,se,s,r,b,a,E,g,_,k,w,c,h,u,y,C,I,F,ee,U,B,qi,ji,Ui,Yi]}class _o extends we{constructor(e){super(),ke(this,e,ho,co,ve,{},null,[-1,-1])}}function fn(i){let e,l;return e=new Xi({props:{light:!0,flipped:!0,$$slots:{default:[go]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&767|n[1]&1&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function un(i){let e,l;return e=new it({props:{text:"Sort by"}}),e.$on("click",i[20]),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function cn(i){let e,l;return e=new it({props:{text:"Filter"}}),e.$on("click",i[21]),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function dn(i){let e,l,t,n,o,s;return l=new it({props:{disabled:!i[7],text:"Compute embedding"}}),l.$on("click",i[22]),{c(){e=T("div"),H(l.$$.fragment),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);O(l.$$.fragment,a),a.forEach(m),this.h()},h(){D(e,"class","w-full")},m(r,a){N(r,e,a),R(l,e,null),n=!0,o||(s=$e(t=Se.call(null,e,{text:i[7]?"":"User does not have access to compute embeddings over this dataset."})),o=!0)},p(r,a){const f={};a[0]&128&&(f.disabled=!r[7]),l.$set(f),t&&Pe(t.update)&&a[0]&128&&t.update.call(null,{text:r[7]?"":"User does not have access to compute embeddings over this dataset."})},i(r){n||(p(l.$$.fragment,r),n=!0)},o(r){$(l.$$.fragment,r),n=!1},d(r){r&&m(e),L(l),o=!1,s()}}}function mn(i){let e,l,t,n,o,s;return l=new it({props:{text:"Compute concept",disabled:!i[7]||i[9].length===0}}),l.$on("click",i[23]),{c(){e=T("div"),H(l.$$.fragment),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);O(l.$$.fragment,a),a.forEach(m),this.h()},h(){D(e,"class","w-full")},m(r,a){N(r,e,a),R(l,e,null),n=!0,o||(s=$e(t=Se.call(null,e,{text:i[7]?i[9].length===0?"No embeddings are computed for this field. Compute embeddings before using concepts.":"":"User does not have access to compute concepts over this dataset."})),o=!0)},p(r,a){const f={};a[0]&640&&(f.disabled=!r[7]||r[9].length===0),l.$set(f),t&&Pe(t.update)&&a[0]&640&&t.update.call(null,{text:r[7]?r[9].length===0?"No embeddings are computed for this field. Compute embeddings before using concepts.":"":"User does not have access to compute concepts over this dataset."})},i(r){n||(p(l.$$.fragment,r),n=!0)},o(r){$(l.$$.fragment,r),n=!1},d(r){r&&m(e),L(l),o=!1,s()}}}function hn(i){let e,l,t,n,o,s;return l=new it({props:{text:"Compute signal",disabled:!i[7]}}),l.$on("click",i[24]),{c(){e=T("div"),H(l.$$.fragment),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);O(l.$$.fragment,a),a.forEach(m),this.h()},h(){D(e,"class","w-full")},m(r,a){N(r,e,a),R(l,e,null),n=!0,o||(s=$e(t=Se.call(null,e,{text:i[7]?"":"User does not have access to compute signals over this dataset."})),o=!0)},p(r,a){const f={};a[0]&128&&(f.disabled=!r[7]),l.$set(f),t&&Pe(t.update)&&a[0]&128&&t.update.call(null,{text:r[7]?"":"User does not have access to compute signals over this dataset."})},i(r){n||(p(l.$$.fragment,r),n=!0)},o(r){$(l.$$.fragment,r),n=!1},d(r){r&&m(e),L(l),o=!1,s()}}}function _n(i){let e,l;return e=new it({props:{text:"Preview signal"}}),e.$on("click",i[25]),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function gn(i){let e,l,t,n,o,s;return l=new it({props:{disabled:!i[6],text:"Delete signal"}}),l.$on("click",i[26]),{c(){e=T("div"),H(l.$$.fragment),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);O(l.$$.fragment,a),a.forEach(m),this.h()},h(){D(e,"class","w-full")},m(r,a){N(r,e,a),R(l,e,null),n=!0,o||(s=$e(t=Se.call(null,e,{text:i[6]?"":"User does not have access to delete signals for this dataset."})),o=!0)},p(r,a){const f={};a[0]&64&&(f.disabled=!r[6]),l.$set(f),t&&Pe(t.update)&&a[0]&64&&t.update.call(null,{text:r[6]?"":"User does not have access to delete signals for this dataset."})},i(r){n||(p(l.$$.fragment,r),n=!0)},o(r){$(l.$$.fragment,r),n=!1},d(r){r&&m(e),L(l),o=!1,s()}}}function go(i){let e=wt(i[0]),l,t=Dt(i[0]),n,o,s,r,a,f,u,_=e&&un(i),c=t&&cn(i),d=!i[2]&&dn(i),h=!i[2]&&mn(i),b=!i[2]&&hn(i),w=!i[2]&&_n(i),k=i[1]&&gn(i);return{c(){_&&_.c(),l=Y(),c&&c.c(),n=Y(),d&&d.c(),o=Y(),h&&h.c(),s=Y(),b&&b.c(),r=Y(),w&&w.c(),a=Y(),k&&k.c(),f=de()},l(g){_&&_.l(g),l=Q(g),c&&c.l(g),n=Q(g),d&&d.l(g),o=Q(g),h&&h.l(g),s=Q(g),b&&b.l(g),r=Q(g),w&&w.l(g),a=Q(g),k&&k.l(g),f=de()},m(g,E){_&&_.m(g,E),N(g,l,E),c&&c.m(g,E),N(g,n,E),d&&d.m(g,E),N(g,o,E),h&&h.m(g,E),N(g,s,E),b&&b.m(g,E),N(g,r,E),w&&w.m(g,E),N(g,a,E),k&&k.m(g,E),N(g,f,E),u=!0},p(g,E){E[0]&1&&(e=wt(g[0])),e?_?(_.p(g,E),E[0]&1&&p(_,1)):(_=un(g),_.c(),p(_,1),_.m(l.parentNode,l)):_&&(ne(),$(_,1,1,()=>{_=null}),ie()),E[0]&1&&(t=Dt(g[0])),t?c?(c.p(g,E),E[0]&1&&p(c,1)):(c=cn(g),c.c(),p(c,1),c.m(n.parentNode,n)):c&&(ne(),$(c,1,1,()=>{c=null}),ie()),g[2]?d&&(ne(),$(d,1,1,()=>{d=null}),ie()):d?(d.p(g,E),E[0]&4&&p(d,1)):(d=dn(g),d.c(),p(d,1),d.m(o.parentNode,o)),g[2]?h&&(ne(),$(h,1,1,()=>{h=null}),ie()):h?(h.p(g,E),E[0]&4&&p(h,1)):(h=mn(g),h.c(),p(h,1),h.m(s.parentNode,s)),g[2]?b&&(ne(),$(b,1,1,()=>{b=null}),ie()):b?(b.p(g,E),E[0]&4&&p(b,1)):(b=hn(g),b.c(),p(b,1),b.m(r.parentNode,r)),g[2]?w&&(ne(),$(w,1,1,()=>{w=null}),ie()):w?(w.p(g,E),E[0]&4&&p(w,1)):(w=_n(g),w.c(),p(w,1),w.m(a.parentNode,a)),g[1]?k?(k.p(g,E),E[0]&2&&p(k,1)):(k=gn(g),k.c(),p(k,1),k.m(f.parentNode,f)):k&&(ne(),$(k,1,1,()=>{k=null}),ie())},i(g){u||(p(_),p(c),p(d),p(h),p(b),p(w),p(k),u=!0)},o(g){$(_),$(c),$(d),$(h),$(b),$(w),$(k),u=!1},d(g){_&&_.d(g),g&&m(l),c&&c.d(g),g&&m(n),d&&d.d(g),g&&m(o),h&&h.d(g),g&&m(s),b&&b.d(g),g&&m(r),w&&w.d(g),g&&m(a),k&&k.d(g),g&&m(f)}}}function po(i){let e,l,t,n=Le(i[0].path)+"",o,s,r,a,f;return{c(){e=T("p"),l=Z("Confirm deleting "),t=T("code"),o=Z(n),s=Z(" ?"),r=Y(),a=T("p"),f=Z("This is a permanent action and cannot be undone."),this.h()},l(u){e=V(u,"P",{class:!0});var _=S(e);l=G(_,"Confirm deleting "),t=V(_,"CODE",{});var c=S(t);o=G(c,n),c.forEach(m),s=G(_," ?"),_.forEach(m),r=Q(u),a=V(u,"P",{class:!0});var d=S(a);f=G(d,"This is a permanent action and cannot be undone."),d.forEach(m),this.h()},h(){D(e,"class","!text-lg"),D(a,"class","mt-2")},m(u,_){N(u,e,_),v(e,l),v(e,t),v(t,o),v(e,s),N(u,r,_),N(u,a,_),v(a,f)},p(u,_){_[0]&1&&n!==(n=Le(u[0].path)+"")&&ce(o,n)},d(u){u&&m(e),u&&m(r),u&&m(a)}}}function bo(i){let e,l,t,n,o=i[8]&&fn(i);function s(a){i[27](a)}let r={danger:!0,modalHeading:"Delete signal",primaryButtonText:"Delete",primaryButtonIcon:i[10].isLoading?el:void 0,secondaryButtonText:"Cancel",$$slots:{default:[po]},$$scope:{ctx:i}};return i[3]!==void 0&&(r.open=i[3]),l=new Ut({props:r}),Be.push(()=>Ye(l,"open",s)),l.$on("click:button--secondary",i[28]),l.$on("open",i[29]),l.$on("close",i[30]),l.$on("submit",i[15]),{c(){o&&o.c(),e=Y(),H(l.$$.fragment)},l(a){o&&o.l(a),e=Q(a),O(l.$$.fragment,a)},m(a,f){o&&o.m(a,f),N(a,e,f),R(l,a,f),n=!0},p(a,f){a[8]?o?(o.p(a,f),f[0]&256&&p(o,1)):(o=fn(a),o.c(),p(o,1),o.m(e.parentNode,e)):o&&(ne(),$(o,1,1,()=>{o=null}),ie());const u={};f[0]&1024&&(u.primaryButtonIcon=a[10].isLoading?el:void 0),f[0]&1|f[1]&1&&(u.$$scope={dirty:f,ctx:a}),!t&&f[0]&8&&(t=!0,u.open=a[3],Qe(()=>t=!1)),l.$set(u)},i(a){n||(p(o),p(l.$$.fragment,a),n=!0)},o(a){$(o),$(l.$$.fragment,a),n=!1},d(a){o&&o.d(a),a&&m(e),L(l,a)}}}function vo(i,e,l){let t,n,o,s,r,a,f,u,_,c,d,h,b,{field:w}=e,k=!1;const g=je();be(i,g,P=>l(19,b=P));const E=Ge();be(i,E,P=>l(18,h=P));const y=Ss();be(i,y,P=>l(10,c=P));const M=mt();be(i,M,P=>l(17,d=P));function C(){c.mutate([t,n,{signal_path:w.path}],{onSuccess:()=>{l(3,k=!1),g.deleteSignal(w.path)}})}const I=()=>g.addSortBy(w.path),F=()=>Xe({command:xe.EditFilter,namespace:t,datasetName:n,path:w.path}),ee=()=>Xe({command:xe.ComputeEmbedding,namespace:t,datasetName:n,path:w==null?void 0:w.path}),U=()=>Xe({command:xe.ComputeConcept,namespace:t,datasetName:n,path:w==null?void 0:w.path}),A=()=>Xe({command:xe.ComputeSignal,namespace:t,datasetName:n,path:w==null?void 0:w.path}),q=()=>Xe({command:xe.PreviewConcept,namespace:t,datasetName:n,path:w==null?void 0:w.path}),B=()=>l(3,k=!0);function te(P){k=P,l(3,k)}const j=()=>l(3,k=!1);function W(P){pt.call(this,i,P)}function J(P){pt.call(this,i,P)}return i.$$set=P=>{"field"in P&&l(0,w=P.field)},i.$$.update=()=>{var P,K,fe;i.$$.dirty[0]&524288&&l(5,t=b.namespace),i.$$.dirty[0]&524288&&l(4,n=b.datasetName),i.$$.dirty[0]&1&&l(2,o=nt(w)),i.$$.dirty[0]&1&&l(1,s=Bt(w)),i.$$.dirty[0]&262145&&l(9,r=vt(h.schema,w.path)),i.$$.dirty[0]&262145&&l(16,a=$i(((P=h.selectRowsSchema)==null?void 0:P.data)||null,w.path)),i.$$.dirty[0]&65543&&l(8,f=(wt(w)||Dt(w)||!o||s)&&!a),i.$$.dirty[0]&131072&&l(7,u=(K=d.data)==null?void 0:K.access.dataset.compute_signals),i.$$.dirty[0]&131072&&l(6,_=(fe=d.data)==null?void 0:fe.access.dataset.delete_signals)},[w,s,o,k,n,t,_,u,f,r,c,g,E,y,M,C,a,d,h,b,I,F,ee,U,A,q,B,te,j,W,J]}class wo extends we{constructor(e){super(),ke(this,e,vo,bo,ve,{field:0},null,[-1,-1])}}function ko(i){let e,l,t,n,o;const s=[i[3],{type:i[0]?"green":"blue"},{icon:i[2]}];let r={};for(let a=0;a<s.length;a+=1)r=pe(r,s[a]);return l=new Ke({props:r}),{c(){e=T("div"),H(l.$$.fragment),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);O(l.$$.fragment,f),f.forEach(m),this.h()},h(){D(e,"class","signal-badge")},m(a,f){N(a,e,f),R(l,e,null),t=!0,n||(o=$e(Se.call(null,e,{text:i[1]})),n=!0)},p(a,[f]){const u=f&13?He(s,[f&8&&ai(a[3]),f&1&&{type:a[0]?"green":"blue"},f&4&&{icon:a[2]}]):{};l.$set(u)},i(a){t||(p(l.$$.fragment,a),t=!0)},o(a){$(l.$$.fragment,a),t=!1},d(a){a&&m(e),L(l),n=!1,o()}}}function $o(i,e,l){const t=["isPreview"];let n=ye(e,t),{isPreview:o=!1}=e;const s=o?"Signal is in preview mode and has not been computed for the whole dataset.":"Generated by a signal.",r=o?Ws:Sr;return i.$$set=a=>{e=pe(pe({},e),Ie(a)),l(3,n=ye(e,t)),"isPreview"in a&&l(0,o=a.isPreview)},[o,s,r,n]}class Eo extends we{constructor(e){super(),ke(this,e,$o,ko,ve,{isPreview:0})}}function pn(i,e,l){const t=i.slice();t[7]=e[l][0],t[8]=e[l][1];const n=t[2](t[7]);t[9]=n;const o=`${t[8]/t[1]*100}%`;t[10]=o;const s=Ee(t[8]);return t[11]=s,t}function bn(i){let e,l,t=i[9]+"",n,o,s,r,a,f=i[11]+"",u,_,c,d,h;function b(){return i[6](i[7])}return{c(){e=T("button"),l=T("div"),n=Z(t),s=Y(),r=T("div"),a=T("div"),u=Z(f),c=Y(),this.h()},l(w){e=V(w,"BUTTON",{class:!0});var k=S(e);l=V(k,"DIV",{title:!0,class:!0});var g=S(l);n=G(g,t),g.forEach(m),s=Q(k),r=V(k,"DIV",{class:!0});var E=S(r);a=V(E,"DIV",{title:!0,class:!0});var y=S(a);u=G(y,f),y.forEach(m),E.forEach(m),c=Q(k),k.forEach(m),this.h()},h(){D(l,"title",o=i[9]),D(l,"class","w-48 flex-none truncate px-2"),D(a,"title",_=i[11]),D(a,"class","histogram-bar my-px bg-indigo-200 pl-2 text-xs leading-5"),ft(a,"width",i[10]),D(r,"class","w-36 border-l border-gray-300 pl-2"),D(e,"class","flex items-center p-0 text-left text-xs text-black hover:bg-gray-200")},m(w,k){N(w,e,k),v(e,l),v(l,n),v(e,s),v(e,r),v(r,a),v(a,u),v(e,c),d||(h=Fe(e,"click",b),d=!0)},p(w,k){i=w,k&1&&t!==(t=i[9]+"")&&ce(n,t),k&1&&o!==(o=i[9])&&D(l,"title",o),k&1&&f!==(f=i[11]+"")&&ce(u,f),k&1&&_!==(_=i[11])&&D(a,"title",_),k&3&&ft(a,"width",i[10])},d(w){w&&m(e),d=!1,h()}}}function So(i){let e,l=i[0],t=[];for(let n=0;n<l.length;n+=1)t[n]=bn(pn(i,l,n));return{c(){e=T("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=V(n,"DIV",{class:!0});var o=S(e);for(let s=0;s<t.length;s+=1)t[s].l(o);o.forEach(m),this.h()},h(){D(e,"class","histogram")},m(n,o){N(n,e,o);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(n,[o]){if(o&15){l=n[0];let s;for(s=0;s<l.length;s+=1){const r=pn(n,l,s);t[s]?t[s].p(r,o):(t[s]=bn(r),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=l.length}},i:x,o:x,d(n){n&&m(e),Ae(t,n)}}}function yo(i,e,l){let t,{field:n}=e,{counts:o}=e,{bins:s}=e;function r(u){if(u==null)return Ee(u);if(s==null||n.bins!=null)return Ee(u);const[_,c]=s[u.toString()];return _==null?`< ${Ee(c)}`:c==null?`≥ ${Ee(_)}`:`${Ee(_)} .. ${Ee(c)}`}const a=dt(),f=u=>a("row-click",{value:u});return i.$$set=u=>{"field"in u&&l(4,n=u.field),"counts"in u&&l(0,o=u.counts),"bins"in u&&l(5,s=u.bins)},i.$$.update=()=>{i.$$.dirty&1&&l(1,t=Math.max(...o.map(([u,_])=>_)))},[o,t,r,a,n,s,f]}class Io extends we{constructor(e){super(),ke(this,e,yo,So,ve,{field:4,counts:0,bins:5})}}function Do(i){let e,l,t,n,o,s,r,a,f,u,_,c=Ee(i[4].total_count)+"",d,h,b,w,k,g,E,y,M,C,I,F,ee=Ee(i[4].approx_count_distinct)+"",U,A,q,B,te,j;s=new ct({props:{class:"inline"}}),g=new ct({props:{class:"inline"}});let W=i[4].avg_text_length&&vn(i),J=i[4].min_val&&i[4].max_val&&wn(i);return{c(){e=T("table"),l=T("tbody"),t=T("tr"),n=T("td"),o=T("span"),H(s.$$.fragment),r=Y(),a=T("span"),f=Z("Total count"),u=Y(),_=T("td"),d=Z(c),h=Y(),b=T("tr"),w=T("td"),k=T("span"),H(g.$$.fragment),E=Y(),y=T("span"),M=Z("Unique values"),C=Y(),I=T("td"),F=Z("~"),U=Z(ee),A=Y(),W&&W.c(),q=Y(),J&&J.c(),this.h()},l(P){e=V(P,"TABLE",{class:!0});var K=S(e);l=V(K,"TBODY",{});var fe=S(l);t=V(fe,"TR",{});var oe=S(t);n=V(oe,"TD",{class:!0});var re=S(n);o=V(re,"SPAN",{});var ae=S(o);O(s.$$.fragment,ae),ae.forEach(m),r=Q(re),a=V(re,"SPAN",{});var le=S(a);f=G(le,"Total count"),le.forEach(m),re.forEach(m),u=Q(oe),_=V(oe,"TD",{class:!0});var X=S(_);d=G(X,c),X.forEach(m),oe.forEach(m),h=Q(fe),b=V(fe,"TR",{});var z=S(b);w=V(z,"TD",{class:!0});var se=S(w);k=V(se,"SPAN",{});var De=S(k);O(g.$$.fragment,De),De.forEach(m),E=Q(se),y=V(se,"SPAN",{});var he=S(y);M=G(he,"Unique values"),he.forEach(m),se.forEach(m),C=Q(z),I=V(z,"TD",{class:!0});var Me=S(I);F=G(Me,"~"),U=G(Me,ee),Me.forEach(m),z.forEach(m),A=Q(fe),W&&W.l(fe),q=Q(fe),J&&J.l(fe),fe.forEach(m),K.forEach(m),this.h()},h(){D(n,"class","svelte-1tctrjz"),D(_,"class","svelte-1tctrjz"),D(w,"class","svelte-1tctrjz"),D(I,"class","svelte-1tctrjz"),D(e,"class","stats-table w-full svelte-1tctrjz")},m(P,K){N(P,e,K),v(e,l),v(l,t),v(t,n),v(n,o),R(s,o,null),v(n,r),v(n,a),v(a,f),v(t,u),v(t,_),v(_,d),v(l,h),v(l,b),v(b,w),v(w,k),R(g,k,null),v(w,E),v(w,y),v(y,M),v(b,C),v(b,I),v(I,F),v(I,U),v(l,A),W&&W.m(l,null),v(l,q),J&&J.m(l,null),B=!0,te||(j=[$e(Se.call(null,o,{text:"Total number of rows where the value is defined."})),$e(Se.call(null,k,{text:"An approximation of the total number of unique values."}))],te=!0)},p(P,K){(!B||K&16)&&c!==(c=Ee(P[4].total_count)+"")&&ce(d,c),(!B||K&16)&&ee!==(ee=Ee(P[4].approx_count_distinct)+"")&&ce(U,ee),P[4].avg_text_length?W?(W.p(P,K),K&16&&p(W,1)):(W=vn(P),W.c(),p(W,1),W.m(l,q)):W&&(ne(),$(W,1,1,()=>{W=null}),ie()),P[4].min_val&&P[4].max_val?J?(J.p(P,K),K&16&&p(J,1)):(J=wn(P),J.c(),p(J,1),J.m(l,null)):J&&(ne(),$(J,1,1,()=>{J=null}),ie())},i(P){B||(p(s.$$.fragment,P),p(g.$$.fragment,P),p(W),p(J),B=!0)},o(P){$(s.$$.fragment,P),$(g.$$.fragment,P),$(W),$(J),B=!1},d(P){P&&m(e),L(s),L(g),W&&W.d(),J&&J.d(),te=!1,We(j)}}}function To(i){let e,l;return e=new Re({props:{paragraph:!0,width:"50%"}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Vo(i){let e,l,t=i[2].error.message+"",n;return{c(){e=T("p"),l=Z("Error: "),n=Z(t)},l(o){e=V(o,"P",{});var s=S(e);l=G(s,"Error: "),n=G(s,t),s.forEach(m)},m(o,s){N(o,e,s),v(e,l),v(e,n)},p(o,s){s&4&&t!==(t=o[2].error.message+"")&&ce(n,t)},i:x,o:x,d(o){o&&m(e)}}}function vn(i){let e,l,t,n,o,s,r,a,f,u=Ee(i[4].avg_text_length)+"",_,c,d,h;return n=new ct({props:{class:"inline"}}),{c(){e=T("tr"),l=T("td"),t=T("span"),H(n.$$.fragment),o=Y(),s=T("span"),r=Z("Average text length"),a=Y(),f=T("td"),_=Z(u),this.h()},l(b){e=V(b,"TR",{});var w=S(e);l=V(w,"TD",{class:!0});var k=S(l);t=V(k,"SPAN",{});var g=S(t);O(n.$$.fragment,g),g.forEach(m),o=Q(k),s=V(k,"SPAN",{});var E=S(s);r=G(E,"Average text length"),E.forEach(m),k.forEach(m),a=Q(w),f=V(w,"TD",{class:!0});var y=S(f);_=G(y,u),y.forEach(m),w.forEach(m),this.h()},h(){D(l,"class","svelte-1tctrjz"),D(f,"class","svelte-1tctrjz")},m(b,w){N(b,e,w),v(e,l),v(l,t),R(n,t,null),v(l,o),v(l,s),v(s,r),v(e,a),v(e,f),v(f,_),c=!0,d||(h=$e(Se.call(null,t,{text:"The average length of the text in characters."})),d=!0)},p(b,w){(!c||w&16)&&u!==(u=Ee(b[4].avg_text_length)+"")&&ce(_,u)},i(b){c||(p(n.$$.fragment,b),c=!0)},o(b){$(n.$$.fragment,b),c=!1},d(b){b&&m(e),L(n),d=!1,h()}}}function wn(i){let e,l,t,n,o,s,r,a,f,u=Ee(i[4].min_val)+"",_,c,d=Ee(i[4].max_val)+"",h,b,w,k;return n=new ct({props:{class:"inline"}}),{c(){e=T("tr"),l=T("td"),t=T("span"),H(n.$$.fragment),o=Y(),s=T("span"),r=Z("Range"),a=Y(),f=T("td"),_=Z(u),c=Z(" .. "),h=Z(d),this.h()},l(g){e=V(g,"TR",{});var E=S(e);l=V(E,"TD",{class:!0});var y=S(l);t=V(y,"SPAN",{});var M=S(t);O(n.$$.fragment,M),M.forEach(m),o=Q(y),s=V(y,"SPAN",{});var C=S(s);r=G(C,"Range"),C.forEach(m),y.forEach(m),a=Q(E),f=V(E,"TD",{class:!0});var I=S(f);_=G(I,u),c=G(I," .. "),h=G(I,d),I.forEach(m),E.forEach(m),this.h()},h(){D(l,"class","svelte-1tctrjz"),D(f,"class","svelte-1tctrjz")},m(g,E){N(g,e,E),v(e,l),v(l,t),R(n,t,null),v(l,o),v(l,s),v(s,r),v(e,a),v(e,f),v(f,_),v(f,c),v(f,h),b=!0,w||(k=$e(Se.call(null,t,{text:"The minimum and maximum value across the dataset"})),w=!0)},p(g,E){(!b||E&16)&&u!==(u=Ee(g[4].min_val)+"")&&ce(_,u),(!b||E&16)&&d!==(d=Ee(g[4].max_val)+"")&&ce(h,d)},i(g){b||(p(n.$$.fragment,g),b=!0)},o(g){$(n.$$.fragment,g),b=!1},d(g){g&&m(e),L(n),w=!1,k()}}}function No(i){let e,l,t;return l=new Io({props:{counts:i[5],bins:i[3],field:i[0]}}),l.$on("row-click",i[13]),{c(){e=T("div"),H(l.$$.fragment),this.h()},l(n){e=V(n,"DIV",{class:!0});var o=S(e);O(l.$$.fragment,o),o.forEach(m),this.h()},h(){D(e,"class","mt-4")},m(n,o){N(n,e,o),R(l,e,null),t=!0},p(n,o){const s={};o&32&&(s.counts=n[5]),o&8&&(s.bins=n[3]),o&1&&(s.field=n[0]),l.$set(s)},i(n){t||(p(l.$$.fragment,n),t=!0)},o(n){$(l.$$.fragment,n),t=!1},d(n){n&&m(e),L(l)}}}function Mo(i){let e,l;return e=new Re({props:{paragraph:!0,width:"50%"}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Co(i){let e,l,t=i[1].error.message+"",n;return{c(){e=T("p"),l=Z("Error: "),n=Z(t)},l(o){e=V(o,"P",{});var s=S(e);l=G(s,"Error: "),n=G(s,t),s.forEach(m)},m(o,s){N(o,e,s),v(e,l),v(e,n)},p(o,s){s&2&&t!==(t=o[1].error.message+"")&&ce(n,t)},i:x,o:x,d(o){o&&m(e)}}}function zo(i){let e,l,t,n,o,s,r;const a=[Vo,To,Do],f=[];function u(h,b){return h[2].error?0:h[4]==null?1:2}l=u(i),t=f[l]=a[l](i);const _=[Co,Mo,No],c=[];function d(h,b){return h[1].error?0:h[5]==null?1:h[5].length>0?2:-1}return~(o=d(i))&&(s=c[o]=_[o](i)),{c(){e=T("div"),t.c(),n=Y(),s&&s.c(),this.h()},l(h){e=V(h,"DIV",{class:!0});var b=S(e);t.l(b),n=Q(b),s&&s.l(b),b.forEach(m),this.h()},h(){D(e,"class","p-4")},m(h,b){N(h,e,b),f[l].m(e,null),v(e,n),~o&&c[o].m(e,null),r=!0},p(h,[b]){let w=l;l=u(h),l===w?f[l].p(h,b):(ne(),$(f[w],1,1,()=>{f[w]=null}),ie(),t=f[l],t?t.p(h,b):(t=f[l]=a[l](h),t.c()),p(t,1),t.m(e,n));let k=o;o=d(h),o===k?~o&&c[o].p(h,b):(s&&(ne(),$(c[k],1,1,()=>{c[k]=null}),ie()),~o?(s=c[o],s?s.p(h,b):(s=c[o]=_[o](h),s.c()),p(s,1),s.m(e,null)):s=null)},i(h){r||(p(t),p(s),r=!0)},o(h){$(t),$(s),r=!1},d(h){h&&m(e),f[l].d(),~o&&c[o].d()}}}function Fo(i,e,l){let t,n,o,s,r,a=x,f=()=>(a(),a=Te(n,M=>l(1,r=M)),n),u,_=x,c=()=>(_(),_=Te(t,M=>l(2,u=M)),t),d;i.$$.on_destroy.push(()=>a()),i.$$.on_destroy.push(()=>_());let{field:h}=e;const b=je();be(i,b,M=>l(12,d=M));let w,k,g=null;function E(M){if(M==null)return;if(g!=null){const[I,F]=g[M.toString()];if(I!=null){const ee={path:h.path,op:"greater_equal",value:I};b.addFilter(ee)}if(F!=null){const ee={path:h.path,op:"less",value:F};b.addFilter(ee)}return}const C={path:h.path,op:"equals",value:M};b.addFilter(C)}const y=M=>E(M.detail.value);return i.$$set=M=>{"field"in M&&l(0,h=M.field)},i.$$.update=()=>{var M;if(i.$$.dirty&4097&&c(l(7,t=Ei(d.namespace,d.datasetName,{leaf_path:h.path}))),i.$$.dirty&1&&l(10,w=ki(h.dtype)&&!h.categorical?"value":"count"),i.$$.dirty&1024&&l(11,k=w==="value"?"ASC":"DESC"),i.$$.dirty&7169&&f(l(6,n=Si(d.namespace,d.datasetName,{leaf_path:h.path,filters:d.query.filters,sort_by:w,sort_order:k}))),i.$$.dirty&2&&l(5,o=r.data!=null?r.data.counts:null),i.$$.dirty&4&&l(4,s=u.data!=null?u.data:null),i.$$.dirty&2)if(((M=r.data)==null?void 0:M.bins)!=null){l(3,g={});for(const[C,I,F]of Object.values(r.data.bins))l(3,g[C]=[I,F],g)}else l(3,g=null)},[h,r,u,g,s,o,n,t,b,E,w,k,d,y]}class Po extends we{constructor(e){super(),ke(this,e,Fo,zo,ve,{field:0})}}function kn(i,e,l){const t=i.slice();return t[37]=e[l],t}function $n(i,e,l){const t=i.slice();return t[40]=e[l],t}function En(i,e,l){const t=i.slice();return t[43]=e[l],t}function Sn(i,e,l){const t=i.slice();return t[46]=e[l],t}function Ao(i){let e,l="{}",t;return{c(){e=T("span"),t=Z(l),this.h()},l(n){e=V(n,"SPAN",{class:!0});var o=S(e);t=G(o,l),o.forEach(m),this.h()},h(){D(e,"class","font-mono")},m(n,o){N(n,e,o),v(e,t)},p:x,i:x,o:x,d(n){n&&m(e)}}}function Bo(i){let e,l,t,n;var o=at[i[1].repeated_field.dtype];function s(r){return{props:{title:r[1].dtype||void 0}}}return o&&(l=rt(o,s(i))),{c(){e=T("div"),l&&H(l.$$.fragment),t=Z("[]"),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);l&&O(l.$$.fragment,a),t=G(a,"[]"),a.forEach(m),this.h()},h(){D(e,"class","flex")},m(r,a){N(r,e,a),l&&R(l,e,null),v(e,t),n=!0},p(r,a){const f={};if(a[0]&2&&(f.title=r[1].dtype||void 0),a[0]&2&&o!==(o=at[r[1].repeated_field.dtype])){if(l){ne();const u=l;$(u.$$.fragment,1,0,()=>{L(u,1)}),ie()}o?(l=rt(o,s(r)),H(l.$$.fragment),p(l.$$.fragment,1),R(l,e,t)):l=null}else o&&l.$set(f)},i(r){n||(l&&p(l.$$.fragment,r),n=!0)},o(r){l&&$(l.$$.fragment,r),n=!1},d(r){r&&m(e),l&&L(l)}}}function Ho(i){let e,l,t;var n=at[i[1].dtype];function o(s){return{props:{title:s[1].dtype}}}return n&&(e=rt(n,o(i))),{c(){e&&H(e.$$.fragment),l=de()},l(s){e&&O(e.$$.fragment,s),l=de()},m(s,r){e&&R(e,s,r),N(s,l,r),t=!0},p(s,r){const a={};if(r[0]&2&&(a.title=s[1].dtype),r[0]&2&&n!==(n=at[s[1].dtype])){if(e){ne();const f=e;$(f.$$.fragment,1,0,()=>{L(f,1)}),ie()}n?(e=rt(n,o(s)),H(e.$$.fragment),p(e.$$.fragment,1),R(e,l.parentNode,l)):e=null}else n&&e.$set(a)},i(s){t||(e&&p(e.$$.fragment,s),t=!0)},o(s){e&&$(e.$$.fragment,s),t=!1},d(s){s&&m(l),e&&L(e,s)}}}function yn(i){let e,l;return e=new Et({props:{interactive:!0,type:"green",$$slots:{default:[Oo]},$$scope:{ctx:i}}}),e.$on("click",i[31]),e.$on("remove",i[32]),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&32768|n[1]&262144&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Ro(i){let e,l;return e=new Bi({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Lo(i){let e,l;return e=new Ai({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Oo(i){let e,l,t,n,o,s,r,a;const f=[Lo,Ro],u=[];function _(c,d){return c[15]=="ASC"?0:1}return s=_(i),r=u[s]=f[s](i),{c(){e=T("div"),l=T("div"),t=Z("Sorted"),n=Y(),o=T("span"),r.c(),this.h()},l(c){e=V(c,"DIV",{class:!0});var d=S(e);l=V(d,"DIV",{class:!0});var h=S(l);t=G(h,"Sorted"),h.forEach(m),n=Q(d),o=V(d,"SPAN",{});var b=S(o);r.l(b),b.forEach(m),d.forEach(m),this.h()},h(){D(l,"class","mr-1"),D(e,"class","flex flex-row")},m(c,d){N(c,e,d),v(e,l),v(l,t),v(e,n),v(e,o),u[s].m(o,null),a=!0},p(c,d){let h=s;s=_(c),s!==h&&(ne(),$(u[h],1,1,()=>{u[h]=null}),ie(),r=u[s],r||(r=u[s]=f[s](c),r.c()),p(r,1),r.m(o,null))},i(c){a||(p(r),a=!0)},o(c){$(r),a=!1},d(c){c&&m(e),u[s].d()}}}function In(i){let e,l,t=i[7],n=[];for(let s=0;s<t.length;s+=1)n[s]=Dn(Sn(i,t,s));const o=s=>$(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=de()},l(s){for(let r=0;r<n.length;r+=1)n[r].l(s);e=de()},m(s,r){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(s,r);N(s,e,r),l=!0},p(s,r){if(r[0]&129){t=s[7];let a;for(a=0;a<t.length;a+=1){const f=Sn(s,t,a);n[a]?(n[a].p(f,r),p(n[a],1)):(n[a]=Dn(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(ne(),a=t.length;a<n.length;a+=1)o(a);ie()}},i(s){if(!l){for(let r=0;r<t.length;r+=1)p(n[r]);l=!0}},o(s){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)$(n[r]);l=!1},d(s){Ae(n,s),s&&m(e)}}}function Dn(i){let e,l;return e=new Ri({props:{schema:i[0],filter:i[46],hidePath:!0}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&1&&(o.schema=t[0]),n[0]&128&&(o.filter=t[46]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Tn(i){let e,l;return e=new Li({props:{search:i[43]}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&8192&&(o.search=t[43]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Vn(i){var t;let e,l;return e=new Ni({props:{embedding:(t=i[40].signal)==null?void 0:t.signal_name}}),{c(){H(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,o){R(e,n,o),l=!0},p(n,o){var r;const s={};o[0]&131072&&(s.embedding=(r=n[40].signal)==null?void 0:r.signal_name),e.$set(s)},i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){$(e.$$.fragment,n),l=!1},d(n){L(e,n)}}}function Nn(i){let e,l,t,n,o,s,r;return l=new Ke({props:{type:"cyan",icon:Ti}}),l.$on("click",i[33]),n=new Eo({props:{isPreview:!0}}),n.$on("click",i[34]),{c(){e=T("div"),H(l.$$.fragment),t=Y(),H(n.$$.fragment),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);O(l.$$.fragment,f),f.forEach(m),t=Q(a),O(n.$$.fragment,a),this.h()},h(){D(e,"class","compute-signal-preview pointer-events-auto")},m(a,f){N(a,e,f),R(l,e,null),N(a,t,f),R(n,a,f),o=!0,s||(r=$e(Se.call(null,e,{text:`Compute signal over the column and save the result.

This may be expensive.`})),s=!0)},p:x,i(a){o||(p(l.$$.fragment,a),p(n.$$.fragment,a),o=!0)},o(a){$(l.$$.fragment,a),$(n.$$.fragment,a),o=!1},d(a){a&&m(e),L(l),a&&m(t),L(n,a),s=!1,r()}}}function Mn(i){let e,l,t,n,o,s,r;return t=new Js({}),{c(){e=T("button"),l=T("div"),H(t.$$.fragment),this.h()},l(a){e=V(a,"BUTTON",{});var f=S(e);l=V(f,"DIV",{class:!0});var u=S(l);O(t.$$.fragment,u),u.forEach(m),f.forEach(m),this.h()},h(){D(l,"class","transition"),ue(l,"rotate-180",i[20]),ue(e,"bg-slate-300",i[20])},m(a,f){N(a,e,f),v(e,l),R(t,l,null),o=!0,s||(r=[$e(n=Se.call(null,e,{text:i[20]?"Close statistics":"See statistics"})),Fe(e,"click",i[35])],s=!0)},p(a,f){(!o||f[0]&1048576)&&ue(l,"rotate-180",a[20]),n&&Pe(n.update)&&f[0]&1048576&&n.update.call(null,{text:a[20]?"Close statistics":"See statistics"}),(!o||f[0]&1048576)&&ue(e,"bg-slate-300",a[20])},i(a){o||(p(t.$$.fragment,a),o=!0)},o(a){$(t.$$.fragment,a),o=!1},d(a){a&&m(e),L(t),s=!1,We(r)}}}function Cn(i){let e,l,t,n;return l=new Po({props:{field:i[1]}}),{c(){e=T("div"),H(l.$$.fragment),this.h()},l(o){e=V(o,"DIV",{class:!0});var s=S(e);O(l.$$.fragment,s),s.forEach(m),this.h()},h(){D(e,"class","px-2")},m(o,s){N(o,e,s),R(l,e,null),n=!0},p(o,s){const r={};s[0]&2&&(r.field=o[1]),l.$set(r)},i(o){n||(p(l.$$.fragment,o),o&&Nt(()=>{n&&(t||(t=bt(e,$t,{},!0)),t.run(1))}),n=!0)},o(o){$(l.$$.fragment,o),o&&(t||(t=bt(e,$t,{},!1)),t.run(0)),n=!1},d(o){o&&m(e),L(l),o&&t&&t.end()}}}function zn(i){let e,l,t=i[18],n=[];for(let s=0;s<t.length;s+=1)n[s]=Fn(kn(i,t,s));const o=s=>$(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=de()},l(s){for(let r=0;r<n.length;r+=1)n[r].l(s);e=de()},m(s,r){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(s,r);N(s,e,r),l=!0},p(s,r){if(r[0]&262415){t=s[18];let a;for(a=0;a<t.length;a+=1){const f=kn(s,t,a);n[a]?(n[a].p(f,r),p(n[a],1)):(n[a]=Fn(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(ne(),a=t.length;a<n.length;a+=1)o(a);ie()}},i(s){if(!l){for(let r=0;r<t.length;r+=1)p(n[r]);l=!0}},o(s){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)$(n[r]);l=!1},d(s){Ae(n,s),s&&m(e)}}}function Fn(i){let e,l;return e=new Oi({props:{schema:i[0],field:i[37],indent:i[3]+1,sourceField:i[8]&&nt(i[37])?i[1]:i[2]}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&1&&(o.schema=t[0]),n[0]&262144&&(o.field=t[37]),n[0]&8&&(o.indent=t[3]+1),n[0]&262406&&(o.sourceField=t[8]&&nt(t[37])?t[1]:t[2]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function qo(i){let e,l,t,n,o,s,r,a,f,u,_,c,d,h,b,w,k,g,E,y,M,C,I,F,ee;const U=[Ho,Bo,Ao],A=[];function q(X,z){return X[1].dtype?0:X[1].repeated_field&&X[1].repeated_field.dtype?1:2}n=q(i),o=A[n]=U[n](i);let B=i[16]&&yn(i),te=i[14]&&In(i),j=i[13],W=[];for(let X=0;X<j.length;X+=1)W[X]=Tn(En(i,j,X));const J=X=>$(W[X],1,1,()=>{W[X]=null});let P=i[17],K=[];for(let X=0;X<P.length;X+=1)K[X]=Vn($n(i,P,X));const fe=X=>$(K[X],1,1,()=>{K[X]=null});let oe=i[4]&&i[21]&&Nn(i),re=i[11]&&Mn(i);g=new wo({props:{field:i[1]}});let ae=i[20]&&Cn(i),le=i[18].length&&zn(i);return{c(){e=T("div"),l=T("div"),t=T("div"),o.c(),r=Y(),a=T("button"),f=Z(i[19]),_=Y(),B&&B.c(),c=Y(),te&&te.c(),d=Y();for(let X=0;X<W.length;X+=1)W[X].c();h=Y();for(let X=0;X<K.length;X+=1)K[X].c();b=Y(),oe&&oe.c(),w=Y(),re&&re.c(),k=Y(),H(g.$$.fragment),E=Y(),ae&&ae.c(),y=Y(),M=T("div"),le&&le.c(),this.h()},l(X){e=V(X,"DIV",{class:!0});var z=S(e);l=V(z,"DIV",{class:!0});var se=S(l);t=V(se,"DIV",{class:!0});var De=S(t);o.l(De),De.forEach(m),r=Q(se),a=V(se,"BUTTON",{class:!0});var he=S(a);f=G(he,i[19]),he.forEach(m),_=Q(se),B&&B.l(se),c=Q(se),te&&te.l(se),d=Q(se);for(let Ue=0;Ue<W.length;Ue+=1)W[Ue].l(se);h=Q(se);for(let Ue=0;Ue<K.length;Ue+=1)K[Ue].l(se);b=Q(se),oe&&oe.l(se),w=Q(se),re&&re.l(se),k=Q(se),O(g.$$.fragment,se),se.forEach(m),E=Q(z),ae&&ae.l(z),y=Q(z),M=V(z,"DIV",{});var Me=S(M);le&&le.l(Me),Me.forEach(m),z.forEach(m),this.h()},h(){D(t,"class","rounded-md bg-blue-200 p-0.5"),ue(t,"bg-blue-200",i[5]),ft(t,"margin-left",i[3]*1.5+"rem"),D(a,"class","ml-2 grow cursor-pointer truncate whitespace-nowrap text-left text-gray-900"),a.disabled=u=!i[11],ue(a,"cursor-default",!i[11]),D(l,"class","flex w-full flex-row items-center gap-x-2 border-gray-300 px-4 hover:bg-gray-100"),ue(l,"bg-blue-50",i[5]),ue(l,"bg-emerald-100",i[4]),ue(l,"bg-teal-100",i[9]),ue(l,"hover:bg-blue-100",i[5]),D(e,"class","border-gray-300"),ue(e,"border-b",i[8])},m(X,z){N(X,e,z),v(e,l),v(l,t),A[n].m(t,null),v(l,r),v(l,a),v(a,f),v(l,_),B&&B.m(l,null),v(l,c),te&&te.m(l,null),v(l,d);for(let se=0;se<W.length;se+=1)W[se]&&W[se].m(l,null);v(l,h);for(let se=0;se<K.length;se+=1)K[se]&&K[se].m(l,null);v(l,b),oe&&oe.m(l,null),v(l,w),re&&re.m(l,null),v(l,k),R(g,l,null),v(e,E),ae&&ae.m(e,null),v(e,y),v(e,M),le&&le.m(M,null),I=!0,F||(ee=[$e(s=Se.call(null,t,{text:i[12]})),Fe(a,"click",i[30])],F=!0)},p(X,z){let se=n;if(n=q(X),n===se?A[n].p(X,z):(ne(),$(A[se],1,1,()=>{A[se]=null}),ie(),o=A[n],o?o.p(X,z):(o=A[n]=U[n](X),o.c()),p(o,1),o.m(t,null)),s&&Pe(s.update)&&z[0]&4096&&s.update.call(null,{text:X[12]}),(!I||z[0]&32)&&ue(t,"bg-blue-200",X[5]),z[0]&8&&ft(t,"margin-left",X[3]*1.5+"rem"),(!I||z[0]&524288)&&ce(f,X[19]),(!I||z[0]&2048&&u!==(u=!X[11]))&&(a.disabled=u),(!I||z[0]&2048)&&ue(a,"cursor-default",!X[11]),X[16]?B?(B.p(X,z),z[0]&65536&&p(B,1)):(B=yn(X),B.c(),p(B,1),B.m(l,c)):B&&(ne(),$(B,1,1,()=>{B=null}),ie()),X[14]?te?(te.p(X,z),z[0]&16384&&p(te,1)):(te=In(X),te.c(),p(te,1),te.m(l,d)):te&&(ne(),$(te,1,1,()=>{te=null}),ie()),z[0]&8192){j=X[13];let he;for(he=0;he<j.length;he+=1){const Me=En(X,j,he);W[he]?(W[he].p(Me,z),p(W[he],1)):(W[he]=Tn(Me),W[he].c(),p(W[he],1),W[he].m(l,h))}for(ne(),he=j.length;he<W.length;he+=1)J(he);ie()}if(z[0]&131072){P=X[17];let he;for(he=0;he<P.length;he+=1){const Me=$n(X,P,he);K[he]?(K[he].p(Me,z),p(K[he],1)):(K[he]=Vn(Me),K[he].c(),p(K[he],1),K[he].m(l,b))}for(ne(),he=P.length;he<K.length;he+=1)fe(he);ie()}X[4]&&X[21]?oe?(oe.p(X,z),z[0]&2097168&&p(oe,1)):(oe=Nn(X),oe.c(),p(oe,1),oe.m(l,w)):oe&&(ne(),$(oe,1,1,()=>{oe=null}),ie()),X[11]?re?(re.p(X,z),z[0]&2048&&p(re,1)):(re=Mn(X),re.c(),p(re,1),re.m(l,k)):re&&(ne(),$(re,1,1,()=>{re=null}),ie());const De={};z[0]&2&&(De.field=X[1]),g.$set(De),(!I||z[0]&32)&&ue(l,"bg-blue-50",X[5]),(!I||z[0]&16)&&ue(l,"bg-emerald-100",X[4]),(!I||z[0]&512)&&ue(l,"bg-teal-100",X[9]),(!I||z[0]&32)&&ue(l,"hover:bg-blue-100",X[5]),X[20]?ae?(ae.p(X,z),z[0]&1048576&&p(ae,1)):(ae=Cn(X),ae.c(),p(ae,1),ae.m(e,y)):ae&&(ne(),$(ae,1,1,()=>{ae=null}),ie()),X[18].length?le?(le.p(X,z),z[0]&262144&&p(le,1)):(le=zn(X),le.c(),p(le,1),le.m(M,null)):le&&(ne(),$(le,1,1,()=>{le=null}),ie()),(!I||z[0]&256)&&ue(e,"border-b",X[8])},i(X){if(!I){p(o),p(B),p(te);for(let z=0;z<j.length;z+=1)p(W[z]);for(let z=0;z<P.length;z+=1)p(K[z]);p(oe),p(re),p(g.$$.fragment,X),p(ae),p(le),X&&Nt(()=>{I&&(C||(C=bt(M,$t,{},!0)),C.run(1))}),I=!0}},o(X){$(o),$(B),$(te),W=W.filter(Boolean);for(let z=0;z<W.length;z+=1)$(W[z]);K=K.filter(Boolean);for(let z=0;z<K.length;z+=1)$(K[z]);$(oe),$(re),$(g.$$.fragment,X),$(ae),$(le),X&&(C||(C=bt(M,$t,{},!1)),C.run(0)),I=!1},d(X){X&&m(e),A[n].d(),B&&B.d(),te&&te.d(),Ae(W,X),Ae(K,X),oe&&oe.d(),re&&re.d(),L(g),ae&&ae.d(),le&&le.d(),X&&C&&C.end(),F=!1,We(ee)}}}function jo(i,e,l){let t,n,o,s,r,a,f,u,_,c,d,h,b,w,k,g,E,y,M,C,I,F,ee,{schema:U}=e,{field:A}=e,{sourceField:q=void 0}=e,{indent:B=0}=e;const te=bi();be(i,te,le=>l(22,ee=le));const j=je();be(i,j,le=>l(10,I=le));const W=Ge();be(i,W,le=>l(29,F=le));function J(le){return le!=null&&le.repeated_field?J(le.repeated_field):le!=null&&le.fields?[...Object.values(le.fields).filter(X=>X.path.at(-1)!==ys)].filter(X=>{var z,se,De,he;return!(X.dtype==="embedding"||X.signal!=null&&lt(X).some(Me=>Me.dtype==="embedding")||((z=X.signal)==null?void 0:z.signal_name)==="sentences"||((se=X.signal)==null?void 0:se.signal_name)==="substring_search"||((De=X.signal)==null?void 0:De.signal_name)==="semantic_similarity"||((he=X.signal)==null?void 0:he.signal_name)==="concept_labels")}):[]}const P=()=>{C&&(a?j.removeExpandedColumn(r):j.addExpandedColumn(r))},K=()=>h==="ASC"?yt(j,I.query.sort_order="DESC",I):yt(j,I.query.sort_order="ASC",I),fe=()=>j.removeSortBy(r),oe=()=>A.signal&&k&&q&&ee.mutate([I.namespace,I.datasetName,{leaf_path:q.path,signal:A.signal}]),re=()=>{var le;return A.signal&&k&&Xe({command:xe.EditPreviewConcept,namespace:I.namespace,datasetName:I.datasetName,path:q==null?void 0:q.path,signalName:(le=A.signal)==null?void 0:le.signal_name,value:A.signal})},ae=()=>{a?j.removeExpandedColumn(r):j.addExpandedColumn(r)};return i.$$set=le=>{"schema"in le&&l(0,U=le.schema),"field"in le&&l(1,A=le.field),"sourceField"in le&&l(2,q=le.sourceField),"indent"in le&&l(3,B=le.indent)},i.$$.update=()=>{var le,X,z;i.$$.dirty[0]&2&&l(5,t=nt(A)),i.$$.dirty[0]&2&&l(21,n=Bt(A)),i.$$.dirty[0]&2&&l(9,o=Ht(A)),i.$$.dirty[0]&544&&l(8,s=!t&&!o),i.$$.dirty[0]&2&&l(6,r=A.path),i.$$.dirty[0]&1088&&l(20,a=I.expandedStats[Le(r)]||!1),i.$$.dirty[0]&64&&l(28,f=r.at(-1)===kt),i.$$.dirty[0]&268435520&&l(19,u=f?r.at(-2):r.at(-1)),i.$$.dirty[0]&2&&l(18,_=J(A)),i.$$.dirty[0]&258&&l(17,c=s?lt(A).filter(se=>se.signal!=null&&lt(se).some(De=>De.dtype==="embedding")):[]),i.$$.dirty[0]&1088&&l(16,d=(le=I.query.sort_by)==null?void 0:le.some(se=>et(se,r))),i.$$.dirty[0]&1024&&l(15,h=I.query.sort_order),i.$$.dirty[0]&1088&&l(7,b=((X=I.query.filters)==null?void 0:X.filter(se=>et(se.path,r)))||[]),i.$$.dirty[0]&128&&l(14,w=b.length>0),i.$$.dirty[0]&536870976&&l(4,k=$i(((z=F.selectRowsSchema)==null?void 0:z.data)||null,r)),i.$$.dirty[0]&1088&&l(13,g=zt(I,r)),i.$$.dirty[0]&32&&l(26,E=t?". Generated by a signal":""),i.$$.dirty[0]&2&&l(27,y=A.dtype??(A.repeated_field&&A.repeated_field.dtype?`${A.repeated_field.dtype}[]`:"object")),i.$$.dirty[0]&201326592&&l(12,M=`${y}${E}`),i.$$.dirty[0]&18&&l(11,C=wt(A)&&!k)},[U,A,q,B,k,t,r,b,s,o,I,C,M,g,w,h,d,c,_,u,a,n,ee,te,j,W,E,y,f,F,P,K,fe,oe,re,ae]}class Oi extends we{constructor(e){super(),ke(this,e,jo,qo,ve,{schema:0,field:1,sourceField:2,indent:3},null,[-1,-1])}}function Pn(i,e,l){const t=i.slice();return t[3]=e[l],t}function Uo(i){let e=[],l=new Map,t,n,o=Object.keys(i[0].data.schema.fields);const s=r=>r[3];for(let r=0;r<o.length;r+=1){let a=Pn(i,o,r),f=s(a);l.set(f,e[r]=An(f,a))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();t=de()},l(r){for(let a=0;a<e.length;a+=1)e[a].l(r);t=de()},m(r,a){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(r,a);N(r,t,a),n=!0},p(r,a){a&1&&(o=Object.keys(r[0].data.schema.fields),ne(),e=Tt(e,a,s,1,r,o,l,t.parentNode,Vt,An,t,Pn),ie())},i(r){if(!n){for(let a=0;a<o.length;a+=1)p(e[a]);n=!0}},o(r){for(let a=0;a<e.length;a+=1)$(e[a]);n=!1},d(r){for(let a=0;a<e.length;a+=1)e[a].d(r);r&&m(t)}}}function Yo(i){let e,l;return e=new Re({props:{paragraph:!0,lines:3}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function An(i,e){let l,t,n;return t=new Oi({props:{schema:e[0].data.schema,field:e[0].data.schema.fields[e[3]]}}),{key:i,first:null,c(){l=de(),H(t.$$.fragment),this.h()},l(o){l=de(),O(t.$$.fragment,o),this.h()},h(){this.first=l},m(o,s){N(o,l,s),R(t,o,s),n=!0},p(o,s){e=o;const r={};s&1&&(r.schema=e[0].data.schema),s&1&&(r.field=e[0].data.schema.fields[e[3]]),t.$set(r)},i(o){n||(p(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){o&&m(l),L(t,o)}}}function Qo(i){let e,l,t,n;const o=[Yo,Uo],s=[];function r(a,f){var u,_;return(u=a[0])!=null&&u.isLoading?0:(_=a[0])!=null&&_.isSuccess&&a[0].data.schema.fields!=null?1:-1}return~(l=r(i))&&(t=s[l]=o[l](i)),{c(){e=T("div"),t&&t.c(),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);t&&t.l(f),f.forEach(m),this.h()},h(){D(e,"class","schema flex h-full flex-col overflow-y-auto")},m(a,f){N(a,e,f),~l&&s[l].m(e,null),n=!0},p(a,[f]){let u=l;l=r(a),l===u?~l&&s[l].p(a,f):(t&&(ne(),$(s[u],1,1,()=>{s[u]=null}),ie()),~l?(t=s[l],t?t.p(a,f):(t=s[l]=o[l](a),t.c()),p(t,1),t.m(e,null)):t=null)},i(a){n||(p(t),n=!0)},o(a){$(t),n=!1},d(a){a&&m(e),~l&&s[l].d()}}}function Wo(i,e,l){let t,n;const o=Ge();return be(i,o,s=>l(2,n=s)),i.$$.update=()=>{i.$$.dirty&4&&l(0,t=n.selectRowsSchema)},[t,o,n]}class Zo extends we{constructor(e){super(),ke(this,e,Wo,Qo,ve,{})}}function Bn(i,e,l){const t=i.slice();t[5]=e[l];const n=nt(t[5]);t[6]=n;const o=Ht(t[5]);return t[7]=o,t}function Go(i){let e,l="{}",t;return{c(){e=T("span"),t=Z(l),this.h()},l(n){e=V(n,"SPAN",{class:!0});var o=S(e);t=G(o,l),o.forEach(m),this.h()},h(){D(e,"class","font-mono")},m(n,o){N(n,e,o),v(e,t)},p:x,i:x,o:x,d(n){n&&m(e)}}}function Ko(i){let e,l,t;var n=at[i[5].dtype];function o(s){return{props:{title:s[5].dtype}}}return n&&(e=rt(n,o(i))),{c(){e&&H(e.$$.fragment),l=de()},l(s){e&&O(e.$$.fragment,s),l=de()},m(s,r){e&&R(e,s,r),N(s,l,r),t=!0},p(s,r){const a={};if(r&2&&(a.title=s[5].dtype),r&2&&n!==(n=at[s[5].dtype])){if(e){ne();const f=e;$(f.$$.fragment,1,0,()=>{L(f,1)}),ie()}n?(e=rt(n,o(s)),H(e.$$.fragment),p(e.$$.fragment,1),R(e,l.parentNode,l)):e=null}else n&&e.$set(a)},i(s){t||(e&&p(e.$$.fragment,s),t=!0)},o(s){e&&$(e.$$.fragment,s),t=!1},d(s){s&&m(l),e&&L(e,s)}}}function Hn(i){let e;return{c(){e=Z("[]")},l(l){e=G(l,"[]")},m(l,t){N(l,e,t)},d(l){l&&m(e)}}}function Rn(i){let e,l,t,n,o,s,r,a,f,u=i[5].path.indexOf(kt)>=0,_,c,d=Le(i[5].path)+"",h,b,w;function k(...I){return i[3](i[5],...I)}function g(...I){return i[4](i[5],...I)}t=new Is({props:{labelText:"Download",hideLabel:!0,checked:i[0].find(k)!=null}}),t.$on("change",g);const E=[Ko,Go],y=[];function M(I,F){return I[5].dtype?0:1}r=M(i),a=y[r]=E[r](i);let C=u&&Hn();return{c(){e=T("div"),l=T("div"),H(t.$$.fragment),n=Y(),o=T("div"),s=T("div"),a.c(),f=Y(),C&&C.c(),_=Y(),c=T("div"),h=Z(d),b=Y(),this.h()},l(I){e=V(I,"DIV",{class:!0});var F=S(e);l=V(F,"DIV",{class:!0});var ee=S(l);O(t.$$.fragment,ee),ee.forEach(m),n=Q(F),o=V(F,"DIV",{class:!0});var U=S(o);s=V(U,"DIV",{class:!0});var A=S(s);a.l(A),f=Q(A),C&&C.l(A),A.forEach(m),U.forEach(m),_=Q(F),c=V(F,"DIV",{class:!0});var q=S(c);h=G(q,d),q.forEach(m),b=Q(F),F.forEach(m),this.h()},h(){D(l,"class","mr-2"),D(s,"class","inline-flex items-center rounded-md p-0.5"),ue(s,"bg-blue-200",i[6]),ue(s,"bg-teal-100",i[7]),D(o,"class","flex w-10"),D(c,"class","flex-grow"),D(e,"class","flex items-center")},m(I,F){N(I,e,F),v(e,l),R(t,l,null),v(e,n),v(e,o),v(o,s),y[r].m(s,null),v(s,f),C&&C.m(s,null),v(e,_),v(e,c),v(c,h),v(e,b),w=!0},p(I,F){i=I;const ee={};F&3&&(ee.checked=i[0].find(k)!=null),t.$set(ee);let U=r;r=M(i),r===U?y[r].p(i,F):(ne(),$(y[U],1,1,()=>{y[U]=null}),ie(),a=y[r],a?a.p(i,F):(a=y[r]=E[r](i),a.c()),p(a,1),a.m(s,f)),F&2&&(u=i[5].path.indexOf(kt)>=0),u?C||(C=Hn(),C.c(),C.m(s,null)):C&&(C.d(1),C=null),(!w||F&2)&&ue(s,"bg-blue-200",i[6]),(!w||F&2)&&ue(s,"bg-teal-100",i[7]),(!w||F&2)&&d!==(d=Le(i[5].path)+"")&&ce(h,d)},i(I){w||(p(t.$$.fragment,I),p(a),w=!0)},o(I){$(t.$$.fragment,I),$(a),w=!1},d(I){I&&m(e),L(t),y[r].d(),C&&C.d()}}}function Jo(i){let e,l,t=i[1],n=[];for(let s=0;s<t.length;s+=1)n[s]=Rn(Bn(i,t,s));const o=s=>$(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=de()},l(s){for(let r=0;r<n.length;r+=1)n[r].l(s);e=de()},m(s,r){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(s,r);N(s,e,r),l=!0},p(s,[r]){if(r&7){t=s[1];let a;for(a=0;a<t.length;a+=1){const f=Bn(s,t,a);n[a]?(n[a].p(f,r),p(n[a],1)):(n[a]=Rn(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(ne(),a=t.length;a<n.length;a+=1)o(a);ie()}},i(s){if(!l){for(let r=0;r<t.length;r+=1)p(n[r]);l=!0}},o(s){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)$(n[r]);l=!1},d(s){Ae(n,s),s&&m(e)}}}function Xo(i,e,l){let{fields:t}=e,{checkedFields:n}=e;function o(a,f){f.target.checked?(n.push(a),l(0,n)):l(0,n=n.filter(_=>!et(_.path,a.path)))}const s=(a,f)=>et(f.path,a.path),r=(a,f)=>o(a,f);return i.$$set=a=>{"fields"in a&&l(1,t=a.fields),"checkedFields"in a&&l(0,n=a.checkedFields)},[n,t,o,s,r]}class ht extends we{constructor(e){super(),ke(this,e,Xo,Jo,ve,{fields:1,checkedFields:0})}}function Ln(i,e,l){const t=i.slice();return t[29]=e[l],t}function xo(i){let e,l,t,n,o,s,r,a,f,u,_,c,d,h,b,w,k,g,E,y,M,C,I,F,ee,U,A,q;function B(j){i[23](j)}let te={invalid:i[8]!=i[9]};return i[8]!==void 0&&(te.value=i[8]),E=new Ms({props:te}),Be.push(()=>Ye(E,"value",B)),F=new Zs({}),{c(){e=T("div"),l=T("section"),t=T("div"),n=Z("Delete this dataset"),o=Y(),s=T("div"),r=T("p"),a=Z("This action cannot be undone."),f=Y(),u=T("p"),_=Z(`This will permanently delete the
                  `),c=T("span"),d=Z(i[9]),h=Z(` dataset and all its files. Please type
                  `),b=T("span"),w=Z(i[9]),k=Z(" to confirm."),g=Y(),H(E.$$.fragment),M=Y(),C=T("button"),I=Z(`I understand, delete this dataset
                `),H(F.$$.fragment),this.h()},l(j){e=V(j,"DIV",{class:!0});var W=S(e);l=V(W,"SECTION",{class:!0});var J=S(l);t=V(J,"DIV",{class:!0});var P=S(t);n=G(P,"Delete this dataset"),P.forEach(m),o=Q(J),s=V(J,"DIV",{class:!0});var K=S(s);r=V(K,"P",{class:!0});var fe=S(r);a=G(fe,"This action cannot be undone."),fe.forEach(m),f=Q(K),u=V(K,"P",{});var oe=S(u);_=G(oe,`This will permanently delete the
                  `),c=V(oe,"SPAN",{class:!0});var re=S(c);d=G(re,i[9]),re.forEach(m),h=G(oe,` dataset and all its files. Please type
                  `),b=V(oe,"SPAN",{class:!0});var ae=S(b);w=G(ae,i[9]),ae.forEach(m),k=G(oe," to confirm."),oe.forEach(m),K.forEach(m),g=Q(J),O(E.$$.fragment,J),M=Q(J),C=V(J,"BUTTON",{class:!0});var le=S(C);I=G(le,`I understand, delete this dataset
                `),O(F.$$.fragment,le),le.forEach(m),J.forEach(m),W.forEach(m),this.h()},h(){D(t,"class","text-lg text-gray-700"),D(r,"class","mb-2"),D(c,"class","font-bold"),D(b,"class","font-bold"),D(s,"class","mb-4 text-sm text-gray-500"),D(C,"class","mt-2 flex cursor-pointer flex-row justify-between p-4 text-left outline-red-400 hover:bg-gray-200"),C.disabled=ee=i[8]!=i[9],ue(C,"cursor-not-allowed",i[8]!=i[9]),ue(C,"outline",i[8]==i[9]),ue(C,"opacity-50",i[8]!=i[9]),D(l,"class","flex flex-col gap-y-1"),D(e,"class","flex flex-col gap-y-6")},m(j,W){N(j,e,W),v(e,l),v(l,t),v(t,n),v(l,o),v(l,s),v(s,r),v(r,a),v(s,f),v(s,u),v(u,_),v(u,c),v(c,d),v(u,h),v(u,b),v(b,w),v(u,k),v(l,g),R(E,l,null),v(l,M),v(l,C),v(C,I),R(F,C,null),U=!0,A||(q=Fe(C,"click",i[24]),A=!0)},p(j,W){(!U||W[0]&512)&&ce(d,j[9]),(!U||W[0]&512)&&ce(w,j[9]);const J={};W[0]&768&&(J.invalid=j[8]!=j[9]),!y&&W[0]&256&&(y=!0,J.value=j[8],Qe(()=>y=!1)),E.$set(J),(!U||W[0]&768&&ee!==(ee=j[8]!=j[9]))&&(C.disabled=ee),(!U||W[0]&768)&&ue(C,"cursor-not-allowed",j[8]!=j[9]),(!U||W[0]&768)&&ue(C,"outline",j[8]==j[9]),(!U||W[0]&768)&&ue(C,"opacity-50",j[8]!=j[9])},i(j){U||(p(E.$$.fragment,j),p(F.$$.fragment,j),U=!0)},o(j){$(E.$$.fragment,j),$(F.$$.fragment,j),U=!1},d(j){j&&m(e),L(E),L(F),A=!1,q()}}}function ef(i){let e,l,t,n;const o=[lf,tf],s=[];function r(a,f){return a[6].isFetching?0:1}return e=r(i),l=s[e]=o[e](i),{c(){l.c(),t=de()},l(a){l.l(a),t=de()},m(a,f){s[e].m(a,f),N(a,t,f),n=!0},p(a,f){let u=e;e=r(a),e===u?s[e].p(a,f):(ne(),$(s[u],1,1,()=>{s[u]=null}),ie(),l=s[e],l?l.p(a,f):(l=s[e]=o[e](a),l.c()),p(l,1),l.m(t.parentNode,t))},i(a){n||(p(l),n=!0)},o(a){$(l),n=!1},d(a){s[e].d(a),a&&m(t)}}}function tf(i){let e,l,t,n,o,s,r,a,f,u,_,c,d,h,b,w,k,g,E,y,M,C,I,F,ee,U,A,q,B;const te=[sf,nf],j=[];function W(ae,le){return ae[3]!=null?0:1}f=W(i),u=j[f]=te[f](i);const J=[af,rf],P=[];function K(ae,le){return ae[11].isFetching?0:1}y=K(i),M=P[y]=J[y](i);const fe=[uf,ff],oe=[];function re(ae,le){return ae[3]!=null&&ae[4]!=null?0:1}return A=re(i),q=oe[A]=fe[A](i),{c(){e=T("div"),l=T("section"),t=T("div"),n=Z("Media fields"),o=Y(),s=T("div"),r=Z("These fields will be presented differently from the rest of the metadata fields."),a=Y(),u.c(),_=Y(),c=T("section"),d=T("div"),h=Z("Preferred embedding"),b=Y(),w=T("div"),k=Z("This embedding will be used by default when indexing and querying the data."),g=Y(),E=T("div"),M.c(),C=Y(),I=T("section"),F=T("div"),ee=Z("Render as markdown"),U=Y(),q.c(),this.h()},l(ae){e=V(ae,"DIV",{class:!0});var le=S(e);l=V(le,"SECTION",{class:!0});var X=S(l);t=V(X,"DIV",{class:!0});var z=S(t);n=G(z,"Media fields"),z.forEach(m),o=Q(X),s=V(X,"DIV",{class:!0});var se=S(s);r=G(se,"These fields will be presented differently from the rest of the metadata fields."),se.forEach(m),a=Q(X),u.l(X),X.forEach(m),_=Q(le),c=V(le,"SECTION",{class:!0});var De=S(c);d=V(De,"DIV",{class:!0});var he=S(d);h=G(he,"Preferred embedding"),he.forEach(m),b=Q(De),w=V(De,"DIV",{class:!0});var Me=S(w);k=G(Me,"This embedding will be used by default when indexing and querying the data."),Me.forEach(m),g=Q(De),E=V(De,"DIV",{class:!0});var Ue=S(E);M.l(Ue),Ue.forEach(m),De.forEach(m),C=Q(le),I=V(le,"SECTION",{class:!0});var st=S(I);F=V(st,"DIV",{class:!0});var _t=S(F);ee=G(_t,"Render as markdown"),_t.forEach(m),U=Q(st),q.l(st),st.forEach(m),le.forEach(m),this.h()},h(){D(t,"class","text-lg text-gray-700"),D(s,"class","text-sm text-gray-500"),D(l,"class","flex flex-col gap-y-1"),D(d,"class","text-lg text-gray-700"),D(w,"class","text-sm text-gray-500"),D(E,"class","w-60"),D(c,"class","flex flex-col gap-y-1"),D(F,"class","text-lg text-gray-700"),D(I,"class","flex flex-col gap-y-1"),D(e,"class","flex flex-col gap-y-6")},m(ae,le){N(ae,e,le),v(e,l),v(l,t),v(t,n),v(l,o),v(l,s),v(s,r),v(l,a),j[f].m(l,null),v(e,_),v(e,c),v(c,d),v(d,h),v(c,b),v(c,w),v(w,k),v(c,g),v(c,E),P[y].m(E,null),v(e,C),v(e,I),v(I,F),v(F,ee),v(I,U),oe[A].m(I,null),B=!0},p(ae,le){let X=f;f=W(ae),f===X?j[f].p(ae,le):(ne(),$(j[X],1,1,()=>{j[X]=null}),ie(),u=j[f],u?u.p(ae,le):(u=j[f]=te[f](ae),u.c()),p(u,1),u.m(l,null));let z=y;y=K(ae),y===z?P[y].p(ae,le):(ne(),$(P[z],1,1,()=>{P[z]=null}),ie(),M=P[y],M?M.p(ae,le):(M=P[y]=J[y](ae),M.c()),p(M,1),M.m(E,null));let se=A;A=re(ae),A===se?oe[A].p(ae,le):(ne(),$(oe[se],1,1,()=>{oe[se]=null}),ie(),q=oe[A],q?q.p(ae,le):(q=oe[A]=fe[A](ae),q.c()),p(q,1),q.m(I,null))},i(ae){B||(p(u),p(M),p(q),B=!0)},o(ae){$(u),$(M),$(q),B=!1},d(ae){ae&&m(e),j[f].d(),P[y].d(),oe[A].d()}}}function lf(i){let e,l;return e=new Re({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function nf(i){let e,l;return e=new jt({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function sf(i){let e,l,t;function n(s){i[21](s)}let o={fields:i[5]};return i[3]!==void 0&&(o.checkedFields=i[3]),e=new ht({props:o}),Be.push(()=>Ye(e,"checkedFields",n)),{c(){H(e.$$.fragment)},l(s){O(e.$$.fragment,s)},m(s,r){R(e,s,r),t=!0},p(s,r){const a={};r[0]&32&&(a.fields=s[5]),!l&&r[0]&8&&(l=!0,a.checkedFields=s[3],Qe(()=>l=!1)),e.$set(a)},i(s){t||(p(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){L(e,s)}}}function rf(i){var t;let e,l;return e=new ci({props:{selected:((t=i[6].data)==null?void 0:t.preferred_embedding)||void 0,$$slots:{default:[of]},$$scope:{ctx:i}}}),e.$on("change",i[16]),{c(){H(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,o){R(e,n,o),l=!0},p(n,o){var r;const s={};o[0]&64&&(s.selected=((r=n[6].data)==null?void 0:r.preferred_embedding)||void 0),o[0]&2048|o[1]&2&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){$(e.$$.fragment,n),l=!1},d(n){L(e,n)}}}function af(i){let e,l;return e=new jt({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function On(i){let e,l;return e=new Pt({props:{value:i[29].name}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&2048&&(o.value=t[29].name),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function of(i){let e,l,t,n;e=new Pt({props:{value:void 0,text:"None"}});let o=i[11].data||[],s=[];for(let a=0;a<o.length;a+=1)s[a]=On(Ln(i,o,a));const r=a=>$(s[a],1,1,()=>{s[a]=null});return{c(){H(e.$$.fragment),l=Y();for(let a=0;a<s.length;a+=1)s[a].c();t=de()},l(a){O(e.$$.fragment,a),l=Q(a);for(let f=0;f<s.length;f+=1)s[f].l(a);t=de()},m(a,f){R(e,a,f),N(a,l,f);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(a,f);N(a,t,f),n=!0},p(a,f){if(f[0]&2048){o=a[11].data||[];let u;for(u=0;u<o.length;u+=1){const _=Ln(a,o,u);s[u]?(s[u].p(_,f),p(s[u],1)):(s[u]=On(_),s[u].c(),p(s[u],1),s[u].m(t.parentNode,t))}for(ne(),u=o.length;u<s.length;u+=1)r(u);ie()}},i(a){if(!n){p(e.$$.fragment,a);for(let f=0;f<o.length;f+=1)p(s[f]);n=!0}},o(a){$(e.$$.fragment,a),s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)$(s[f]);n=!1},d(a){L(e,a),a&&m(l),Ae(s,a),a&&m(t)}}}function ff(i){let e,l;return e=new jt({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function uf(i){let e,l,t;function n(s){i[22](s)}let o={fields:i[3]};return i[4]!==void 0&&(o.checkedFields=i[4]),e=new ht({props:o}),Be.push(()=>Ye(e,"checkedFields",n)),{c(){H(e.$$.fragment)},l(s){O(e.$$.fragment,s)},m(s,r){R(e,s,r),t=!0},p(s,r){const a={};r[0]&8&&(a.fields=s[3]),!l&&r[0]&16&&(l=!0,a.checkedFields=s[4],Qe(()=>l=!1)),e.$set(a)},i(s){t||(p(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){L(e,s)}}}function cf(i){let e,l,t,n,o,s,r,a;t=new Ns({props:{items:[{title:"Fields",value:"fields"},{title:"Administration",value:"administration"}],item:i[7]}}),t.$on("select",i[20]);const f=[ef,xo],u=[];function _(c,d){return c[7]==="fields"?0:c[7]==="administration"?1:-1}return~(s=_(i))&&(r=u[s]=f[s](i)),{c(){e=T("div"),l=T("div"),H(t.$$.fragment),n=Y(),o=T("div"),r&&r.c(),this.h()},l(c){e=V(c,"DIV",{class:!0});var d=S(e);l=V(d,"DIV",{class:!0});var h=S(l);O(t.$$.fragment,h),h.forEach(m),n=Q(d),o=V(d,"DIV",{class:!0});var b=S(o);r&&r.l(b),b.forEach(m),d.forEach(m),this.h()},h(){D(l,"class","-ml-4 mr-4 w-96 grow-0"),D(o,"class","flex w-full flex-col gap-y-6 rounded border border-gray-300 bg-white p-4"),D(e,"class","flex flex-row")},m(c,d){N(c,e,d),v(e,l),R(t,l,null),v(e,n),v(e,o),~s&&u[s].m(o,null),a=!0},p(c,d){const h={};d[0]&128&&(h.item=c[7]),t.$set(h);let b=s;s=_(c),s===b?~s&&u[s].p(c,d):(r&&(ne(),$(u[b],1,1,()=>{u[b]=null}),ie()),~s?(r=u[s],r?r.p(c,d):(r=u[s]=f[s](c),r.c()),p(r,1),r.m(o,null)):r=null)},i(c){a||(p(t.$$.fragment,c),p(r),a=!0)},o(c){$(t.$$.fragment,c),$(r),a=!1},d(c){c&&m(e),L(t),~s&&u[s].d()}}}function df(i){let e,l,t,n,o,s;return e=new Lt({props:{label:"Changes",title:"Dataset settings"}}),t=new Ot({props:{hasForm:!0,$$slots:{default:[cf]},$$scope:{ctx:i}}}),o=new qt({props:{danger:i[7]==="administration",primaryButtonText:"Save",secondaryButtonText:"Cancel",primaryButtonDisabled:i[7]==="administration"}}),o.$on("click:button--secondary",close),{c(){H(e.$$.fragment),l=Y(),H(t.$$.fragment),n=Y(),H(o.$$.fragment)},l(r){O(e.$$.fragment,r),l=Q(r),O(t.$$.fragment,r),n=Q(r),O(o.$$.fragment,r)},m(r,a){R(e,r,a),N(r,l,a),R(t,r,a),N(r,n,a),R(o,r,a),s=!0},p(r,a){const f={};a[0]&7166|a[1]&2&&(f.$$scope={dirty:a,ctx:r}),t.$set(f);const u={};a[0]&128&&(u.danger=r[7]==="administration"),a[0]&128&&(u.primaryButtonDisabled=r[7]==="administration"),o.$set(u)},i(r){s||(p(e.$$.fragment,r),p(t.$$.fragment,r),p(o.$$.fragment,r),s=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),$(o.$$.fragment,r),s=!1},d(r){L(e,r),r&&m(l),L(t,r),r&&m(n),L(o,r)}}}function mf(i){let e,l;return e=new Rt({props:{open:i[0],$$slots:{default:[df]},$$scope:{ctx:i}}}),e.$on("submit",i[17]),e.$on("close",i[25]),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&1&&(o.open=t[0]),n[0]&7166|n[1]&2&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function hf(i,e,l){let t,n,o,s,r,a=x,f=()=>(a(),a=Te(t,P=>l(6,r=P)),t),u,_,c;i.$$.on_destroy.push(()=>a());let{namespace:d}=e,{name:h}=e,{open:b=!1}=e,{schema:w}=e;const k=Yt();be(i,k,P=>l(28,u=P));const g=vi();be(i,g,P=>l(11,_=P));const E=Ds();be(i,E,P=>l(27,s=P));let y="fields",M=null,C=null,I=u.embedding;function F(P){I=P.target.value,I===""&&(I=void 0)}function ee(){if(M==null)return;const P={ui:{media_paths:M.map(K=>K.path),markdown_paths:C==null?void 0:C.map(K=>K.path)},preferred_embedding:I};s.mutate([d,h,P],{onSuccess:()=>{l(0,b=!1)}})}let U="";const A=Ts();be(i,A,P=>l(12,c=P));const q=P=>l(7,y=P.detail);function B(P){M=P,l(3,M),l(6,r),l(5,o),l(19,w)}function te(P){C=P,l(4,C),l(6,r),l(5,o),l(19,w)}function j(P){U=P,l(8,U)}const W=()=>c.mutate([d,h],{onSuccess:()=>Mt("/")}),J=()=>l(0,b=!1);return i.$$set=P=>{"namespace"in P&&l(1,d=P.namespace),"name"in P&&l(2,h=P.name),"open"in P&&l(0,b=P.open),"schema"in P&&l(19,w=P.schema)},i.$$.update=()=>{var P,K,fe,oe;if(i.$$.dirty[0]&6&&f(l(10,t=ot(d,h))),i.$$.dirty[0]&6&&l(9,n=Vs(d,h)),i.$$.dirty[0]&524288&&l(5,o=Ft(w).filter(re=>re.dtype==="string"&&!et(re.path,[It])&&!nt(re))),i.$$.dirty[0]&104&&M==null){const re=(((K=(P=r.data)==null?void 0:P.ui)==null?void 0:K.media_paths)||[]).map(ae=>Array.isArray(ae)?ae:[ae]);l(3,M=o.filter(ae=>re.some(le=>et(ae.path,le))))}if(i.$$.dirty[0]&112&&C==null){const re=(((oe=(fe=r.data)==null?void 0:fe.ui)==null?void 0:oe.markdown_paths)||[]).map(ae=>Array.isArray(ae)?ae:[ae]);l(4,C=o.filter(ae=>re.some(le=>et(ae.path,le))))}},[b,d,h,M,C,o,r,y,U,n,t,_,c,k,g,E,F,ee,A,w,q,B,te,j,W,J]}class _f extends we{constructor(e){super(),ke(this,e,hf,mf,ve,{namespace:1,name:2,open:0,schema:19},null,[-1,-1])}}function qn(i){let e,l,t,n,o,s,r;function a(u){i[16](u)}let f={fields:i[6]};return i[2]!==void 0&&(f.checkedFields=i[2]),o=new ht({props:f}),Be.push(()=>Ye(o,"checkedFields",a)),{c(){e=T("section"),l=T("h4"),t=Z("Label fields"),n=Y(),H(o.$$.fragment),this.h()},l(u){e=V(u,"SECTION",{});var _=S(e);l=V(_,"H4",{class:!0});var c=S(l);t=G(c,"Label fields"),c.forEach(m),n=Q(_),O(o.$$.fragment,_),_.forEach(m),this.h()},h(){D(l,"class","svelte-1ge817j")},m(u,_){N(u,e,_),v(e,l),v(l,t),v(e,n),R(o,e,null),r=!0},p(u,_){const c={};_&64&&(c.fields=u[6]),!s&&_&4&&(s=!0,c.checkedFields=u[2],Qe(()=>s=!1)),o.$set(c)},i(u){r||(p(o.$$.fragment,u),r=!0)},o(u){$(o.$$.fragment,u),r=!1},d(u){u&&m(e),L(o)}}}function jn(i){let e,l,t,n,o,s,r;function a(u){i[17](u)}let f={fields:i[7]};return i[3]!==void 0&&(f.checkedFields=i[3]),o=new ht({props:f}),Be.push(()=>Ye(o,"checkedFields",a)),{c(){e=T("section"),l=T("h4"),t=Z("Enriched fields"),n=Y(),H(o.$$.fragment),this.h()},l(u){e=V(u,"SECTION",{});var _=S(e);l=V(_,"H4",{class:!0});var c=S(l);t=G(c,"Enriched fields"),c.forEach(m),n=Q(_),O(o.$$.fragment,_),_.forEach(m),this.h()},h(){D(l,"class","svelte-1ge817j")},m(u,_){N(u,e,_),v(e,l),v(l,t),v(e,n),R(o,e,null),r=!0},p(u,_){const c={};_&128&&(c.fields=u[7]),!s&&_&8&&(s=!0,c.checkedFields=u[3],Qe(()=>s=!1)),o.$set(c)},i(u){r||(p(o.$$.fragment,u),r=!0)},o(u){$(o.$$.fragment,u),r=!1},d(u){u&&m(e),L(o)}}}function Un(i){let e,l;return{c(){e=T("p"),l=Z("No fields selected. Please select at least one field to download."),this.h()},l(t){e=V(t,"P",{class:!0});var n=S(e);l=G(n,"No fields selected. Please select at least one field to download."),n.forEach(m),this.h()},h(){D(e,"class","text-gray-600")},m(t,n){N(t,e,n),v(e,l)},d(t){t&&m(e)}}}function gf(i){let e,l;return e=new Ci({props:{value:JSON.stringify(i[9].data,null,2),readonly:!0,rows:30,placeholder:"3 rows of data for previewing the response",class:"mb-2 font-mono"}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n&512&&(o.value=JSON.stringify(t[9].data,null,2)),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function pf(i){let e,l;return e=new Re({props:{paragraph:!0}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function bf(i){let e,l,t,n,o,s,r,a,f,u,_,c,d,h,b,w,k,g,E;function y(q){i[15](q)}let M={fields:i[8]};i[1]!==void 0&&(M.checkedFields=i[1]),s=new ht({props:M}),Be.push(()=>Ye(s,"checkedFields",y));let C=i[6].length>0&&qn(i),I=i[7].length>0&&jn(i),F=i[4].length===0&&Un();const ee=[pf,gf],U=[];function A(q,B){return q[9]&&q[9].isFetching?0:q[5]&&q[9]?1:-1}return~(k=A(i))&&(g=U[k]=ee[k](i)),{c(){e=T("div"),l=T("section"),t=T("h4"),n=Z("Source fields"),o=Y(),H(s.$$.fragment),a=Y(),C&&C.c(),f=Y(),I&&I.c(),u=Y(),_=T("section"),c=T("h4"),d=Z("Download preview"),h=Y(),F&&F.c(),b=Y(),w=T("div"),g&&g.c(),this.h()},l(q){e=V(q,"DIV",{class:!0});var B=S(e);l=V(B,"SECTION",{});var te=S(l);t=V(te,"H4",{class:!0});var j=S(t);n=G(j,"Source fields"),j.forEach(m),o=Q(te),O(s.$$.fragment,te),te.forEach(m),a=Q(B),C&&C.l(B),f=Q(B),I&&I.l(B),B.forEach(m),u=Q(q),_=V(q,"SECTION",{});var W=S(_);c=V(W,"H4",{class:!0});var J=S(c);d=G(J,"Download preview"),J.forEach(m),h=Q(W),F&&F.l(W),b=Q(W),w=V(W,"DIV",{class:!0});var P=S(w);g&&g.l(P),P.forEach(m),W.forEach(m),this.h()},h(){D(t,"class","svelte-1ge817j"),D(e,"class","flex flex-wrap gap-x-12"),D(c,"class","svelte-1ge817j"),D(w,"class","preview svelte-1ge817j")},m(q,B){N(q,e,B),v(e,l),v(l,t),v(t,n),v(l,o),R(s,l,null),v(e,a),C&&C.m(e,null),v(e,f),I&&I.m(e,null),N(q,u,B),N(q,_,B),v(_,c),v(c,d),v(_,h),F&&F.m(_,null),v(_,b),v(_,w),~k&&U[k].m(w,null),E=!0},p(q,B){const te={};B&256&&(te.fields=q[8]),!r&&B&2&&(r=!0,te.checkedFields=q[1],Qe(()=>r=!1)),s.$set(te),q[6].length>0?C?(C.p(q,B),B&64&&p(C,1)):(C=qn(q),C.c(),p(C,1),C.m(e,f)):C&&(ne(),$(C,1,1,()=>{C=null}),ie()),q[7].length>0?I?(I.p(q,B),B&128&&p(I,1)):(I=jn(q),I.c(),p(I,1),I.m(e,null)):I&&(ne(),$(I,1,1,()=>{I=null}),ie()),q[4].length===0?F||(F=Un(),F.c(),F.m(_,b)):F&&(F.d(1),F=null);let j=k;k=A(q),k===j?~k&&U[k].p(q,B):(g&&(ne(),$(U[j],1,1,()=>{U[j]=null}),ie()),~k?(g=U[k],g?g.p(q,B):(g=U[k]=ee[k](q),g.c()),p(g,1),g.m(w,null)):g=null)},i(q){E||(p(s.$$.fragment,q),p(C),p(I),p(g),E=!0)},o(q){$(s.$$.fragment,q),$(C),$(I),$(g),E=!1},d(q){q&&m(e),L(s),C&&C.d(),I&&I.d(),q&&m(u),q&&m(_),F&&F.d(),~k&&U[k].d()}}}function vf(i){let e,l,t,n,o,s;return e=new Lt({props:{title:"Download data"}}),t=new Ot({props:{hasForm:!0,$$slots:{default:[bf]},$$scope:{ctx:i}}}),o=new qt({props:{primaryButtonText:"Download",primaryButtonDisabled:i[4].length===0,secondaryButtonText:"Cancel"}}),o.$on("click:button--secondary",i[12]),{c(){H(e.$$.fragment),l=Y(),H(t.$$.fragment),n=Y(),H(o.$$.fragment)},l(r){O(e.$$.fragment,r),l=Q(r),O(t.$$.fragment,r),n=Q(r),O(o.$$.fragment,r)},m(r,a){R(e,r,a),N(r,l,a),R(t,r,a),N(r,n,a),R(o,r,a),s=!0},p(r,a){const f={};a&2098174&&(f.$$scope={dirty:a,ctx:r}),t.$set(f);const u={};a&16&&(u.primaryButtonDisabled=r[4].length===0),o.$set(u)},i(r){s||(p(e.$$.fragment,r),p(t.$$.fragment,r),p(o.$$.fragment,r),s=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),$(o.$$.fragment,r),s=!1},d(r){L(e,r),r&&m(l),L(t,r),r&&m(n),L(o,r)}}}function wf(i){let e,l;return e=new Rt({props:{size:"lg",open:i[0],$$slots:{default:[vf]},$$scope:{ctx:i}}}),e.$on("submit",i[11]),e.$on("close",i[18]),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,[n]){const o={};n&1&&(o.open=t[0]),n&2098174&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function kf(i,e,l){let t,n,o,s,r,a,f,u=x,_=()=>(u(),u=Te(r,U=>l(9,f=U)),r);i.$$.on_destroy.push(()=>u());let{open:c=!1}=e,{schema:d}=e;const h=dt(),b=je();be(i,b,U=>l(14,a=U));let w=[],k=[],g=[];function E(U){const A=lt(U),B=Ft(U).filter(W=>["embedding"].indexOf(W.dtype)===-1).filter(W=>!nt(W)&&!Ht(W)),te=A.filter(W=>W.label!=null),j=A.filter(W=>Bt(W)).filter(W=>!lt(W).some(J=>J.dtype==="embedding"));return{sourceFields:B,enrichedFields:j,labelFields:te}}async function y(){const U=a.namespace,A=a.datasetName,q={combine_columns:!1,columns:s.map(j=>j.path)},B=`/api/v1/datasets/${U}/${A}/select_rows_download?url_safe_options=${encodeURIComponent(JSON.stringify(q))}`,te=document.createElement("a");te.download=`${U}_${A}.json`,te.href=B,document.body.appendChild(te),te.click(),te.remove()}function M(){l(0,c=!1),h("close")}function C(U){w=U,l(1,w)}function I(U){k=U,l(2,k)}function F(U){g=U,l(3,g)}const ee=()=>l(0,c=!1);return i.$$set=U=>{"open"in U&&l(0,c=U.open),"schema"in U&&l(13,d=U.schema)},i.$$.update=()=>{i.$$.dirty&8192&&l(8,{sourceFields:t,enrichedFields:n,labelFields:o}=E(d),t,(l(7,n),l(13,d)),(l(6,o),l(13,d))),i.$$.dirty&14&&l(4,s=[...w,...k,...g]),i.$$.dirty&16400&&_(l(5,r=s.length>0?yi(a.namespace,a.datasetName,{columns:s.map(U=>U.path),limit:3,combine_columns:!1}):null))},[c,w,k,g,s,r,o,n,t,f,b,y,M,d,a,C,I,F,ee]}class $f extends we{constructor(e){super(),ke(this,e,kf,wf,ve,{open:0,schema:13})}}function Yn(i,e,l){const t=i.slice();t[12]=e[l];const n=t[3](t[12]);t[13]=n;const o=t[4](t[12]);return t[14]=o,t}function Ef(i){let e,l,t,n,o,s,r,a,f;r=new mi({props:{size:"small",tooltipPosition:"left",icon:hi,iconDescription:"Sort dataset by concept score"}}),r.$on("click",i[5]);let u=i[2].data.rows,_=[];for(let d=0;d<u.length;d+=1)_[d]=Qn(Yn(i,u,d));const c=d=>$(_[d],1,1,()=>{_[d]=null});return{c(){e=T("div"),l=T("div"),t=T("div"),n=Z("Items with highest score"),o=Y(),s=T("div"),H(r.$$.fragment),a=Y();for(let d=0;d<_.length;d+=1)_[d].c();this.h()},l(d){e=V(d,"DIV",{class:!0});var h=S(e);l=V(h,"DIV",{class:!0});var b=S(l);t=V(b,"DIV",{});var w=S(t);n=G(w,"Items with highest score"),w.forEach(m),o=Q(b),s=V(b,"DIV",{});var k=S(s);O(r.$$.fragment,k),k.forEach(m),b.forEach(m),a=Q(h);for(let g=0;g<_.length;g+=1)_[g].l(h);h.forEach(m),this.h()},h(){D(l,"class","flex h-8 justify-between text-lg"),D(e,"class","flex flex-col gap-y-4")},m(d,h){N(d,e,h),v(e,l),v(l,t),v(t,n),v(l,o),v(l,s),R(r,s,null),v(e,a);for(let b=0;b<_.length;b+=1)_[b]&&_[b].m(e,null);f=!0},p(d,h){if(h&29){u=d[2].data.rows;let b;for(b=0;b<u.length;b+=1){const w=Yn(d,u,b);_[b]?(_[b].p(w,h),p(_[b],1)):(_[b]=Qn(w),_[b].c(),p(_[b],1),_[b].m(e,null))}for(ne(),b=u.length;b<_.length;b+=1)c(b);ie()}},i(d){if(!f){p(r.$$.fragment,d);for(let h=0;h<u.length;h+=1)p(_[h]);f=!0}},o(d){$(r.$$.fragment,d),_=_.filter(Boolean);for(let h=0;h<_.length;h+=1)$(_[h]);f=!1},d(d){d&&m(e),L(r),Ae(_,d)}}}function Sf(i){let e,l;return e=new Re({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Qn(i){let e,l,t,n,o,s,r,a,f,u=Ee(i[14])+"",_,c,d;return t=new Mi({props:{text:i[13],row:i[12],spanPaths:i[0].spanPaths,valuePaths:i[0].valuePaths,embeddings:[]}}),{c(){e=T("div"),l=T("div"),H(t.$$.fragment),n=Y(),o=T("div"),s=T("div"),r=Z("Max score"),a=Y(),f=T("div"),_=Z(u),c=Y(),this.h()},l(h){e=V(h,"DIV",{class:!0});var b=S(e);l=V(b,"DIV",{class:!0});var w=S(l);O(t.$$.fragment,w),w.forEach(m),n=Q(b),o=V(b,"DIV",{class:!0});var k=S(o);s=V(k,"DIV",{class:!0});var g=S(s);r=G(g,"Max score"),g.forEach(m),a=Q(k),f=V(k,"DIV",{class:!0});var E=S(f);_=G(E,u),E.forEach(m),k.forEach(m),c=Q(b),b.forEach(m),this.h()},h(){D(l,"class","flex-grow"),D(s,"class","text-sm text-gray-500"),D(f,"class","text-lg"),D(o,"class","flex flex-none flex-col items-end"),D(e,"class","flex gap-x-4 rounded border border-gray-300 px-4 py-2")},m(h,b){N(h,e,b),v(e,l),R(t,l,null),v(e,n),v(e,o),v(o,s),v(s,r),v(o,a),v(o,f),v(f,_),v(e,c),d=!0},p(h,b){const w={};b&4&&(w.text=h[13]),b&4&&(w.row=h[12]),b&1&&(w.spanPaths=h[0].spanPaths),b&1&&(w.valuePaths=h[0].valuePaths),t.$set(w),(!d||b&4)&&u!==(u=Ee(h[14])+"")&&ce(_,u)},i(h){d||(p(t.$$.fragment,h),d=!0)},o(h){$(t.$$.fragment,h),d=!1},d(h){h&&m(e),L(t)}}}function yf(i){let e,l,t,n;const o=[Sf,Ef],s=[];function r(a,f){return a[2].isFetching?0:a[2].data?1:-1}return~(e=r(i))&&(l=s[e]=o[e](i)),{c(){l&&l.c(),t=de()},l(a){l&&l.l(a),t=de()},m(a,f){~e&&s[e].m(a,f),N(a,t,f),n=!0},p(a,[f]){let u=e;e=r(a),e===u?~e&&s[e].p(a,f):(l&&(ne(),$(s[u],1,1,()=>{s[u]=null}),ie()),~e?(l=s[e],l?l.p(a,f):(l=s[e]=o[e](a),l.c()),p(l,1),l.m(t.parentNode,t)):l=null)},i(a){n||(p(l),n=!0)},o(a){$(l),n=!1},d(a){~e&&s[e].d(a),a&&m(t)}}}const If=5;function Df(i,e,l){let t,n,o,s,r=x,a=()=>(r(),r=Te(t,k=>l(2,s=k)),t);i.$$.on_destroy.push(()=>r());let{schema:f}=e,{namespace:u}=e,{datasetName:_}=e,{mediaPath:c}=e,{scorePath:d}=e;function h(k){return ut.value(gt(k,c),"string")}function b(k){const g=d.slice(0,d.length-2),E=gt(k,g);let y=0;for(const M of E){const C=ut.value(gt(M,["score"]),"float32");y=Math.max(y,C)}return y}function w(){const k=Di(u,_);k.query.sort_by=[d],k.query.sort_order="DESC",k.insightsOpen=!1,Mt(Ii(u,_,k))}return i.$$set=k=>{"schema"in k&&l(6,f=k.schema),"namespace"in k&&l(7,u=k.namespace),"datasetName"in k&&l(8,_=k.datasetName),"mediaPath"in k&&l(9,c=k.mediaPath),"scorePath"in k&&l(10,d=k.scorePath)},i.$$.update=()=>{i.$$.dirty&1984&&a(l(1,t=yi(u,_,{columns:[c,d],limit:If,combine_columns:!0,sort_by:[d]},f))),i.$$.dirty&1088&&l(11,n=[fi(f,d)]),i.$$.dirty&2112&&l(0,o=_i(f,n))},[o,t,s,h,b,w,f,u,_,c,d,n]}class Tf extends we{constructor(e){super(),ke(this,e,Df,yf,ve,{schema:6,namespace:7,datasetName:8,mediaPath:9,scorePath:10})}}function Vf(i){let e,l;return e=new Re({props:{lines:1,width:"200px"}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Nf(i){let e,l;return{c(){e=T("div"),l=Z(i[9]),this.h()},l(t){e=V(t,"DIV",{class:!0});var n=S(e);l=G(n,i[9]),n.forEach(m),this.h()},h(){D(e,"class","text-sm text-gray-500")},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&512&&ce(l,t[9])},i:x,o:x,d(t){t&&m(e)}}}function Mf(i){let e,l=i[7].toFixed(2)+"",t,n,o=Ee(i[3])+"",s,r;return{c(){e=T("div"),t=Z(l),n=Z("% ("),s=Z(o),r=Z(" items)"),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);t=G(f,l),n=G(f,"% ("),s=G(f,o),r=G(f," items)"),f.forEach(m),this.h()},h(){D(e,"class","text-lg font-bold")},m(a,f){N(a,e,f),v(e,t),v(e,n),v(e,s),v(e,r)},p(a,f){f&128&&l!==(l=a[7].toFixed(2)+"")&&ce(t,l),f&8&&o!==(o=Ee(a[3])+"")&&ce(s,o)},i:x,o:x,d(a){a&&m(e)}}}function Cf(i){let e,l;return e=new Re({props:{lines:1,width:"200px"}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function zf(i){let e,l,t,n,o=i[13].namespace+"",s,r,a=i[13].concept_name+"",f,u,_,c,d,h,b,w,k,g,E,y;const M=[Nf,Vf],C=[];function I(A,q){return A[9]?0:1}c=I(i),d=C[c]=M[c](i);const F=[Cf,Mf],ee=[];function U(A,q){return A[6].isFetching?0:1}return w=U(i),k=ee[w]=F[w](i),{c(){e=T("div"),l=T("div"),t=T("div"),n=T("span"),s=Z(o),r=Z(" / "),f=Z(a),_=Y(),d.c(),h=Y(),b=T("div"),k.c(),this.h()},l(A){e=V(A,"DIV",{slot:!0,class:!0});var q=S(e);l=V(q,"DIV",{class:!0});var B=S(l);t=V(B,"DIV",{class:!0});var te=S(t);n=V(te,"SPAN",{});var j=S(n);s=G(j,o),r=G(j," / "),f=G(j,a),j.forEach(m),te.forEach(m),_=Q(B),d.l(B),B.forEach(m),h=Q(q),b=V(q,"DIV",{class:!0});var W=S(b);k.l(W),W.forEach(m),q.forEach(m),this.h()},h(){D(t,"class","text-lg"),D(l,"class","w-full flex-grow"),D(b,"class","flex-none"),D(e,"slot","above"),D(e,"class","flex w-full items-center")},m(A,q){N(A,e,q),v(e,l),v(l,t),v(t,n),v(n,s),v(n,r),v(n,f),v(l,_),C[c].m(l,null),v(e,h),v(e,b),ee[w].m(b,null),g=!0,E||(y=$e(u=Se.call(null,n,{text:`version: ${i[8]}`})),E=!0)},p(A,q){u&&Pe(u.update)&&q&256&&u.update.call(null,{text:`version: ${A[8]}`});let B=c;c=I(A),c===B?C[c].p(A,q):(ne(),$(C[B],1,1,()=>{C[B]=null}),ie(),d=C[c],d?d.p(A,q):(d=C[c]=M[c](A),d.c()),p(d,1),d.m(l,null));let te=w;w=U(A),w===te?ee[w].p(A,q):(ne(),$(ee[te],1,1,()=>{ee[te]=null}),ie(),k=ee[w],k?k.p(A,q):(k=ee[w]=F[w](A),k.c()),p(k,1),k.m(b,null))},i(A){g||(p(d),p(k),g=!0)},o(A){$(d),$(k),g=!1},d(A){A&&m(e),C[c].d(),ee[w].d(),E=!1,y()}}}function Ff(i){let e,l;return e=new Re({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Pf(i){let e,l;return e=new Tf({props:{schema:i[0],namespace:i[1],datasetName:i[2],mediaPath:i[12],scorePath:i[4]}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n&1&&(o.schema=t[0]),n&2&&(o.namespace=t[1]),n&4&&(o.datasetName=t[2]),n&4096&&(o.mediaPath=t[12]),n&16&&(o.scorePath=t[4]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Af(i){let e,l,t,n;const o=[Pf,Ff],s=[];function r(a,f){return a[5].data?0:1}return l=r(i),t=s[l]=o[l](i),{c(){e=T("div"),t.c(),this.h()},l(a){e=V(a,"DIV",{slot:!0});var f=S(e);t.l(f),f.forEach(m),this.h()},h(){D(e,"slot","below")},m(a,f){N(a,e,f),s[l].m(e,null),n=!0},p(a,f){let u=l;l=r(a),l===u?s[l].p(a,f):(ne(),$(s[u],1,1,()=>{s[u]=null}),ie(),t=s[l],t?t.p(a,f):(t=s[l]=o[l](a),t.c()),p(t,1),t.m(e,null))},i(a){n||(p(t),n=!0)},o(a){$(t),n=!1},d(a){a&&m(e),s[l].d()}}}function Bf(i){let e,l;return e=new Gs({props:{$$slots:{below:[Af],above:[zf]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,[n]){const o={};n&70655&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}const Hf="In concept",Rf="Not in concept";function Lf(i,e,l){let t,n,o,s,r,a,f,u,_,c,d=x,h=()=>(d(),d=Te(s,I=>l(5,c=I)),s),b,w=x,k=()=>(w(),w=Te(o,I=>l(6,b=I)),o);i.$$.on_destroy.push(()=>d()),i.$$.on_destroy.push(()=>w());let{field:g}=e,{schema:E}=e,{namespace:y}=e,{datasetName:M}=e,C=g.signal;return i.$$set=I=>{"field"in I&&l(14,g=I.field),"schema"in I&&l(0,E=I.schema),"namespace"in I&&l(1,y=I.namespace),"datasetName"in I&&l(2,M=I.datasetName)},i.$$.update=()=>{var I,F,ee,U,A,q,B;i.$$.dirty&16384&&l(4,t=[...g.path,kt,"score"]),i.$$.dirty&16384&&l(12,n=g.parent.path),i.$$.dirty&22&&k(l(11,o=Si(y,M,{leaf_path:t}))),i.$$.dirty&32&&l(9,r=(F=(I=c.data)==null?void 0:I.metadata)==null?void 0:F.description),i.$$.dirty&64&&l(15,a=((U=(ee=b.data)==null?void 0:ee.counts.find(([te,j])=>te===Rf))==null?void 0:U[1])||0),i.$$.dirty&64&&l(3,f=((q=(A=b.data)==null?void 0:A.counts.find(([te,j])=>te===Hf))==null?void 0:q[1])||0),i.$$.dirty&32&&l(8,u=(B=c.data)==null?void 0:B.version),i.$$.dirty&32776&&l(7,_=f/(f+a)*100)},h(l(10,s=di(C.namespace,C.concept_name))),[E,y,M,f,t,c,b,_,u,r,s,o,n,C,g,a]}class Of extends we{constructor(e){super(),ke(this,e,Lf,Bf,ve,{field:14,schema:0,namespace:1,datasetName:2})}}function Wn(i,e,l){const t=i.slice();return t[9]=e[l],t}function qf(i){let e,l;return e=new Re({props:{paragraph:!0,lines:2,width:"200px"}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function jf(i){let e,l=Ee(i[5])+"",t,n,o,s,r,a;return{c(){e=T("div"),t=Z(l),n=Z(" items"),o=Y(),s=T("div"),r=Z(i[6]),a=Z(" chars on average")},l(f){e=V(f,"DIV",{});var u=S(e);t=G(u,l),n=G(u," items"),u.forEach(m),o=Q(f),s=V(f,"DIV",{});var _=S(s);r=G(_,i[6]),a=G(_," chars on average"),_.forEach(m)},m(f,u){N(f,e,u),v(e,t),v(e,n),N(f,o,u),N(f,s,u),v(s,r),v(s,a)},p(f,u){u&32&&l!==(l=Ee(f[5])+"")&&ce(t,l),u&64&&ce(r,f[6])},i:x,o:x,d(f){f&&m(e),f&&m(o),f&&m(s)}}}function Zn(i){let e,l;return e=new Of({props:{schema:i[2],namespace:i[3],datasetName:i[4],field:i[9]}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n&4&&(o.schema=t[2]),n&8&&(o.namespace=t[3]),n&16&&(o.datasetName=t[4]),n&1&&(o.field=t[9]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Uf(i){let e,l,t,n,o,s,r,a,f,u;const _=[jf,qf],c=[];function d(k,g){return k[5]&&k[6]?0:1}r=d(i),a=c[r]=_[r](i);let h=i[0],b=[];for(let k=0;k<h.length;k+=1)b[k]=Zn(Wn(i,h,k));const w=k=>$(b[k],1,1,()=>{b[k]=null});return{c(){e=T("div"),l=T("div"),t=T("div"),n=Z(i[1]),o=Y(),s=T("div"),a.c(),f=Y();for(let k=0;k<b.length;k+=1)b[k].c();this.h()},l(k){e=V(k,"DIV",{class:!0});var g=S(e);l=V(g,"DIV",{class:!0});var E=S(l);t=V(E,"DIV",{class:!0});var y=S(t);n=G(y,i[1]),y.forEach(m),o=Q(E),s=V(E,"DIV",{class:!0});var M=S(s);a.l(M),M.forEach(m),E.forEach(m),f=Q(g);for(let C=0;C<b.length;C+=1)b[C].l(g);g.forEach(m),this.h()},h(){D(t,"class","flex-grow text-2xl font-semibold text-slate-900"),D(s,"class","flex-none text-sm text-gray-500"),D(l,"class","sticky top-0 flex rounded-xl border border-gray-300 bg-slate-50/80 px-4 py-3 backdrop-blur-sm"),D(e,"class","relative flex flex-col gap-y-4")},m(k,g){N(k,e,g),v(e,l),v(l,t),v(t,n),v(l,o),v(l,s),c[r].m(s,null),v(e,f);for(let E=0;E<b.length;E+=1)b[E]&&b[E].m(e,null);u=!0},p(k,[g]){(!u||g&2)&&ce(n,k[1]);let E=r;if(r=d(k),r===E?c[r].p(k,g):(ne(),$(c[E],1,1,()=>{c[E]=null}),ie(),a=c[r],a?a.p(k,g):(a=c[r]=_[r](k),a.c()),p(a,1),a.m(s,null)),g&29){h=k[0];let y;for(y=0;y<h.length;y+=1){const M=Wn(k,h,y);b[y]?(b[y].p(M,g),p(b[y],1)):(b[y]=Zn(M),b[y].c(),p(b[y],1),b[y].m(e,null))}for(ne(),y=h.length;y<b.length;y+=1)w(y);ie()}},i(k){if(!u){p(a);for(let g=0;g<h.length;g+=1)p(b[g]);u=!0}},o(k){$(a),b=b.filter(Boolean);for(let g=0;g<b.length;g+=1)$(b[g]);u=!1},d(k){k&&m(e),c[r].d(),Ae(b,k)}}}function Yf(i,e,l){let t,n,o,s,r=x,a=()=>(r(),r=Te(t,h=>l(8,s=h)),t);i.$$.on_destroy.push(()=>r());let{concepts:f}=e,{mediaPath:u}=e,{schema:_}=e,{namespace:c}=e,{datasetName:d}=e;return i.$$set=h=>{"concepts"in h&&l(0,f=h.concepts),"mediaPath"in h&&l(1,u=h.mediaPath),"schema"in h&&l(2,_=h.schema),"namespace"in h&&l(3,c=h.namespace),"datasetName"in h&&l(4,d=h.datasetName)},i.$$.update=()=>{var h,b;i.$$.dirty&26&&a(l(7,t=Ei(c,d,{leaf_path:u}))),i.$$.dirty&256&&l(6,n=(h=s.data)==null?void 0:h.avg_text_length),i.$$.dirty&256&&l(5,o=(b=s.data)==null?void 0:b.total_count)},[f,u,_,c,d,o,n,t,s]}class Qf extends we{constructor(e){super(),ke(this,e,Yf,Uf,ve,{concepts:0,mediaPath:1,schema:2,namespace:3,datasetName:4})}}function Gn(i,e,l){const t=i.slice();t[8]=e[l];const n=t[5](t[8]);return t[9]=n,t}function Kn(i){let e,l;return e=new Qf({props:{mediaPath:i[8],schema:i[0],namespace:i[1],datasetName:i[2],concepts:i[9]}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n&8&&(o.mediaPath=t[8]),n&1&&(o.schema=t[0]),n&2&&(o.namespace=t[1]),n&4&&(o.datasetName=t[2]),n&8&&(o.concepts=t[9]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Wf(i){let e,l,t=i[3],n=[];for(let s=0;s<t.length;s+=1)n[s]=Kn(Gn(i,t,s));const o=s=>$(n[s],1,1,()=>{n[s]=null});return{c(){e=T("div");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=V(s,"DIV",{class:!0});var r=S(e);for(let a=0;a<n.length;a+=1)n[a].l(r);r.forEach(m),this.h()},h(){D(e,"class","flex flex-col gap-y-6")},m(s,r){N(s,e,r);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);l=!0},p(s,[r]){if(r&47){t=s[3];let a;for(a=0;a<t.length;a+=1){const f=Gn(s,t,a);n[a]?(n[a].p(f,r),p(n[a],1)):(n[a]=Kn(f),n[a].c(),p(n[a],1),n[a].m(e,null))}for(ne(),a=t.length;a<n.length;a+=1)o(a);ie()}},i(s){if(!l){for(let r=0;r<t.length;r+=1)p(n[r]);l=!0}},o(s){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)$(n[r]);l=!1},d(s){s&&m(e),Ae(n,s)}}}function Zf(i,e,l){let t,n,o,s,r=x,a=()=>(r(),r=Te(n,d=>l(6,s=d)),n);i.$$.on_destroy.push(()=>r());let{schema:f}=e,{namespace:u}=e,{datasetName:_}=e;function c(d){return t.filter(h=>wi(h.path,d))}return i.$$set=d=>{"schema"in d&&l(0,f=d.schema),"namespace"in d&&l(1,u=d.namespace),"datasetName"in d&&l(2,_=d.datasetName)},i.$$.update=()=>{var d,h;i.$$.dirty&1&&(t=lt(f).filter(b=>{var w;return((w=b.signal)==null?void 0:w.signal_name)=="concept_score"})),i.$$.dirty&6&&a(l(4,n=ot(u,_))),i.$$.dirty&64&&l(3,o=(((h=(d=s.data)==null?void 0:d.ui)==null?void 0:h.media_paths)||[]).map(b=>Array.isArray(b)?b:[b]))},[f,u,_,o,n,c,s]}class Gf extends we{constructor(e){super(),ke(this,e,Zf,Wf,ve,{schema:0,namespace:1,datasetName:2})}}function Jn(i){let e,l,t,n,o,s,r,a;function f(d){i[24](d)}let u={schema:i[12].data,namespace:i[0],name:i[1]};i[4]!==void 0&&(u.open=i[4]),e=new _f({props:u}),Be.push(()=>Ye(e,"open",f));function _(d){i[25](d)}let c={schema:i[12].data};return i[5]!==void 0&&(c.open=i[5]),n=new $f({props:c}),Be.push(()=>Ye(n,"open",_)),r=new Rt({props:{size:"lg",open:i[3].insightsOpen,$$slots:{default:[Jf]},$$scope:{ctx:i}}}),r.$on("close",i[26]),r.$on("submit",i[27]),{c(){H(e.$$.fragment),t=Y(),H(n.$$.fragment),s=Y(),H(r.$$.fragment)},l(d){O(e.$$.fragment,d),t=Q(d),O(n.$$.fragment,d),s=Q(d),O(r.$$.fragment,d)},m(d,h){R(e,d,h),N(d,t,h),R(n,d,h),N(d,s,h),R(r,d,h),a=!0},p(d,h){const b={};h[0]&4096&&(b.schema=d[12].data),h[0]&1&&(b.namespace=d[0]),h[0]&2&&(b.name=d[1]),!l&&h[0]&16&&(l=!0,b.open=d[4],Qe(()=>l=!1)),e.$set(b);const w={};h[0]&4096&&(w.schema=d[12].data),!o&&h[0]&32&&(o=!0,w.open=d[5],Qe(()=>o=!1)),n.$set(w);const k={};h[0]&8&&(k.open=d[3].insightsOpen),h[0]&4107|h[1]&1&&(k.$$scope={dirty:h,ctx:d}),r.$set(k)},i(d){a||(p(e.$$.fragment,d),p(n.$$.fragment,d),p(r.$$.fragment,d),a=!0)},o(d){$(e.$$.fragment,d),$(n.$$.fragment,d),$(r.$$.fragment,d),a=!1},d(d){L(e,d),d&&m(t),L(n,d),d&&m(s),L(r,d)}}}function Xn(i){let e,l;return e=new Gf({props:{schema:i[12].data,namespace:i[0],datasetName:i[1]}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&4096&&(o.schema=t[12].data),n[0]&1&&(o.namespace=t[0]),n[0]&2&&(o.datasetName=t[1]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Kf(i){let e,l,t=i[3].insightsOpen&&Xn(i);return{c(){t&&t.c(),e=de()},l(n){t&&t.l(n),e=de()},m(n,o){t&&t.m(n,o),N(n,e,o),l=!0},p(n,o){n[3].insightsOpen?t?(t.p(n,o),o[0]&8&&p(t,1)):(t=Xn(n),t.c(),p(t,1),t.m(e.parentNode,e)):t&&(ne(),$(t,1,1,()=>{t=null}),ie())},i(n){l||(p(t),l=!0)},o(n){$(t),l=!1},d(n){t&&t.d(n),n&&m(e)}}}function Jf(i){let e,l,t,n,o,s;return e=new Lt({props:{title:"Insights"}}),t=new Ot({props:{$$slots:{default:[Kf]},$$scope:{ctx:i}}}),o=new qt({props:{primaryButtonText:"Close"}}),{c(){H(e.$$.fragment),l=Y(),H(t.$$.fragment),n=Y(),H(o.$$.fragment)},l(r){O(e.$$.fragment,r),l=Q(r),O(t.$$.fragment,r),n=Q(r),O(o.$$.fragment,r)},m(r,a){R(e,r,a),N(r,l,a),R(t,r,a),N(r,n,a),R(o,r,a),s=!0},p(r,a){const f={};a[0]&4107|a[1]&1&&(f.$$scope={dirty:a,ctx:r}),t.$set(f)},i(r){s||(p(e.$$.fragment,r),p(t.$$.fragment,r),p(o.$$.fragment,r),s=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),$(o.$$.fragment,r),s=!1},d(r){L(e,r),r&&m(l),L(t,r),r&&m(n),L(o,r)}}}function xn(i){let e,l;return e=new Ut({props:{open:!0,modalHeading:"Dataset config",primaryButtonText:"Ok",secondaryButtonText:"Cancel",$$slots:{default:[eu]},$$scope:{ctx:i}}}),e.$on("click:button--secondary",i[28]),e.$on("close",i[29]),e.$on("submit",i[30]),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&8192|n[1]&1&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Xf(i){let e,l;return e=new Ci({props:{value:`${i[13].data}`,readonly:!0,rows:15,placeholder:"3 rows of data for previewing the response",class:"mb-2 font-mono"}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&8192&&(o.value=`${t[13].data}`),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function xf(i){let e,l;return e=new Re({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function eu(i){let e,l,t,n,o,s,r,a,f,u;const _=[xf,Xf],c=[];function d(h,b){var w,k;return(w=h[13])!=null&&w.isFetching?0:(k=h[13])!=null&&k.data?1:-1}return~(r=d(i))&&(a=c[r]=_[r](i)),{c(){e=T("div"),l=Z(`This dataset configuration represents the transformations that created the dataset,
        including signals, embeddings, and user settings. This can be used with lilac.load to
        generate the dataset with the same view as presented.`),t=Y(),n=T("div"),o=Z("config.yml"),s=Y(),a&&a.c(),f=de(),this.h()},l(h){e=V(h,"DIV",{class:!0});var b=S(e);l=G(b,`This dataset configuration represents the transformations that created the dataset,
        including signals, embeddings, and user settings. This can be used with lilac.load to
        generate the dataset with the same view as presented.`),b.forEach(m),t=Q(h),n=V(h,"DIV",{class:!0});var w=S(n);o=G(w,"config.yml"),w.forEach(m),s=Q(h),a&&a.l(h),f=de(),this.h()},h(){D(e,"class","mb-4 text-sm"),D(n,"class","font-mono text-xs")},m(h,b){N(h,e,b),v(e,l),N(h,t,b),N(h,n,b),v(n,o),N(h,s,b),~r&&c[r].m(h,b),N(h,f,b),u=!0},p(h,b){let w=r;r=d(h),r===w?~r&&c[r].p(h,b):(a&&(ne(),$(c[w],1,1,()=>{c[w]=null}),ie()),~r?(a=c[r],a?a.p(h,b):(a=c[r]=_[r](h),a.c()),p(a,1),a.m(f.parentNode,f)):a=null)},i(h){u||(p(a),u=!0)},o(h){$(a),u=!1},d(h){h&&m(e),h&&m(t),h&&m(n),h&&m(s),~r&&c[r].d(h),h&&m(f)}}}function tu(i){let e,l,t,n,o,s,r,a,f,u,_;t=new Zo({}),r=new Ja({});let c=i[12].data&&Jn(i),d=i[2]&&xn(i);return{c(){e=T("div"),l=T("div"),H(t.$$.fragment),o=Y(),s=T("div"),H(r.$$.fragment),a=Y(),c&&c.c(),f=Y(),d&&d.c(),u=de(),this.h()},l(h){e=V(h,"DIV",{class:!0});var b=S(e);l=V(b,"DIV",{class:!0});var w=S(l);O(t.$$.fragment,w),w.forEach(m),o=Q(b),s=V(b,"DIV",{class:!0});var k=S(s);O(r.$$.fragment,k),k.forEach(m),b.forEach(m),a=Q(h),c&&c.l(h),f=Q(h),d&&d.l(h),u=de(),this.h()},h(){D(l,"class",n=Jt(`schema-container relative h-full ${i[11]?"w-0":"w-1/3"} border-r border-gray-200`)+" svelte-1xlsh2v"),D(s,"class","h-full w-2/3 flex-grow"),D(e,"class","flex h-full w-full")},m(h,b){N(h,e,b),v(e,l),R(t,l,null),v(e,o),v(e,s),R(r,s,null),N(h,a,b),c&&c.m(h,b),N(h,f,b),d&&d.m(h,b),N(h,u,b),_=!0},p(h,b){(!_||b[0]&2048&&n!==(n=Jt(`schema-container relative h-full ${h[11]?"w-0":"w-1/3"} border-r border-gray-200`)+" svelte-1xlsh2v"))&&D(l,"class",n),h[12].data?c?(c.p(h,b),b[0]&4096&&p(c,1)):(c=Jn(h),c.c(),p(c,1),c.m(f.parentNode,f)):c&&(ne(),$(c,1,1,()=>{c=null}),ie()),h[2]?d?(d.p(h,b),b[0]&4&&p(d,1)):(d=xn(h),d.c(),p(d,1),d.m(u.parentNode,u)):d&&(ne(),$(d,1,1,()=>{d=null}),ie())},i(h){_||(p(t.$$.fragment,h),p(r.$$.fragment,h),p(c),p(d),_=!0)},o(h){$(t.$$.fragment,h),$(r.$$.fragment,h),$(c),$(d),_=!1},d(h){h&&m(e),L(t),L(r),h&&m(a),c&&c.d(h),h&&m(f),d&&d.d(h),h&&m(u)}}}function lu(i){let e,l,t=i[3].namespace+"",n,o,s=i[3].datasetName+"",r,a,f;return{c(){e=T("div"),l=T("a"),n=Z(t),o=Z("/"),r=Z(s),this.h()},l(u){e=V(u,"DIV",{class:!0});var _=S(e);l=V(_,"A",{class:!0,href:!0});var c=S(l);n=G(c,t),o=G(c,"/"),r=G(c,s),c.forEach(m),_.forEach(m),this.h()},h(){D(l,"class","font-semibold text-black"),D(l,"href",i[8]),D(e,"class","dataset-name svelte-1xlsh2v")},m(u,_){N(u,e,_),v(e,l),v(l,n),v(l,o),v(l,r),a||(f=Fe(l,"click",i[21]),a=!0)},p(u,_){_[0]&8&&t!==(t=u[3].namespace+"")&&ce(n,t),_[0]&8&&s!==(s=u[3].datasetName+"")&&ce(r,s),_[0]&256&&D(l,"href",u[8])},d(u){u&&m(e),a=!1,f()}}}function nu(i){let e,l,t,n,o,s,r,a,f,u,_,c,d,h,b;return t=new jr({}),s=new Ke({props:{type:"outline",$$slots:{default:[lu]},$$scope:{ctx:i}}}),f=new ct({}),c=new Dr({}),{c(){e=T("div"),l=T("button"),H(t.$$.fragment),o=Y(),H(s.$$.fragment),r=Y(),a=T("button"),H(f.$$.fragment),u=Y(),_=T("button"),H(c.$$.fragment),this.h()},l(w){e=V(w,"DIV",{slot:!0,class:!0});var k=S(e);l=V(k,"BUTTON",{class:!0});var g=S(l);O(t.$$.fragment,g),g.forEach(m),o=Q(k),O(s.$$.fragment,k),r=Q(k),a=V(k,"BUTTON",{});var E=S(a);O(f.$$.fragment,E),E.forEach(m),u=Q(k),_=V(k,"BUTTON",{});var y=S(_);O(c.$$.fragment,y),y.forEach(m),k.forEach(m),this.h()},h(){D(l,"class","mr-2"),ue(l,"bg-blue-100",!i[11]),ue(l,"outline-blue-400",!i[11]),ue(l,"outline",!i[11]),D(e,"slot","header-subtext"),D(e,"class","flex flex-row items-center gap-x-1")},m(w,k){N(w,e,k),v(e,l),R(t,l,null),v(e,o),R(s,e,null),v(e,r),v(e,a),R(f,a,null),v(e,u),v(e,_),R(c,_,null),d=!0,h||(b=[$e(n=Se.call(null,l,{text:i[11]?"Show Schema":"Hide Schema"})),Fe(l,"click",i[15]),Fe(l,"keypress",i[15]),Fe(a,"click",i[22]),$e(Se.call(null,a,{text:"Dataset information"})),$e(Se.call(null,_,{text:"Dataset insights"})),Fe(_,"click",i[23])],h=!0)},p(w,k){n&&Pe(n.update)&&k[0]&2048&&n.update.call(null,{text:w[11]?"Show Schema":"Hide Schema"}),(!d||k[0]&2048)&&ue(l,"bg-blue-100",!w[11]),(!d||k[0]&2048)&&ue(l,"outline-blue-400",!w[11]),(!d||k[0]&2048)&&ue(l,"outline",!w[11]);const g={};k[0]&264|k[1]&1&&(g.$$scope={dirty:k,ctx:w}),s.$set(g)},i(w){d||(p(t.$$.fragment,w),p(s.$$.fragment,w),p(f.$$.fragment,w),p(c.$$.fragment,w),d=!0)},o(w){$(t.$$.fragment,w),$(s.$$.fragment,w),$(f.$$.fragment,w),$(c.$$.fragment,w),d=!1},d(w){w&&m(e),L(t),L(s),L(f),L(c),h=!1,We(b)}}}function iu(i){let e,l,t;return l=new _o({}),{c(){e=T("div"),H(l.$$.fragment),this.h()},l(n){e=V(n,"DIV",{slot:!0,class:!0});var o=S(e);O(l.$$.fragment,o),o.forEach(m),this.h()},h(){D(e,"slot","header-center"),D(e,"class","flex w-full items-center")},m(n,o){N(n,e,o),R(l,e,null),t=!0},p:x,i(n){t||(p(l.$$.fragment,n),t=!0)},o(n){$(l.$$.fragment,n),t=!1},d(n){n&&m(e),L(l)}}}function ei(i){let e,l,t,n;return{c(){e=T("div"),l=Z("Copied!"),this.h()},l(o){e=V(o,"DIV",{class:!0});var s=S(e);l=G(s,"Copied!"),s.forEach(m),this.h()},h(){D(e,"class","absolute right-12 z-50 mt-2 rounded border border-neutral-300 bg-neutral-50 px-4 py-1 text-xs")},m(o,s){N(o,e,s),v(e,l),n=!0},i(o){n||(t&&t.end(1),n=!0)},o(o){t=Ji(e,Xs,{}),n=!1},d(o){o&&m(e),o&&t&&t.end()}}}function su(i){let e,l,t,n,o,s,r,a,f,u,_,c,d,h,b,w,k,g,E,y=i[6]&&ei();return r=new Ks({}),u=new kr({}),h=new ir({}),{c(){e=T("div"),l=T("div"),t=T("div"),n=T("div"),y&&y.c(),o=Y(),s=T("button"),H(r.$$.fragment),a=Y(),f=T("button"),H(u.$$.fragment),_=Y(),c=T("div"),d=T("button"),H(h.$$.fragment),this.h()},l(M){e=V(M,"DIV",{slot:!0});var C=S(e);l=V(C,"DIV",{class:!0});var I=S(l);t=V(I,"DIV",{class:!0});var F=S(t);n=V(F,"DIV",{class:!0});var ee=S(n);y&&y.l(ee),o=Q(ee),s=V(ee,"BUTTON",{});var U=S(s);O(r.$$.fragment,U),U.forEach(m),ee.forEach(m),a=Q(F),f=V(F,"BUTTON",{});var A=S(f);O(u.$$.fragment,A),A.forEach(m),_=Q(F),c=V(F,"DIV",{class:!0});var q=S(c);d=V(q,"BUTTON",{});var B=S(d);O(h.$$.fragment,B),B.forEach(m),q.forEach(m),F.forEach(m),I.forEach(m),C.forEach(m),this.h()},h(){D(n,"class","relative"),d.disabled=b=!i[9],D(c,"class","mr-2"),ue(c,"opacity-40",!i[9]),D(t,"class","flex"),D(l,"class","flex h-full flex-col"),D(e,"slot","header-right")},m(M,C){N(M,e,C),v(e,l),v(l,t),v(t,n),y&&y.m(n,null),v(n,o),v(n,s),R(r,s,null),v(t,a),v(t,f),R(u,f,null),v(t,_),v(t,c),v(c,d),R(h,d,null),k=!0,g||(E=[$e(Se.call(null,s,{text:"Copy the URL"})),Fe(s,"click",i[18]),$e(Se.call(null,f,{text:"Download data"})),Fe(f,"click",i[19]),$e(Se.call(null,d,{text:"Dataset settings"})),Fe(d,"click",i[20]),$e(w=Se.call(null,c,{text:i[9]?"":"User does not have access to update settings of this dataset."}))],g=!0)},p(M,C){M[6]?y?C[0]&64&&p(y,1):(y=ei(),y.c(),p(y,1),y.m(n,o)):y&&(ne(),$(y,1,1,()=>{y=null}),ie()),(!k||C[0]&512&&b!==(b=!M[9]))&&(d.disabled=b),w&&Pe(w.update)&&C[0]&512&&w.update.call(null,{text:M[9]?"":"User does not have access to update settings of this dataset."}),(!k||C[0]&512)&&ue(c,"opacity-40",!M[9])},i(M){k||(p(y),p(r.$$.fragment,M),p(u.$$.fragment,M),p(h.$$.fragment,M),k=!0)},o(M){$(y),$(r.$$.fragment,M),$(u.$$.fragment,M),$(h.$$.fragment,M),k=!1},d(M){M&&m(e),y&&y.d(),L(r),L(u),L(h),g=!1,We(E)}}}function ru(i){let e,l;return e=new xi({props:{$$slots:{"header-right":[su],"header-center":[iu],"header-subtext":[nu],default:[tu]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&15231|n[1]&1&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function au(i,e,l){let t,n,o,s,r,a,f,u,_=x,c=()=>(_(),_=Te(n,re=>l(12,u=re)),n),d,h=x,b=()=>(h(),h=Te(r,re=>l(13,d=re)),r);i.$$.on_destroy.push(()=>_()),i.$$.on_destroy.push(()=>h());let{namespace:w}=e,{datasetName:k}=e;const g=je();be(i,g,re=>l(3,f=re));function E(){yt(g,f.schemaCollapsed=!f.schemaCollapsed,f)}let y=!1,M=!1;const C=mt();be(i,C,re=>l(17,a=re));let I=!1,F=!1;const ee=()=>navigator.clipboard.writeText(location.href).then(()=>{l(6,I=!0),setTimeout(()=>l(6,I=!1),2e3)},()=>{throw Error("Error copying link to clipboard.")}),U=()=>l(5,M=!0),A=()=>l(4,y=!0),q=()=>Mt(s),B=()=>l(2,F=!0),te=()=>g.setInsightsOpen(!0);function j(re){y=re,l(4,y)}function W(re){M=re,l(5,M)}const J=()=>g.setInsightsOpen(!1),P=()=>g.setInsightsOpen(!1),K=()=>l(2,F=!1),fe=()=>l(2,F=!1),oe=()=>l(2,F=!1);return i.$$set=re=>{"namespace"in re&&l(0,w=re.namespace),"datasetName"in re&&l(1,k=re.datasetName)},i.$$.update=()=>{var re;i.$$.dirty[0]&8&&l(11,t=f.schemaCollapsed),i.$$.dirty[0]&8&&c(l(10,n=At(f.namespace,f.datasetName))),i.$$.dirty[0]&131072&&l(9,o=(re=a.data)==null?void 0:re.access.dataset.update_settings),i.$$.dirty[0]&3&&l(8,s=Ii(w,k)),i.$$.dirty[0]&7&&b(l(7,r=F?Cs(w,k,"yaml"):null))},[w,k,F,f,y,M,I,r,s,o,n,t,u,d,g,E,C,a,ee,U,A,q,B,te,j,W,J,P,K,fe,oe]}class ou extends we{constructor(e){super(),ke(this,e,au,ru,ve,{namespace:0,datasetName:1},null,[-1,-1])}}function fu(i){let e;return{c(){e=Z("Page not found! Please specify a dataset.")},l(l){e=G(l,"Page not found! Please specify a dataset.")},m(l,t){N(l,e,t)},p:x,i:x,o:x,d(l){l&&m(e)}}}function uu(i){let e=i[2],l,t,n=ti(i);return{c(){n.c(),l=de()},l(o){n.l(o),l=de()},m(o,s){n.m(o,s),N(o,l,s),t=!0},p(o,s){s&4&&ve(e,e=o[2])?(ne(),$(n,1,1,x),ie(),n=ti(o),n.c(),p(n,1),n.m(l.parentNode,l)):n.p(o,s)},i(o){t||(p(n),t=!0)},o(o){$(n),t=!1},d(o){o&&m(l),n.d(o)}}}function ti(i){let e,l;return e=new ou({props:{namespace:i[0],datasetName:i[1]}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n&1&&(o.namespace=t[0]),n&2&&(o.datasetName=t[1]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function cu(i){let e,l,t,n;const o=[uu,fu],s=[];function r(a,f){return a[2]&&a[0]&&a[1]?0:1}return e=r(i),l=s[e]=o[e](i),{c(){l.c(),t=de()},l(a){l.l(a),t=de()},m(a,f){s[e].m(a,f),N(a,t,f),n=!0},p(a,[f]){let u=e;e=r(a),e===u?s[e].p(a,f):(ne(),$(s[u],1,1,()=>{s[u]=null}),ie(),l=s[e],l?l.p(a,f):(l=s[e]=o[e](a),l.c()),p(l,1),l.m(t.parentNode,t))},i(a){n||(p(l),n=!0)},o(a){$(l),n=!1},d(a){s[e].d(a),a&&m(t)}}}function du(i,e,l){let t,n,o,s,r,a,f,u,_=x,c=()=>(_(),_=Te(f,B=>l(10,u=B)),f),d,h=x,b=()=>(h(),h=Te(t,B=>l(11,d=B)),t),w,k=x,g=()=>(k(),k=Te(a,B=>l(12,w=B)),a),E,y=x,M=()=>(y(),y=Te(s,B=>l(13,E=B)),s),C,I=x,F=()=>(I(),I=Te(o,B=>l(14,C=B)),o),ee;i.$$.on_destroy.push(()=>_()),i.$$.on_destroy.push(()=>h()),i.$$.on_destroy.push(()=>k()),i.$$.on_destroy.push(()=>y()),i.$$.on_destroy.push(()=>I());let U,A;const q=zs();return be(i,q,B=>l(15,ee=B)),i.$$.update=()=>{if(i.$$.dirty&32771&&ee.page==="datasets")if(ee.identifier==""||ee.identifier==null)l(0,U=void 0),l(1,A=void 0);else{const[B,te]=ee.identifier.split("/");(U!=B||A!=te)&&(l(0,U=B),l(1,A=te))}if(i.$$.dirty&3&&b(l(2,t=U&&A?Rs(U,A):null)),i.$$.dirty&7&&t!=null){const B=Di(U,A);Fs("datasets",`${U}/${A}`,t,q,te=>Hs(te,B),te=>Bs(te,B))}i.$$.dirty&4&&t!=null&&Ps(t),i.$$.dirty&3&&l(8,n=U&&A?Ls(U,A):null),i.$$.dirty&256&&n!=null&&As(n),i.$$.dirty&3&&F(l(6,o=U&&A?ot(U,A):null)),i.$$.dirty&16640&&n&&C!=null&&C.data&&n.setSettings(C.data),i.$$.dirty&3&&M(l(5,s=U&&A?At(U,A):null)),i.$$.dirty&8448&&n&&E!=null&&E.data&&n.setSchema(E.data),i.$$.dirty&8192&&l(9,r=E!=null&&E.data?Os("string",E.data):null),i.$$.dirty&515&&g(l(4,a=U&&A&&r?qs(U,A,r.map(B=>B.path)):null)),i.$$.dirty&4352&&n&&w!=null&&w.data&&!w.isFetching&&n.setStats(w.data),i.$$.dirty&2051&&c(l(3,f=U&&A&&d?js(U,A,Us(d)):null)),i.$$.dirty&1280&&n&&u!=null&&u.data&&n.setSelectRowsSchema(u)},[U,A,t,f,a,s,o,q,n,r,u,d,w,E,C,ee]}class Iu extends we{constructor(e){super(),ke(this,e,du,cu,ve,{})}}export{Iu as component};
