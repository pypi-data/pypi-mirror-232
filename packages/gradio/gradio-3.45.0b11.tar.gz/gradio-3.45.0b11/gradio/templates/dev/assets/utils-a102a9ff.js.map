{"version":3,"file":"utils-a102a9ff.js","sources":["../../../../js/icons/src/TextHighlight.svelte","../../../../js/highlightedtext/utils.ts"],"sourcesContent":["<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\txmlns:xlink=\"http://www.w3.org/1999/xlink\"\n\taria-hidden=\"true\"\n\trole=\"img\"\n\tclass=\"iconify iconify--carbon\"\n\twidth=\"100%\"\n\theight=\"100%\"\n\tpreserveAspectRatio=\"xMidYMid meet\"\n\tviewBox=\"0 0 32 32\"\n>\n\t<path\n\t\tfill=\"currentColor\"\n\t\td=\"M12 15H5a3 3 0 0 1-3-3v-2a3 3 0 0 1 3-3h5V5a1 1 0 0 0-1-1H3V2h6a3 3 0 0 1 3 3zM5 9a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h5V9zm15 14v2a1 1 0 0 0 1 1h5v-4h-5a1 1 0 0 0-1 1z\"\n\t/>\n\t<path\n\t\tfill=\"currentColor\"\n\t\td=\"M2 30h28V2Zm26-2h-7a3 3 0 0 1-3-3v-2a3 3 0 0 1 3-3h5v-2a1 1 0 0 0-1-1h-6v-2h6a3 3 0 0 1 3 3Z\"\n\t/>\n</svg>\n","import { colors } from \"@gradio/theme\";\n\nexport function name_to_rgba(\n\tname: string,\n\ta: number,\n\tctx: CanvasRenderingContext2D | null\n): string {\n\tif (!ctx) {\n\t\tvar canvas = document.createElement(\"canvas\");\n\t\tctx = canvas.getContext(\"2d\")!;\n\t}\n\tctx.fillStyle = name;\n\tctx.fillRect(0, 0, 1, 1);\n\tconst [r, g, b] = ctx.getImageData(0, 0, 1, 1).data;\n\tctx.clearRect(0, 0, 1, 1);\n\treturn `rgba(${r}, ${g}, ${b}, ${255 / a})`;\n}\n\nexport function correct_color_map(\n\tcolor_map: Record<string, string>,\n\t_color_map: Record<string, { primary: string; secondary: string }>,\n\tbrowser: any,\n\tctx: CanvasRenderingContext2D | null\n): void {\n\tfor (const col in color_map) {\n\t\tconst _c = color_map[col].trim();\n\n\t\tif (_c in colors) {\n\t\t\t_color_map[col] = colors[_c as keyof typeof colors];\n\t\t} else {\n\t\t\t_color_map[col] = {\n\t\t\t\tprimary: browser\n\t\t\t\t\t? name_to_rgba(color_map[col], 1, ctx)\n\t\t\t\t\t: color_map[col],\n\t\t\t\tsecondary: browser\n\t\t\t\t\t? name_to_rgba(color_map[col], 0.5, ctx)\n\t\t\t\t\t: color_map[col]\n\t\t\t};\n\t\t}\n\t}\n}\n\nexport function merge_elements(\n\tvalue: { token: string; class_or_confidence: string | number | null }[],\n\tmergeMode: \"empty\" | \"equal\"\n): { token: string; class_or_confidence: string | number | null }[] {\n\tlet result: typeof value = [];\n\tlet tempStr: string | null = null;\n\tlet tempVal: string | number | null = null;\n\n\tfor (const val of value) {\n\t\tif (\n\t\t\t(mergeMode === \"empty\" && val.class_or_confidence === null) ||\n\t\t\t(mergeMode === \"equal\" && tempVal === val.class_or_confidence)\n\t\t) {\n\t\t\ttempStr = tempStr ? tempStr + val.token : val.token;\n\t\t} else {\n\t\t\tif (tempStr !== null) {\n\t\t\t\tresult.push({\n\t\t\t\t\ttoken: tempStr,\n\t\t\t\t\tclass_or_confidence: tempVal\n\t\t\t\t});\n\t\t\t}\n\t\t\ttempStr = val.token;\n\t\t\ttempVal = val.class_or_confidence;\n\t\t}\n\t}\n\n\tif (tempStr !== null) {\n\t\tresult.push({\n\t\t\ttoken: tempStr,\n\t\t\tclass_or_confidence: tempVal\n\t\t});\n\t}\n\n\treturn result;\n}\n"],"names":[],"mappings":"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"}