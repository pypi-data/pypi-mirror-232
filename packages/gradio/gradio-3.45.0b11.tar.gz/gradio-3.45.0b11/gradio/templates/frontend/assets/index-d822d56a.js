import{a as oe,i as ie,s as ce,e as v,b,d as m,n as W,h as g,H as fe,U as y,y as B,W as G,t as C,f as z,g as M,J as q,O as _e,G as U,c as H,Y as A,j as S,m as T,k as w,l as p,o as E,v as re,S as ue,z as de,A as me,B as Y,C as F}from"./index-f13fbdb7.js";import{g as ge}from"./color-e9da42c4.js";import{B as he}from"./Button-adfd279c.js";import{c as be,m as ke,T as ae}from"./utils-2c8464fa.js";import{B as ve}from"./BlockLabel-2fb075cd.js";import{E as we}from"./Empty-650870ff.js";function K(n,l,t){const e=n.slice();e[17]=l[t];const o=typeof e[17].class_or_confidence=="string"?parseInt(e[17].class_or_confidence):e[17].class_or_confidence;return e[26]=o,e}function P(n,l,t){const e=n.slice();return e[17]=l[t],e[19]=t,e}function Q(n,l,t){const e=n.slice();return e[20]=l[t],e[22]=t,e}function R(n,l,t){const e=n.slice();return e[23]=l[t][0],e[24]=l[t][1],e[19]=t,e}function pe(n){let l,t,e=n[1]&&V(),o=y(n[0]),i=[];for(let s=0;s<o.length;s+=1)i[s]=X(K(n,o,s));return{c(){e&&e.c(),l=B(),t=v("div");for(let s=0;s<i.length;s+=1)i[s].c();b(t,"class","textfield svelte-ju12zg"),b(t,"data-testid","highlighted-text:textfield")},m(s,a){e&&e.m(s,a),m(s,l,a),m(s,t,a);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(t,null)},p(s,a){if(s[1]?e||(e=V(),e.c(),e.m(l.parentNode,l)):e&&(e.d(1),e=null),a&1){o=y(s[0]);let c;for(c=0;c<o.length;c+=1){const u=K(s,o,c);i[c]?i[c].p(u,a):(i[c]=X(u),i[c].c(),i[c].m(t,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=o.length}},d(s){s&&(g(l),g(t)),e&&e.d(s),G(i,s)}}}function je(n){let l,t,e=n[1]&&Z(n),o=y(n[0]),i=[];for(let s=0;s<o.length;s+=1)i[s]=te(P(n,o,s));return{c(){e&&e.c(),l=B(),t=v("div");for(let s=0;s<i.length;s+=1)i[s].c();b(t,"class","textfield svelte-ju12zg")},m(s,a){e&&e.m(s,a),m(s,l,a),m(s,t,a);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(t,null)},p(s,a){if(s[1]?e?e.p(s,a):(e=Z(s),e.c(),e.m(l.parentNode,l)):e&&(e.d(1),e=null),a&111){o=y(s[0]);let c;for(c=0;c<o.length;c+=1){const u=P(s,o,c);i[c]?i[c].p(u,a):(i[c]=te(u),i[c].c(),i[c].m(t,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=o.length}},d(s){s&&(g(l),g(t)),e&&e.d(s),G(i,s)}}}function V(n){let l;return{c(){l=v("div"),l.innerHTML="<span>-1</span> <span>0</span> <span>+1</span>",b(l,"class","color-legend svelte-ju12zg"),b(l,"data-testid","highlighted-text:color-legend")},m(t,e){m(t,l,e)},d(t){t&&g(l)}}}function X(n){let l,t,e=n[17].token+"",o,i,s;return{c(){l=v("span"),t=v("span"),o=C(e),i=B(),b(t,"class","text svelte-ju12zg"),b(l,"class","textspan score-text svelte-ju12zg"),b(l,"style",s="background-color: rgba("+(n[26]&&n[26]<0?"128, 90, 213,"+-n[26]:"239, 68, 60,"+n[26])+")")},m(a,c){m(a,l,c),z(l,t),z(t,o),z(l,i)},p(a,c){c&1&&e!==(e=a[17].token+"")&&M(o,e),c&1&&s!==(s="background-color: rgba("+(a[26]&&a[26]<0?"128, 90, 213,"+-a[26]:"239, 68, 60,"+a[26])+")")&&b(l,"style",s)},d(a){a&&g(l)}}}function Z(n){let l,t=y(Object.entries(n[5])),e=[];for(let o=0;o<t.length;o+=1)e[o]=x(R(n,t,o));return{c(){l=v("div");for(let o=0;o<e.length;o+=1)e[o].c();b(l,"class","category-legend svelte-ju12zg"),b(l,"data-testid","highlighted-text:category-legend")},m(o,i){m(o,l,i);for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(l,null)},p(o,i){if(i&416){t=y(Object.entries(o[5]));let s;for(s=0;s<t.length;s+=1){const a=R(o,t,s);e[s]?e[s].p(a,i):(e[s]=x(a),e[s].c(),e[s].m(l,null))}for(;s<e.length;s+=1)e[s].d(1);e.length=t.length}},d(o){o&&g(l),G(e,o)}}}function x(n){let l,t=n[23]+"",e,o,i,s;function a(){return n[10](n[23])}function c(){return n[11](n[23])}return{c(){l=v("div"),e=C(t),o=B(),b(l,"class","category-label svelte-ju12zg"),b(l,"style","background-color:"+n[24].secondary)},m(u,r){m(u,l,r),z(l,e),z(l,o),i||(s=[q(l,"mouseover",a),q(l,"focus",c),q(l,"mouseout",n[12]),q(l,"blur",n[13])],i=!0)},p(u,r){n=u},d(u){u&&g(l),i=!1,_e(s)}}}function $(n){let l,t,e=n[20]+"",o,i,s,a,c=!n[1]&&n[17].class_or_confidence!==null&&ee(n);function u(){return n[14](n[19],n[17])}return{c(){l=v("span"),t=v("span"),o=C(e),i=B(),c&&c.c(),b(t,"class","text svelte-ju12zg"),H(t,"no-label",n[17].class_or_confidence===null||!n[5][n[17].class_or_confidence]),b(l,"class","textspan svelte-ju12zg"),H(l,"no-cat",n[17].class_or_confidence===null||n[3]&&n[3]!==n[17].class_or_confidence),H(l,"hl",n[17].class_or_confidence!==null),H(l,"selectable",n[2]),A(l,"background-color",n[17].class_or_confidence===null||n[3]&&n[3]!==n[17].class_or_confidence?"":n[5][n[17].class_or_confidence].secondary)},m(r,h){m(r,l,h),z(l,t),z(t,o),z(l,i),c&&c.m(l,null),s||(a=q(l,"click",u),s=!0)},p(r,h){n=r,h&1&&e!==(e=n[20]+"")&&M(o,e),h&33&&H(t,"no-label",n[17].class_or_confidence===null||!n[5][n[17].class_or_confidence]),!n[1]&&n[17].class_or_confidence!==null?c?c.p(n,h):(c=ee(n),c.c(),c.m(l,null)):c&&(c.d(1),c=null),h&9&&H(l,"no-cat",n[17].class_or_confidence===null||n[3]&&n[3]!==n[17].class_or_confidence),h&1&&H(l,"hl",n[17].class_or_confidence!==null),h&4&&H(l,"selectable",n[2]),h&9&&A(l,"background-color",n[17].class_or_confidence===null||n[3]&&n[3]!==n[17].class_or_confidence?"":n[5][n[17].class_or_confidence].secondary)},d(r){r&&g(l),c&&c.d(),s=!1,a()}}}function ee(n){let l,t,e=n[17].class_or_confidence+"",o;return{c(){l=C(`Â 
								`),t=v("span"),o=C(e),b(t,"class","label svelte-ju12zg"),A(t,"background-color",n[17].class_or_confidence===null||n[3]&&n[3]!==n[17].class_or_confidence?"":n[5][n[17].class_or_confidence].primary)},m(i,s){m(i,l,s),m(i,t,s),z(t,o)},p(i,s){s&1&&e!==(e=i[17].class_or_confidence+"")&&M(o,e),s&9&&A(t,"background-color",i[17].class_or_confidence===null||i[3]&&i[3]!==i[17].class_or_confidence?"":i[5][i[17].class_or_confidence].primary)},d(i){i&&(g(l),g(t))}}}function le(n){let l;return{c(){l=v("br")},m(t,e){m(t,l,e)},d(t){t&&g(l)}}}function ne(n){let l=n[20].trim()!=="",t,e=n[22]<D(n[17].token).length-1,o,i=l&&$(n),s=e&&le();return{c(){i&&i.c(),t=B(),s&&s.c(),o=U()},m(a,c){i&&i.m(a,c),m(a,t,c),s&&s.m(a,c),m(a,o,c)},p(a,c){c&1&&(l=a[20].trim()!==""),l?i?i.p(a,c):(i=$(a),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c&1&&(e=a[22]<D(a[17].token).length-1),e?s||(s=le(),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},d(a){a&&(g(t),g(o)),i&&i.d(a),s&&s.d(a)}}}function te(n){let l,t=y(D(n[17].token)),e=[];for(let o=0;o<t.length;o+=1)e[o]=ne(Q(n,t,o));return{c(){for(let o=0;o<e.length;o+=1)e[o].c();l=U()},m(o,i){for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(o,i);m(o,l,i)},p(o,i){if(i&111){t=y(D(o[17].token));let s;for(s=0;s<t.length;s+=1){const a=Q(o,t,s);e[s]?e[s].p(a,i):(e[s]=ne(a),e[s].c(),e[s].m(l.parentNode,l))}for(;s<e.length;s+=1)e[s].d(1);e.length=t.length}},d(o){o&&g(l),G(e,o)}}}function ze(n){let l;function t(i,s){return i[4]==="categories"?je:pe}let e=t(n),o=e(n);return{c(){l=v("div"),o.c(),b(l,"class","container svelte-ju12zg")},m(i,s){m(i,l,s),o.m(l,null)},p(i,[s]){e===(e=t(i))&&o?o.p(i,s):(o.d(1),o=e(i),o&&(o.c(),o.m(l,null)))},i:W,o:W,d(i){i&&g(l),o.d()}}}function D(n){return n.split(`
`)}function Ne(n,l,t){const e=typeof document<"u";let{value:o=[]}=l,{show_legend:i=!1}=l,{color_map:s={}}=l,{selectable:a=!1}=l,c,u={},r="";const h=fe();let k;function j(f){t(3,r=f)}function _(){t(3,r="")}const d=f=>j(f),O=f=>j(f),N=()=>_(),I=()=>_(),J=(f,L)=>{h("select",{index:f,value:[L.token,L.class_or_confidence]})};return n.$$set=f=>{"value"in f&&t(0,o=f.value),"show_legend"in f&&t(1,i=f.show_legend),"color_map"in f&&t(9,s=f.color_map),"selectable"in f&&t(2,a=f.selectable)},n.$$.update=()=>{if(n.$$.dirty&513){if(s||t(9,s={}),o.length>0){for(let f of o)if(f.class_or_confidence!==null)if(typeof f.class_or_confidence=="string"){if(t(4,k="categories"),!(f.class_or_confidence in s)){let L=ge(Object.keys(s).length);t(9,s[f.class_or_confidence]=L,s)}}else t(4,k="scores")}be(s,u,e,c)}},[o,i,a,r,k,u,h,j,_,s,d,O,N,I,J]}class He extends oe{constructor(l){super(),ie(this,l,Ne,ze,ce,{value:0,show_legend:1,color_map:9,selectable:2})}}function se(n){let l,t;return l=new ve({props:{Icon:ae,label:n[7],float:!1,disable:n[8]===!1}}),{c(){S(l.$$.fragment)},m(e,o){T(l,e,o),t=!0},p(e,o){const i={};o&128&&(i.label=e[7]),o&256&&(i.disable=e[8]===!1),l.$set(i)},i(e){t||(w(l.$$.fragment,e),t=!0)},o(e){p(l.$$.fragment,e),t=!1},d(e){E(l,e)}}}function ye(n){let l,t;return l=new we({props:{$$slots:{default:[Oe]},$$scope:{ctx:n}}}),{c(){S(l.$$.fragment)},m(e,o){T(l,e,o),t=!0},p(e,o){const i={};o&131072&&(i.$$scope={dirty:o,ctx:e}),l.$set(i)},i(e){t||(w(l.$$.fragment,e),t=!0)},o(e){p(l.$$.fragment,e),t=!1},d(e){E(l,e)}}}function Be(n){let l,t;return l=new He({props:{selectable:n[11],value:n[0],show_legend:n[6],color_map:n[1]}}),l.$on("select",n[16]),{c(){S(l.$$.fragment)},m(e,o){T(l,e,o),t=!0},p(e,o){const i={};o&2048&&(i.selectable=e[11]),o&1&&(i.value=e[0]),o&64&&(i.show_legend=e[6]),o&2&&(i.color_map=e[1]),l.$set(i)},i(e){t||(w(l.$$.fragment,e),t=!0)},o(e){p(l.$$.fragment,e),t=!1},d(e){E(l,e)}}}function Oe(n){let l,t;return l=new ae({}),{c(){S(l.$$.fragment)},m(e,o){T(l,e,o),t=!0},i(e){t||(w(l.$$.fragment,e),t=!0)},o(e){p(l.$$.fragment,e),t=!1},d(e){E(l,e)}}}function Se(n){let l,t,e,o,i,s,a;const c=[{autoscroll:n[2].autoscroll},{i18n:n[2].i18n},n[13]];let u={};for(let _=0;_<c.length;_+=1)u=re(u,c[_]);l=new ue({props:u});let r=n[7]&&se(n);const h=[Be,ye],k=[];function j(_,d){return _[0]?0:1}return o=j(n),i=k[o]=h[o](n),{c(){S(l.$$.fragment),t=B(),r&&r.c(),e=B(),i.c(),s=U()},m(_,d){T(l,_,d),m(_,t,d),r&&r.m(_,d),m(_,e,d),k[o].m(_,d),m(_,s,d),a=!0},p(_,d){const O=d&8196?de(c,[d&4&&{autoscroll:_[2].autoscroll},d&4&&{i18n:_[2].i18n},d&8192&&me(_[13])]):{};l.$set(O),_[7]?r?(r.p(_,d),d&128&&w(r,1)):(r=se(_),r.c(),w(r,1),r.m(e.parentNode,e)):r&&(Y(),p(r,1,1,()=>{r=null}),F());let N=o;o=j(_),o===N?k[o].p(_,d):(Y(),p(k[N],1,1,()=>{k[N]=null}),F(),i=k[o],i?i.p(_,d):(i=k[o]=h[o](_),i.c()),w(i,1),i.m(s.parentNode,s))},i(_){a||(w(l.$$.fragment,_),w(r),w(i),a=!0)},o(_){p(l.$$.fragment,_),p(r),p(i),a=!1},d(_){_&&(g(t),g(e),g(s)),E(l,_),r&&r.d(_),k[o].d(_)}}}function Te(n){let l,t;return l=new he({props:{variant:n[12]==="interactive"?"dashed":"solid",test_id:"highlighted-text",visible:n[5],elem_id:n[3],elem_classes:n[4],padding:!1,container:n[8],scale:n[9],min_width:n[10],$$slots:{default:[Se]},$$scope:{ctx:n}}}),{c(){S(l.$$.fragment)},m(e,o){T(l,e,o),t=!0},p(e,[o]){const i={};o&4096&&(i.variant=e[12]==="interactive"?"dashed":"solid"),o&32&&(i.visible=e[5]),o&8&&(i.elem_id=e[3]),o&16&&(i.elem_classes=e[4]),o&256&&(i.container=e[8]),o&512&&(i.scale=e[9]),o&1024&&(i.min_width=e[10]),o&141767&&(i.$$scope={dirty:o,ctx:e}),l.$set(i)},i(e){t||(w(l.$$.fragment,e),t=!0)},o(e){p(l.$$.fragment,e),t=!1},d(e){E(l,e)}}}function Ee(n,l,t){let{gradio:e}=l,{elem_id:o=""}=l,{elem_classes:i=[]}=l,{visible:s=!0}=l,{value:a}=l,c,{show_legend:u}=l,{color_map:r={}}=l,{label:h=e.i18n("highlighted_text.highlighted_text")}=l,{container:k=!0}=l,{scale:j=null}=l,{min_width:_=void 0}=l,{selectable:d=!1}=l,{combine_adjacent:O=!1}=l,{mode:N}=l,{loading_status:I}=l;const J=({detail:f})=>e.dispatch("select",f);return n.$$set=f=>{"gradio"in f&&t(2,e=f.gradio),"elem_id"in f&&t(3,o=f.elem_id),"elem_classes"in f&&t(4,i=f.elem_classes),"visible"in f&&t(5,s=f.visible),"value"in f&&t(0,a=f.value),"show_legend"in f&&t(6,u=f.show_legend),"color_map"in f&&t(1,r=f.color_map),"label"in f&&t(7,h=f.label),"container"in f&&t(8,k=f.container),"scale"in f&&t(9,j=f.scale),"min_width"in f&&t(10,_=f.min_width),"selectable"in f&&t(11,d=f.selectable),"combine_adjacent"in f&&t(14,O=f.combine_adjacent),"mode"in f&&t(12,N=f.mode),"loading_status"in f&&t(13,I=f.loading_status)},n.$$.update=()=>{n.$$.dirty&2&&!r&&Object.keys(r).length&&t(1,r),n.$$.dirty&16385&&a&&O&&t(0,a=ke(a,"equal")),n.$$.dirty&32773&&a!==c&&(t(15,c=a),e.dispatch("change"))},[a,r,e,o,i,s,u,h,k,j,_,d,N,I,O,c,J]}class qe extends oe{constructor(l){super(),ie(this,l,Ee,Te,ce,{gradio:2,elem_id:3,elem_classes:4,visible:5,value:0,show_legend:6,color_map:1,label:7,container:8,scale:9,min_width:10,selectable:11,combine_adjacent:14,mode:12,loading_status:13})}}const Je=qe;export{Je as default};
//# sourceMappingURL=index-d822d56a.js.map
