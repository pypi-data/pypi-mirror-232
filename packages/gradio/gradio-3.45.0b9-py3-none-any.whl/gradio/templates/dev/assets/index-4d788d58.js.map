{"version":3,"file":"index-4d788d58.js","sources":["../../../../js/audio/static/AudioPlayer.svelte","../../../../js/audio/static/StaticAudio.svelte"],"sourcesContent":["<script context=\"module\" lang=\"ts\">\n\timport type { FileData } from \"@gradio/upload\";\n\timport { Empty } from \"@gradio/atoms\";\n\n\texport interface AudioData extends FileData {\n\t\tcrop_min?: number;\n\t\tcrop_max?: number;\n\t}\n</script>\n\n<script lang=\"ts\">\n\timport { createEventDispatcher, tick } from \"svelte\";\n\timport { uploadToHuggingFace } from \"@gradio/utils\";\n\timport { BlockLabel, ShareButton, IconButton } from \"@gradio/atoms\";\n\timport { Music, Download } from \"@gradio/icons\";\n\n\timport { loaded } from \"../shared/utils\";\n\timport type { I18nFormatter } from \"js/app/src/gradio_helper\";\n\n\texport let value: null | { name: string; data: string } = null;\n\texport let label: string;\n\texport let name: string;\n\texport let show_label = true;\n\texport let autoplay: boolean;\n\texport let show_download_button = true;\n\texport let show_share_button = false;\n\n\tconst dispatch = createEventDispatcher<{\n\t\tchange: AudioData;\n\t\tplay: undefined;\n\t\tpause: undefined;\n\t\tend: undefined;\n\t\tstop: undefined;\n\t}>();\n\n\t$: value &&\n\t\tdispatch(\"change\", {\n\t\t\tname: name,\n\t\t\tdata: value?.data\n\t\t});\n\n\tfunction handle_ended(): void {\n\t\tdispatch(\"stop\");\n\t\tdispatch(\"end\");\n\t}\n\n\texport let i18n: I18nFormatter;\n</script>\n\n<BlockLabel\n\t{show_label}\n\tIcon={Music}\n\tfloat={false}\n\tlabel={label || i18n(\"audio.audio\")}\n/>\n{#if value !== null}\n\t<div class=\"icon-buttons\">\n\t\t{#if show_download_button}\n\t\t\t<a\n\t\t\t\thref={value.data}\n\t\t\t\ttarget={window.__is_colab__ ? \"_blank\" : null}\n\t\t\t\tdownload={value.name}\n\t\t\t>\n\t\t\t\t<IconButton Icon={Download} label={i18n(\"common.download\")} />\n\t\t\t</a>\n\t\t{/if}\n\t\t{#if show_share_button}\n\t\t\t<ShareButton\n\t\t\t\t{i18n}\n\t\t\t\ton:error\n\t\t\t\ton:share\n\t\t\t\tformatter={async (value) => {\n\t\t\t\t\tif (!value) return \"\";\n\t\t\t\t\tlet url = await uploadToHuggingFace(value.data, \"url\");\n\t\t\t\t\treturn `<audio controls src=\"${url}\"></audio>`;\n\t\t\t\t}}\n\t\t\t\t{value}\n\t\t\t/>\n\t\t{/if}\n\t</div>\n{/if}\n\n{#if value === null}\n\t<Empty size=\"small\">\n\t\t<Music />\n\t</Empty>\n{:else}\n\t<audio\n\t\tuse:loaded={{ autoplay }}\n\t\tcontrols\n\t\tpreload=\"metadata\"\n\t\tsrc={value?.data}\n\t\ton:play\n\t\ton:pause\n\t\ton:ended={handle_ended}\n\t\tdata-testid={`${label}-audio`}\n\t/>\n{/if}\n\n<style>\n\taudio {\n\t\tpadding: var(--size-2);\n\t\twidth: var(--size-full);\n\t\theight: var(--size-14);\n\t}\n\t.icon-buttons {\n\t\tdisplay: flex;\n\t\tposition: absolute;\n\t\ttop: 6px;\n\t\tright: 6px;\n\t\tgap: var(--size-1);\n\t}\n</style>\n","<svelte:options accessors={true} />\n\n<script lang=\"ts\">\n\timport type { Gradio, ShareData } from \"@gradio/utils\";\n\n\timport type { FileData } from \"@gradio/upload\";\n\timport type { LoadingStatus } from \"@gradio/statustracker\";\n\n\timport StaticAudio from \"./AudioPlayer.svelte\";\n\timport { StatusTracker } from \"@gradio/statustracker\";\n\timport { Block } from \"@gradio/atoms\";\n\n\timport { normalise_file } from \"@gradio/upload\";\n\n\texport let elem_id = \"\";\n\texport let elem_classes: string[] = [];\n\texport let visible = true;\n\texport let mode: \"static\" | \"interactive\";\n\texport let value: null | FileData | string = null;\n\texport let source: \"microphone\" | \"upload\";\n\texport let label: string;\n\texport let root: string;\n\texport let show_label: boolean;\n\texport let root_url: null | string;\n\texport let container = true;\n\texport let scale: number | null = null;\n\texport let min_width: number | undefined = undefined;\n\texport let loading_status: LoadingStatus;\n\texport let autoplay = false;\n\texport let show_download_button = true;\n\texport let show_share_button = false;\n\texport let gradio: Gradio<{\n\t\tchange: typeof value;\n\t\tshare: ShareData;\n\t\terror: string;\n\t}>;\n\n\tlet old_value: null | FileData | string = null;\n\n\tlet _value: null | FileData;\n\t$: _value = normalise_file(value, root, root_url);\n\n\t$: {\n\t\tif (JSON.stringify(value) !== JSON.stringify(old_value)) {\n\t\t\told_value = value;\n\t\t\tgradio.dispatch(\"change\");\n\t\t}\n\t}\n\n\tlet dragging: boolean;\n</script>\n\n<Block\n\tvariant={mode === \"interactive\" && value === null && source === \"upload\"\n\t\t? \"dashed\"\n\t\t: \"solid\"}\n\tborder_mode={dragging ? \"focus\" : \"base\"}\n\tpadding={false}\n\t{elem_id}\n\t{elem_classes}\n\t{visible}\n\t{container}\n\t{scale}\n\t{min_width}\n>\n\t<StatusTracker\n\t\tautoscroll={gradio.autoscroll}\n\t\ti18n={gradio.i18n}\n\t\t{...loading_status}\n\t/>\n\n\t<StaticAudio\n\t\ti18n={gradio.i18n}\n\t\t{autoplay}\n\t\t{show_label}\n\t\t{show_download_button}\n\t\t{show_share_button}\n\t\tvalue={_value}\n\t\tname={_value?.name || \"audio_file\"}\n\t\t{label}\n\t\ton:share={(e) => gradio.dispatch(\"share\", e.detail)}\n\t\ton:error={(e) => gradio.dispatch(\"error\", e.detail)}\n\t/>\n</Block>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;0CAyDO,GAAoB,CAAA,CAAA,CAAA,IAAA,iBAAA,CAAA,GAAA,CAAA,CAAA;uCASpB,GAAiB,CAAA,CAAA,CAAA,IAAA,iBAAA,CAAA,GAAA,CAAA,CAAA;;;;;;;;;;;;GAVvB,UAuBK,CAAA,MAAA,EAAA,GAAA,EAAA,MAAA,CAAA,CAAA;;;;;;;gCAtBC,GAAoB,CAAA,CAAA,CAAA,EAAA;;;;;;;;;;;;;;;;;;;;;;;6BASpB,GAAiB,CAAA,CAAA,CAAA,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UAHF,QAAQ;AAAS,IAAA,KAAA,WAAA,GAAI,IAAC,iBAAiB,CAAA;;;;;;;;;AAJnD,GAAA,QAAA,CAAA,CAAA,EAAA,MAAA,EAAA,YAAA,aAAA,GAAK,IAAC,IAAI,CAAA,CAAA;AACR,GAAA,QAAA,CAAA,CAAA,EAAA,QAAA,EAAA,MAAM,CAAC,YAAY,GAAG,QAAQ,GAAG,IAAI,CAAA,CAAA;AACnC,GAAA,QAAA,CAAA,CAAA,EAAA,UAAA,EAAA,gBAAA,aAAA,GAAK,IAAC,IAAI,CAAA,CAAA;;;;GAHrB,UAMG,CAAA,MAAA,EAAA,CAAA,EAAA,MAAA,CAAA,CAAA;;;;;;AADiC,GAAA,IAAA,KAAA,YAAA,EAAA,EAAA,kBAAA,CAAA,KAAA,YAAA,GAAI,IAAC,iBAAiB,CAAA,CAAA;;;AAJnD,GAAA,IAAA,CAAA,OAAA,IAAA,KAAA,aAAA,CAAA,IAAA,YAAA,MAAA,YAAA,aAAA,GAAK,IAAC,IAAI,CAAA,EAAA;;;;AAEN,GAAA,IAAA,CAAA,OAAA,IAAA,KAAA,aAAA,CAAA,IAAA,gBAAA,MAAA,gBAAA,aAAA,GAAK,IAAC,IAAI,CAAA,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BjB,GAAA,IAAA,CAAA,aAAA,CAAA,KAAA,CAAA,GAAA,EAAA,eAAA,aAAA,GAAK,KAAE,IAAI,CAAA,EAAA,QAAA,CAAA,KAAA,EAAA,KAAA,EAAA,eAAA,CAAA,CAAA;yEAIA,GAAK,CAAA,CAAA,CAAA,CAAA,MAAA,CAAA,CAAA,CAAA;;;;;GARtB,UASC,CAAA,MAAA,EAAA,KAAA,EAAA,MAAA,CAAA,CAAA;;;;AARc,KAAA,gBAAA,CAAA,aAAA,GAAA,MAAA,CAAA,IAAA,CAAA,IAAA,EAAA,KAAA,EAAA,EAAA,QAAQ,eAAR,GAAQ,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA;;;iDAMZ,GAAY,CAAA,CAAA,CAAA,EAAA,KAAA,EAAA,KAAA,EAAA,KAAA,EAAA,KAAA,CAAA;;;;;;;AAHjB,GAAA,IAAA,KAAA,aAAA,CAAA,IAAA,CAAA,aAAA,CAAA,KAAA,CAAA,GAAA,EAAA,eAAA,aAAA,GAAK,KAAE,IAAI,CAAA,EAAA;;;;kGAIA,GAAK,CAAA,CAAA,CAAA,CAAA,MAAA,CAAA,CAAA,EAAA;;;;AAPP,GAAA,IAAA,aAAA,IAAA,WAAA,CAAA,aAAA,CAAA,MAAA,CAAA,IAAA,KAAA,gBAAA,CAAA,EAAA,aAAA,CAAA,MAAA,CAAA,IAAA,CAAA,IAAA,EAAA,EAAA,QAAQ,eAAR,GAAQ,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UArCjB,KAAK;WACJ,KAAK;qBACL,GAAK,CAAA,CAAA,CAAA,aAAI,GAAI,CAAA,CAAA,CAAA,CAAC,aAAa,CAAA;;;;;AAE9B,CAAA,IAAA,SAAA,aAAA,GAAK,QAAK,IAAI,IAAA,iBAAA,CAAA,GAAA,CAAA,CAAA;;;;;AA2Bd,EAAA,cAAA,GAAK,QAAK,IAAI,EAAA,OAAA,CAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;wEA7BX,GAAK,CAAA,CAAA,CAAA,aAAI,GAAI,CAAA,CAAA,CAAA,CAAC,aAAa,CAAA,CAAA;;;AAE9B,GAAA,cAAA,GAAK,QAAK,IAAI,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AApCP,CAAA,IAAA,EAAA,KAAK,GAA0C,IAAI,EAAA,GAAA,OAAA,CAAA;OACnD,KAAa,EAAA,GAAA,OAAA,CAAA;OACb,IAAY,EAAA,GAAA,OAAA,CAAA;AACZ,CAAA,IAAA,EAAA,UAAU,GAAG,IAAI,EAAA,GAAA,OAAA,CAAA;OACjB,QAAiB,EAAA,GAAA,OAAA,CAAA;AACjB,CAAA,IAAA,EAAA,oBAAoB,GAAG,IAAI,EAAA,GAAA,OAAA,CAAA;AAC3B,CAAA,IAAA,EAAA,iBAAiB,GAAG,KAAK,EAAA,GAAA,OAAA,CAAA;AAE9B,CAAA,MAAA,QAAQ,GAAG,qBAAqB,EAAA,CAAA;;UAc7B,YAAY,GAAA;AACpB,EAAA,QAAQ,CAAC,MAAM,CAAA,CAAA;AACf,EAAA,QAAQ,CAAC,KAAK,CAAA,CAAA;;;OAGJ,IAAmB,EAAA,GAAA,OAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oBAyBT,KAAK,IAAA;AACjB,EAAA,IAAA,CAAA,KAAK,SAAS,EAAE,CAAA;AACjB,EAAA,IAAA,GAAG,SAAS,mBAAmB,CAAC,KAAK,CAAC,IAAI,EAAE,KAAK,CAAA,CAAA;iCACtB,GAAG,CAAA,UAAA,CAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAvCtC,GAAG,KAAK,IACP,QAAQ,CAAC,QAAQ,EACV,EAAA,IAAI,EACV,IAAI,EAAE,KAAK,EAAE,IAAA,EAAA,CAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC4BF,GAAA,UAAA,aAAA,GAAM,KAAC,UAAU;;AACvB,EAAA,EAAA,IAAA,aAAA,GAAM,KAAC,IAAI,EAAA;qBACb,GAAc,CAAA,EAAA,CAAA;;;;;;;;;;;;;;;;AAIZ,IAAA,IAAA,aAAA,GAAM,KAAC,IAAI;;;;;sBAKV,GAAM,CAAA,EAAA,CAAA;qBACP,GAAM,CAAA,EAAA,CAAA,EAAE,IAAI,IAAI,YAAY;;;;;;;;;;;;;;;;;;;;;;;;;AAZtB,MAAA,UAAA,aAAA,GAAM,KAAC,UAAU;;AACvB,KAAA,KAAA,cAAA,KAAA,IAAA,EAAA,IAAA,aAAA,GAAM,KAAC,IAAI,EAAA;6EACb,GAAc,CAAA,EAAA,CAAA,CAAA;;;;;;AAIZ,GAAA,IAAA,KAAA,cAAA,KAAA,EAAA,mBAAA,CAAA,IAAA,cAAA,GAAM,KAAC,IAAI,CAAA;;;;;wEAKV,GAAM,CAAA,EAAA,CAAA,CAAA;uEACP,GAAM,CAAA,EAAA,CAAA,EAAE,IAAI,IAAI,YAAY,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sBAzB1B,GAAI,CAAA,CAAA,CAAA,KAAK,aAAa,cAAI,GAAK,QAAK,IAAI,eAAI,GAAM,CAAA,CAAA,CAAA,KAAK,QAAO;MACpE,QAAO;MACP,OAAO;8BACG,GAAQ,CAAA,EAAA,CAAA,GAAG,OAAO,GAAG,MAAM;aAC/B,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;4EAJL,GAAI,CAAA,CAAA,CAAA,KAAK,aAAa,cAAI,GAAK,QAAK,IAAI,eAAI,GAAM,CAAA,CAAA,CAAA,KAAK,QAAO;KACpE,QAAO;KACP,OAAO,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAzCC,CAAA,IAAA,EAAA,OAAO,GAAG,EAAE,EAAA,GAAA,OAAA,CAAA;OACZ,YAAY,GAAA,EAAA,EAAA,GAAA,OAAA,CAAA;AACZ,CAAA,IAAA,EAAA,OAAO,GAAG,IAAI,EAAA,GAAA,OAAA,CAAA;OACd,IAA8B,EAAA,GAAA,OAAA,CAAA;AAC9B,CAAA,IAAA,EAAA,KAAK,GAA6B,IAAI,EAAA,GAAA,OAAA,CAAA;OACtC,MAA+B,EAAA,GAAA,OAAA,CAAA;OAC/B,KAAa,EAAA,GAAA,OAAA,CAAA;OACb,IAAY,EAAA,GAAA,OAAA,CAAA;OACZ,UAAmB,EAAA,GAAA,OAAA,CAAA;OACnB,QAAuB,EAAA,GAAA,OAAA,CAAA;AACvB,CAAA,IAAA,EAAA,SAAS,GAAG,IAAI,EAAA,GAAA,OAAA,CAAA;AAChB,CAAA,IAAA,EAAA,KAAK,GAAkB,IAAI,EAAA,GAAA,OAAA,CAAA;AAC3B,CAAA,IAAA,EAAA,SAAS,GAAuB,SAAS,EAAA,GAAA,OAAA,CAAA;OACzC,cAA6B,EAAA,GAAA,OAAA,CAAA;AAC7B,CAAA,IAAA,EAAA,QAAQ,GAAG,KAAK,EAAA,GAAA,OAAA,CAAA;AAChB,CAAA,IAAA,EAAA,oBAAoB,GAAG,IAAI,EAAA,GAAA,OAAA,CAAA;AAC3B,CAAA,IAAA,EAAA,iBAAiB,GAAG,KAAK,EAAA,GAAA,OAAA,CAAA;OACzB,MAIT,EAAA,GAAA,OAAA,CAAA;AAEE,CAAA,IAAA,SAAS,GAA6B,IAAI,CAAA;KAE1C,MAAuB,CAAA;KAUvB,QAAiB,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uBA+BT,CAAC,IAAK,MAAM,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC,MAAM,CAAA,CAAA;uBACvC,CAAC,IAAK,MAAM,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC,MAAM,CAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAzClD,YAAA,CAAA,EAAA,EAAE,MAAM,GAAG,cAAc,CAAC,KAAK,EAAE,IAAI,EAAE,QAAQ,CAAA,CAAA,CAAA;;;;GAE/C;QACI,IAAI,CAAC,SAAS,CAAC,KAAK,MAAM,IAAI,CAAC,SAAS,CAAC,SAAS,CAAA,EAAA;AACrD,KAAA,YAAA,CAAA,EAAA,EAAA,SAAS,GAAG,KAAK,CAAA,CAAA;KACjB,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}