import{a as ae,i as ie,s as se,j as q,m as z,k as w,l as I,o as C,v as oe,S as ue,y as E,e as S,b,d,z as fe,A as _e,B as re,C as me,h as v,U as N,G as ce,V as O,c as M,f as U,n as K,W as p,t as ge,Y as P,J as j,g as he,O as be}from"./index-102c4cdd.js";import{B as de,n as Q}from"./Button-40f9d213.js";import{B as ve}from"./BlockLabel-4cfb0038.js";import{E as ke}from"./Empty-f49cd57d.js";import{I as x}from"./Image-983528b1.js";function R(n,e,t){const l=n.slice();return l[28]=e[t],l[30]=t,l}function T(n,e,t){const l=n.slice();return l[28]=e[t],l[30]=t,l}function we(n){let e,t,l,a,o,i,r=N(n[14]?n[14]?.annotations:[]),m=[];for(let u=0;u<r.length;u+=1)m[u]=X(T(n,r,u));let c=n[6]&&n[14]&&Z(n);return{c(){e=S("div"),t=S("img"),a=E();for(let u=0;u<m.length;u+=1)m[u].c();o=E(),c&&c.c(),i=ce(),b(t,"class","base-image svelte-m3v3vb"),O(t.src,l=n[14]?n[14].image.data:null)||b(t,"src",l),M(t,"fit-height",n[7]),b(e,"class","image-container svelte-m3v3vb")},m(u,g){d(u,e,g),U(e,t),U(e,a);for(let _=0;_<m.length;_+=1)m[_]&&m[_].m(e,null);d(u,o,g),c&&c.m(u,g),d(u,i,g)},p(u,g){if(g[0]&16384&&!O(t.src,l=u[14]?u[14].image.data:null)&&b(t,"src",l),g[0]&128&&M(t,"fit-height",u[7]),g[0]&49664){r=N(u[14]?u[14]?.annotations:[]);let _;for(_=0;_<r.length;_+=1){const k=T(u,r,_);m[_]?m[_].p(k,g):(m[_]=X(k),m[_].c(),m[_].m(e,null))}for(;_<m.length;_+=1)m[_].d(1);m.length=r.length}u[6]&&u[14]?c?c.p(u,g):(c=Z(u),c.c(),c.m(i.parentNode,i)):c&&(c.d(1),c=null)},i:K,o:K,d(u){u&&(v(e),v(o),v(i)),p(m,u),c&&c.d(u)}}}function Ie(n){let e,t;return e=new ke({props:{size:"large",unpadded_box:!0,$$slots:{default:[Be]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(l,a){z(e,l,a),t=!0},p(l,a){const o={};a[1]&2&&(o.$$scope={dirty:a,ctx:l}),e.$set(o)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){C(e,l)}}}function X(n){let e,t,l;return{c(){e=S("img"),b(e,"class","mask fit-height svelte-m3v3vb"),O(e.src,t=n[28].image.data)||b(e,"src",t),b(e,"style",l=n[9]&&n[28].label in n[9]?null:`filter: hue-rotate(${Math.round(n[30]*360/n[14]?.annotations.length)}deg);`),M(e,"active",n[15]==n[28].label),M(e,"inactive",n[15]!=n[28].label&&n[15]!=null)},m(a,o){d(a,e,o)},p(a,o){o[0]&16384&&!O(e.src,t=a[28].image.data)&&b(e,"src",t),o[0]&16896&&l!==(l=a[9]&&a[28].label in a[9]?null:`filter: hue-rotate(${Math.round(a[30]*360/a[14]?.annotations.length)}deg);`)&&b(e,"style",l),o[0]&49152&&M(e,"active",a[15]==a[28].label),o[0]&49152&&M(e,"inactive",a[15]!=a[28].label&&a[15]!=null)},d(a){a&&v(e)}}}function Z(n){let e,t=N(n[14].annotations),l=[];for(let a=0;a<t.length;a+=1)l[a]=y(R(n,t,a));return{c(){e=S("div");for(let a=0;a<l.length;a+=1)l[a].c();b(e,"class","legend svelte-m3v3vb")},m(a,o){d(a,e,o);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(a,o){if(o[0]&475648){t=N(a[14].annotations);let i;for(i=0;i<t.length;i+=1){const r=R(a,t,i);l[i]?l[i].p(r,o):(l[i]=y(r),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=t.length}},d(a){a&&v(e),p(l,a)}}}function y(n){let e,t=n[28].label+"",l,a,o,i;function r(){return n[23](n[28])}function m(){return n[24](n[28])}function c(){return n[27](n[30],n[28])}return{c(){e=S("div"),l=ge(t),a=E(),b(e,"class","legend-item svelte-m3v3vb"),P(e,"background-color",n[9]&&n[28].label in n[9]?n[9][n[28].label]+"88":`hsla(${Math.round(n[30]*360/n[14].annotations.length)}, 100%, 50%, 0.3)`)},m(u,g){d(u,e,g),U(e,l),U(e,a),o||(i=[j(e,"mouseover",r),j(e,"focus",m),j(e,"mouseout",n[25]),j(e,"blur",n[26]),j(e,"click",c)],o=!0)},p(u,g){n=u,g[0]&16384&&t!==(t=n[28].label+"")&&he(l,t),g[0]&16896&&P(e,"background-color",n[9]&&n[28].label in n[9]?n[9][n[28].label]+"88":`hsla(${Math.round(n[30]*360/n[14].annotations.length)}, 100%, 50%, 0.3)`)},d(u){u&&v(e),o=!1,be(i)}}}function Be(n){let e,t;return e=new x({}),{c(){q(e.$$.fragment)},m(l,a){z(e,l,a),t=!0},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){C(e,l)}}}function Ae(n){let e,t,l,a,o,i,r,m;const c=[{autoscroll:n[3].autoscroll},{i18n:n[3].i18n},n[13]];let u={};for(let f=0;f<c.length;f+=1)u=oe(u,c[f]);e=new ue({props:u}),l=new ve({props:{show_label:n[5],Icon:x,label:n[4]||n[3].i18n("image.image")}});const g=[Ie,we],_=[];function k(f,h){return f[14]==null?0:1}return i=k(n),r=_[i]=g[i](n),{c(){q(e.$$.fragment),t=E(),q(l.$$.fragment),a=E(),o=S("div"),r.c(),b(o,"class","container svelte-m3v3vb")},m(f,h){z(e,f,h),d(f,t,h),z(l,f,h),d(f,a,h),d(f,o,h),_[i].m(o,null),m=!0},p(f,h){const G=h[0]&8200?fe(c,[h[0]&8&&{autoscroll:f[3].autoscroll},h[0]&8&&{i18n:f[3].i18n},h[0]&8192&&_e(f[13])]):{};e.$set(G);const B={};h[0]&32&&(B.show_label=f[5]),h[0]&24&&(B.label=f[4]||f[3].i18n("image.image")),l.$set(B);let A=i;i=k(f),i===A?_[i].p(f,h):(re(),I(_[A],1,1,()=>{_[A]=null}),me(),r=_[i],r?r.p(f,h):(r=_[i]=g[i](f),r.c()),w(r,1),r.m(o,null))},i(f){m||(w(e.$$.fragment,f),w(l.$$.fragment,f),w(r),m=!0)},o(f){I(e.$$.fragment,f),I(l.$$.fragment,f),I(r),m=!1},d(f){f&&(v(t),v(a),v(o)),C(e,f),C(l,f),_[i].d()}}}function Me(n){let e,t;return e=new de({props:{visible:n[2],elem_id:n[0],elem_classes:n[1],padding:!1,height:n[7],width:n[8],allow_overflow:!1,container:n[10],scale:n[11],min_width:n[12],$$slots:{default:[Ae]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(l,a){z(e,l,a),t=!0},p(l,a){const o={};a[0]&4&&(o.visible=l[2]),a[0]&1&&(o.elem_id=l[0]),a[0]&2&&(o.elem_classes=l[1]),a[0]&128&&(o.height=l[7]),a[0]&256&&(o.width=l[8]),a[0]&1024&&(o.container=l[10]),a[0]&2048&&(o.scale=l[11]),a[0]&4096&&(o.min_width=l[12]),a[0]&58104|a[1]&2&&(o.$$scope={dirty:a,ctx:l}),e.$set(o)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){C(e,l)}}}function Se(n,e,t){let{elem_id:l=""}=e,{elem_classes:a=[]}=e,{visible:o=!0}=e,{value:i=null}=e,r=null,m=null,{gradio:c}=e,{label:u=c.i18n("annotated_image.annotated_image")}=e,{show_label:g=!0}=e,{show_legend:_=!0}=e,{height:k}=e,{width:f}=e,{color_map:h}=e,{container:G=!0}=e,{scale:B=null}=e,{min_width:A=void 0}=e,{root:J}=e,{root_url:L}=e,V=null,{loading_status:F}=e;function W(s){t(15,V=s)}function Y(){t(15,V=null)}function H(s,D){c.dispatch("select",{value:D,index:s})}const $=s=>W(s.label),ee=s=>W(s.label),le=()=>Y(),ne=()=>Y(),te=(s,D)=>H(s,D.label);return n.$$set=s=>{"elem_id"in s&&t(0,l=s.elem_id),"elem_classes"in s&&t(1,a=s.elem_classes),"visible"in s&&t(2,o=s.visible),"value"in s&&t(19,i=s.value),"gradio"in s&&t(3,c=s.gradio),"label"in s&&t(4,u=s.label),"show_label"in s&&t(5,g=s.show_label),"show_legend"in s&&t(6,_=s.show_legend),"height"in s&&t(7,k=s.height),"width"in s&&t(8,f=s.width),"color_map"in s&&t(9,h=s.color_map),"container"in s&&t(10,G=s.container),"scale"in s&&t(11,B=s.scale),"min_width"in s&&t(12,A=s.min_width),"root"in s&&t(20,J=s.root),"root_url"in s&&t(21,L=s.root_url),"loading_status"in s&&t(13,F=s.loading_status)},n.$$.update=()=>{n.$$.dirty[0]&7864328&&(i!==r&&(t(22,r=i),c.dispatch("change")),i!==null?t(14,m={image:Q(i.image,J,L),annotations:i.annotations.map(s=>({image:Q(s.image,J,L),label:s.label}))}):t(14,m=null))},[l,a,o,c,u,g,_,k,f,h,G,B,A,F,m,V,W,Y,H,i,J,L,r,$,ee,le,ne,te]}class je extends ae{constructor(e){super(),ie(this,e,Se,Me,se,{elem_id:0,elem_classes:1,visible:2,value:19,gradio:3,label:4,show_label:5,show_legend:6,height:7,width:8,color_map:9,container:10,scale:11,min_width:12,root:20,root_url:21,loading_status:13},null,[-1,-1])}}const Je=je;export{Je as default};
//# sourceMappingURL=index-464ac4ab.js.map
