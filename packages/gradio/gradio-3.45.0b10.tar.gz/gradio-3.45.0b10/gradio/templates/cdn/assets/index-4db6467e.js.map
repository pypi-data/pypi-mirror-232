{"version":3,"file":"index-4db6467e.js","sources":["../../../../js/image/static/ImagePreview.svelte","../../../../js/image/static/StaticImage.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { createEventDispatcher } from \"svelte\";\n\timport type { SelectData } from \"@gradio/utils\";\n\timport { uploadToHuggingFace } from \"@gradio/utils\";\n\timport { BlockLabel, Empty, IconButton, ShareButton } from \"@gradio/atoms\";\n\timport { Download } from \"@gradio/icons\";\n\timport { get_coordinates_of_clicked_image } from \"../shared/utils\";\n\n\timport { Image } from \"@gradio/icons\";\n\timport { type FileData, normalise_file } from \"@gradio/upload\";\n\timport type { I18nFormatter } from \"@gradio/utils\";\n\n\texport let value: null | FileData;\n\tlet value_: null | FileData;\n\texport let label: string | undefined = undefined;\n\texport let show_label: boolean;\n\texport let show_download_button = true;\n\texport let selectable = false;\n\texport let show_share_button = false;\n\texport let root: string;\n\texport let i18n: I18nFormatter;\n\n\tconst dispatch = createEventDispatcher<{\n\t\tchange: string;\n\t\tselect: SelectData;\n\t}>();\n\n\t$: value && dispatch(\"change\", value.data);\n\n\t$: if (value !== value_) {\n\t\tvalue_ = value;\n\t\tnormalise_file(value_, root, null);\n\t}\n\n\tconst handle_click = (evt: MouseEvent): void => {\n\t\tlet coordinates = get_coordinates_of_clicked_image(evt);\n\t\tif (coordinates) {\n\t\t\tdispatch(\"select\", { index: coordinates, value: null });\n\t\t}\n\t};\n</script>\n\n<BlockLabel {show_label} Icon={Image} label={label || i18n(\"image.image\")} />\n{#if value_ === null}\n\t<Empty unpadded_box={true} size=\"large\"><Image /></Empty>\n{:else}\n\t<div class=\"icon-buttons\">\n\t\t{#if show_download_button}\n\t\t\t<a\n\t\t\t\thref={value_.data}\n\t\t\t\ttarget={window.__is_colab__ ? \"_blank\" : null}\n\t\t\t\tdownload={\"image\"}\n\t\t\t>\n\t\t\t\t<IconButton Icon={Download} label={i18n(\"common.download\")} />\n\t\t\t</a>\n\t\t{/if}\n\t\t{#if show_share_button}\n\t\t\t<ShareButton\n\t\t\t\t{i18n}\n\t\t\t\ton:share\n\t\t\t\ton:error\n\t\t\t\tformatter={async (value) => {\n\t\t\t\t\tif (!value) return \"\";\n\t\t\t\t\tlet url = await uploadToHuggingFace(value, \"base64\");\n\t\t\t\t\treturn `<img src=\"${url}\" />`;\n\t\t\t\t}}\n\t\t\t\t{value}\n\t\t\t/>\n\t\t{/if}\n\t</div>\n\t<!-- TODO: fix -->\n\t<!-- svelte-ignore a11y-click-events-have-key-events -->\n\t<!-- svelte-ignore a11y-no-noninteractive-element-interactions-->\n\t<img src={value_.data} alt=\"\" class:selectable on:click={handle_click} loading=\"lazy\"/>\n{/if}\n\n<style>\n\timg {\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t\tobject-fit: contain;\n\t}\n\n\t.selectable {\n\t\tcursor: crosshair;\n\t}\n\n\t.icon-buttons {\n\t\tdisplay: flex;\n\t\tposition: absolute;\n\t\ttop: 6px;\n\t\tright: 6px;\n\t\tgap: var(--size-1);\n\t}\n</style>\n","<svelte:options accessors={true} />\n\n<script lang=\"ts\">\n\timport type { Gradio, SelectData } from \"@gradio/utils\";\n\timport StaticImage from \"./ImagePreview.svelte\";\n\n\timport { Block } from \"@gradio/atoms\";\n\n\timport { StatusTracker } from \"@gradio/statustracker\";\n\timport type { FileData } from \"js/upload/src\";\n\timport type { LoadingStatus } from \"@gradio/statustracker\";\n\n\texport let elem_id = \"\";\n\texport let elem_classes: string[] = [];\n\texport let visible = true;\n\texport let value: null | FileData = null;\n\texport let label: string;\n\texport let show_label: boolean;\n\texport let show_download_button: boolean;\n\texport let root: string;\n\n\texport let height: number | undefined;\n\texport let width: number | undefined;\n\n\texport let selectable = false;\n\texport let container = true;\n\texport let scale: number | null = null;\n\texport let min_width: number | undefined = undefined;\n\texport let loading_status: LoadingStatus;\n\texport let show_share_button = false;\n\texport let gradio: Gradio<{\n\t\tchange: never;\n\t\terror: string;\n\t\tselect: SelectData;\n\t\tshare: ShareData;\n\t}>;\n\n\t$: value, gradio.dispatch(\"change\");\n\tlet dragging: boolean;\n\n\t$: value = !value ? null : value;\n</script>\n\n<Block\n\t{visible}\n\tvariant={\"solid\"}\n\tborder_mode={dragging ? \"focus\" : \"base\"}\n\tpadding={false}\n\t{elem_id}\n\t{elem_classes}\n\theight={height || undefined}\n\t{width}\n\tallow_overflow={false}\n\t{container}\n\t{scale}\n\t{min_width}\n>\n\t<StatusTracker\n\t\tautoscroll={gradio.autoscroll}\n\t\ti18n={gradio.i18n}\n\t\t{...loading_status}\n\t/>\n\t<StaticImage\n\t\ton:select={({ detail }) => gradio.dispatch(\"select\", detail)}\n\t\ton:share={({ detail }) => gradio.dispatch(\"share\", detail)}\n\t\ton:error={({ detail }) => gradio.dispatch(\"error\", detail)}\n\t\t{root}\n\t\t{value}\n\t\t{label}\n\t\t{show_label}\n\t\t{show_download_button}\n\t\t{selectable}\n\t\t{show_share_button}\n\t\ti18n={gradio.i18n}\n\t/>\n</Block>\n"],"names":["ctx","create_if_block_2","create_if_block_1","src_url_equal","img","img_src_value","attr","insert","target","div","anchor","current","dirty","Download","a","a_href_value","iconbutton_changes","Image","value","$$props","value_","label","show_label","show_download_button","selectable","show_share_button","root","i18n","dispatch","createEventDispatcher","handle_click","evt","coordinates","get_coordinates_of_clicked_image","uploadToHuggingFace","$$invalidate","normalise_file","staticimage_changes","block_changes","elem_id","elem_classes","visible","height","width","container","scale","min_width","loading_status","gradio","dragging","select_handler","detail","share_handler","error_handler"],"mappings":"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"}