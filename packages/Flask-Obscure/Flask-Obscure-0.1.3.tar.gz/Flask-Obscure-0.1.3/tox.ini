# [tox]
# envlist = {py38,py39,py310,py311}-flask{10,12,latest}
# [testenv]
# deps=
#     obscure
#     flask10: flask==0.10
#     flask22: flask==2.2
#     latest: flask
#     pytest
#     coverage
#     pytest-cov
# commands=
#     coverage erase
#     python setup.py develop
#     py.test tests/ {posargs}
#
[tox]
envlist =
    py3{11,7}
    py311-min
    # style
    # docs
isolated_build = true
skip_missing_interpreters = true

[testenv]
# package = wheel
# wheel_build_env = .pkg
# constrain_package_deps = true
# use_frozen_constraints = true
usedevelop = True
deps =
    -r requirements/tests.txt
    min: flask==1.0
commands = pytest -v --tb=short --basetemp={envtmpdir} {posargs}

[testenv:style]
deps = pre-commit
skip_install = true
commands = pre-commit run --all-files

[testenv:docs]
deps = -r requirements/docs.txt
commands = sphinx-build -W -b html -d {envtmpdir}/doctrees docs {envtmpdir}/html
