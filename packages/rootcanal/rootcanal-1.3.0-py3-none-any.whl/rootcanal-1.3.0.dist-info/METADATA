Metadata-Version: 2.1
Name: rootcanal
Version: 1.3.0
Summary: Virtual Bluetooth controller
Project-URL: Homepage, https://github.com/google/rootcanal
Project-URL: Bug Tracker, https://github.com/google/rootcanal/issues
Maintainer-email: Henri Chataing <henrichataing@google.com>, David Duarte <licorne@google.com>
License: Apache-2.0
Keywords: Bluetooth,Controller,Emulation
Classifier: License :: OSI Approved :: Apache Software License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Requires-Python: >=3.10
Description-Content-Type: text/markdown

# RootCanal

Binding to the RootCanal controller implementation. Enables virtual testing
of Bluetooth applications directly in Python.

## Usage

```python
from rootcanal.controller import Controller
from rootcanal.bluetooth import Address
import hci_packets as hci
import llcp_packets as llcp
import lmp_packets as lmp
import ll_packets as ll

controller = Controller::new(Address("ca:fe:ca:fe:00:00"))

# Send HCI Reset to the controller and wait for the response.
controller.send_cmd(hci.Reset())
_ = await controller.expect_evt(hci.ResetCommplete)

# Enable page scan.
controller.send_cmd(hci.WriteScanEnable(scan_enable=hci.ScanEnable.PAGE_SCAN_ONLY))
_ = await controller.expect_evt(hci.WriteScanEnableComplete)

# Send classic connection request.
controller.send_ll(
    ll.Page(
        class_of_device=0,
        allow_role_switch=0,
        source_address=Address("11:11:11:11:11:11")))
_ = await controller.expect_evt(hci.ConnectionRequest)

# Accept the connection request.
_ = await controller.send_cmd(
    hci.AcceptConnectionRequest(
        bd_addr=Address("11:11:11:11:11:11"),
        role=hci.AcceptConnectionRequestRole.REMAIN_PERIPHERAL))
_ = await controller.expect_evt(hci.AcceptConnectionRequestStatus)
_ = await controller.expect_ll(hci.PageResponse)
_ = await controller.expect_evt(hci.ConnectionComplete)
```
