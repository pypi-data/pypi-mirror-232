Changelog
=========

All notable changes to this project will be documented in this file.

The format is based on `Keep a Changelog <http://keepachangelog.com/>`_  
and this project adheres to `Semantic Versioning <http://semver.org/>`_

6.5.0 - 2023-08-21
------------------

Added
~~~~~

- Kubernetes ready: Adds helm charts and reorganises the container build situation as well as adds Tilt dev files
- Batch task reassignment form: administrators and data managers can reassign all open tasks belonging to a user to another user or a group.

Changed
~~~~~~~

- Reorganised API endpoints by separating them on per-model basis.
- Small UI/UX improvements in admin panel: only display active users where appropriate, fixed status field filter for tasks.
- Bugfix: data managers and administrators can now add/remove people from groups using the admin panel.
- Data bootstrapping is now deterministic to allow for reproducible test TaskManager instances.
- Bugfix: updated mariadb dependency version.


6.4.0 - 2021-08-09
------------------

Added
~~~~~

- Users can now register themselves, confirm their email, and change/recover passwords
- Admin panels for editing tasks/users etc
- Tracking ID field, so external systems can easily make tasks trackable throughout a larger infrastructure
- Bulk email form for mailing (groups of) users.

Changed
~~~~~~~

- Login in can be done both via username or email
- Reading configuration files will now insert new records, but not overwrite/update any existing records
- Task content and callbacks now use a Metadata table to insert changeable things (but that are shared among tasks)
  to be able to update these variables (e.g. the location of servers) easily.


6.3.0 - 2021-02-01
------------------

Fixed
~~~~~

- a bug and removed a python 3.8+ typehint
- config init in docker init script
- greenlet version in the production requirements
- issue with the exceptions showing up properly

Changed
~~~~~~~~

- Taskgoup labels to not be unique

Added
~~~~~~~~
- Pagination for tasks in the web view
- migration script for taskgroup label


6.2.3 - 2020-09-04
------------------

Fixed
~~~~~

- Error of the template field in the task summary
- Inconsistency of the url/uri field in the task summary

Improved
~~~~~~~~

- The server-side task filtering has been improved

6.2.2 - 2020-08-10
------------------

Fixed
~~~~~

- BIG-1137 Fixes locking problem for users with elevated rights



6.2.1 - 2020-07-03
------------------

Fixed
~~~~~

- Fixes an issue in the task template concerning callback content.



6.2.0 - 2020-07-02
------------------

Added
~~~~~

- Kubernetes manifests
- Data migration scripts


Changed
~~~~~~~

- JSON to YAML support for configurations, template and task content
- The docker stuff organization
- The docker container now runs gunicorn instead of the flask debug server


6.1.0 - 2020-03-27
------------------

Added
~~~~~

- Diagram of database layout

Changed
~~~~~~~

- Update requirements

6.0.0 - 2020-01-27
------------------

Added
~~~~~

- Adds Role Based access and user management, please see the documentation.
- Added support for python 3.6 or greater
- Added health metric end-points
- Added api versioning
- Testing using pytest and tox
- Migrations
- Automatically generated docker images available on https://gitlab.com/radiology/infrastructure/task-manager/container_registry
- CI on Gitlab


Changed
~~~~~

- Refactored the api to make use of blueprints for versioning and portability
- Refactored the config to make use of ``python-dotenv`` for configuration via ``.env`` files
- Refactored the config to make use of environment variables prefixed with ``TASKMAN``, ``FLASK`` or ``SQLALCHEMY``
- Refactored the app creation process by injecting the app into the extensions on create time instead of on import time.
- Changed the way the app is loaded by making use of ``.env`` and ``.flaskenv`` files. Run the app from now on via ``flask run``.
- jinja2_highlight is replaced by prism
- Moved the repository to Gitlab


Fixed
~~~~~

- Switched to using pymysql as mysql backed for sqlalchemy
- Fixed bugs in task view template 


Removed
~~~~~

- Removed support for python 3.5 or lesser.




1.0.0 - 2018-10-24
----------

Added
~~~~~

- Web frontend
- Swagger documentation for REST API 
- Sentry.io support
- Allow users to retrieve by username (the id has precedence, so if a user
  with username 1 and id 1 exists, it will look up by id)

Fixed
~~~~~

- Added Flask-Script to the requirements in order for the flask manager to work.
- Fixed zero devision problem in task distribution by querying users who have an assignment_weight > 0.
- Some urls returned from post requests were invalid


